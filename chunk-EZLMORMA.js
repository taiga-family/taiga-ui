import{A as et,Aa as xt,Ba as G,F as ot,I as Ot,Ma as Tt,Oa as u,a as k,cb as wt,h as Z,oa as St,ra as F,va as yt,wb as Mt,z as Ct,za as $}from"./chunk-EEM67MJR.js";import{a as vt,q as gt}from"./chunk-VL5DYKMV.js";import{$a as L,Bc as z,Cc as y,Db as j,Dc as dt,E as nt,Ec as ft,G as N,I as rt,La as Q,Ma as Y,Ta as ut,Ub as B,V as lt,Wb as h,Xc as x,_a as U,_b as S,dd as ht,ed as bt,f as it,ia as st,ic as b,ja as ct,la as at,lc as _,oa as V,qc as H,rc as D,sc as W,ta as mt,ud as _t,w as P,wa as pt,wc as tt,za as n}from"./chunk-MAQQ6KKR.js";var Nt={mode:"always"},[K,te]=Ot(Nt);var le="[tuiScrollRef]",d=new pt("",{factory:()=>new L(n(vt).documentElement)}),T=class T{};T.\u0275fac=function(e){return new(e||T)},T.\u0275dir=h({type:T,selectors:[["","tuiScrollRef",""]],features:[x([St(d,L)])]});var Et=T;var v=class v extends it{constructor(){super(e=>this.scroll$.subscribe(e));this.el=u();this.element=n(d).nativeElement;this.scroll$=N(F(this.el.parentElement,"mousedown").pipe(rt(({target:e})=>e!==this.el),P(e=>this.getScrolled(e,.5,.5))),F(this.el,"mousedown").pipe($(),ct(e=>{let{ownerDocument:o}=this.el,l=this.el.getBoundingClientRect(),m=Vt(e,l),p=Ut(e,l);return F(o,"mousemove").pipe(P(s=>this.getScrolled(s,m,p)),at(F(o,"mouseup")))})))}getScrolled({clientY:e,clientX:o},l,m){let{offsetHeight:p,offsetWidth:s}=this.el,{top:r,left:c,right:a,width:f,height:C}=this.el.parentElement.getBoundingClientRect(),O=this.el.matches('[dir="rtl"] :scope'),Dt=O?a:c,Wt=O?-1:1,zt=this.element.scrollHeight-C,kt=this.element.scrollWidth-f,Ft=(e-r-p*l)/(C-p),At=(o-Dt-s*m*Wt)/(f-s);return[zt*Ft,kt*At]}};v.\u0275fac=function(o){return new(o||v)},v.\u0275prov=mt({token:v,factory:v.\u0275fac});var A=v;function Vt({clientY:i},{top:t,height:e}){return(i-t)/e}function Ut({clientX:i},{left:t,width:e}){return(i-t)/e}var X=24,M=class M{constructor(){this.el=n(d).nativeElement;this.style=u().style;this.scrollSub=n(A).pipe(k()).subscribe(([t,e])=>{this.el.style.scrollBehavior="auto",this.tuiScrollbar()==="horizontal"?this.el.scrollLeft=e:this.el.scrollTop=t,this.el.style.scrollBehavior=""});this.styleSub=N(n(Z).pipe(V(100,G())),yt(this.el)).pipe($(),k()).subscribe(()=>{let t={scrollTop:this.el.scrollTop,scrollHeight:this.el.scrollHeight,clientHeight:this.el.clientHeight,scrollLeft:this.el.scrollLeft,scrollWidth:this.el.scrollWidth,clientWidth:this.el.clientWidth},e=`${this.getThumb(t)*100}%`,o=`${this.getView(t)*100}%`;this.tuiScrollbar()==="vertical"?(this.style.top=e,this.style.height=o):(this.style.left=e,this.style.insetInlineStart=e,this.style.width=o)});this.tuiScrollbar=U("vertical")}getScrolled(t){return this.tuiScrollbar()==="vertical"?t.scrollTop/(t.scrollHeight-t.clientHeight):t.scrollLeft/(t.scrollWidth-t.clientWidth)}getCompensation(t){return t.clientHeight*t.clientHeight/t.scrollHeight>X&&this.tuiScrollbar()==="vertical"||t.clientWidth*t.clientWidth/t.scrollWidth>X&&this.tuiScrollbar()==="horizontal"?0:this.tuiScrollbar()==="vertical"?X/t.clientHeight:X/t.clientWidth}getThumb(t){let e=this.getCompensation(t)||this.getView(t);return Math.abs(this.getScrolled(t)*(1-e))}getView(t){return this.tuiScrollbar()==="vertical"?Math.ceil(t.clientHeight/t.scrollHeight*100)/100:Math.ceil(t.clientWidth/t.scrollWidth*100)/100}};M.\u0275fac=function(e){return new(e||M)},M.\u0275dir=h({type:M,selectors:[["","tuiScrollbar",""]],inputs:{tuiScrollbar:[1,"tuiScrollbar"]},features:[x([A])]});var q=M;function Bt(i,t){}function Zt(i,t){if(i&1){let e=tt();H(0,"div",2),z("mousedown.capture.prevent",function(){return Q(e),Y(0)}),W(1,"div",3),D()}if(i&2){let e=y();b("t-bar_has-horizontal",e[1])}}function $t(i,t){if(i&1){let e=tt();H(0,"div",4),z("mousedown.capture.prevent",function(){return Q(e),Y(0)}),W(1,"div",5),D()}if(i&2){let e=y();b("t-bar_has-vertical",e[0])}}function Gt(i,t){if(i&1&&S(0,Zt,2,2,"div",0)(1,$t,2,2,"div",1),i&2){let e=t;_(e[0]?0:-1),j(),_(e[1]?1:-1)}}function Kt(i,t){if(i&1&&(S(0,Gt,2,2),ht(1,"async")),i&2){let e,o=y();_((e=bt(1,1,o.refresh$))?0:-1,e)}}var E=class E{constructor(){this.scrollRef=n(d).nativeElement;this.nativeScrollbar=n(K).mode==="native";this.refresh$=n(Z).pipe(V(300,G()),P(()=>this.scrollbars),st([!1,!1]),lt((t,e)=>t[0]===e[0]&&t[1]===e[1]),xt())}get scrollbars(){let{clientHeight:t,scrollHeight:e,clientWidth:o,scrollWidth:l}=this.scrollRef;return[Math.ceil(t/e*100)<100,Math.ceil(o/l*100)<100]}};E.\u0275fac=function(e){return new(e||E)},E.\u0275cmp=B({type:E,selectors:[["tui-scroll-controls"]],decls:2,vars:1,consts:[["tuiAnimated","",1,"t-bar","t-bar_vertical",3,"t-bar_has-horizontal"],["tuiAnimated","",1,"t-bar","t-bar_horizontal",3,"t-bar_has-vertical"],["tuiAnimated","",1,"t-bar","t-bar_vertical",3,"mousedown.capture.prevent"],["tuiScrollbar","vertical",1,"t-thumb"],["tuiAnimated","",1,"t-bar","t-bar_horizontal",3,"mousedown.capture.prevent"],["tuiScrollbar","horizontal",1,"t-thumb"]],template:function(e,o){e&1&&S(0,Bt,0,0)(1,Kt,2,3),e&2&&_(o.nativeScrollbar?0:1)},dependencies:[gt,Mt,q],styles:["[_nghost-%COMP%]{position:sticky;top:0;left:0;z-index:1;inset-inline-start:0;min-inline-size:calc(100% - 1px);min-block-size:calc(100% - 1px);max-inline-size:calc(100% - 1px);max-block-size:calc(100% - 1px);margin-inline-end:calc(-100% + 1px);pointer-events:none;overflow:hidden;color:var(--tui-text-primary)}  [tuiScrollable]{scrollbar-width:none;-ms-overflow-style:none}  [tuiScrollable]::-webkit-scrollbar,   [tuiScrollable]::-webkit-scrollbar-thumb{display:none}.t-bar[_ngcontent-%COMP%]{position:absolute;inset-inline-end:0;pointer-events:auto}.t-bar.tui-enter[_ngcontent-%COMP%], .t-bar.tui-leave[_ngcontent-%COMP%]{animation-name:tuiFade}.t-bar_vertical[_ngcontent-%COMP%]{inset-block:.25rem;inline-size:.875rem}.t-bar_horizontal[_ngcontent-%COMP%]{inset-block-end:0;inset-inline-start:0;block-size:.875rem}.t-bar_has-horizontal[_ngcontent-%COMP%]{inset-block-end:.5rem}.t-bar_has-vertical[_ngcontent-%COMP%]{inset-inline-end:.5rem}.t-thumb[_ngcontent-%COMP%]{transition-property:all;transition-duration:.15s;transition-timing-function:ease-in-out;position:absolute;border-radius:6.25rem;border:.25rem solid transparent;cursor:pointer;pointer-events:auto;-webkit-user-select:none;user-select:none;background:currentColor;background-clip:content-box;box-sizing:border-box;transition-property:width,height,opacity;opacity:.2}.t-thumb[_ngcontent-%COMP%]:hover{opacity:.24}.t-thumb[_ngcontent-%COMP%]:active{opacity:.48}.t-bar_vertical[_ngcontent-%COMP%]   .t-thumb[_ngcontent-%COMP%]{inset-inline-end:0;inline-size:.75rem;min-block-size:1.25rem}.t-bar_vertical[_ngcontent-%COMP%]:hover   .t-thumb[_ngcontent-%COMP%], .t-bar_vertical[_ngcontent-%COMP%]   .t-thumb[_ngcontent-%COMP%]:active{inline-size:.875rem}.t-bar_horizontal[_ngcontent-%COMP%]   .t-thumb[_ngcontent-%COMP%]{inset-block-end:0;block-size:.75rem;min-inline-size:1.25rem}.t-bar_horizontal[_ngcontent-%COMP%]:hover   .t-thumb[_ngcontent-%COMP%], .t-bar_horizontal[_ngcontent-%COMP%]   .t-thumb[_ngcontent-%COMP%]:active{block-size:.875rem}"],changeDetection:0});var J=E;var Xt=["*"];function qt(i,t){if(i&1&&W(0,"tui-scroll-controls",2),i&2){let e=y();b("t-hover-mode",e.options.mode==="hover")}}var It="tui-scroll-into-view",Pt="tui-scrollable",g=class g{constructor(){this.el=u();this.options=n(K);this.isIOS=n(wt);this.browserScrollRef=new L(this.el)}get delegated(){return this.scrollRef!==this.el||this.options.mode==="native"}get scrollRef(){return this.browserScrollRef.nativeElement}set scrollRef(t){this.browserScrollRef.nativeElement=t}scrollIntoView(t){var r,c;if(this.delegated)return;let{offsetHeight:e,offsetWidth:o}=t,{offsetTop:l,offsetLeft:m}=Tt(this.scrollRef,t),p=l+e/2-this.scrollRef.clientHeight/2,s=m+o/2-this.scrollRef.clientWidth/2;(c=(r=this.scrollRef).scrollTo)==null||c.call(r,s,p)}};g.\u0275fac=function(e){return new(e||g)},g.\u0275cmp=B({type:g,selectors:[["tui-scrollbar"]],hostVars:2,hostBindings:function(e,o){e&1&&z("tui-scrollable.stop",function(m){return o.scrollRef=m.detail})("tui-scroll-into-view.stop",function(m){return o.scrollIntoView(m.detail)}),e&2&&b("_native-hidden",o.options.mode!=="native"&&(!o.isIOS||o.options.mode==="hidden"))},features:[x([{provide:d,useFactory:()=>n(g).browserScrollRef}])],ngContentSelectors:Xt,decls:3,vars:3,consts:[[1,"t-bars",3,"t-hover-mode"],[1,"t-content"],[1,"t-bars"]],template:function(e,o){e&1&&(dt(),S(0,qt,1,2,"tui-scroll-controls",0),H(1,"div",1),ft(2),D()),e&2&&(_(!o.isIOS&&o.options.mode!=="native"&&o.options.mode!=="hidden"?0:-1),j(),b("t-content_delegated",o.delegated))},dependencies:[J],styles:["[_nghost-%COMP%]{position:relative;display:flex;max-block-size:100%;isolation:isolate;overflow:auto}._native-hidden[_nghost-%COMP%]{scrollbar-width:none;-ms-overflow-style:none}._native-hidden[_nghost-%COMP%]::-webkit-scrollbar, ._native-hidden[_nghost-%COMP%]::-webkit-scrollbar-thumb{display:none}[_nghost-%COMP%]   .t-hover-mode[_ngcontent-%COMP%]:not(:active){transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;opacity:0}[_nghost-%COMP%]:hover   .t-hover-mode[_ngcontent-%COMP%]{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;opacity:1}.t-content[_ngcontent-%COMP%]{isolation:isolate;flex:1;flex-basis:auto;inline-size:100%;block-size:max-content}.t-content_delegated[_ngcontent-%COMP%]{block-size:100%}.t-bars[_ngcontent-%COMP%]{color:var(--tui-text-primary)}"],changeDetection:0});var Rt=g;var R=class R{constructor(){this.el=u()}ngOnInit(){this.el.dispatchEvent(new CustomEvent(Pt,{bubbles:!0,detail:this.el}))}};R.\u0275fac=function(e){return new(e||R)},R.\u0275dir=h({type:R,selectors:[["","tuiScrollable",""]]});var Lt=R;function qe(i){let t=i.cloneRange(),{startContainer:e,startOffset:o,endContainer:l,endOffset:m}=t,{ownerDocument:p}=e;if(!p)return t;let s=p.createTreeWalker(p.body,NodeFilter.SHOW_TEXT,Ct);s.currentNode=e;do{let r=s.currentNode,c=r.textContent||"",a=r===e?c.slice(0,Math.max(0,o+1)):c,f=Math.max(a.lastIndexOf(" "),a.lastIndexOf(`
`),a.lastIndexOf(et),a.lastIndexOf(ot))+1;if(t.setStart(r,0),f){t.setStart(r,f);break}}while(s.previousNode());s.currentNode=l;do{let r=s.currentNode,c=r.textContent||"",a=r===l?c.slice(m+1):c,f=[a.indexOf(" "),a.lastIndexOf(`
`),a.indexOf(et),a.indexOf(ot)].reduce((C,O)=>C===-1||O===-1?Math.max(C,O):Math.min(C,O),-1);if(t.setEnd(r,c.length),f!==-1){t.setEnd(r,f+c.length-a.length);break}}while(s.nextNode());return t}var I=class I{constructor(){this.el=u();this.destroyRef=n(ut);this.tuiScrollIntoView=U();this.dispatchEvent=_t(()=>{this.tuiScrollIntoView()&&nt(0).pipe(k(this.destroyRef)).subscribe(()=>{this.el.dispatchEvent(new CustomEvent(It,{bubbles:!0,detail:this.el}))})})}};I.\u0275fac=function(e){return new(e||I)},I.\u0275dir=h({type:I,selectors:[["","tuiScrollIntoView",""]],inputs:{tuiScrollIntoView:[1,"tuiScrollIntoView"]}});var Ht=I;function Jt(i){return!!i&&(Qt(i)||Jt(i.parentElement))}function Qt(i){var t;return((t=i.ownerDocument.defaultView)==null?void 0:t.getComputedStyle(i).getPropertyValue("position"))==="fixed"}function bo({document:i,innerWidth:t}){return Math.max(i.documentElement.clientWidth||0,t||0)}export{le as a,d as b,Et as c,K as d,te as e,J as f,Rt as g,Ht as h,Lt as i,Jt as j,bo as k,qe as l};
