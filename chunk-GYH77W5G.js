import{Ga as s,Pa as H,a as m,da as B,ga as j,va as Y}from"./chunk-OEF4G3B4.js";import{a as S}from"./chunk-3H47OIE2.js";import{d as T,e as U,g as M,m as $}from"./chunk-NSPPC6EF.js";import{Ac as E,H as N,J as P,Ka as w,U as h,V as k,Vb as r,Wc as y,_a as p,bb as v,d as V,i as F,ia as C,j as A,ja as f,md as L,p as I,s as D,sd as R,td as l,x as O,za as o}from"./chunk-JYXVX5RO.js";var u=class u{};u.\u0275fac=function(e){return new(e||u)},u.\u0275dir=r({type:u,selectors:[["","tuiItem",""]]});var G=u;var i=class i{constructor(){this.onChange=m;this.validate=U.nullValidator}registerOnValidatorChange(t){this.onChange=t}ngOnChanges(){this.onChange()}};i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=r({type:i,selectors:[["","tuiValidator",""]],inputs:{validate:[0,"tuiValidator","validate"]},features:[y([s(T,i,!0)]),w]});var K=i;var d=class{};function lt(a){return{provide:d,useFactory:()=>o(a).valueTransformer}}var W=class extends d{fromControlValue(t){return this.prevValue=t,t}toControlValue(t){return this.prevValue=t??this.prevValue,this.prevValue}},Z={fromControlValue:V,toControlValue:V};var _=class{constructor(t,e={}){this.message=t;this.context=e}};var n=class n{constructor(){this.el=Y();this.control$=new A(null);this.sub=this.control$.pipe(f(t=>t?.events||D(null)),h(0),j(),B()).subscribe(()=>this.handleValidation());this.tuiNativeValidator=p("Invalid")}validate(t){return this.control$.next(t),null}handleValidation(){let t=!!this.control$.value?.touched&&this.control$.value?.invalid;this.el.closest("tui-textfield")?.classList.toggle("tui-invalid",t),this.el.setCustomValidity?.(t?this.tuiNativeValidator():"")}};n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=r({type:n,selectors:[["","tuiNativeValidator",""]],hostBindings:function(e,b){e&1&&E("focusout",function(){return b.handleValidation()})},inputs:{tuiNativeValidator:[1,"tuiNativeValidator"]},features:[y([s(T,n,!0)])]});var q=n;var z={self:!0,optional:!0},c=class c{constructor(){this.fallback=o(H,z);this.refresh$=new F;this.internal=v(this.fallback);this.control=o(M,{self:!0});this.cdr=o(L);this.transformer=o(d,z)??Z;this.value=l(()=>this.internal()??this.fallback);this.readOnly=p(!1);this.pseudoInvalid=p(null,{alias:"invalid"});this.touched=v(!1);this.status=v(void 0);this.disabled=l(()=>this.status()==="DISABLED");this.interactive=l(()=>!this.disabled()&&!this.readOnly());this.invalid=l(()=>this.pseudoInvalid()!==null?!!this.pseudoInvalid()&&this.interactive():this.interactive()&&this.touched()&&this.status()==="INVALID");this.mode=l(()=>this.readOnly()?"readonly":this.invalid()?"invalid":"valid");this.onTouched=m;this.onChange=m;this.control.valueAccessor=this,this.refresh$.pipe(h(0),C(null),O(()=>this.control.control),P(Boolean),k(),f(t=>N(t.valueChanges,t.statusChanges,t.events||I).pipe(C(null))),S()).subscribe(()=>this.update())}registerOnChange(t){this.refresh$.next(),this.onChange=e=>{let b=R(()=>this.internal());e!==b&&(t(this.transformer.toControlValue(e)),this.internal.set(e),this.update())}}registerOnTouched(t){this.onTouched=()=>{t(),this.update()}}setDisabledState(){this.update()}writeValue(t){let e=this.control instanceof $?this.control.model:t;this.internal.set(this.transformer.fromControlValue(e)),this.update()}update(){this.status.set(this.control.control?.status),this.touched.set(!!this.control.control?.touched),this.cdr.markForCheck()}};c.\u0275fac=function(e){return new(e||c)},c.\u0275dir=r({type:c,inputs:{readOnly:[1,"readOnly"],pseudoInvalid:[1,"invalid","pseudoInvalid"]}});var x=c;function kt(a){return s(x,a)}export{q as a,G as b,K as c,d,lt as e,W as f,Z as g,x as h,kt as i,_ as j};
