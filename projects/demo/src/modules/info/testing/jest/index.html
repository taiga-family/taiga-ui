<tui-doc-page header="Jest">
    <div
        appearance="neutral"
        icon=""
        size="m"
        tuiNotification
    >
        <div
            tuiTitle
            [style.padding-inline-end.rem]="2"
        >
            Introduction
            <div tuiSubtitle>
                By default, Jest runs in a Node.js environment, which means that global objects like window, document,
                and navigator which are present in a real web browser, are unavailable. This instructions ensures that
                Taiga UI components can run correctly in Jest.
            </div>
        </div>
    </div>

    <section tuiPlatform="web">
        <div
            appearance="custom"
            tuiCardLarge
        >
            <header tuiHeader>
                <h1 tuiTitle>
                    Installation
                    <span tuiSubtitle>
                        <p>
                            Taiga UI is designed to be SSR-safe, and we use abstractions provided by
                            <code>&#64;ng-web-apis/common</code>
                            to avoid direct access to browser globals such as
                            <a
                                href="https://github.com/taiga-family/ng-web-apis/blob/main/libs/common/src/tokens/window.ts#L4"
                                target="_blank"
                                tuiLink
                            >
                                window
                            </a>
                            or
                            <a
                                href="https://github.com/taiga-family/ng-web-apis/blob/main/libs/common/src/tokens/navigator.ts#L6"
                                target="_blank"
                                tuiLink
                            >
                                navigator.
                            </a>
                            However, most browser APIs cannot have abstractions, so you need to have some required Web
                            APIs mocked to prevent runtime errors such as
                            <code>ReferenceError: IntersectionObserver is not defined</code>
                            .
                        </p>
                        <br />
                        <p>
                            To simplify this, we provide ready-to-use
                            <a
                                href="https://github.com/taiga-family/toolkit/blob/main/projects/jest-config/polyfill.ts"
                                tuiLink
                            >
                                mocks.
                            </a>
                        </p>
                    </span>
                </h1>

                <aside tuiAccessories>
                    <div
                        appearance="primary"
                        size="xl"
                        tuiBadge
                    >
                        1
                    </div>
                </aside>
            </header>

            <footer>
                <tui-doc-code
                    filename="terminal"
                    [code]="install"
                />
            </footer>
        </div>

        <div
            appearance="custom"
            tuiCardLarge
        >
            <header tuiHeader>
                <h1 tuiTitle>
                    Configuring Jest
                    <span tuiSubtitle>
                        By default, we provide a preconfigured setup that you only need to connect to your project.
                    </span>
                </h1>

                <aside tuiAccessories>
                    <div
                        appearance="primary"
                        size="xl"
                        tuiBadge
                    >
                        2
                    </div>
                </aside>
            </header>

            <footer>
                <tui-doc-code
                    filename="jest.config.ts"
                    [code]="jestConfig"
                />
            </footer>
        </div>
    </section>

    <div
        appearance="custom"
        tuiCardLarge
    >
        <header tuiHeader>
            <h1 tuiTitle>
                Manual setup-jest.ts
                <span tuiSubtitle>
                    If your project already has Jest configured and uses a custom setup-jest.ts, you only need to
                    include our
                    <a
                        href="https://github.com/taiga-family/toolkit/blob/main/projects/jest-config/polyfill.ts"
                        tuiLink
                    >
                        mocks.
                    </a>
                </span>
            </h1>
        </header>

        <footer>
            <tui-doc-code
                filename="jest.config.ts"
                [code]="jestCustomConfig"
            />

            <tui-doc-code
                filename="setup-jest.ts"
                [code]="setupJest"
            />
        </footer>
    </div>
</tui-doc-page>
