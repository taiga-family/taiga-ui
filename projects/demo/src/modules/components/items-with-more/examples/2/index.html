<tui-items-with-more
    size="m"
    tuiGroup
    [collapsed]="true"
>
    <ng-container *ngFor="let item of items; let index = index">
        <label
            *tuiItem
            appearance=""
            tuiBlock="m"
            [style.border-radius]="'inherit'"
        >
            {{ item }}
            <input
                tuiBlock
                type="checkbox"
                [(ngModel)]="value[index]"
            />
        </label>
    </ng-container>
    <ng-template
        let-lastIndex
        tuiMore
    >
        <button
            appearance="outline-grayscale"
            size="m"
            tuiButton
            tuiDropdownAlign="right"
            tuiDropdownOpen
            type="button"
            class="item"
            [tuiDropdown]="dropdown"
        >
            More
            <tui-badge>{{ items.length - lastIndex - 1 }}</tui-badge>
        </button>
        <ng-template #dropdown>
            <tui-data-list size="l">
                <ng-container *ngFor="let item of items; let index = index">
                    <button
                        *ngIf="index > lastIndex"
                        tuiOption
                        type="button"
                        (click)="value[index] = !value[index]"
                    >
                        {{ item }}
                        <tui-icon
                            icon="@tui.check"
                            class="tui-space_left-2"
                            [class._hidden]="!value[index]"
                        />
                    </button>
                </ng-container>
            </tui-data-list>
        </ng-template>
    </ng-template>
</tui-items-with-more>
