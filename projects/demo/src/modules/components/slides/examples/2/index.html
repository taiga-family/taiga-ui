<tui-stepper
    [activeItemIndex]="index"
    (activeItemIndexChange)="onStep($event)"
>
    <button tuiStep>Personal details</button>
    <button tuiStep>Shipping address</button>
    <button tuiStep>Payment info</button>
</tui-stepper>
<section [tuiSlides]="direction">
    <ng-container *ngFor="let form of forms; let i = index">
        <form
            *ngIf="i === index"
            tuiAppearance="floating"
            tuiCardLarge
            tuiForm
            [formGroup]="form"
            [id]="`form_${i}`"
            (ngSubmit)="onSubmit()"
        >
            <header tuiHeader>
                <h2 tuiTitle>
                    Registration form
                    <span tuiSubtitle>Tell us about yourself</span>
                </h2>
            </header>
            <tui-textfield *ngFor="let control of form.controls | keyvalue; let j = index">
                <label tuiLabel>{{ control.key }}</label>
                <input
                    tuiTextfield
                    [formControlName]="control.key"
                    [tuiAutoFocus]="!!index && !j"
                />
            </tui-textfield>
        </form>
    </ng-container>
</section>
<footer>
    <button
        appearance="secondary"
        tuiButton
        type="button"
        [disabled]="!index"
        (click)="index = index - 1"
    >
        Back
    </button>

    <button
        tuiButton
        type="submit"
        [attr.form]="`form_${index}`"
    >
        Next
    </button>
</footer>
