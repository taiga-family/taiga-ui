<form
    class="container"
    [formGroup]="testForm"
>
    <tui-input
        *tuiLet="users$ | async as users"
        formControlName="user"
        [tuiTextfieldCustomContent]="content"
    >
        User
        <input
            placeholder="Type your name or surname"
            tuiTextfieldLegacy
        />
        @if (users?.length) {
            <tui-data-list *tuiDataList>
                @for (user of users; track user) {
                    <button
                        tuiOption
                        type="button"
                        [value]="user.toString()"
                        (click)="onSelected(user)"
                    >
                        {{ user }}
                        <span
                            size="xs"
                            [tuiAvatar]="user.avatarUrl"
                        >
                            {{ user.toString() | tuiInitials }}
                        </span>
                    </button>
                }
            </tui-data-list>
        }
    </tui-input>
    <ng-template #avatar>
        @if (lastUser) {
            <span
                size="s"
                [tuiAvatar]="lastUser.avatarUrl"
            >
                {{ lastUser.toString() | tuiInitials }}
            </span>
        }
    </ng-template>
    <tui-input
        formControlName="account"
        class="tui-space_vertical-5"
    >
        Account
        <tui-data-list-wrapper
            *tuiDataList
            [itemContent]="accountContent"
            [items]="accounts"
        />
        <ng-template
            #accountContent
            let-account
        >
            <div>
                {{ account.name }}
                <span>{{ account.amount | tuiAmount: 'RUB' | async }}</span>
            </div>
        </ng-template>
    </tui-input>
    <tui-textfield>
        <label tuiLabel>Card number</label>
        <input
            formControlName="card"
            tuiInputCard
            [icon]="card"
        />
    </tui-textfield>
</form>
