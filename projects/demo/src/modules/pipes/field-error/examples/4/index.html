<form [formGroup]="testForm">
    <label
        *ngFor="let phone of formData.controls; let i = index"
        formArrayName="phones"
        tuiLabel
        class="tui-space_bottom-4"
    >
        Phone number {{ i + 1 }}
        <span class="row">
            <tui-input-phone
                formControlName="{{ i }}"
                tuiTextfieldSize="m"
                class="input"
                [tuiTextfieldLabelOutside]="true"
            >
                <input
                    autocomplete="new-password"
                    tuiTextfieldLegacy
                />
            </tui-input-phone>
            <button
                appearance="icon"
                iconLeft="@tui.trash"
                size="m"
                tuiIconButton
                type="button"
                class="tui-space_left-2 icon"
                (click)="removePhone(i)"
            >
                Delete phone number
            </button>
        </span>
        <ng-template #phoneErrorContent>Invalid phone number length</ng-template>
        <tui-error
            formControlName="{{ i }}"
            [error]="[] | tuiFieldError | async"
        />
    </label>

    <tui-error
        formArrayName="phones"
        class="form-array-error"
        [error]="[] | tuiFieldError | async"
    />

    <button
        size="s"
        tuiButton
        type="button"
        class="tui-space_top-4"
        (click)="addPhone()"
    >
        Add a phone number
    </button>
</form>
