<div class="t-row t-row_weekday">
    @for (day of unorderedWeekDays$ | tuiOrderWeekDays | async; track day) {
        <div
            class="t-cell"
            [textContent]="day"
        ></div>
    }
</div>
@let sheet = month() | tuiCalendarSheet: true;
<div>
    @for (_ of '-'.repeat(sheet.length); track $index) {
        @let rowIndex = $index;
        <div
            automation-id="tui-calendar-sheet__row"
            class="t-row"
        >
            @for (_ of '-'.repeat(sheet[rowIndex]?.length ?? 0); track $index) {
                @let item = sheet[rowIndex]?.[$index];
                @if (item && (!itemIsUnavailable(item) || showAdjacent())) {
                    <div
                        automation-id="tui-calendar-sheet__cell"
                        class="t-cell"
                        [attr.data-range]="getItemRange(item)"
                        [attr.data-type]="item | tuiMapper: dayType"
                        [class.t-cell_disabled]="disabledItemHandler()(item)"
                        [class.t-cell_today]="itemIsToday(item)"
                        [class.t-cell_unavailable]="itemIsUnavailable(item)"
                        (click)="dayClick.emit(item)"
                        (tuiHoveredChange)="onItemHovered($event && item)"
                    >
                        {{ item.day }}
                        @if (
                            item | tuiMapper: toMarkers : itemIsToday(item) : getItemRange(item) : markerHandler();
                            as markers
                        ) {
                            <div class="t-dots">
                                <div
                                    class="t-dot"
                                    [style.background]="markers?.[0]"
                                ></div>
                                @if (markers.length > 1) {
                                    <div
                                        class="t-dot"
                                        [style.background]="markers?.[1] || ''"
                                    ></div>
                                }
                            </div>
                        }
                    </div>
                }
            }
        </div>
    }
</div>
