<div
    #activeZone="tuiActiveZone"
    class="wrapper"
    [tuiDropdownAlign]="controller.align"
    [tuiDropdownDirection]="controller.direction"
    [tuiDropdownHost]="nativeFocusableElement"
    [tuiDropdownLimitWidth]="controller.limitWidth"
    [tuiDropdownMinHeight]="controller.minHeight"
    [tuiDropdownMaxHeight]="controller.maxHeight"
    [tuiDropdownSided]="controller.sided"
    [tuiDropdownContent]="dropdown"
    [tuiDropdown]="open && canOpen"
    [tuiObscuredEnabled]="open"
    (tuiObscured)="onHostObscured($event)"
    (tuiActiveZoneChange)="onActiveZone($event)"
>
    <ng-content></ng-content>
    <ng-template
        #dropdown="polymorpheus"
        polymorpheus
    >
        <div
            #wrapper
            (keydown.esc)="onKeyDownEsc($event)"
            (keydown)="onKeydown($event)"
        >
            <ng-container *polymorpheusOutlet="content as text; context: {$implicit: activeZone}">
                {{ text }}
            </ng-container>
        </div>
        <!--This DIV is here to start backwards TreeWalker for focusing last focusable item on ArrowUp-->
        <div></div>
    </ng-template>
</div>
