<tui-textfield [content]="contentStartHidden ? '' : contentStart()">
    <label tuiLabel>
        <ng-content />
    </label>

    <input
        tuiInputNumber
        [disabled]="disabled()"
        [invalid]="invalid()"
        [max]="value()[1]"
        [min]="min()"
        [postfix]="postfix()[0]"
        [prefix]="prefix()[0]"
        [readOnly]="readOnly()"
        [(ngModel)]="start"
        (blur)="start = value()[0]"
        (keydown.arrowDown)="takeStep($event, [-1, 0])"
        (keydown.arrowUp)="takeStep($event, [1, 0])"
        (ngModelChange)="onInput([$event, null])"
    />

    <input
        tuiInputNumber
        class="t-end"
        [class._hidden]="!contentEndHidden || !this.interactive()"
        [disabled]="disabled()"
        [invalid]="invalid()"
        [max]="max()"
        [min]="value()[0]"
        [postfix]="postfix()[1]"
        [prefix]="prefix()[1]"
        [readOnly]="readOnly()"
        [(ngModel)]="end"
        (blur)="end = value()[1]"
        (keydown.arrowDown)="takeStep($event, [0, -1])"
        (keydown.arrowUp)="takeStep($event, [0, 1])"
        (ngModelChange)="onInput([null, $event])"
    />

    @if (!contentEndHidden && contentEnd()) {
        <div class="t-content-end">
            <ng-container *polymorpheusOutlet="contentEnd() as text; context: {$implicit: value()[1]}">
                {{ text }}
            </ng-container>
        </div>
    }

    @if (interactive()) {
        <tui-range
            [focusable]="false"
            [keySteps]="keySteps()"
            [max]="max()"
            [min]="min()"
            [ngModel]="value()"
            [segments]="segments()"
            [step]="step()"
            (activeThumbChange)="side = $event"
            (ngModelChange)="onExternalValueUpdate($event)"
            (pointerdown.prevent.stop)="focusToTextfield()"
        />
    }
</tui-textfield>
