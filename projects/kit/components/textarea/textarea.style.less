@import '@taiga-ui/core/styles/taiga-ui-local';

@top-m-label: calc(0.5rem + var(--t-height) / 3);
@top-l-label: calc(0.625rem + var(--t-height) / 3);

// TODO: Refactor to :has(label) after Safari 15.4
:host-context(tui-textfield._with-label[data-size='m']._with-label[data-size='m']) {
    border-block-start-width: @top-m-label;
    padding-block-start: 0;
}

:host-context(tui-textfield._with-label[data-size='l']._with-label[data-size='l']) {
    border-block-start-width: @top-l-label;
    padding-block-start: 0;
}

:host-context(tui-textfield[data-size='s']) {
    padding-block-start: 0.5rem;
    padding-block-end: 0.25rem;
}

:host-context(tui-textfield[data-size='m']) {
    padding-block-start: 0.875rem;
    padding-block-end: 0.25rem;
}

:host-context(tui-textfield[data-size='l']) {
    padding-block-start: 1.125rem;
    padding-block-end: 0.375rem;
}

:host {
    word-break: break-word;
    border: 0 solid transparent;

    &[data-appearance='table'] {
        border-block-start: 1px solid transparent;
        border-block-end: none !important;
    }

    &:not(._mobile) {
        .scrollbar-hidden();
    }
}

.t-scroll {
    .fullsize(absolute, inset);

    top: 0.25rem;
    bottom: 0.25rem;
    min-block-size: 0;

    ::ng-deep tui-textfield._with-label[data-size='m'] & {
        top: @top-m-label;
    }

    ::ng-deep tui-textfield._with-label[data-size='l'] & {
        top: @top-l-label;
    }
}

.t-ghost {
    position: relative;
    z-index: 1;
    order: 1;
    inline-size: calc(100% - var(--t-start) - var(--t-end) - var(--t-side, ~'0rem'));
    white-space: pre-wrap;
    word-break: break-word;
    overflow-wrap: break-word;
    padding-inline-start: var(--t-start);
    padding-inline-end: calc(var(--t-end) + var(--t-side));
    pointer-events: none;
    box-sizing: content-box;
    overflow: hidden;
    color: transparent;

    &::after {
        content: ' ';
    }

    ::ng-deep tui-textfield._with-label[data-size='m'] textarea ~ & {
        margin-block-start: -1.375rem;
        padding-block-end: 0.3125rem;
    }

    ::ng-deep tui-textfield._with-label[data-size='l'] textarea ~ & {
        margin-block-start: -1.75rem;
        padding-block-end: 0.5rem;
    }

    ::ng-deep tui-textfield[data-size='s'] textarea ~ & {
        margin-block-start: -1.5rem;
        padding-block-end: 0.5rem;
    }

    ::ng-deep tui-textfield[data-size='m'] textarea ~ & {
        margin-block-start: -2rem;
        padding-block-end: 0.875rem;
    }

    ::ng-deep tui-textfield[data-size='l'] textarea ~ & {
        margin-block-start: -2.5rem;
        padding-block-end: 1rem;
    }
}

// TODO: Remove after Safari 16 and round outline support or Safari 15 + :has for a better hack
.t-hack {
    .transition(box-shadow);
    .fullsize();

    pointer-events: none;
    border-radius: inherit;
    box-shadow: inset 0 0 0 1px transparent;
}
