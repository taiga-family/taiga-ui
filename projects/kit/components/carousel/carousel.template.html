<div
    class="t-scroller"
    (tuiCarouselScroll)="onScroll($event)"
>
    <div
        waIntersectionObserver
        waIntersectionThreshold="0.5"
        class="t-wrapper"
    >
        <div
            class="t-items"
            [style.transform]="transform()"
            (tuiCarouselAutoscroll)="onAutoscroll()"
            (tuiPan)="onPan($event[0])"
            (tuiSwipe)="onSwipe($event.direction)"
        >
            @for (item of items(); track $index) {
                <fieldset
                    class="t-item"
                    [disabled]="isDisabled($index)"
                    [style.flex-basis.%]="100 / itemsCount()"
                    [style.max-width.%]="100 / itemsCount()"
                    [style.min-width.%]="100 / itemsCount()"
                    (waIntersectionObservee)="$event[0] && onIntersection($event[0].intersectionRatio, $index)"
                >
                    <ng-container [ngTemplateOutlet]="item" />
                </fieldset>
            }
        </div>
    </div>
</div>
