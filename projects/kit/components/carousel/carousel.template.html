@if (items.changes | async) {}
<div
    class="t-scroller"
    (tuiCarouselScroll)="onScroll($event)"
>
    <div
        waIntersectionObserver
        waIntersectionThreshold="0.5"
        class="t-wrapper"
    >
        <div
            class="t-items"
            [style.transform]="transform"
            (tuiCarouselAutoscroll)="onAutoscroll()"
            (tuiPan)="onPan($event[0])"
            (tuiSwipe)="onSwipe($event.direction)"
        >
            @for (item of items; track item; let i = $index) {
                <fieldset
                    class="t-item"
                    [disabled]="isDisabled(i)"
                    [style]="getStyle(itemsCount)"
                    (waIntersectionObservee)="$event[0] && onIntersection($event[0], i)"
                >
                    <ng-container [ngTemplateOutlet]="item" />
                </fieldset>
            }
        </div>
    </div>
</div>
