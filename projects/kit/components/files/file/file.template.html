<div
    class="t-preview"
    [class.t-preview_big]="size() === 'l'"
>
    <ng-container *polymorpheusOutlet="leftContent() || defaultLeftContent as text">
        {{ text }}
    </ng-container>
</div>
<div class="t-wrapper">
    <div class="t-text">
        <div
            tuiHintOverflow
            class="t-name"
        >
            {{ name() }}
        </div>
        <div class="t-type">{{ type() }}</div>
        @if (showSize() && fileSize()) {
            <div class="t-size">
                {{ fileSize() }}
            </div>
        }
    </div>
    @if (content(); as text) {
        <div class="t-content">
            <ng-container *polymorpheusOutlet="text">
                {{ text }}
            </ng-container>
        </div>
    }
    <ng-content />
</div>
@if (allowDelete) {
    @if (fileTexts(); as texts) {
        <button
            appearance="icon"
            size="xs"
            tuiIconButton
            type="button"
            class="t-remove"
            [iconStart]="icons.close"
            (click.prevent)="remove.emit()"
            (mousedown.prevent.zoneless)="(0)"
        >
            {{ texts.remove }}
        </button>
    }
}

<ng-template #defaultLeftContent>
    @if (preview()) {
        <img
            alt="file preview"
            class="t-image"
            [src]="preview()"
        />
    } @else {
        @if (state() === 'loading') {
            <tui-loader
                class="t-loader"
                [inheritColor]="size() === 'l'"
            />
        } @else {
            <tui-icon
                *polymorpheusOutlet="icon() as src; context: {$implicit: size()}"
                class="t-icon"
                [class.t-icon_blank]="size() === 'l' || state() === 'deleted'"
                [class.t-icon_error]="state() === 'error'"
                [icon]="src.toString()"
            />
        }
    }
</ng-template>
