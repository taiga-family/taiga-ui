<ng-content />
@for (item of items(); track $index) {
    @if (!max() || $index < max()) {
        <ng-container [ngTemplateOutlet]="item" />
    }
}
@if (max() && items().length > max()) {
    <tui-expand [expanded]="expanded()">
        <div
            tuiGroup
            class="t-extra-items"
        >
            @for (item of items(); track $index) {
                @if (max() && $index >= max()) {
                    <ng-container [ngTemplateOutlet]="item" />
                }
            }
        </div>
    </tui-expand>
    <div
        class="t-bottom"
        [class.t-bottom_collapsed]="!expanded()"
    >
        <button
            appearance="outline"
            size="m"
            tuiButton
            type="button"
            class="t-button"
            (click)="expanded.set(!expanded())"
        >
            {{ expanded() ? hideText() : showAllText() }}
        </button>
    </div>
}
