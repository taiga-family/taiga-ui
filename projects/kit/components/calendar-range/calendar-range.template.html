<tui-calendar
    automation-id="tui-calendar-range__calendar"
    [class.t-calendar]="!mobile"
    [disabledItemHandler]="disabledItemHandler | tuiMapper: disabledMapper : currentValue : minLength"
    [markerHandler]="markerHandler"
    [max]="max() | tuiMapper: capsMapper : currentValue : maxLength : false"
    [maxViewedMonth]="items.length || mobile ? null : (defaultViewedMonth | tuiMapper: monthOffset : -1)"
    [min]="min() | tuiMapper: capsMapper : currentValue : maxLength : true"
    [month]="defaultViewedMonth"
    [showAdjacent]="!!items.length || mobile"
    [value]="currentValue"
    [(hoveredItem)]="hoveredItem"
    (dayClick)="onDayClick($event)"
    (monthChange)="onMonthChange($event)"
/>
@if (!items.length && !mobile) {
    <tui-calendar
        [disabledItemHandler]="disabledItemHandler | tuiMapper: disabledMapper : currentValue : minLength"
        [markerHandler]="markerHandler"
        [max]="max() | tuiMapper: capsMapper : currentValue : maxLength : false"
        [min]="min() | tuiMapper: capsMapper : currentValue : maxLength : true"
        [minViewedMonth]="defaultViewedMonth | tuiMapper: monthOffset : 1"
        [month]="defaultViewedMonth | tuiMapper: monthOffset : 1"
        [showAdjacent]="false"
        [value]="currentValue"
        [(hoveredItem)]="hoveredItem"
        (dayClick)="onDayClick($event)"
        (monthChange)="onMonthChange($event.append({month: -1}))"
    />
} @else {
    @if (!mobile) {
        <tui-data-list
            automation-id="tui-calendar-range__menu"
            role="menu"
            [style.flex]="1"
        >
            @for (item of items | tuiMapper: mapper : min() : max() : minLength : otherDateText(); track item) {
                <button
                    automation-id="tui-calendar-range__menu__item"
                    role="menuitemradio"
                    tuiOption
                    type="button"
                    [attr.aria-checked]="isItemActive(item)"
                    (click)="onItemSelect(item)"
                    (pointerdown.prevent.zoneless)="(0)"
                >
                    {{ item }}
                    @if (isItemActive(item)) {
                        <tui-icon
                            automation-id="tui-calendar-range__checkmark"
                            class="t-check"
                            [icon]="icons.check"
                        />
                    }
                </button>
            }
        </tui-data-list>
    }
}
