<header
    tuiHeader
    class="t-header"
>
    @if (header()) {
        <hgroup tuiTitle>
            <h1>
                {{ header() }}
                @if (package()) {
                    <span
                        appearance="custom"
                        size="m"
                        tuiBadge
                        class="t-badge"
                        [style.background]="package() | tuiAutoColor"
                    >
                        {{ package() }}
                    </span>
                }
                @for (tag of tags(); track $index) {
                    <span
                        appearance="custom"
                        size="m"
                        tuiBadge
                        class="t-badge"
                        [style.background]="tag | tuiAutoColor"
                    >
                        {{ tag }}
                    </span>
                }
            </h1>
            <p
                tuiFade
                class="t-navigation"
            >
                @if (tabConnectors().length > 1) {
                    <tui-segmented [(activeItemIndex)]="activeItemIndex">
                        @for (tab of tabConnectors(); track tab) {
                            @if (tab.pageTab() || defaultTabs[$index]; as tabName) {
                                <a
                                    routerLinkActive
                                    [routerLink]="$first ? './' : tabName.replace(from, to)"
                                    [routerLinkActiveOptions]="{exact: $first}"
                                >
                                    {{ tabName }}
                                </a>
                            }
                        }
                        @for (tab of tabs | keyvalue; track tab) {
                            <a
                                routerLinkActive
                                [routerLink]="tab.key"
                            >
                                {{ tab.key }}
                            </a>
                        }
                    </tui-segmented>
                }

                @if (package() || path() || type()) {
                    @if (supportLanguage.has(header())) {
                        <tui-doc-language-switcher />
                    }
                    <tui-doc-source-code
                        class="t-source-code"
                        [header]="header()"
                        [package]="package()"
                        [path]="path()"
                        [type]="type()"
                    />
                }
            </p>
        </hgroup>
    }
</header>
<ng-content />
@for (tab of tabConnectors(); track tab) {
    @if ($index === activeItemIndex()) {
        <tui-doc-toc />
        <ng-container [ngTemplateOutlet]="tab.template" />
    }
}
@for (tab of tabs | keyvalue; track tab) {
    @if ($index + tabConnectors().length === activeItemIndex()) {
        <ng-container *polymorpheusOutlet="tab.value as text">{{ text }}</ng-container>
    }
}
