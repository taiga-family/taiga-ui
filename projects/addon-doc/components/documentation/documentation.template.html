@if (heading()) {
    <h1 class="t-heading">
        {{ heading() }}
    </h1>
}
<ng-content />
@if (propertiesConnectors | tuiToArray | tuiFilter: matcher : excludedProperties; as properties) {
    @if (properties.length) {
        <table class="t-table">
            <tr class="t-row t-row_header">
                <th class="t-th t-cell t-cell_prop">{{ texts[2] }}</th>
                <th class="t-th">{{ type }}</th>
                @if (showValues() && !isAPI()) {
                    <th class="t-th t-cell t-th_value">
                        {{ texts[3] }}
                    </th>
                }
            </tr>
            @for (propertyConnector of properties; track propertyConnector) {
                <tr
                    class="t-row"
                    [class.t-deprecated]="propertyConnector.documentationPropertyDeprecated()"
                >
                    <td class="t-cell t-no-overflow">
                        <div
                            automation-id="tui-documentation__property-name"
                            class="t-property t-additional-info"
                        >
                            @if (propertyConnector.attrName) {
                                <code
                                    class="t-property-code"
                                    [style.color]="'var(--tui-background-accent-2-pressed)'"
                                >
                                    {{ propertyConnector.attrName | tuiStripOptionalPipe }}
                                </code>
                            }
                            @if (propertyConnector.attrName | tuiIsOptionalPipe) {
                                <tui-badge
                                    appearance="neutral"
                                    size="s"
                                >
                                    Optional
                                </tui-badge>
                            }
                            @if (propertyConnector.documentationPropertyDeprecated()) {
                                <tui-badge
                                    appearance="negative"
                                    size="s"
                                >
                                    Deprecated
                                </tui-badge>
                            }
                        </div>
                        <ng-container [ngTemplateOutlet]="propertyConnector.template" />
                    </td>
                    <td class="t-cell t-no-overflow">
                        <span class="type">
                            <code class="t-code-type">
                                @for (
                                    item of propertyConnector.documentationPropertyType() | tuiDocTypeReference;
                                    track item;
                                    let last = $last
                                ) {
                                    @if (item.reference) {
                                        <a
                                            target="_blank"
                                            class="t-code-reference"
                                            [attr.href]="item.reference"
                                        >
                                            {{ item.type }}
                                        </a>
                                    } @else {
                                        {{ item.type }}
                                    }
                                    @if (!last) {
                                        <span>&nbsp;|&nbsp;</span>
                                    }
                                }
                            </code>
                        </span>
                    </td>
                    @if (showValues()) {
                        <td class="t-cell t-cell_value">
                            @if (propertyConnector.shouldShowValues) {
                                @if (propertyConnector.hasItems) {
                                    <tui-select
                                        tuiDropdownLimitWidth="min"
                                        tuiTextfieldSize="m"
                                        [nativeId]="propertyConnector.attrName"
                                        [ngModel]="propertyConnector.documentationPropertyValue()"
                                        [tuiTextfieldCleaner]="
                                            propertyConnector.documentationPropertyType() | tuiShowCleanerPipe
                                        "
                                        [tuiTextfieldLabelOutside]="true"
                                        [valueContent]="selectContent"
                                        (ngModelChange)="propertyConnector.onValueChange($event)"
                                    >
                                        <code class="t-exception">null</code>
                                        <tui-data-list-wrapper
                                            *tuiDataList
                                            class="t-data-list"
                                            [itemContent]="selectContent"
                                            [items]="propertyConnector.documentationPropertyValues()"
                                        />
                                    </tui-select>
                                } @else {
                                    @switch (propertyConnector.documentationPropertyType()) {
                                        @case ('boolean') {
                                            <input
                                                tuiSwitch
                                                type="checkbox"
                                                class="t-switch"
                                                [id]="propertyConnector.attrName"
                                                [ngModel]="propertyConnector.documentationPropertyValue()"
                                                [showIcons]="true"
                                                (ngModelChange)="propertyConnector.onValueChange($event)"
                                            />
                                        }
                                        @case ('string') {
                                            <tui-textfield tuiTextfieldSize="m">
                                                <input
                                                    tuiTextfield
                                                    [id]="propertyConnector.attrName"
                                                    [ngModel]="propertyConnector.documentationPropertyValue() || ''"
                                                    (ngModelChange)="propertyConnector.onValueChange($event)"
                                                />
                                            </tui-textfield>
                                        }
                                        @case ('number') {
                                            <tui-textfield tuiTextfieldSize="m">
                                                <input
                                                    tuiInputNumber
                                                    [id]="propertyConnector.attrName"
                                                    [ngModel]="propertyConnector.documentationPropertyValue()"
                                                    [step]="1"
                                                    (ngModelChange)="propertyConnector.onValueChange($event || 0)"
                                                />
                                            </tui-textfield>
                                        }
                                    }
                                }
                                <ng-template
                                    #selectContent
                                    let-data
                                >
                                    <code>{{ data | tuiInspectAny }}</code>
                                </ng-template>
                            } @else {
                                <tui-notification
                                    class="t-output"
                                    [@emitEvent]="propertyConnector.emits()"
                                >
                                    Emit!
                                </tui-notification>
                            }
                        </td>
                    }
                </tr>
            }
        </table>
    }
}
