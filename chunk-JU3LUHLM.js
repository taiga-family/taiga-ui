import{a as Ee,c as ve,d as we,e as De,f as Me,g as $e,h as Be,i as Ae,k as Pe,m as Ve,n as Fe,o as Ie,p as ke,r as Je}from"./chunk-IZPZ544U.js";import"./chunk-5YL43N7W.js";import"./chunk-JL4PKXS3.js";import"./chunk-DO2JZULZ.js";import"./chunk-WUBLP677.js";import"./chunk-HHR2HVF5.js";import"./chunk-5NTEEUBF.js";import"./chunk-3HX7HC5H.js";import"./chunk-HX55VSNY.js";import"./chunk-576TWOWH.js";import"./chunk-2TKEPZTY.js";import"./chunk-IFYVBBGW.js";import"./chunk-EZCTEIG5.js";import"./chunk-CZLBADDE.js";import"./chunk-4DUJROPM.js";import"./chunk-PJOYTKW7.js";import{b as Se}from"./chunk-VZOQAIVG.js";import"./chunk-C2QFT5YT.js";import"./chunk-P77F7NYL.js";import"./chunk-FSZGDMFP.js";import"./chunk-J4CTPCD6.js";import"./chunk-D7ZFKJEN.js";import"./chunk-HDGWTFNH.js";import"./chunk-7F7GN42K.js";import"./chunk-MSEO7MXO.js";import"./chunk-MKOLMW74.js";import"./chunk-DILL7YUQ.js";import"./chunk-CBAAIVE5.js";import{f as Ce}from"./chunk-RZGDQXKA.js";import{b as he}from"./chunk-NMZ6K7UD.js";import"./chunk-GGQ7LRWG.js";import"./chunk-F5DBWA2F.js";import{b as Te}from"./chunk-BC6SIBYK.js";import"./chunk-R4VWJZ3H.js";import"./chunk-5D2HKEPL.js";import{$ as fe,F as ge,V as ye,Y as be,ba as xe,i as me,n as ue}from"./chunk-HGCDV6QR.js";import"./chunk-3XXQBQ4L.js";import"./chunk-WKXULA3B.js";import"./chunk-PAATJCG7.js";import{x as _e}from"./chunk-EJI7MVWO.js";import"./chunk-KMTEUHHM.js";import"./chunk-U5FNULO3.js";import"./chunk-ZAN5OQM7.js";import"./chunk-NVVISGWA.js";import"./chunk-NKX3EWIC.js";import"./chunk-TCVX2L7M.js";import"./chunk-SX2FZ4JG.js";import"./chunk-OYH2WJ3O.js";import"./chunk-BMI5MM25.js";import"./chunk-NU6UCYQC.js";import"./chunk-ZOTEVDA5.js";import{A as X,Ia as se,aa as le,hc as ce,ia as pe,pa as de,ra as $}from"./chunk-I2SFNYPJ.js";import{B as ae,C as re,b as Z,c as ee,h as te,l as ie,m as ne,q as oe}from"./chunk-HXUUARZB.js";import{q as Q}from"./chunk-5ENH3QN6.js";import"./chunk-SVUDN6EH.js";import{Bc as v,Cc as c,Db as r,E as J,I as P,Ma as g,Mc as K,Na as h,Nc as d,Pc as T,Q as V,Rc as w,Sc as D,Tc as M,Ub as U,Uc as j,Yc as G,_b as x,dd as u,ed as _,fa as N,gc as p,ic as S,j as b,ja as C,jd as Y,ka as O,lc as L,nc as q,oa as W,oc as H,pc as R,qc as l,rc as o,sc as z,w as f,wc as E,x as k}from"./chunk-X7N7YQIF.js";import"./chunk-42JZD6NG.js";var We=()=>({precision:0});function Ue(t,i){if(t&1){let e=E();l(0,"tui-reorder",11),M("itemsChange",function(a){g(e);let s=c();return D(s.initial,a)||(s.initial=a),h(a)}),v("enabledChange",function(a){g(e);let s=c();return h(s.onEnabled(a))}),o()}if(t&2){let e=c();p("enabled",e.enabled),w("items",e.initial)}}function Le(t,i){t&1&&(l(0,"th",20),d(1," Name "),o()),t&2&&p("requiredSort",!0)}function qe(t,i){if(t&1&&(l(0,"th",21),d(1," Date of Birth "),o()),t&2){let e=c(2);p("tuiSortable",e.dob)}}function He(t,i){t&1&&(l(0,"th",20),d(1," Age "),o()),t&2&&p("requiredSort",!0)}function Re(t,i){if(t&1&&(l(0,"td",23),d(1),o()),t&2){let e=c().$implicit,n=c(2);S("match",n.isMatch(e.name)),r(),T(" ",e.name," ")}}function ze(t,i){if(t&1&&(l(0,"td",23),d(1),o()),t&2){let e=c().$implicit,n=c(2);S("match",n.isMatch(e.dob)),r(),T(" ",e.dob," ")}}function Ke(t,i){if(t&1&&(l(0,"td",23),d(1),o()),t&2){let e=c().$implicit,n=c(2);S("match",n.isMatch(e.age)),r(),T(" ",e.age," ")}}function je(t,i){t&1&&(l(0,"tr",17),x(1,Re,2,3,"td",22)(2,ze,2,3,"td",22)(3,Ke,2,3,"td",22),o()),t&2&&(r(),p("tuiCell","name"),r(),p("tuiCell","dob"),r(),p("tuiCell","age"))}function Ge(t,i){if(t&1){let e=E();l(0,"table",12),u(1,"async"),u(2,"async"),v("tuiSortChange",function(a){g(e);let s=c();return h(s.change(a))}),l(3,"thead")(4,"tr",13),x(5,Le,2,1,"th",14)(6,qe,2,1,"th",15)(7,He,2,1,"th",14),o()(),j(8),u(9,"tuiTableSort"),l(10,"tbody",16),H(11,je,4,3,"tr",17,q),o(),l(13,"tfoot")(14,"tr")(15,"td",18)(16,"tui-table-pagination",19),u(17,"async"),u(18,"async"),v("paginationChange",function(a){g(e);let s=c();return h(s.onPagination(a))}),o()()()()()}if(t&2){let e,n=c();p("columns",n.columns)("direction",(e=_(1,10,n.direction$))!==null&&e!==void 0?e:-1)("tuiSortBy",_(2,12,n.sortKey$)),r(5),p("tuiHead","name"),r(),p("tuiHead","dob"),r(),p("tuiHead","age");let a=_(9,14,i);r(3),p("data",a),r(),R(a),r(4),p("colSpan",n.columns.length),r(),p("page",_(17,16,n.page$)||0)("total",_(18,18,n.total$)||0)}}var B=ce.currentLocal(),Ye=["John","Jane","Jack","Jill","James","Joan","Jim","Julia","Joe","Julia"],Qe=["Smith","West","Brown","Jones","Davis","Miller","Johnson","Jackson","Williams","Wilson"],Xe=Array.from({length:300},()=>{let t=B.append({day:-Math.floor(Math.random()*4e3)-7500}),i=tt(t);return{name:`${Qe[Math.floor(Math.random()*10)]}, ${Ye[Math.floor(Math.random()*10)]}`,dob:t,age:i}}),Ze={Name:"name",Age:"age","Date of Birth":"dob"};function et(t,i){return(e,n)=>i*pe(e[t],n[t])}function tt(t){let i=B.year-t.year,e=B.month-t.month,n=B.day-t.day,a=le(e>0||!e&&n>9);return i+a}var y=class y{constructor(){this.size$=new b(10);this.page$=new b(0);this.direction$=new b(we.Desc);this.sortKey$=new b("name");this.minAge=new ie(21);this.minAge$=se(this.minAge).pipe(V(1e3),W(()=>this.page$.next(0)));this.request$=k([this.sortKey$,this.direction$,this.page$,this.size$,this.minAge$]).pipe(V(0),O(i=>this.getData(...i).pipe(C(null))),N());this.initial=["Name","Date of Birth","Age"];this.enabled=this.initial;this.columns=["name","dob","age"];this.dob=!1;this.search="";this.loading$=this.request$.pipe(f(de));this.total$=this.request$.pipe(P($),f(({length:i})=>i),C(1));this.data$=this.request$.pipe(P($),f(i=>i.filter($)),C([]))}onEnabled(i){this.enabled=i,this.columns=this.initial.filter(e=>i.includes(e)).map(e=>Ze[e]??"")}onPagination({page:i,size:e}){this.page$.next(i),this.size$.next(e)}isMatch(i){return!!this.search&&X(i,this.search)}change({sortKey:i,sortDirection:e}){this.sortKey$.next(i),this.direction$.next(e)}getData(i,e,n,a,s){console.info(`Sort by ${i} , direction : ${e}`);let m=n*a,Ne=m+a,Oe=[...Xe].sort(et(i,e)).filter(A=>A.age>=s).map((A,I)=>I>=m&&I<Ne?A:null);return J(Math.random()*1e3+1e3).pipe(f(()=>Oe))}};y.\u0275fac=function(e){return new(e||y)},y.\u0275cmp=U({type:y,selectors:[["ng-component"]],decls:30,vars:19,consts:[["dropdown",""],["tuiTextfieldSize","m",1,"filters"],[1,"input"],["tuiLabel",""],["tuiTextfield","",3,"ngModelChange","ngModel"],["tuiInputNumber","",3,"formControl","tuiNumberFormat"],[1,"filters"],["tuiCheckbox","","type","checkbox",3,"ngModelChange","ngModel"],["size","m","tuiButton","","tuiChevron","","tuiDropdownOpen","","type","button",3,"tuiDropdown"],[3,"loading","overlay"],["tuiTable","",1,"table",3,"columns","direction","tuiSortBy"],[1,"columns",3,"itemsChange","enabledChange","enabled","items"],["tuiTable","",1,"table",3,"tuiSortChange","columns","direction","tuiSortBy"],["tuiThGroup",""],["tuiSortable","","tuiTh","",3,"requiredSort",4,"tuiHead"],["tuiTh","",3,"tuiSortable",4,"tuiHead"],["tuiTbody","",3,"data"],["tuiTr",""],[3,"colSpan"],[1,"tui-space_top-2",3,"paginationChange","page","total"],["tuiSortable","","tuiTh","",3,"requiredSort"],["tuiTh","",3,"tuiSortable"],["tuiTd","",3,"match",4,"tuiCell"],["tuiTd",""]],template:function(e,n){if(e&1){let a=E();l(0,"p",1)(1,"tui-textfield",2)(2,"label",3),d(3,"Find on page"),o(),l(4,"input",4),M("ngModelChange",function(m){return g(a),D(n.search,m)||(n.search=m),h(m)}),o()(),l(5,"tui-textfield")(6,"label",3),d(7,"Minimum age"),o(),z(8,"input",5),o()(),l(9,"p",6)(10,"label",3)(11,"input",7),M("ngModelChange",function(m){return g(a),D(n.dob,m)||(n.dob=m),h(m)}),o(),d(12," Enable sorting by DOB "),o(),l(13,"button",8),d(14," Columns "),o(),x(15,Ue,1,2,"ng-template",null,0,Y),o(),l(17,"tui-loader",9),u(18,"async"),l(19,"p")(20,"b"),d(21,"Sort key:"),o(),d(22),u(23,"async"),l(24,"b"),d(25,"direction:"),o(),d(26),u(27,"async"),o(),x(28,Ge,19,20,"table",10),u(29,"async"),o()}if(e&2){let a,s=K(16);r(4),w("ngModel",n.search),r(4),p("formControl",n.minAge)("tuiNumberFormat",G(18,We)),r(3),w("ngModel",n.dob),r(2),p("tuiDropdown",s),r(4),p("loading",!!_(18,10,n.loading$))("overlay",!0),r(5),T(" ",_(23,12,n.sortKey$),", "),r(4),T(" ",_(27,14,n.direction$)," "),r(2),L((a=_(29,16,n.data$))?28:-1,a)}},dependencies:[Q,ae,ee,Z,te,ne,re,oe,_e,Ce,he,me,ue,Se,ye,Te,ge,Ee,De,Ie,ke,$e,Ve,Fe,ve,Me,Ae,Be,Pe,Je,xe,fe,be],styles:[".table[_ngcontent-%COMP%]{inline-size:100%}.filters[_ngcontent-%COMP%]{display:flex;gap:1rem;white-space:nowrap;align-items:center}.input[_ngcontent-%COMP%]{flex:1}.columns[_ngcontent-%COMP%]{inline-size:10.625rem}.match[_ngcontent-%COMP%]{background:var(--tui-service-selection-background)}"],changeDetection:0});var F=y;export{F as default};
