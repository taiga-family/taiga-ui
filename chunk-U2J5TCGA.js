import{M as s}from"./chunk-CDNIB7XA.js";import{Ba as _t,Da as l,Ib as Ct,J as ft,Na as L,Ob as yt,Ra as vt,Va as j,Wa as gt,Xa as B,a as E,h as V,na as bt}from"./chunk-MT2X2BF3.js";import{q as ht}from"./chunk-42NRN3OW.js";import{Bc as R,Cc as v,Db as A,Dc as at,E as et,Ec as mt,G as W,I as it,La as q,Ma as J,Sa as ct,Ub as U,V as ot,Wb as a,Xc as g,Za as b,_a as k,_b as _,dd as pt,ed as ut,f as tt,ia as rt,ic as m,ja as nt,la as lt,lc as p,oa as F,qc as P,rc as I,sc as x,ta as st,ud as dt,w as M,wc as K,za as r}from"./chunk-ET2ZSIIN.js";var Ht={mode:"always"},[N,Gt]=ft(Ht);var u=class u extends tt{constructor(){super(t=>this.scroll$.subscribe(t));this.el=l();this.element=r(s).nativeElement;this.scroll$=W(L(this.el.parentElement,"mousedown").pipe(it(({target:t})=>t!==this.el),M(t=>this.getScrolled(t,.5,.5))),L(this.el,"mousedown").pipe(j(),nt(t=>{let{ownerDocument:i}=this.el,n=this.el.getBoundingClientRect(),c=Wt(t,n),h=Ft(t,n);return L(i,"mousemove").pipe(M(f=>this.getScrolled(f,c,h)),lt(L(i,"mouseup")))})))}getScrolled({clientY:t,clientX:i},n,c){let{offsetHeight:h,offsetWidth:f}=this.el,{top:D,left:H,right:It,width:Q,height:X}=this.el.parentElement.getBoundingClientRect(),Y=this.el.matches('[dir="rtl"] :scope'),xt=Y?It:H,Rt=Y?-1:1,Et=this.element.scrollHeight-X,Lt=this.element.scrollWidth-Q,zt=(t-D-h*n)/(X-h),Dt=(i-xt-f*c*Rt)/(Q-f);return[Et*zt,Lt*Dt]}};u.\u0275fac=function(i){return new(i||u)},u.\u0275prov=st({token:u,factory:u.\u0275fac});var z=u;function Wt({clientY:o},{top:e,height:t}){return(o-e)/t}function Ft({clientX:o},{left:e,width:t}){return(o-e)/t}var $=24,y=class y{constructor(){this.el=r(s).nativeElement;this.style=l().style;this.scrollSub=r(z).pipe(E()).subscribe(([e,t])=>{this.el.style.scrollBehavior="auto",this.tuiScrollbar()==="horizontal"?this.el.scrollLeft=t:this.el.scrollTop=e,this.el.style.scrollBehavior=""});this.styleSub=W(r(V).pipe(F(100,B())),vt(this.el)).pipe(j(),E()).subscribe(()=>{let e={scrollTop:this.el.scrollTop,scrollHeight:this.el.scrollHeight,clientHeight:this.el.clientHeight,scrollLeft:this.el.scrollLeft,scrollWidth:this.el.scrollWidth,clientWidth:this.el.clientWidth},t=`${this.getThumb(e)*100}%`,i=`${this.getView(e)*100}%`;this.tuiScrollbar()==="vertical"?(this.style.top=t,this.style.height=i):(this.style.left=t,this.style.insetInlineStart=t,this.style.width=i)});this.tuiScrollbar=b("vertical")}getScrolled(e){return this.tuiScrollbar()==="vertical"?e.scrollTop/(e.scrollHeight-e.clientHeight):e.scrollLeft/(e.scrollWidth-e.clientWidth)}getCompensation(e){return e.clientHeight*e.clientHeight/e.scrollHeight>$&&this.tuiScrollbar()==="vertical"||e.clientWidth*e.clientWidth/e.scrollWidth>$&&this.tuiScrollbar()==="horizontal"?0:this.tuiScrollbar()==="vertical"?$/e.clientHeight:$/e.clientWidth}getThumb(e){let t=this.getCompensation(e)||this.getView(e);return Math.abs(this.getScrolled(e)*(1-t))}getView(e){return this.tuiScrollbar()==="vertical"?Math.ceil(e.clientHeight/e.scrollHeight*100)/100:Math.ceil(e.clientWidth/e.scrollWidth*100)/100}};y.\u0275fac=function(t){return new(t||y)},y.\u0275dir=a({type:y,selectors:[["","tuiScrollbar",""]],inputs:{tuiScrollbar:[1,"tuiScrollbar"]},features:[g([z])]});var Z=y;function At(o,e){}function Ut(o,e){if(o&1){let t=K();P(0,"div",2),R("mousedown.capture.prevent",function(){return q(t),J(0)}),x(1,"div",3),I()}if(o&2){let t=v();m("t-bar_has-horizontal",t[1])}}function Vt(o,e){if(o&1){let t=K();P(0,"div",4),R("mousedown.capture.prevent",function(){return q(t),J(0)}),x(1,"div",5),I()}if(o&2){let t=v();m("t-bar_has-vertical",t[0])}}function jt(o,e){if(o&1&&_(0,Ut,2,2,"div",0)(1,Vt,2,2,"div",1),o&2){let t=e;p(t[0]?0:-1),A(),p(t[1]?1:-1)}}function Bt(o,e){if(o&1&&(_(0,jt,2,2),pt(1,"async")),o&2){let t,i=v();p((t=ut(1,1,i.refresh$))?0:-1,t)}}var O=class O{constructor(){this.scrollRef=r(s).nativeElement;this.nativeScrollbar=r(N).mode==="native";this.refresh$=r(V).pipe(F(300,B()),M(()=>this.scrollbars),rt([!1,!1]),ot((e,t)=>e[0]===t[0]&&e[1]===t[1]),gt())}get scrollbars(){let{clientHeight:e,scrollHeight:t,clientWidth:i,scrollWidth:n}=this.scrollRef;return[Math.ceil(e/t*100)<100,Math.ceil(i/n*100)<100]}};O.\u0275fac=function(t){return new(t||O)},O.\u0275cmp=U({type:O,selectors:[["tui-scroll-controls"]],decls:2,vars:1,consts:[["tuiAnimated","",1,"t-bar","t-bar_vertical",3,"t-bar_has-horizontal"],["tuiAnimated","",1,"t-bar","t-bar_horizontal",3,"t-bar_has-vertical"],["tuiAnimated","",1,"t-bar","t-bar_vertical",3,"mousedown.capture.prevent"],["tuiScrollbar","vertical",1,"t-thumb"],["tuiAnimated","",1,"t-bar","t-bar_horizontal",3,"mousedown.capture.prevent"],["tuiScrollbar","horizontal",1,"t-thumb"]],template:function(t,i){t&1&&_(0,At,0,0)(1,Bt,2,3),t&2&&p(i.nativeScrollbar?0:1)},dependencies:[ht,Ct,Z],styles:["[_nghost-%COMP%]{position:sticky;top:0;left:0;z-index:1;inset-inline-start:0;min-inline-size:calc(100% - 1px);min-block-size:calc(100% - 1px);max-inline-size:calc(100% - 1px);max-block-size:calc(100% - 1px);margin-inline-end:calc(-100% + 1px);pointer-events:none;overflow:hidden;color:var(--tui-text-primary)}  [tuiScrollable]{scrollbar-width:none;-ms-overflow-style:none}  [tuiScrollable]::-webkit-scrollbar,   [tuiScrollable]::-webkit-scrollbar-thumb{display:none}.t-bar[_ngcontent-%COMP%]{position:absolute;right:0;pointer-events:auto}.t-bar.tui-enter[_ngcontent-%COMP%], .t-bar.tui-leave[_ngcontent-%COMP%]{animation-name:tuiFade}.t-bar_vertical[_ngcontent-%COMP%]{top:.25rem;bottom:.25rem;inline-size:.875rem}@supports (inset-inline-end: 0){.t-bar_vertical[_ngcontent-%COMP%]{right:unset;inset-inline-end:0}}.t-bar_horizontal[_ngcontent-%COMP%]{bottom:0;left:0;inset-inline-start:0;block-size:.875rem}.t-bar_has-horizontal[_ngcontent-%COMP%]{bottom:.5rem}.t-bar_has-vertical[_ngcontent-%COMP%]{right:.5rem}.t-thumb[_ngcontent-%COMP%]{transition-property:all;transition-duration:.15s;transition-timing-function:ease-in-out;position:absolute;border-radius:6.25rem;border:.25rem solid transparent;cursor:pointer;pointer-events:auto;-webkit-user-select:none;user-select:none;background:currentColor;background-clip:content-box;box-sizing:border-box;transition-property:width,height,opacity;opacity:.2}.t-thumb[_ngcontent-%COMP%]:hover{opacity:.24}.t-thumb[_ngcontent-%COMP%]:active{opacity:.48}.t-bar_vertical[_ngcontent-%COMP%]   .t-thumb[_ngcontent-%COMP%]{right:0;inset-inline-end:0;inline-size:.75rem;min-block-size:1.25rem}.t-bar_vertical[_ngcontent-%COMP%]:hover   .t-thumb[_ngcontent-%COMP%], .t-bar_vertical[_ngcontent-%COMP%]   .t-thumb[_ngcontent-%COMP%]:active{inline-size:.875rem}.t-bar_horizontal[_ngcontent-%COMP%]   .t-thumb[_ngcontent-%COMP%]{bottom:0;block-size:.75rem;min-inline-size:1.25rem}.t-bar_horizontal[_ngcontent-%COMP%]:hover   .t-thumb[_ngcontent-%COMP%], .t-bar_horizontal[_ngcontent-%COMP%]   .t-thumb[_ngcontent-%COMP%]:active{block-size:.875rem}"],changeDetection:0});var G=O;var Nt=["*"];function $t(o,e){if(o&1&&x(0,"tui-scroll-controls",2),o&2){let t=v();m("t-hover-mode",t.options.mode==="hover")}}var St="tui-scroll-into-view",Tt="tui-scrollable",d=class d{constructor(){this.el=l();this.options=r(N);this.isIOS=r(yt);this.browserScrollRef=new k(this.el);this.hidden=b(this.options.mode==="hidden")}get delegated(){return this.scrollRef!==this.el||this.options.mode==="native"}get scrollRef(){return this.browserScrollRef.nativeElement}set scrollRef(e){this.browserScrollRef.nativeElement=e}scrollIntoView(e){var D,H;if(this.delegated)return;let{offsetHeight:t,offsetWidth:i}=e,{offsetTop:n,offsetLeft:c}=_t(this.scrollRef,e),h=n+t/2-this.scrollRef.clientHeight/2,f=c+i/2-this.scrollRef.clientWidth/2;(H=(D=this.scrollRef).scrollTo)==null||H.call(D,f,h)}};d.\u0275fac=function(t){return new(t||d)},d.\u0275cmp=U({type:d,selectors:[["tui-scrollbar"]],hostVars:2,hostBindings:function(t,i){t&1&&R("tui-scrollable.stop",function(c){return i.scrollRef=c.detail})("tui-scroll-into-view.stop",function(c){return i.scrollIntoView(c.detail)}),t&2&&m("_native-hidden",i.options.mode!=="native"&&(!i.isIOS||i.hidden()))},inputs:{hidden:[1,"hidden"]},features:[g([{provide:s,useFactory:()=>r(d).browserScrollRef}])],ngContentSelectors:Nt,decls:3,vars:3,consts:[[1,"t-bars",3,"t-hover-mode"],[1,"t-content"],[1,"t-bars"]],template:function(t,i){t&1&&(at(),_(0,$t,1,2,"tui-scroll-controls",0),P(1,"div",1),mt(2),I()),t&2&&(p(!i.hidden()&&!i.isIOS&&i.options.mode!=="native"?0:-1),A(),m("t-content_delegated",i.delegated))},dependencies:[G],styles:["[_nghost-%COMP%]{position:relative;display:flex;max-block-size:100%;isolation:isolate;overflow:auto}._native-hidden[_nghost-%COMP%]{scrollbar-width:none;-ms-overflow-style:none}._native-hidden[_nghost-%COMP%]::-webkit-scrollbar, ._native-hidden[_nghost-%COMP%]::-webkit-scrollbar-thumb{display:none}[_nghost-%COMP%]   .t-hover-mode[_ngcontent-%COMP%]:not(:active){transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;opacity:0}[_nghost-%COMP%]:hover   .t-hover-mode[_ngcontent-%COMP%]{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;opacity:1}.t-content[_ngcontent-%COMP%]{isolation:isolate;flex:1;flex-basis:auto;inline-size:100%;block-size:max-content}.t-content_delegated[_ngcontent-%COMP%]{block-size:100%}.t-bars[_ngcontent-%COMP%]{color:var(--tui-text-primary)}"],changeDetection:0});var Ot=d;var S=class S{constructor(){this.el=l()}ngOnInit(){this.el.dispatchEvent(new CustomEvent(Tt,{bubbles:!0,detail:this.el}))}};S.\u0275fac=function(t){return new(t||S)},S.\u0275dir=a({type:S,selectors:[["","tuiScrollable",""]]});var wt=S;var T=class T{constructor(){this.el=l();this.destroyRef=r(ct);this.tuiScrollIntoView=b();this.dispatchEvent=dt(()=>{this.tuiScrollIntoView()&&et(0).pipe(E(this.destroyRef)).subscribe(()=>{this.el.dispatchEvent(new CustomEvent(St,{bubbles:!0,detail:this.el}))})})}};T.\u0275fac=function(t){return new(t||T)},T.\u0275dir=a({type:T,selectors:[["","tuiScrollIntoView",""]],inputs:{tuiScrollIntoView:[1,"tuiScrollIntoView"]}});var Mt=T;var Ge="[tuiScrollRef]",w=class w{};w.\u0275fac=function(t){return new(t||w)},w.\u0275dir=a({type:w,selectors:[["","tuiScrollRef",""]],features:[g([bt(s,k)])]});var Pt=w;export{N as a,Gt as b,G as c,Ot as d,Mt as e,Ge as f,Pt as g,wt as h};
