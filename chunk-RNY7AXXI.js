import{Ea as $,Ga as I,xa as H}from"./chunk-SNDHVY2M.js";import{j as b,k as V,l as z}from"./chunk-AW2KQIVO.js";import"./chunk-TAD2CRW7.js";import"./chunk-A4FPGBH7.js";import"./chunk-6B347TAW.js";import"./chunk-SQBL3QSU.js";import"./chunk-HJTFBEFM.js";import"./chunk-KA3KHYP3.js";import"./chunk-LY3G4UUU.js";import"./chunk-QLHTNIA4.js";import"./chunk-VZHTISRW.js";import"./chunk-7QSLF55U.js";import"./chunk-COXO4D53.js";import"./chunk-FQILAOSS.js";import"./chunk-HO4PIE63.js";import"./chunk-AYQ5GJKH.js";import"./chunk-NPJ7YA6D.js";import"./chunk-67UPKOWT.js";import"./chunk-D35D3UWX.js";import"./chunk-SFTRSDVA.js";import"./chunk-GHRQ57VL.js";import"./chunk-J7YMGDJZ.js";import"./chunk-SECW4BQ3.js";import"./chunk-7FJK3GWI.js";import"./chunk-NUC3TZJ3.js";import"./chunk-JP47X36W.js";import"./chunk-DXNIHLUP.js";import"./chunk-DQ5RJKDJ.js";import"./chunk-FTCBM4DE.js";import"./chunk-Y6MUNIGH.js";import"./chunk-K3UXVP5X.js";import"./chunk-7BVP4KHE.js";import"./chunk-LL2PODKS.js";import"./chunk-KFO6RLOG.js";import"./chunk-55K3RJTA.js";import"./chunk-EEPHOSSY.js";import"./chunk-4NLY5KIX.js";import"./chunk-CE3JGW2C.js";import"./chunk-T54TBEHA.js";import"./chunk-KUOY5S2U.js";import"./chunk-DTPQNUFD.js";import"./chunk-CCKBI2G3.js";import"./chunk-PDN4QIH2.js";import"./chunk-KWZHGPWS.js";import"./chunk-URWZWT2W.js";import"./chunk-GOJWO2R3.js";import{Ac as m,Bc as l,Cb as C,La as p,Lc as D,Ma as s,Mc as _,Oc as x,Tb as N,Zb as u,bb as v,fc as w,hc as y,id as M,kc as P,nd as O,pc as d,qc as c,vc as E,za as h}from"./chunk-2UPKG2B4.js";import"./chunk-B4AJQJMI.js";function k(i,t){if(i&1){let e=E();d(0,"div",2)(1,"div",3),m("pointerup",function(){p(e);let r=l().$implicit,o=l();return s(o.onDrop(r))}),c(),d(2,"tui-tiles",4)(3,"tui-tile")(4,"div",5),m("pointerdown",function(){p(e);let r=l().$implicit,o=l();return s(o.onDrag(r))}),_(5),c()()(),d(6,"div",3),m("pointerup",function(){p(e);let r=l().$implicit,o=l();return s(o.onDrop(r,1))}),c()()}if(i&2){let e=l().$implicit;C(5),x(" ",e.text," ")}}function j(i,t){if(i&1&&_(0),i&2){let e=l().$implicit;x(" ",e.text," ")}}function R(i,t){if(i&1&&u(0,k,7,1,"div",2)(1,j,1,1),i&2){let e=t.$implicit;P(e.children?1:0)}}var a=class a{constructor(){this.drag=v(null);this.cd=h(O);this.data={text:"Topmost",children:[{text:"Top level 1",children:[{text:"Another item",children:[{text:"Next level 1"},{text:"Next level 2"},{text:"Next level 3"}]}]},{text:"Top level 2"},{text:"Top level 3",children:[{text:"Test 1"},{text:"Test 2"}]}]};this.handler=t=>t.children||[]}onDrag(t){this.drag.set(t)}onDrop(t,e=0){let n=this.drag();if(!n)return;let r=T(n,this.data),o=T(t,this.data);r&&(r.children=r?.children?.filter(S=>S!==n));let f=(o?.children?.indexOf(t)??0)+e;o?.children&&(o.children=[...o.children.slice(0,f),n,...o.children.slice(f)]),this.drag.set(null)}};a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=N({type:a,selectors:[["ng-component"]],decls:3,vars:6,consts:[["content",""],[1,"tree",3,"childrenHandler","content","tuiTreeController","value"],[1,"wrapper"],[1,"drop",3,"pointerup"],[1,"tiles"],["tuiTileHandle","",1,"content",3,"pointerdown"]],template:function(e,n){if(e&1&&(d(0,"tui-tree",1),u(1,R,2,1,"ng-template",null,0,M),c()),e&2){let r=D(2);y("_dragged",n.drag()),w("childrenHandler",n.handler)("content",r)("tuiTreeController",!0)("value",n.data)}},dependencies:[b,V,z,$,H,I],styles:[".tree._dragged[_ngcontent-%COMP%]   .drop[_ngcontent-%COMP%]{pointer-events:auto}.tree._dragged[_ngcontent-%COMP%]   .drop[_ngcontent-%COMP%]:hover{opacity:1}.wrapper[_ngcontent-%COMP%]{position:relative;inline-size:100%}.content[_ngcontent-%COMP%]{display:flex;inline-size:100%;align-items:center}.tiles[_ngcontent-%COMP%]{inline-size:100%;grid-template-rows:1.5rem}.drop[_ngcontent-%COMP%]{position:absolute;z-index:1;inline-size:100%;block-size:.5rem;margin-block-start:-.25rem;background:#87ceeb;border-radius:1rem;opacity:0;pointer-events:none}"],changeDetection:0});var g=a;function T(i,t){if(!t.children)return null;if(t.children.includes(i))return t;for(let e of t.children){let n=T(i,e);if(n)return n}return null}export{g as default};
