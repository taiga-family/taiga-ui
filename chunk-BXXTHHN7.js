import{e as Te,f as ie,g as Ne,h as Pe,i as Ut,m as Ge,n as Ze}from"./chunk-GHHQIL2D.js";import{a as at,p as Xt}from"./chunk-2DIX7QJC.js";import{W as Vt,b as Ft}from"./chunk-IR4HWGAK.js";import{m as We,n as lt,u as Wt}from"./chunk-KEISYNHW.js";import{a as W,c as Qt}from"./chunk-QILBXJYP.js";import{Ba as B,C as kt,Ca as Bt,K as At,O as Nt,Qa as Yt,X as _e,Y as $t,a as F,b as Lt,ca as Et,d as Xe,e as Qe,ea as Ce,fa as Rt,ga as Ue,h as wt,ka as _,m as Dt,o as U,p as Ht,rb as jt,ta as st}from"./chunk-OBFPZKWW.js";import{p as zt,q as je}from"./chunk-VGA5QJKK.js";import{$a as _t,$b as M,$c as ke,Cc as V,Dc as l,E as ht,Eb as s,Ec as E,Fc as $,G as ot,Gc as De,Hc as Fe,I as K,Ib as Tt,Ic as j,Jc as X,Ka as xt,La as J,Lc as Be,Ma as ee,Mc as Ye,Na as se,Nb as Re,Nc as Q,Oc as I,Pc as He,Qb as Pt,Qc as H,S as ft,Ta as fe,V as Ee,Va as ge,Vb as v,Vc as R,Wa as te,Wc as w,Xb as ye,Xc as O,Yc as k,Zc as St,_a as b,_c as ve,ba as gt,bb as Ct,ed as xe,fd as Ae,gc as T,hc as C,i as dt,ia as yt,ic as p,id as Ot,j as mt,ja as he,jc as S,kd as Ve,ma as bt,mc as x,na as vt,nc as le,oc as P,pc as f,qc as g,rc as u,sc as c,tc as m,uc as It,ud as ce,vc as Mt,w as D,wc as rt,x as q,xc as be,za as d}from"./chunk-MGMBASVD.js";import{h as y}from"./chunk-42JZD6NG.js";var ui=["arc"],pi=["*"];function di(n,e){if(n&1&&(se(),u(0,"svg",5),m(1,"path",6)(2,"path",7,0),c()),n&2){let t=e.$index,i=l();p("height",i.getDiameter(t),"rem")("inset-block-start",i.getInset(t),"rem")("inset-inline",i.getInset(t),"rem"),s(2),p("stroke",`var(--tui-chart-categorical-${t.toString().padStart(2,"0")})`)("stroke-dasharray",i.getLength(t),"em")("stroke-dashoffset",i.initialized()?i.getOffset(t):i.getLength(t),"em"),S("t-value_inactive",i.isInactive(t))}}var mi=.76,Gt={m:9,l:11,xl:16},hi={m:.25,l:.375,xl:.5625},fi={m:.125,l:.1875,xl:.25};function gi(n){return n.map(({nativeElement:e},t)=>ot(st(e,"mouseenter").pipe(D(()=>t)),st(e,"mouseleave").pipe(D(()=>NaN))))}var Ie=class Ie{constructor(){this.arcs=Re("arc");this.indexChange$=Xe(this.arcs).pipe(F(),he(e=>ot(...gi(e)).pipe(vt(t=>this.activeItemIndex.set(t)))));this.initialized=Qe(ht(0).pipe(B(),ft(1),D(()=>!0)),{initialValue:!1});this.value=b([]);this.size=b("m");this.max=b(100);this.minLabel=b("0%");this.maxLabel=b("100%");this.activeItemIndex=Pt(NaN);this.activeItemIndexChange=Lt(this.indexChange$)}get width(){return Gt[this.size()]}get strokeWidth(){return hi[this.size()]}isInactive(e){return!Number.isNaN(this.activeItemIndex())&&e!==this.activeItemIndex()}getInset(e){return this.strokeWidth/2+e*(this.strokeWidth+fi[this.size()])}getDiameter(e){return Gt[this.size()]-2*this.getInset(e)}getLength(e){return Math.PI*this.getDiameter(e)*mi}getOffset(e){return this.getLength(e)*(1-Math.min((this.value()[e]||0)/this.max(),1))}};Ie.\u0275fac=function(t){return new(t||Ie)},Ie.\u0275cmp=v({type:Ie,selectors:[["tui-arc-chart"]],viewQuery:function(t,i){t&1&&Be(i.arcs,ui,5),t&2&&Ye()},hostVars:7,hostBindings:function(t,i){t&2&&(T("data-size",i.size()),p("width",i.width,"rem")("height",i.width,"rem")("stroke-width",i.strokeWidth,"rem"))},inputs:{value:[1,"value"],size:[1,"size"],max:[1,"max"],minLabel:[1,"minLabel"],maxLabel:[1,"maxLabel"],activeItemIndex:[1,"activeItemIndex"]},outputs:{activeItemIndex:"activeItemIndexChange",activeItemIndexChange:"activeItemIndexChange"},ngContentSelectors:pi,decls:13,vars:2,consts:[["arc",""],["focusable","false","viewBox","-100 -100 200 200","xmlns","http://www.w3.org/2000/svg",1,"t-svg",3,"height","inset-block-start","inset-inline"],[1,"t-content"],[1,"t-wrapper"],[1,"t-percent"],["focusable","false","viewBox","-100 -100 200 200","xmlns","http://www.w3.org/2000/svg",1,"t-svg"],["d","M -70 70 A 100 100 0 1 1 70 70","vector-effect","non-scaling-stroke"],["d","M -70 70 A 100 100 0 1 1 70 70","vector-effect","non-scaling-stroke",1,"t-value"]],template:function(t,i){if(t&1&&(E(),R(0)(1)(2),f(3,di,4,14,":svg:svg",1,le),u(5,"div",2)(6,"div",3),$(7),c()(),u(8,"div",4)(9,"span"),I(10),c(),u(11,"span"),I(12),c()()),t&2){let o=i.value(),r=i.minLabel(),a=i.maxLabel();s(3),g("-".repeat(o.length)),s(7),He(r),s(2),He(a)}},styles:["[_nghost-%COMP%]{position:relative;display:block;flex-shrink:0}.t-svg[_ngcontent-%COMP%]{position:absolute;inset:0;overflow:visible;fill:none;stroke:currentColor;stroke-linecap:round;color:var(--tui-background-neutral-1);font-size:1rem;pointer-events:none}.t-value[_ngcontent-%COMP%]{pointer-events:auto;transition:stroke-dashoffset var(--tui-duration) ease-in-out,opacity var(--tui-duration) ease-in-out .1s}.t-value_inactive[_ngcontent-%COMP%]{transition-property:stroke-dashoffset,opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;opacity:.16}.t-content[_ngcontent-%COMP%]{position:absolute;top:0;left:0;inline-size:100%;block-size:100%;display:flex;justify-content:center;align-items:center;text-align:center;color:var(--tui-text-secondary);font:var(--tui-font-body-xs);pointer-events:none}[data-size=xl][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{font:var(--tui-font-body-m)}.t-wrapper[_ngcontent-%COMP%]{pointer-events:auto}.t-wrapper[_ngcontent-%COMP%]:first-line{color:var(--tui-text-primary)}[data-size=m][_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]:first-line{font:var(--tui-font-body-s);font-weight:700}[data-size=l][_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]:first-line{font:var(--tui-font-body-m);font-weight:700}[data-size=xl][_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]:first-line{font:var(--tui-font-heading-h5)}.t-percent[_ngcontent-%COMP%]{position:absolute;display:flex;inset:auto auto 11% 25%;inline-size:50%;justify-content:space-between;font:var(--tui-font-body-xs);color:var(--tui-text-secondary)}[data-size=xl][_nghost-%COMP%]   .t-percent[_ngcontent-%COMP%]{font:var(--tui-font-body-m)}"],changeDetection:0});var Zt=Ie;var yi=["*"];function bi(n,e){if(n&1&&(u(0,"div",12),I(1),c()),n&2){l();let t=O(1);s(),H(" ",t," ")}}function vi(n,e){if(n&1&&(u(0,"div",14),I(1),c()),n&2){let t=e.$implicit,i=l(3);s(),H(" ",t||i.fallbackLabel," ")}}function xi(n,e){if(n&1&&(u(0,"div",13),f(1,vi,2,1,"div",14,P),c()),n&2){l(2);let t=O(2);s(),g(t)}}function _i(n,e){if(n&1&&(u(0,"div",11),R(1),M(2,bi,2,1,"div",12)(3,xi,3,0,"div",13),c()),n&2){let t=l(),i=O(3),o=O(4);S("t-side_padding",o),s();let r=w(t.axisYName());s(),x(r?2:-1),s(),x(i?-1:3)}}function Ci(n,e){if(n&1&&m(0,"div",15),n&2){let t=e.$index;l();let i=O(9),o=O(10);p("border-right-style",i(t,o))}}function Ti(n,e){if(n&1&&m(0,"div",16),n&2){let t=e.$index;l();let i=O(14),o=O(15);p("border-top-style",i(t,o))}}function Pi(n,e){if(n&1&&(u(0,"div",14),I(1),c()),n&2){let t=e.$implicit,i=l(2);s(),H(" ",t||i.fallbackLabel," ")}}function Ii(n,e){if(n&1&&(u(0,"div",7),f(1,Pi,2,1,"div",14,P),c()),n&2){l();let t=O(2);s(),g(t)}}function Mi(n,e){if(n&1&&(u(0,"div",17),I(1),c()),n&2){let t=e.$implicit,i=l(2);s(),H(" ",t||i.fallbackLabel," ")}}function Si(n,e){if(n&1&&(u(0,"div",8),f(1,Mi,2,1,"div",17,P),c()),n&2){l();let t=O(0);s(),g(t)}}function Oi(n,e){if(n&1&&(u(0,"div",19),I(1),c()),n&2){let t=e.$implicit,i=l(2);S("t-label-x_transparent",t===null),s(),H(" ",t||i.fallbackLabel," ")}}function zi(n,e){if(n&1&&(u(0,"div",10),f(1,Oi,2,3,"div",18,P),c()),n&2){let t=l();s(),g(t.axisXLabels())}}function Li(n,e){if(n&1&&(u(0,"div",17),I(1),c()),n&2){let t=e.$implicit,i=l(3);s(),H(" ",t||i.fallbackLabel," ")}}function wi(n,e){if(n&1&&(u(0,"div",20),f(1,Li,2,1,"div",17,P),c()),n&2){l(2);let t=O(0);s(),g(t)}}function Di(n,e){if(n&1&&(u(0,"div",21),I(1),c()),n&2){l();let t=O(2);s(),H(" ",t," ")}}function Hi(n,e){if(n&1&&(u(0,"div",11),M(1,wi,3,0,"div",20),R(2),M(3,Di,2,1,"div",21),c()),n&2){let t=l(),i=O(1),o=O(4);S("t-side_padding",o),s(),x(i?-1:1),s();let r=w(t.axisYSecondaryName());s(),x(r?3:-1)}}var ki=()=>"dashed";var Ai=()=>"solid",Hn=()=>"none",Me=class Me{constructor(){this.centeredXLabels=ce(()=>this.axisY()==="none");this.axisX=b("solid");this.axisXLabels=b([]);this.axisY=b("solid");this.axisYInset=b(!1);this.axisYLabels=b([]);this.axisYName=b("");this.axisYSecondaryInset=b(!1);this.axisYSecondaryLabels=b([]);this.axisYSecondaryName=b("");this.horizontalLines=b(0);this.horizontalLinesHandler=b(Ai);this.verticalLines=b(0);this.verticalLinesHandler=b(ki);this.fallbackLabel=kt;this.hasXLabels=ce(()=>!!this.axisXLabels().length);this.hasYLabels=ce(()=>{let e=this.axisYName();return this.axisYLabels().length&&!this.axisYInset()||!!e});this.hasYSecondaryLabels=ce(()=>{let e=this.axisYSecondaryName();return this.axisYSecondaryLabels().length&&!this.axisYSecondaryInset()||!!e})}};Me.\u0275fac=function(t){return new(t||Me)},Me.\u0275cmp=v({type:Me,selectors:[["tui-axes"]],hostAttrs:["dir","ltr"],hostVars:2,hostBindings:function(t,i){t&2&&S("_centered",i.centeredXLabels())},inputs:{axisX:[1,"axisX"],axisXLabels:[1,"axisXLabels"],axisY:[1,"axisY"],axisYInset:[1,"axisYInset"],axisYLabels:[1,"axisYLabels"],axisYName:[1,"axisYName"],axisYSecondaryInset:[1,"axisYSecondaryInset"],axisYSecondaryLabels:[1,"axisYSecondaryLabels"],axisYSecondaryName:[1,"axisYSecondaryName"],horizontalLines:[1,"horizontalLines"],horizontalLinesHandler:[1,"horizontalLinesHandler"],verticalLines:[1,"verticalLines"],verticalLinesHandler:[1,"verticalLinesHandler"]},ngContentSelectors:yi,decls:24,vars:18,consts:[[1,"t-side",3,"t-side_padding"],[1,"t-wrapper"],[1,"t-grid"],[1,"t-vertical"],["automation-id","tui-axex__vertical-line",1,"t-line","t-line_vertical",3,"border-right-style"],[1,"t-horizontal"],["automation-id","tui-axex__horizontal-line",1,"t-line",3,"border-top-style"],[1,"t-labels-y","t-labels-y_inset"],[1,"t-labels-y","t-labels-y_inset","t-labels-y_inset_secondary"],[1,"t-content"],[1,"t-labels-x"],[1,"t-side"],["automation-id","tui-axex__axis-y-name",1,"t-name","t-name_primary"],[1,"t-labels-y","t-labels-y_primary"],["automation-id","tui-axex__axis-y-label",1,"t-label-y"],["automation-id","tui-axex__vertical-line",1,"t-line","t-line_vertical"],["automation-id","tui-axex__horizontal-line",1,"t-line"],["automation-id","tui-axex__axis-y-secondary-label",1,"t-label-y"],["automation-id","tui-axex__axis-x-label",1,"t-label-x",3,"t-label-x_transparent"],["automation-id","tui-axex__axis-x-label",1,"t-label-x"],[1,"t-labels-y","t-labels-y_secondary"],["automation-id","tui-axex__axis-y-secondary-name",1,"t-name"]],template:function(t,i){if(t&1&&(E(),R(0)(1)(2)(3)(4),M(5,_i,4,5,"div",0),u(6,"div",1)(7,"div",2)(8,"div",3),R(9)(10),f(11,Ci,1,2,"div",4,le),c(),u(13,"div",5),R(14)(15),f(16,Ti,1,2,"div",6,le),c(),M(18,Ii,3,0,"div",7)(19,Si,3,0,"div",8),u(20,"div",9),$(21),c()(),M(22,zi,3,0,"div",10),c(),M(23,Hi,4,5,"div",0)),t&2){w(i.axisYSecondaryLabels()),s();let o=w(i.axisYSecondaryInset());s(),w(i.axisYLabels()),s();let r=w(i.axisYInset());s();let a=w(i.hasXLabels());s(),x(i.hasYLabels()?5:-1),s(2),p("border-bottom-style",i.axisX())("border-left-style",i.axisY()),s(2),w(i.verticalLinesHandler()),s();let h=w(i.verticalLines());s(),g("-".repeat(h)),s(3),w(i.horizontalLinesHandler()),s();let z=w(i.horizontalLines());s(),g("-".repeat(z)),s(2),x(r?18:-1),s(),x(o?19:-1),s(3),x(a?22:-1),s(),x(i.hasYSecondaryLabels()?23:-1)}},styles:['[_nghost-%COMP%]{display:flex}.t-wrapper[_ngcontent-%COMP%]{display:flex;flex:1;block-size:100%;flex-direction:column}.t-grid[_ngcontent-%COMP%]{position:relative;display:flex;flex:1;justify-content:space-around;align-items:flex-end;border-width:1px;border-color:var(--tui-border-normal);isolation:isolate}.t-horizontal[_ngcontent-%COMP%]{position:absolute;top:0;left:0;inline-size:100%;block-size:100%;display:flex;flex-direction:column}.t-vertical[_ngcontent-%COMP%]{position:absolute;top:0;left:0;inline-size:100%;block-size:100%;display:flex}._centered[_nghost-%COMP%]   .t-vertical[_ngcontent-%COMP%]:after{content:"";display:block;flex:1 0 1px}.t-line[_ngcontent-%COMP%]{flex:2 0 1px;box-sizing:border-box;border-width:1px;border-color:var(--tui-border-normal)}._centered[_nghost-%COMP%]   .t-line_vertical[_ngcontent-%COMP%]:first-child{flex:1 0 1px;pointer-events:none}.t-side[_ngcontent-%COMP%]{display:flex;align-items:stretch}.t-side_padding[_ngcontent-%COMP%]{padding-block-end:2rem}.t-name[_ngcontent-%COMP%]{font:var(--tui-font-body-xs);writing-mode:tb;text-align:center;padding-block-end:.75rem;color:var(--tui-text-secondary)}.t-name_primary[_ngcontent-%COMP%]{transform:rotate(180deg)}.t-labels-y[_ngcontent-%COMP%]{display:flex;font:var(--tui-font-body-xs);flex-direction:column-reverse;justify-content:space-between;color:var(--tui-text-secondary)}.t-labels-y_primary[_ngcontent-%COMP%]{text-align:end;padding-inline-end:.75rem}.t-labels-y_secondary[_ngcontent-%COMP%]{padding-inline-start:.75rem}.t-labels-y_transparent[_ngcontent-%COMP%]{border-color:transparent}.t-labels-y_inset[_ngcontent-%COMP%]{position:absolute;inset:.5625rem auto -.75rem .25rem;pointer-events:none}.t-labels-y_inset_secondary[_ngcontent-%COMP%]{inset-inline:auto .25rem;text-align:end}.t-labels-x[_ngcontent-%COMP%]{position:relative;display:flex;font:var(--tui-font-body-xs);border-inline-end:1px solid transparent;color:var(--tui-text-secondary)}.t-label-x[_ngcontent-%COMP%]{block-size:.4375rem;border-inline-start:1px solid var(--tui-border-normal);flex:1;margin-block-end:1.5625rem}.t-label-x[_ngcontent-%COMP%]:before{content:"";display:block;block-size:.5625rem}.t-label-x_transparent[_ngcontent-%COMP%]{border-color:transparent}._centered[_nghost-%COMP%]   .t-label-x[_ngcontent-%COMP%]{block-size:2rem;text-align:center;border:none;margin:0}[_nghost-%COMP%]:not(._centered)   .t-label-x[_ngcontent-%COMP%]:last-child:not(:first-child){position:absolute;inset-inline-end:0;text-align:end;border-inline-start:none}.t-label-y[_ngcontent-%COMP%]:first-child{margin-block-end:-.375rem}.t-label-y[_ngcontent-%COMP%]:last-child{margin-block-start:-.375rem}.t-content[_ngcontent-%COMP%]{position:absolute;display:flex;inset:0 0 -1px -1px;align-items:flex-end}'],changeDetection:0});var qt=Me;function Ni(n,e){if(n&1&&m(0,"div",1),n&2){let t=e.$implicit,i=e.$index,o=l();p("background",`var(--tui-chart-categorical-${i.toString().padStart(2,"0")})`)("height",o.getHeight(t),"%")}}var ue=class ue{constructor(){this.value=[];this.size="m"}getHeight(e){return 100*e/this.getSum(this.value)}getSum(e){return _e(...e)}};ue.\u0275fac=function(t){return new(t||ue)},ue.\u0275cmp=v({type:ue,selectors:[["tui-bar"]],hostVars:1,hostBindings:function(t,i){t&2&&T("data-size",i.size)},inputs:{value:"value",size:"size"},decls:2,vars:0,consts:[["automation-id","tui-bar__bar",3,"background","height"],["automation-id","tui-bar__bar"]],template:function(t,i){t&1&&f(0,Ni,1,4,"div",0,P),t&2&&g(i.value)},styles:["[_nghost-%COMP%]{display:flex;min-inline-size:.125rem;flex-direction:column-reverse;border-top-left-radius:var(--tui-radius-l);border-top-right-radius:var(--tui-radius-l);overflow:hidden}[data-size=l][_nghost-%COMP%]{inline-size:1rem;max-inline-size:1rem;margin:0 .1875rem}[data-size=m][_nghost-%COMP%]{inline-size:.5rem;max-inline-size:.5rem;margin:0 .1875rem}[data-size=s][_nghost-%COMP%]{inline-size:.25rem;max-inline-size:.5rem;margin:0 .125rem}"],changeDetection:0}),y([_],ue.prototype,"getSum",1);var qe=ue;var $i=["*"],Ei=(n,e)=>({$implicit:n,index:e,flexible:!1}),Ri=(n,e)=>({$implicit:n,index:e,flexible:!0});function Fi(n,e){if(n&1&&rt(0,2),n&2){let t=e.$implicit,i=e.$index;l(2);let o=Q(3);C("ngTemplateOutlet",o)("ngTemplateOutletContext",ke(2,Ei,t,i))}}function Bi(n,e){if(n&1&&f(0,Fi,1,5,"ng-container",2,P),n&2){let t=l();g(t.computedValue)}}function Yi(n,e){if(n&1&&(u(0,"div",3),rt(1,2),c()),n&2){let t=e.$implicit,i=e.$index;l(2);let o=Q(3);s(),C("ngTemplateOutlet",o)("ngTemplateOutletContext",ke(2,Ri,t,i))}}function Vi(n,e){if(n&1&&f(0,Yi,2,5,"div",3,P),n&2){let t=l();g(t.computedValue)}}function ji(n,e){if(n&1&&m(0,"tui-bar",4),n&2){let t=e.flexible,i=e.index,o=e.$implicit,r=l();p("background",`var(--tui-chart-categorical-${i.toString().padStart(2,"0")})`)("height",r.getHeight(o),"%"),S("t-bar_flexible",t)("t-bar_negative",o<0),C("size",r.computedSize)("value",r.computedSegments)}}var Xi=100,Qi=[],Ui=[1],pe=class pe{constructor(){this.value=[];this.size="m";this.collapsed=!1}get computedValue(){return this.collapsed?Ui:this.value}get computedSegments(){return this.collapsed?this.value:Qi}get computedSize(){return this.size||"m"}getHeight(e){return Math.abs(Xi*e/this.getLargest(this.computedValue))}getLargest(e){return e.some(t=>t>0)?e.reduce((t,i)=>t>i?t:i,0):Math.abs(e.reduce((t,i)=>t<i?t:i,0))}};pe.\u0275fac=function(t){return new(t||pe)},pe.\u0275cmp=v({type:pe,selectors:[["tui-bar-set"]],inputs:{value:"value",size:"size",collapsed:"collapsed"},ngContentSelectors:$i,decls:6,vars:1,consts:[["bar",""],[1,"t-label"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"t-wrapper"],["automation-id","tui-bar-set__bar",1,"t-bar",3,"size","value"]],template:function(t,i){t&1&&(E(),M(0,Bi,2,0)(1,Vi,2,0)(2,ji,1,10,"ng-template",null,0,Ve),u(4,"span",1),$(5),c()),t&2&&x(i.size?0:1)},dependencies:[zt,qe],styles:["[_nghost-%COMP%]{position:relative;display:flex;block-size:100%;align-items:flex-end;justify-content:center}.t-wrapper[_ngcontent-%COMP%]{display:flex;flex:1;block-size:100%;align-items:flex-end}.t-wrapper[_ngcontent-%COMP%]:first-of-type{margin-inline-start:25%}.t-wrapper[_ngcontent-%COMP%]:last-of-type{margin-inline-end:25%}.t-bar[_ngcontent-%COMP%]{transform-origin:bottom center}.t-bar_negative[_ngcontent-%COMP%]{transform:rotate(180deg);opacity:var(--tui-disabled-opacity)}.t-bar.t-bar_flexible[_ngcontent-%COMP%]{max-inline-size:none;inline-size:75%;margin:0 auto}.t-label[_ngcontent-%COMP%]{position:absolute;inset-block-start:-1.5rem;font:var(--tui-font-body-xs);color:var(--tui-text-secondary)}"],changeDetection:0}),y([_],pe.prototype,"getLargest",1);var Ke=pe;var Wi=n=>({$implicit:n});function Gi(n,e){if(n&1){let t=be();u(0,"div",2),xe(1,"async"),V("click",function(){let o=J(t).$index,r=l();return ee(r.tapColumn.emit(o))})("keydown.enter",function(){let o=J(t).$index,r=l();return ee(r.tapColumn.emit(o))})("mouseenter.once",function(){return J(t),ee(0)}),u(2,"div",3),xe(3,"tuiMapper"),m(4,"div",4,0)(6,"tui-bar-set",5),c()()}if(n&2){let t=e.$implicit,i=e.$index,o=Q(5),r=l();S("t-wrapper_hoverable",!!r.hintContent)("t-wrapper_hovered",Ae(1,16,r.drivers.get(i))),C("tuiHint",r.hintContent)("tuiHintAppearance",r.hintAppearance)("tuiHintContext",ve(23,Wi,i))("tuiHintDescribe",r.getHintId(i))("tuiHintHost",o),s(2),p("height",Ot(3,18,t,r.percentMapper,r.collapsed,r.computedMax),"%"),s(4),C("collapsed",r.collapsed)("id",r.getHintId(i))("size",r.size)("tabIndex",r.hintContent?0:-1)("value",t)}}var ne=class ne{constructor(){this.hintOptions=d(ie,{optional:!0});this.autoId=Ce();this.drivers=U;this.value=[];this.max=NaN;this.size="m";this.collapsed=!1;this.tapColumn=new ge;this.percentMapper=(e,t,i)=>100*(t?_e(...e):Math.max(...e))/i}get transposed(){return this.transpose(this.value)}get computedMax(){return this.max||this.getMax(this.value,this.collapsed)}get hintContent(){var e;return((e=this.hintOptions)==null?void 0:e.content)||""}get hintAppearance(){var e;return((e=this.hintOptions)==null?void 0:e.appearance)||""}getHintId(e){return`${this.autoId}_${e}`}transpose(e){return e.reduce((t,i)=>i.map((o,r)=>[...t[r]||[],i[r]||0]),[])}getMax(e,t){return t?Math.max(...e.reduce((i,o)=>i.map((r,a)=>r+(o[a]||0)))):e.reduce((i,o)=>Math.max(...o,i),0)}};ne.\u0275fac=function(t){return new(t||ne)},ne.\u0275cmp=v({type:ne,selectors:[["tui-bar-chart"]],viewQuery:function(t,i){if(t&1&&Fe(Ne,5),t&2){let o;j(o=X())&&(i.drivers=o)}},inputs:{value:"value",max:"max",size:"size",collapsed:"collapsed"},outputs:{tapColumn:"tapColumn"},features:[k([],[Te({direction:"top"})])],decls:2,vars:0,consts:[["hintHost",""],[1,"t-wrapper",3,"t-wrapper_hoverable","t-wrapper_hovered","tuiHint","tuiHintAppearance","tuiHintContext","tuiHintDescribe","tuiHintHost"],[1,"t-wrapper",3,"click","keydown.enter","mouseenter.once","tuiHint","tuiHintAppearance","tuiHintContext","tuiHintDescribe","tuiHintHost"],[1,"t-container"],[1,"t-host"],[1,"t-set",3,"collapsed","id","size","tabIndex","value"]],template:function(t,i){t&1&&f(0,Gi,7,25,"div",1,P),t&2&&g(i.transposed)},dependencies:[je,Ke,Pe,Ge,Ze,Wt],styles:["[_nghost-%COMP%]{display:flex;flex:1;block-size:100%}.t-wrapper[_ngcontent-%COMP%]{transition-property:background-color;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;position:relative;display:flex;flex:1;align-items:flex-end;justify-content:center;block-size:100%}.t-wrapper_hoverable[_ngcontent-%COMP%]{cursor:pointer}.t-wrapper_hoverable[_ngcontent-%COMP%]:hover, .t-wrapper_hoverable.t-wrapper_hovered[_ngcontent-%COMP%]{background-color:#0000000d}.t-container[_ngcontent-%COMP%]{flex:1}.t-host[_ngcontent-%COMP%]{position:absolute;inset-inline:50%}.t-set[_ngcontent-%COMP%]{border-radius:var(--tui-radius-m);pointer-events:none;outline:none}.t-set[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 2px var(--tui-border-focus)}"],changeDetection:0}),y([_],ne.prototype,"transpose",1),y([_],ne.prototype,"getMax",1);var Kt=ne;var Zi=[[["","tuiCheckbox",""]],"*"],qi=["[tuiCheckbox]","*"],Se=class Se{constructor(){this.active=!1;this.color="";this.text="";this.size="m";this.disabled=!1}get computedColor(){return this.color==="var(--tui-background-accent-1)"?null:this.color}};Se.\u0275fac=function(t){return new(t||Se)},Se.\u0275cmp=v({type:Se,selectors:[["tui-legend-item"]],hostVars:5,hostBindings:function(t,i){t&2&&(T("data-size",i.size),p("--tui-background-accent-1",i.computedColor),S("_disabled",i.disabled))},inputs:{active:"active",color:"color",text:"text",size:"size",disabled:"disabled"},ngContentSelectors:qi,decls:7,vars:4,consts:[["appearance","outline-grayscale","size","s","tuiButton","","type","button",1,"t-button",3,"tuiAppearanceState"],[1,"t-wrapper"],[1,"t-dot"],[1,"t-text"]],template:function(t,i){t&1&&(E(Zi),u(0,"button",0)(1,"div",1),$(2),m(3,"span",2),u(4,"span",3),I(5),c(),$(6,1),c()()),t&2&&(C("tuiAppearanceState",i.active?"hover":null),s(3),p("background-color",i.color||"var(--tui-background-accent-1)"),s(2),He(i.text))},dependencies:[Vt],styles:["[_nghost-%COMP%]{display:inline-block}.t-button[_ngcontent-%COMP%]{block-size:2rem;font-weight:700}[data-size=m][_nghost-%COMP%]   .t-button[_ngcontent-%COMP%]{block-size:2.25rem;font:var(--tui-font-body-m);font-weight:700}.t-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;pointer-events:none}._disabled[_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]{color:var(--tui-text-tertiary)}.t-dot[_ngcontent-%COMP%]{inline-size:.5rem;block-size:.5rem;border-radius:100%;flex-shrink:0}._disabled[_nghost-%COMP%]   .t-dot[_ngcontent-%COMP%]{background:var(--tui-border-normal)}.t-dot[_ngcontent-%COMP%]:not(:first-child){display:none}.t-text[_ngcontent-%COMP%]{margin:0 .5rem;font-weight:400}"],changeDetection:0});var Jt=Se;function ei(n,e){let t=e[0]-n[0],i=e[1]-n[1];return Math.atan2(i,t)}function ti(n,e){let t=e[0]-n[0],i=e[1]-n[1];return Math.sqrt(t**2+i**2)}function ut(n,e,t,i=!1,o=.2){let r=n||[0,0],a=e||n||[0,0],h=t||n||[0,0],z=ei(a,h)+(i?Math.PI:0),L=ti(a,h)*o,N=r[0]+Math.cos(z)*L,Y=r[1]+Math.sin(z)*L;return[N,Y]}var Ki="M 100 0 A 100 100 0 1 1 100 0 L 0 0";function ii(n){return n*Math.PI/180}function ni(n=0,e=0){let t=ii(n),i=ii(e),o=Math.cos(t)*100,r=Math.sin(t)*100,a=Math.cos(i)*100,h=Math.sin(i)*100,z=$t(e-n>180),L=["M",o,r,"A 100 100 0",z,1,a,h,"L 0 0"];return Number.isNaN(a)?Ki:L.join(" ")}function oi(n,e,t){let[i,o]=ut(n[e-1],n[e-2],n[e],!1,t),[r,a]=ut(n[e],n[e-1],n[e+1],!0,t),h=n[e]??[0,0];return`C ${i},${o} ${r},${a} ${h[0]},${h[1]}`}function ri(n){return`L ${n}`}var Ji=500;function ai(n,e,t){let i=[...n[e]??[0,0]];return t?oi(n,e,t/Ji):ri([i[0],i[1]])}var en={dots:!1,filled:!1,smoothingFactor:0},[Je,Ao]=At(en);var tn=(n,e)=>({$implicit:n,index:e});function nn(n,e){if(n&1&&m(0,"div",8),n&2){let t=e.$implicit,i=l(2);p("inset-block-end",i.getBottom(t[1]),"%")("inset-inline-start",i.getLeft(t[0]),"%")}}function on(n,e){if(n&1&&f(0,nn,1,4,"div",7,P),n&2){let t=l();g(t.value)}}function rn(n,e){if(n&1){let t=be();u(0,"div",11),xe(1,"async"),V("mouseenter",function(){J(t);let o=l().$index,r=l(2);return ee(r.onMouseEnter(o))}),m(2,"div",12)(3,"div",13,0),c()}if(n&2){let t=Q(4),i=l(),o=i.$implicit,r=i.$index,a=l(2),h=O(0);p("inset-inline-start",a.getLeft(a.getX(r)),"%")("width",a.getWidth(r),"%"),S("t-column_hint_hovered",Ae(1,20,a.drivers()[r]))("t-column_hovered",h===r),C("tuiHint",(a.hintDirective==null?null:a.hintDirective.hint)||a.hintContent)("tuiHintContext",ke(22,tn,a.getImplicit(o),r))("tuiHintDescribe",a.isFocusable?a.getHintId(r):null)("tuiHintHost",t),s(2),p("inset-inline-start",a.getOffset(r),"%"),s(),p("inset-block-end",a.getBottom(o[1]),"%")("inset-inline-start",a.getOffset(r),"%"),C("id",a.getHintId(r))("tabIndex",a.isFocusable?0:-1)}}function an(n,e){if(n&1&&m(0,"div",14),n&2){let t=l().$implicit,i=l(2);p("inset-block-end",i.getBottom(t[1]),"%")}}function sn(n,e){if(n&1&&M(0,rn,5,25,"div",9)(1,an,1,2,"div",10),n&2){let t=e.$count,i=l(2);x(t>1||i.dots?0:-1),s(),x(i.isFocusable?1:-1)}}function ln(n,e){if(n&1&&f(0,sn,2,2,null,null,P),n&2){let t=l();g(t.value)}}function cn(n,e){if(n&1&&(u(0,"div",17),I(1),c()),n&2){let t=l(),i=l();p("inset-inline-start",i.getLeft(t[0]),"%"),s(),H(" ",i.xStringify(t[0])," ")}}function un(n,e){if(n&1&&(u(0,"div",18),I(1),c()),n&2){let t=l(),i=l();p("inset-block-end",i.getBottom(t[1]),"%"),s(),H(" ",i.yStringify(t[1])," ")}}function pn(n,e){if(n&1&&M(0,cn,2,3,"div",15)(1,un,2,3,"div",16),n&2){let t=l();x(t.xStringify?0:-1),s(),x(t.yStringify?1:-1)}}var oe=class oe{constructor(){this.zone=d(te);this.options=d(Je);this.hover$=new dt;this.autoId=Ce();this.resize=Qe(d(at,{self:!0}).pipe(D(([e])=>(e==null?void 0:e.contentRect.height)||NaN),K(e=>!Number.isNaN(e))),{initialValue:NaN});this.box=Ct("");this.hintDirective=d(Oe,{optional:!0});this.hintOptions=d(ie,{optional:!0});this.viewBox=ce(()=>{if(Number.isNaN(this.resize()))return"0 0 0 0";let e=this.height/Math.max(this.resize(),1),[t=0,i=0,o=0,r=0]=this.box().split(" ").map(Number);return`${t} ${i-e} ${o} ${r+2*e}`});this.drivers=Re(Ne);this.drivers$=Xe(this.drivers);this.x=0;this.y=0;this.width=0;this.height=0;this.smoothingFactor=this.options.smoothingFactor;this.xStringify=null;this.yStringify=null;this.filled=this.options.filled;this.dots=this.options.dots;this.value=[]}set valueSetter(e){this.value=e.filter(t=>!t.some(Number.isNaN))}ngOnChanges(){this.box.set(`${this.x} ${this.y} ${this.width} ${this.height}`)}onHovered(e){this.hover$.next(e)}get hovered$(){return this.hover$.pipe(Ee(),Bt(this.zone))}get hintContent(){var e;return((e=this.hintOptions)==null?void 0:e.content)||""}get fillId(){return`tui-line-chart-${this.autoId}`}get fill(){return this.filled?`url(#${this.fillId})`:"none"}get d(){return this.getD(this.value,this.smoothingFactor)}get fillD(){var e,t;return this.value.length?`${this.d}V ${this.y} H ${(e=this.value[0])==null?void 0:e[0]} V ${(t=this.value[0])==null?void 0:t[1]}`:this.d}get isFocusable(){return!this.hintDirective&&this.hasHints}get hasHints(){var e;return!!this.xStringify||!!this.yStringify||!!((e=this.hintDirective)!=null&&e.hint)||!!this.hintContent}onMouseLeave(){this.hintDirective||this.onHovered(NaN)}getX(e){var t,i,o,r;return this.isSinglePoint?(((t=this.value[0])==null?void 0:t[0])||0)/2:e?((((i=this.value[e-1])==null?void 0:i[0])||0)+(((o=this.value[e])==null?void 0:o[0])||0))/2:2*(((r=this.value[0])==null?void 0:r[0])||0)-this.getX(1)}getWidth(e){return 100*this.computeWidth(e)/this.width}getHintId(e){return`${this.autoId}_${e}`}getImplicit(e){var t;return((t=this.hintDirective)==null?void 0:t.getContext(this.value.indexOf(e),this))??e}getHovered(e){return Ue(e)&&Number.isInteger(e)?this.value[e]??null:null}getBottom(e){return 100*(e-this.y)/this.height}getLeft(e){return 100*(e-this.x)/this.width}getOffset(e){var t;return 100*((((t=this.value[e])==null?void 0:t[0])||0)-this.getX(e))/this.computeWidth(e)}onMouseEnter(e){this.hintDirective?this.hintDirective.raise(e,this):this.onHovered(e)}get isSinglePoint(){return this.value.length===1}getD(e,t){return e.reduce((i,o,r)=>r?`${i} ${ai(e,r,t)}`:`M ${o}`,"")}computeWidth(e){var t;return e===this.value.length-1?2*((((t=this.value[e])==null?void 0:t[0])||0)-this.getX(e)):this.getX(e+1)-this.getX(e)}};oe.\u0275fac=function(t){return new(t||oe)},oe.\u0275cmp=v({type:oe,selectors:[["tui-line-chart"]],viewQuery:function(t,i){t&1&&Be(i.drivers,Ne,5),t&2&&Ye()},hostBindings:function(t,i){t&1&&V("mouseleave",function(){return i.onMouseLeave()})},inputs:{x:"x",y:"y",width:"width",height:"height",smoothingFactor:"smoothingFactor",xStringify:"xStringify",yStringify:"yStringify",filled:"filled",dots:"dots",valueSetter:[0,"value","valueSetter"]},features:[k([at],[Te({direction:"top",hideDelay:0})]),xt],decls:12,vars:11,consts:[["hintHost",""],["focusable","false","height","100%","preserveAspectRatio","none","width","100%","xmlns","http://www.w3.org/2000/svg",1,"t-svg"],["x1","0","x2","0","y1","1","y2","0"],["offset","0%","stop-color","currentColor","stop-opacity","0.5"],["offset","100%","stop-color","currentColor","stop-opacity","0"],["stroke","none"],["fill","none","stroke","currentColor","stroke-width","2","vector-effect","non-scaling-stroke"],[1,"t-dot",3,"inset-block-end","inset-inline-start"],[1,"t-dot"],[1,"t-column",3,"t-column_hint_hovered","t-column_hovered","inset-inline-start","width","tuiHint","tuiHintContext","tuiHintDescribe","tuiHintHost"],[1,"t-line","t-line_horizontal",3,"inset-block-end"],[1,"t-column",3,"mouseenter","tuiHint","tuiHintContext","tuiHintDescribe","tuiHintHost"],[1,"t-line","t-line_vertical"],[1,"t-host",3,"id","tabIndex"],[1,"t-line","t-line_horizontal"],[1,"t-hint","t-hint_x",3,"inset-inline-start"],[1,"t-hint","t-hint_y",3,"inset-block-end"],[1,"t-hint","t-hint_x"],[1,"t-hint","t-hint_y"]],template:function(t,i){if(t&1&&(R(0),xe(1,"async"),se(),u(2,"svg",1)(3,"defs")(4,"linearGradient",2),m(5,"stop",3)(6,"stop",4),c()(),m(7,"path",5)(8,"path",6),c(),M(9,on,2,0)(10,ln,2,0)(11,pn,2,2)),t&2){let o,r=w(Ae(1,8,i.hovered$));s(2),T("viewBox",i.viewBox()),s(2),T("id",i.fillId),s(3),T("d",i.fillD)("fill",i.fill),s(),T("d",i.d),s(),x(i.dots?9:-1),s(),x(i.hasHints?10:-1),s(),x((o=i.getHovered(r))?11:-1,o)}},dependencies:[je,Pe,Ge,Ze],styles:['[_nghost-%COMP%]{display:flex;inline-size:100%;block-size:100%;pointer-events:none}.t-svg[_ngcontent-%COMP%]{block-size:calc(100% + 1px);transform:scaleY(-1);margin:-.03125rem 0}.t-column[_ngcontent-%COMP%]{position:absolute;inset-block-start:0;block-size:100%;pointer-events:auto}.t-dot[_ngcontent-%COMP%]{position:absolute;inline-size:.375rem;block-size:.375rem;border-radius:100%;background:currentColor;margin:-.1875rem;box-shadow:0 0 0 2px #fff}.t-host[_ngcontent-%COMP%]{position:absolute;inset-inline-start:50%;inline-size:.5rem;block-size:.5rem;border-radius:100%;opacity:0;background:#fff;margin:-.25rem;box-shadow:0 0 0 2px currentColor,0 .0625rem .1875rem .125rem #0000001a;outline:none;pointer-events:none}.t-host[_ngcontent-%COMP%]:focus, .t-column_hovered[_ngcontent-%COMP%]   .t-host[_ngcontent-%COMP%], .t-column[_ngcontent-%COMP%]:hover   .t-host[_ngcontent-%COMP%], .t-column_hint_hovered[_ngcontent-%COMP%]   .t-host[_ngcontent-%COMP%]{opacity:1}.t-line[_ngcontent-%COMP%]{position:absolute;opacity:0;background:var(--tui-border-normal)}.t-line_vertical[_ngcontent-%COMP%]{inset:0 auto 0 50%;inline-size:1px}.t-line_horizontal[_ngcontent-%COMP%]{z-index:-1;inline-size:100%;block-size:1px}[style^="z-index: 0"][_nghost-%COMP%]   .t-column_hovered[_ngcontent-%COMP%]   .t-line[_ngcontent-%COMP%], [_nghost-%COMP%]:not([style])   .t-column[_ngcontent-%COMP%]:hover   .t-line[_ngcontent-%COMP%], [_nghost-%COMP%]:not([style])   .t-column_hint_hovered[_ngcontent-%COMP%]   .t-line[_ngcontent-%COMP%], [style^="z-index: 0"][_nghost-%COMP%]   .t-column_hovered[_ngcontent-%COMP%] + .t-line[_ngcontent-%COMP%], [_nghost-%COMP%]:not([style])   .t-column[_ngcontent-%COMP%]:hover + .t-line[_ngcontent-%COMP%], [_nghost-%COMP%]:not([style])   .t-column_hint_hovered[_ngcontent-%COMP%] + .t-line[_ngcontent-%COMP%]{opacity:1}.t-hint[_ngcontent-%COMP%]{position:absolute;box-shadow:var(--tui-shadow-small);font:var(--tui-font-body-xs);block-size:1.25rem;line-height:1.25rem;margin-block-end:-.625rem;padding:0 .375rem;white-space:nowrap;color:var(--tui-text-primary);background:var(--tui-background-base);transform:translate3d(-50%,0,0)}.t-hint_x[_ngcontent-%COMP%]{inset-block-end:0}.t-hint_y[_ngcontent-%COMP%]{inset-inline-start:0}'],changeDetection:0}),y([_],oe.prototype,"hovered$",1),y([_],oe.prototype,"getD",1);var re=oe;var de=class de{constructor(){this.charts=U;this.chartsRef=U;this.renderer=d(Tt);this.destroyRef=d(fe);this.zone=d(te);this.hovered$=d(W)}ngAfterViewInit(){q([$e(this.charts.toArray()),this.hovered$]).pipe(K(e=>!e.some(Boolean)),B(this.zone),F(this.destroyRef)).subscribe(()=>{this.charts.forEach(e=>e.onHovered(NaN))})}getContext(e,t){return this.computeContext(...this.charts.map(({value:i})=>i))[e]||[]}raise(e,t){let i=this.charts.map(r=>r.value[e]??[0,0]),o=[...i].sort((r,a)=>r[1]-a[1]);this.charts.forEach(r=>r.onHovered(e)),this.chartsRef.forEach(({nativeElement:r},a)=>this.renderer.setStyle(r,"z-index",o.indexOf(i[a]??[0,0])))}computeContext(...e){return(e[0]||[]).map((t,i)=>e.map(o=>o[i]??[0,0]))}};de.\u0275fac=function(t){return new(t||de)},de.\u0275dir=ye({type:de,selectors:[["","tuiLineChartHint",""]],contentQueries:function(t,i,o){if(t&1&&(De(o,re,4),De(o,re,4,_t)),t&2){let r;j(r=X())&&(i.charts=r),j(r=X())&&(i.chartsRef=r)}},inputs:{hint:[0,"tuiLineChartHint","hint"]},features:[k([W])]}),y([_],de.prototype,"computeContext",1);var Oe=de;function $e(n){return q(n.map(({drivers$:e})=>e.pipe(D(t=>t.map(i=>i.pipe(yt(!1))))))).pipe(D(e=>e.reduce((t,i)=>t.concat(i),[])),he(e=>q(e)),D(e=>e.some(Boolean)),Ee())}var dn=n=>({$implicit:n});function mn(n,e){if(n&1&&m(0,"tui-line-chart",2),n&2){let t,i,o=e.$implicit,r=e.$index,a=l(),h=Q(3);p("z-index",a.zIndex),C("dots",a.dots)("height",a.height)("smoothingFactor",a.smoothingFactor)("tuiHintContent",a.hintContent?h:"")("value",o)("width",r===0?a.firstWidth:a.getWidth((t=o[0]==null?null:o[0][0])!==null&&t!==void 0?t:0))("x",r===0?0:a.getX((i=o[0]==null?null:o[0][0])!==null&&i!==void 0?i:0))("xStringify",a.xStringify?a.daysStringify:null)("y",a.y)("yStringify",a.yStringify)}}function hn(n,e){if(n&1&&(It(0),I(1),Mt()),n&2){let t=e.polymorpheusOutlet;s(),H(" ",t," ")}}function fn(n,e){if(n&1&&M(0,hn,2,1,"ng-container",3),n&2){let t=e.$implicit,i=l();C("polymorpheusOutlet",i.hintContent)("polymorpheusOutletContext",ve(2,dn,i.getHintContext(t[0],i.value)))}}var gn=[NaN,NaN],Z=class Z{constructor(){this.destroyRef=d(fe);this.zone=d(te);this.hovered$=d(W);this.options=d(Je);this.hintDirective=d(tt,{optional:!0});this.charts=U;this.y=0;this.height=0;this.smoothingFactor=this.options.smoothingFactor;this.xStringify=null;this.yStringify=null;this.dots=this.options.dots;this.zIndex=0;this.value=[];this.daysStringify=e=>{let t=this.getDay(e);return this.xStringify&&t?this.xStringify(t):""}}set valueSetter(e){var a;if(!e.length){this.value=[];return}let t=(a=e[0])==null?void 0:a[0],i=e[e.length-1],o=[...e],r=t&&i?lt.lengthBetween(t,i[0])+1:0;this.value=Array.from({length:r},(h,z)=>{var pt;let L=(pt=o[0])==null?void 0:pt[0],N=t==null?void 0:t.append({day:z}),Y=L&&(N!=null&&N.daySame(L))?o.shift():null,we=Y?Y[1]:NaN;return[N,we]})}get hint(){var e;return((e=this.hintDirective)==null?void 0:e.hint)??this.hintContent}ngAfterViewInit(){q([$e(this.charts.toArray()),this.hovered$]).pipe(K(e=>!e.some(Boolean)),B(this.zone),F(this.destroyRef)).subscribe(()=>{this.onHovered(NaN)})}onHovered(e){var a;if(Rt(e)){this.charts.forEach(h=>h.onHovered(NaN));return}let t=(a=this.value[0])==null?void 0:a[0],i=t&&e?We.lengthBetween(t,e):0,o=t&&e?lt.lengthBetween(t,e)+t.day-1:0,r=this.charts.get(i);this.charts.forEach(h=>{h===r?r.onHovered(r.value.findIndex(z=>z[0]===o)):h.onHovered(NaN)})}raise(e,{value:t}){var r;let i=((r=t[e])==null?void 0:r[0])||0,o=this.getDay(i);o&&(this.hintDirective?this.hintDirective.raise(o):this.onHovered(o))}getContext(e,{value:t}){var r;let i=((r=t[e])==null?void 0:r[0])||0,o=this.getDay(i);return this.hintDirective&&o?this.hintDirective.getContext(o):this.getHintContext(i,this.value)}get months(){return this.value.length?this.breakMonths(this.value):Ht}get firstWidth(){var e;return this.months.length*(((e=this.value[0])==null?void 0:e[0].daysCount)||0)}getHintContext(e,t){var i,o;return t[e-(((o=(i=t[0])==null?void 0:i[0])==null?void 0:o.day)||0)+1]??null}getX(e){var a;let t=(a=this.value[0])==null?void 0:a[0],i=this.getDay(e),r=(t&&i?We.lengthBetween(t,i):0)*((i==null?void 0:i.daysCount)||0);return e-r}getWidth(e){var t;return(((t=this.getDay(e))==null?void 0:t.daysCount)||0)*this.months.length}breakMonths(e){var r,a,h;let t=(((r=e[0])==null?void 0:r[0].day)||1)-1,i=(a=e[0])==null?void 0:a[0],o=(h=e[e.length-1])==null?void 0:h[0];return Array.from({length:i&&o?We.lengthBetween(i,o)+1:0},(z,L)=>L+((i==null?void 0:i.month)||0)+((i==null?void 0:i.year)||0)*12).map(z=>e.map(([{month:L,year:N},Y],we)=>L+N*12===z?[we+t,Y]:null).filter(Ue)).map((z,L,N)=>{var Y;return L===N.length-1?z:[...z,((Y=N[L+1])==null?void 0:Y.find(we=>!Number.isNaN(we[1])))||gn]})}getDay(e){var i,o;let t=(i=this.value[0])==null?void 0:i[0];return(o=this.value[e-((t==null?void 0:t.day)||0)+1])==null?void 0:o[0]}};Z.\u0275fac=function(t){return new(t||Z)},Z.\u0275cmp=v({type:Z,selectors:[["tui-line-days-chart"]],viewQuery:function(t,i){if(t&1&&Fe(re,5),t&2){let o;j(o=X())&&(i.charts=o)}},hostVars:2,hostBindings:function(t,i){t&2&&p("z-index",i.zIndex)},inputs:{y:"y",height:"height",smoothingFactor:"smoothingFactor",hintContent:"hintContent",xStringify:"xStringify",yStringify:"yStringify",dots:"dots",valueSetter:[0,"value","valueSetter"]},features:[k([W,{provide:Oe,useExisting:Z}])],decls:4,vars:0,consts:[["hint",""],[1,"t-chart",3,"dots","height","smoothingFactor","z-index","tuiHintContent","value","width","x","xStringify","y","yStringify"],[1,"t-chart",3,"dots","height","smoothingFactor","tuiHintContent","value","width","x","xStringify","y","yStringify"],[4,"polymorpheusOutlet","polymorpheusOutletContext"]],template:function(t,i){t&1&&(f(0,mn,1,12,"tui-line-chart",1,P),M(2,fn,1,4,"ng-template",null,0,Ve)),t&2&&g(i.months)},dependencies:[jt,ie,re],styles:["[_nghost-%COMP%]{display:block}.t-chart[_ngcontent-%COMP%]{position:absolute;top:0;left:0;inline-size:100%;block-size:100%}"],changeDetection:0}),y([_],Z.prototype,"getHintContext",1),y([_],Z.prototype,"breakMonths",1);var et=Z;function si(n,e){return n.find(([t])=>t.daySame(e))||[e,NaN]}var me=class me{constructor(){this.charts=U;this.destroyRef=d(fe);this.zone=d(te);this.hovered$=d(W)}ngAfterContentInit(){q([...this.charts.map(({charts:e})=>$e(e.toArray())),this.hovered$]).pipe(K(e=>!e.some(Boolean)),B(this.zone),F(this.destroyRef)).subscribe(()=>{this.charts.forEach(e=>e.onHovered(NaN))})}getContext(e){return this.getMap(...this.charts.map(({value:t})=>t)).get(String(e))||[]}raise(e){let t=this.charts.map(({value:o})=>e?si(o,e):[]).filter(([o,r])=>!Number.isNaN(r)),i=[...t].sort((o,r)=>o[1]-r[1]);this.charts.forEach((o,r)=>{let a=t[r];o.onHovered(e),o.zIndex=Math.max(a?i.indexOf(a):0,0)})}getMap(...e){return(e[0]||[]).reduce((t,[i])=>t.set(String(i),e.map(o=>si(o,i))),new Map)}};me.\u0275fac=function(t){return new(t||me)},me.\u0275dir=ye({type:me,selectors:[["","tuiLineChartHint",""]],contentQueries:function(t,i,o){if(t&1&&De(o,et,4),t&2){let r;j(r=X())&&(i.charts=r)}},inputs:{hint:[0,"tuiLineChartHint","hint"]},features:[k([W])]}),y([_],me.prototype,"getMap",1);var tt=me;var ze=class ze{constructor(){this.sector$=new mt([0,0]);this.el=Yt();this.performance=d(Dt);this.animationFrame$=d(wt);this.speed=d(Ft);this.$=this.sector$.pipe(gt(),he(([e,t])=>{let i=this.performance.now(),o=t[0]-e[0],r=t[1]-e[1];return this.animationFrame$.pipe(D(a=>Et(Nt((a-i)/Xt(this.speed),0,1))),bt(a=>a<1,!0),D(a=>[e[0]+o*a,t[1]>359?t[1]:e[1]+r*a]))}),B(),F()).subscribe(([e,t])=>this.el.setAttribute("d",ni(e,t)))}set tuiPieChart(e){this.sector$.next(e)}};ze.\u0275fac=function(t){return new(t||ze)},ze.\u0275dir=ye({type:ze,selectors:[["path","tuiPieChart",""]],inputs:{tuiPieChart:"tuiPieChart"}});var it=ze;var yn=n=>({$implicit:n}),bn=()=>[0,0];function vn(n,e){if(n&1){let t=be();se(),u(0,"path",5),V("tuiHoveredChange",function(o){let r=J(t).$index,a=l();return ee(a.onHovered(o,r))}),c()}if(n&2){let t=e.$index,i=l();p("color",`var(--tui-chart-categorical-${t.toString().padStart(2,"0")})`),C("tuiHint",i.hintContent)("tuiHintContext",ve(6,yn,t))("tuiPieChart",i.segments[t]||St(8,bn)),T("transform",i.getTransform(t))}}var xn={xs:"50",s:"50",m:"77.8",l:"81.9",xl:"81.3"},li={xs:1.15,s:1.25,m:1.11,l:1.09,xl:1.08},ae=class ae{constructor(){this.hintOptions=d(ie,{optional:!0});this.autoId=Ce();this.value=[];this.size="m";this.masked=!1;this.activeItemIndex=NaN;this.activeItemIndexChange=new ge;this.hintOptions&&(this.hintOptions.showDelay=0,this.hintOptions.hideDelay=0)}get empty(){return!this.getSum(this.value)}get hintContent(){var e;return((e=this.hintOptions)==null?void 0:e.content)||""}get maskId(){return`tui-ring-chart-${this.autoId}`}get mask(){return this.masked?`url(#${this.maskId})`:null}get radius(){return xn[this.size]}get segments(){return this.getSegments(this.value)}getTransform(e){let t=this.masked?`scale(${li[this.size]})`:`scale(${li.xs})`;return e===this.activeItemIndex?t:null}onHovered(e,t){this.updateActiveItemIndex(e?t:NaN)}getSum(e){return _e(...e)}getSegments(e){return e.map((t,i,o)=>o.reduce((r,a,h)=>h<i?this.getDeg(a)+r:r,this.getDeg(t))).map((t,i,o)=>[o[i-1]||0,Math.min(t,359.9999)])}getDeg(e){return 360*(e/this.getSum(this.value))||0}updateActiveItemIndex(e){e!==this.activeItemIndex&&(this.activeItemIndex=e,this.activeItemIndexChange.next(e))}};ae.\u0275fac=function(t){return new(t||ae)},ae.\u0275cmp=v({type:ae,selectors:[["tui-pie-chart"]],hostVars:3,hostBindings:function(t,i){t&2&&(T("data-size",i.size),S("_empty",i.empty))},inputs:{value:"value",size:"size",masked:"masked",activeItemIndex:"activeItemIndex"},outputs:{activeItemIndexChange:"activeItemIndexChange"},features:[k([],[Te({direction:"top-right",appearance:"floating"})])],decls:9,vars:4,consts:[["focusable","false","height","100%","viewBox","-100 -100 200 200","width","100%","xmlns","http://www.w3.org/2000/svg",1,"t-svg"],["fill","white","height","400","width","400","x","-200","y","-200"],["cx","0","cy","0"],["cx","0","cy","0","r","100",1,"t-placeholder"],["automation-id","tui-pie-chart__segment","d","","fill","currentColor","tuiHintPointer","",1,"t-segment",3,"color","tuiHint","tuiHintContext","tuiPieChart"],["automation-id","tui-pie-chart__segment","d","","fill","currentColor","tuiHintPointer","",1,"t-segment",3,"tuiHoveredChange","tuiHint","tuiHintContext","tuiPieChart"]],template:function(t,i){t&1&&(se(),u(0,"svg",0)(1,"defs")(2,"mask"),m(3,"rect",1)(4,"circle",2),c()(),u(5,"g"),m(6,"circle",3),f(7,vn,1,9,":svg:path",4,le),c()()),t&2&&(s(2),T("id",i.maskId),s(2),T("r",i.radius),s(),p("mask",i.mask),s(2),g("-".repeat(i.segments.length)))},dependencies:[Pe,Ut,Qt,it],styles:["[_nghost-%COMP%]{position:relative;display:block;inline-size:var(--t-size);block-size:var(--t-size);border-radius:100%}[data-size=xs][_nghost-%COMP%]{--t-size: 2rem;pointer-events:none}[data-size=s][_nghost-%COMP%]{--t-size: 4rem}[data-size=m][_nghost-%COMP%]{--t-size: 9rem}[data-size=l][_nghost-%COMP%]{--t-size: 11rem}[data-size=xl][_nghost-%COMP%]{--t-size: 16rem}.t-svg[_ngcontent-%COMP%]{position:relative;overflow:visible;transform:rotate(-90deg)}.t-segment[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}._empty[_nghost-%COMP%]   .t-segment[_ngcontent-%COMP%]{display:none}.t-placeholder[_ngcontent-%COMP%]{fill:var(--tui-background-neutral-1)}"],changeDetection:0}),y([_],ae.prototype,"getSum",1),y([_],ae.prototype,"getSegments",1);var nt=ae;var _n=["*"],Le=class Le{constructor(){this.value=[];this.size="m";this.activeItemIndex=NaN;this.activeItemIndexChange=new ge}onActiveItemIndexChange(e){this.updateActiveItemIndex(e)}updateActiveItemIndex(e){e!==this.activeItemIndex&&(this.activeItemIndex=e,this.activeItemIndexChange.next(e))}};Le.\u0275fac=function(t){return new(t||Le)},Le.\u0275cmp=v({type:Le,selectors:[["tui-ring-chart"]],hostVars:1,hostBindings:function(t,i){t&2&&T("data-size",i.size)},inputs:{value:"value",size:"size",activeItemIndex:"activeItemIndex"},outputs:{activeItemIndexChange:"activeItemIndexChange"},ngContentSelectors:_n,decls:5,vars:4,consts:[[1,"t-content"],[1,"t-wrapper"],[1,"t-chart",3,"activeItemIndexChange","activeItemIndex","masked","size","value"],[1,"t-shield"]],template:function(t,i){t&1&&(E(),u(0,"div",0)(1,"div",1),$(2),c()(),u(3,"tui-pie-chart",2),V("activeItemIndexChange",function(r){return i.onActiveItemIndexChange(r)}),c(),m(4,"div",3)),t&2&&(s(3),C("activeItemIndex",i.activeItemIndex)("masked",!0)("size",i.size)("value",i.value))},dependencies:[nt],styles:["[_nghost-%COMP%]{position:relative;display:block;inline-size:var(--t-size);block-size:var(--t-size);flex-shrink:0;border-radius:100%}[data-size=xs][_nghost-%COMP%]{--t-size: 3rem}[data-size=s][_nghost-%COMP%]{--t-size: 4rem}[data-size=m][_nghost-%COMP%]{--t-size: 9rem}[data-size=l][_nghost-%COMP%]{--t-size: 11rem}[data-size=xl][_nghost-%COMP%]{--t-size: 16rem}.t-content[_ngcontent-%COMP%]{position:absolute;top:0;left:0;inline-size:100%;block-size:100%;display:flex;font:var(--tui-font-body-m);max-block-size:100%;flex-direction:column;justify-content:center;text-align:center;padding:1.5rem;border-radius:100%;box-sizing:border-box;overflow:hidden;word-break:break-word;white-space:pre-wrap;color:var(--tui-text-secondary)}[data-size=m][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{font:var(--tui-font-body-xs)}.t-wrapper[_ngcontent-%COMP%]:first-line{color:var(--tui-text-primary)}[data-size=l][_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]:first-line{font:var(--tui-font-body-l);font-weight:700}[data-size=m][_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]:first-line{font:var(--tui-font-body-m);font-weight:700}.t-shield[_ngcontent-%COMP%]{position:absolute;inset:25%;border-radius:100%}.t-chart[_ngcontent-%COMP%]{inline-size:100%;block-size:100%}"],changeDetection:0});var ci=Le;export{Zt as a,ki as b,Ai as c,Hn as d,qt as e,qe as f,Ke as g,Kt as h,Jt as i,Oe as j,re as k,tt as l,et as m,nt as n,ci as o};
