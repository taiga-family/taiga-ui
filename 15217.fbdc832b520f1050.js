(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[15217],{15217:(e,t,n)=>{n.r(t),n.d(t,{default:()=>C});var o,i=n(84911),r=n(4594),s=n(35548),a=n(66094),u=n(85483),c=n(80486),l=n(45957),p=n(74525),d=n(55495),f=n(28598),m=n(29655);function g(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"button",6),s.NdJ("click",(function(){const t=s.CHM(e).$implicit,n=s.oxw(3),o=s.MAs(1);return s.KtG(n.onClick(t.login,o.nativeFocusableElement))})),s._uU(1),s.TgZ(2,"tui-avatar",7),s._uU(3),s.ALo(4,"tuiInitials"),s.qZA()()}if(2&e){const e=t.$implicit;s.xp6(1),s.hij(" ",e.name," "),s.xp6(1),s.Q6J("src",e.avatar),s.xp6(1),s.hij(" ",s.lcZ(4,3,e.name)," ")}}function w(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"tui-data-list",4),s.NdJ("keydown.escape",(function(){s.CHM(e),s.oxw(2);const t=s.MAs(1);return s.KtG(t.nativeFocusableElement.focus())})),s.YNc(1,g,5,5,"button",5),s.qZA()}if(2&e){const e=s.oxw(2),t=s.MAs(1);s.xp6(1),s.Q6J("ngForOf",e.filterItems(t.nativeFocusableElement))}}function v(e,t){if(1&e&&s.YNc(0,w,2,1,"tui-data-list",3),2&e){s.oxw();const e=s.MAs(1);s.Q6J("ngIf",e.nativeFocusableElement)}}class h{constructor(){this.options=c.EMPTY_QUERY,this.value="Type @ to see a dropdown",this.items=[{name:"Alexander Inkin",avatar:u.Ll`/images/avatar.jpg`,login:"a.inkin"},{name:"Roman Sedov",avatar:"",login:"r.sedov"}],this.predicate=e=>(0,l.tuiGetWordRange)(e).toString().startsWith("@")}onArrow(e,t){const n=this.options[t];n&&(e.preventDefault(),n.nativeElement.focus())}filterItems(e){const t=this.getCurrentSearch(e).replace("@","");return this.getFilteredItems(this.items,t)}onClick(e,t){const n=this.getCurrentSearch(t),o=this.value.replace(n,e),i=o.indexOf(e)+e.length;this.value=o,t.focus(),t.value=o,t.setSelectionRange(i,i)}getFilteredItems(e,t){return e.filter((({name:e,login:n})=>n.startsWith(t)||e.startsWith(t)))}getCurrentSearch(e){return e.value.slice(e.value.indexOf("@"),e.selectionStart)}}(o=h).ɵfac=function(e){return new(e||o)},o.ɵcmp=s.Xpm({type:o,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&(s.Gf(l.TuiDriver,5),s.Gf(l.TuiOptionComponent,5,s.SBq)),2&e){let e;s.iGM(e=s.CRH())&&(t.driver=e.first),s.iGM(e=s.CRH())&&(t.options=e)}},standalone:!0,exportAs:"ExampleComponent2",features:[s.jDz],decls:6,vars:6,consts:[["tuiDropdownSelectionPosition","word",3,"pseudoFocus","tuiDropdown","tuiDropdownSelection","ngModel","ngModelChange","keydown.arrowDown","keydown.arrowUp"],["textarea",""],["dropdown",""],["class","menu",3,"keydown.escape",4,"ngIf"],[1,"menu",3,"keydown.escape"],["tuiOption","",3,"click",4,"ngFor","ngForOf"],["tuiOption","",3,"click"],["size","s",3,"src"]],template:function(e,t){if(1&e&&(s.TgZ(0,"tui-textarea",0,1),s.NdJ("ngModelChange",(function(e){return t.value=e}))("keydown.arrowDown",(function(e){return t.onArrow(e,"first")}))("keydown.arrowUp",(function(e){return t.onArrow(e,"last")})),s.ALo(2,"async"),s._uU(3," Type a message\n"),s.qZA(),s.YNc(4,v,1,1,"ng-template",null,2,s.W1O)),2&e){const e=s.MAs(5);s.Q6J("pseudoFocus",s.lcZ(2,4,t.driver)||null)("tuiDropdown",e)("tuiDropdownSelection",t.predicate)("ngModel",t.value)}},dependencies:[d.Mu,f.FC,m.B,l.TuiDropdownSelectionDirective,l.TuiDropdownDirective,a.u5,a.JJ,a.On,r.Ov,l.TuiDataListComponent,r.O5,r.sg,l.TuiOptionComponent,p.TuiAvatarComponent,l.TuiInitialsPipe],styles:[".menu[_ngcontent-%COMP%]{width:12.5rem}"],changeDetection:0}),(0,i.gn)([c.tuiPure],h.prototype,"getFilteredItems",null);const C=h}}]);