import{Ba as m,Dc as nt,Jc as at,La as _,Oa as tt,Ra as et,Sa as rt,Ta as it,ib as ot,j as W,k as z,l as K,lb as A,p as q,y as T}from"./chunk-RH6NWOVQ.js";import{d as I,e as J,g as Q,m as X}from"./chunk-HXUUARZB.js";import{Aa as r,Bc as Y,G as U,I as S,La as Z,V as g,W as O,Wb as o,Xc as d,Za as n,ab as F,d as E,f as w,i as $,j as L,ja as b,ka as x,nd as G,p as M,pa as j,s as R,sd as H,td as p,ua as B,w as c}from"./chunk-X7N7YQIF.js";var a=class a extends w{constructor(){super(e=>this.obscured$.subscribe(e));this.el=A();this.obscured$=r(q).pipe(j(100,it()),c(()=>ot(this.el)),b(null),O(),rt())}};a.\u0275fac=function(i){return new(i||a)},a.\u0275prov=B({token:a,factory:a.\u0275fac});var V=a;var f=class f{constructor(){this.activeZone=r(at,{optional:!0});this.obscured$=r(V,{self:!0}).pipe(c(t=>!!(t!=null&&t.every(e=>{var i;return!((i=this.activeZone)!=null&&i.contains(e))}))));this.tuiObscuredEnabled=n();this.tuiObscured$=K(this.tuiObscuredEnabled).pipe(_(()=>this.obscured$));this.tuiObscured=z(this.tuiObscured$)}};f.\u0275fac=function(e){return new(e||f)},f.\u0275dir=o({type:f,selectors:[["","tuiObscured",""]],inputs:{tuiObscuredEnabled:[1,"tuiObscuredEnabled"]},outputs:{tuiObscured:"tuiObscured"},features:[d([V])]});var lt=f;var l=class l{constructor(){this.onChange=T;this.validate=J.nullValidator}registerOnValidatorChange(t){this.onChange=t}ngOnChanges(){this.onChange()}};l.\u0275fac=function(e){return new(e||l)},l.\u0275dir=o({type:l,selectors:[["","tuiValidator",""]],inputs:{validate:[0,"tuiValidator","validate"]},features:[d([m(I,l,!0)]),Z]});var st=l;var h=class h{};h.\u0275fac=function(e){return new(e||h)},h.\u0275dir=o({type:h,selectors:[["","tuiItem",""]]});var ut=h;var v=class{};function St(u){return{provide:v,useFactory:()=>r(u).valueTransformer}}var ct=class extends v{fromControlValue(t){return this.prevValue=t,t}toControlValue(t){return this.prevValue=t??this.prevValue,this.prevValue}},dt={fromControlValue:E,toControlValue:E};var pt=class{constructor(t,e={}){this.message=t;this.context=e}};var s=class s{constructor(){this.el=A();this.control$=new L(null);this.sub=this.control$.pipe(x(t=>(t==null?void 0:t.events)||R(null)),g(0),et(),tt()).subscribe(()=>this.handleValidation());this.tuiNativeValidator=n("Invalid")}validate(t){return this.control$.next(t),null}handleValidation(){var e,i,D,P,k;let t=!!((e=this.control$.value)!=null&&e.touched)&&((i=this.control$.value)==null?void 0:i.invalid);(D=this.el.closest("tui-textfield"))==null||D.classList.toggle("tui-invalid",t),(k=(P=this.el).setCustomValidity)==null||k.call(P,t?this.tuiNativeValidator():"")}};s.\u0275fac=function(e){return new(e||s)},s.\u0275dir=o({type:s,selectors:[["","tuiNativeValidator",""]],hostBindings:function(e,i){e&1&&Y("focusout",function(){return i.handleValidation()})},inputs:{tuiNativeValidator:[1,"tuiNativeValidator"]},features:[d([m(I,s,!0)])]});var mt=s;var ft={self:!0,optional:!0},y=class y{constructor(){this.fallback=r(nt,ft);this.refresh$=new $;this.internal=F(this.fallback);this.control=r(Q,{self:!0});this.cdr=r(G);this.transformer=r(v,ft)??dt;this.value=p(()=>this.internal()??this.fallback);this.readOnly=n(!1);this.pseudoInvalid=n(null,{alias:"invalid"});this.touched=F(!1);this.status=F(void 0);this.disabled=p(()=>this.status()==="DISABLED");this.interactive=p(()=>!this.disabled()&&!this.readOnly());this.invalid=p(()=>this.pseudoInvalid()!==null?!!this.pseudoInvalid()&&this.interactive():this.interactive()&&this.touched()&&this.status()==="INVALID");this.mode=p(()=>this.readOnly()?"readonly":this.invalid()?"invalid":"valid");this.onTouched=T;this.onChange=T;this.control.valueAccessor=this,this.refresh$.pipe(g(0),b(null),c(()=>this.control.control),S(Boolean),O(),x(t=>U(t.valueChanges,t.statusChanges,t.events||M).pipe(b(null))),W()).subscribe(()=>this.update())}registerOnChange(t){this.refresh$.next(),this.onChange=e=>{let i=H(()=>this.internal());e!==i&&(t(this.transformer.toControlValue(e)),this.internal.set(e),this.update())}}registerOnTouched(t){this.onTouched=()=>{t(),this.update()}}setDisabledState(){this.update()}writeValue(t){let e=this.control instanceof X?this.control.model:t;this.internal.set(this.transformer.fromControlValue(e)),this.update()}update(){var t,e;this.status.set((t=this.control.control)==null?void 0:t.status),this.touched.set(!!((e=this.control.control)!=null&&e.touched)),this.cdr.markForCheck()}};y.\u0275fac=function(e){return new(e||y)},y.\u0275dir=o({type:y,inputs:{readOnly:[1,"readOnly"],pseudoInvalid:[1,"invalid","pseudoInvalid"]}});var N=y;function de(u){return m(N,u)}export{lt as a,st as b,mt as c,ut as d,v as e,St as f,ct as g,dt as h,N as i,de as j,pt as k};
