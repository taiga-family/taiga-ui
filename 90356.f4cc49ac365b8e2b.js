(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[90356],{90356:(t,e,n)=>{n.r(e),n.d(e,{default:()=>f});var i=n(6978),a=n(30175),o=n(88832),s=n(22185),r=n(79687),l=n(62562),u=n(71411),c=n(69893),p=n(92661);function d(t,e){if(1&t){const t=a.RV6();a.j41(0,"button",5),a.bIt("click",(function(){const e=a.eBV(t).$implicit,n=a.XpG(2);return a.Njj(n.onClick(e.login))})),a.j41(1,"div",6),a.EFF(2),a.nI1(3,"tuiInitials"),a.nrm(4,"img",7),a.k0s(),a.EFF(5),a.k0s()}if(2&t){const t=e.$implicit;a.R7$(2),a.SpI(" ",a.bMT(3,3,t.name)," "),a.R7$(2),a.Y8G("src",t.avatar,a.B4B),a.R7$(),a.SpI(" ",t.name," ")}}function m(t,e){if(1&t&&(a.j41(0,"tui-data-list"),a.Z7z(1,d,6,5,"button",4,a.fX1),a.nI1(3,"tuiMapper"),a.k0s()),2&t){const t=a.XpG();a.R7$(),a.Dyx(a.brH(3,0,t.items,t.filter,t.search.replace("@","")))}}let f=(()=>{var t;class e{constructor(){this.options=r.xQZ,this.value="Type @ to see a dropdown",this.items=[{name:"Alexander Inkin",avatar:s.mY`/images/avatar.jpg`,login:"a.inkin"},{name:"Roman Sedov",avatar:"",login:"r.sedov"}],this.filter=(t,e)=>t.filter((({name:t,login:n})=>n.startsWith(e)||t.startsWith(e))),this.predicate=t=>String((0,l.kJn)(t)).startsWith("@")}get search(){const t=this.textarea?.nativeElement;return t?.value.slice(t.value.indexOf("@"),t.selectionStart)||""}onArrow(t,e){const n=this.options[e];n&&(t.preventDefault(),n.nativeElement.focus())}onClick(t){if(!this.textarea)return;const e=this.search,n=this.value.replace(e,t),i=n.indexOf(t)+t.length;this.value=n,this.textarea.nativeElement.focus(),this.textarea.nativeElement.value=n,this.textarea.nativeElement.setSelectionRange(i,i)}}return(t=e).ɵfac=function(e){return new(e||t)},t.ɵcmp=a.VBU({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&(a.GBs(u.nmZ,5,a.aKT),a.GBs(l.Xuo,5),a.GBs(l.sKr,5,a.aKT)),2&t){let t;a.mGM(t=a.lsd())&&(e.textarea=t.first),a.mGM(t=a.lsd())&&(e.driver=t.first),a.mGM(t=a.lsd())&&(e.options=t)}},decls:6,vars:7,consts:[["tuiDropdownLimitWidth","auto","tuiDropdownSelectionPosition","word",3,"tuiDropdownSelection"],["tuiLabel",""],["tuiTextarea","",3,"ngModelChange","keydown.stop.arrowDown","keydown.stop.arrowUp","focused","max","min","ngModel"],[4,"tuiDropdown"],["new","","tuiOption","","type","button"],["new","","tuiOption","","type","button",3,"click"],["size","s","tuiAvatar",""],["alt","",3,"src"]],template:function(t,e){1&t&&(a.j41(0,"tui-textfield",0)(1,"label",1),a.EFF(2,"Type a message"),a.k0s(),a.j41(3,"textarea",2),a.nI1(4,"async"),a.mxI("ngModelChange",(function(t){return a.DH7(e.value,t)||(e.value=t),t})),a.bIt("keydown.stop.arrowDown",(function(t){return e.onArrow(t,"first")}))("keydown.stop.arrowUp",(function(t){return e.onArrow(t,"last")})),a.k0s(),a.DNE(5,m,4,4,"tui-data-list",3),a.k0s()),2&t&&(a.Y8G("tuiDropdownSelection",e.predicate),a.R7$(3),a.Y8G("focused",a.bMT(4,5,e.driver)||null)("max",4)("min",4),a.R50("ngModel",e.value))},dependencies:[i.Jj,o.YN,o.me,o.BC,o.vS,u.Elh,l.uEM,l.sKr,l.HYP,l.pw6,l.sA4,l.eoQ,r.uAY,u.nmZ,c.bCn,p.z,l.Bwv],encapsulation:2,changeDetection:0}),e})()}}]);