"use strict";(self.webpackChunk_taiga_ui_components=self.webpackChunk_taiga_ui_components||[]).push([[44844],{44844:(yt,v,i)=>{i.r(v),i.d(v,{ExampleTuiLineDaysChartModule:()=>gt});var p=i(12057),x=i(24751),S=i(33982),L=i(50179),_=i(29851),u=i(63096),f=i(3497),M=i(55908),h=i(88002),t=i(74788),E=i(88331),N=i(37159),U=i(57068),g=i(64762),Z=i(92483),V=i(48706),P=i(70390),D=i(87748);function J(n,a){if(1&n&&(t.TgZ(0,"tui-axes",3),t._UZ(1,"tui-line-days-chart",4),t.ALo(2,"async"),t.qZA()),2&n){const e=a.ngIf,o=t.oxw();t.Q6J("verticalLines",e.length)("horizontalLines",4)("axisXLabels",e),t.xp6(1),t.Q6J("height",200)("value",o.value)("yStringify",o.yStringify)("xStringify",t.lcZ(2,7,o.xStringify$))}}class c{constructor(a,e){this.months$=a,this.isCypress=e,this.range=new u.TuiDayRange(u.TuiDay.currentLocal(),u.TuiDay.currentLocal().append({year:1})),this.maxLength={month:12},this.xStringify$=this.months$.pipe((0,h.U)(o=>({month:r,day:l})=>`${o[r]}, ${l}`)),this.yStringify=o=>`${(10*o).toLocaleString("en-US",{maximumFractionDigits:0})} $`}get value(){return this.computeValue(this.range)}computeLabels$({from:a,to:e}){return this.months$.pipe((0,h.U)(o=>Array.from({length:u.TuiMonth.lengthBetween(a,e)+1},(r,l)=>o[a.append({month:l}).month])))}computeValue({from:a,to:e}){return new Array(u.TuiDay.lengthBetween(a,e)+1).fill(0).reduce((o,r,l)=>[...o,[a.append({day:l}),this.isCypress?100:(l?o[l-1][1]:100)+10*Math.random()-5]],[])}}c.\u0275fac=function(a){return new(a||c)(t.Y36(f.TUI_MONTHS),t.Y36(u.TUI_IS_CYPRESS))},c.\u0275cmp=t.Xpm({type:c,selectors:[["tui-line-days-chart-example-1"]],decls:5,vars:5,consts:[[1,"b-form"],[3,"maxLength","ngModel","ngModelChange"],["class","axes",3,"verticalLines","horizontalLines","axisXLabels",4,"ngIf"],[1,"axes",3,"verticalLines","horizontalLines","axisXLabels"],[1,"chart",3,"height","value","yStringify","xStringify"]],template:function(a,e){1&a&&(t.TgZ(0,"p",0),t.TgZ(1,"tui-input-date-range",1),t.NdJ("ngModelChange",function(r){return e.range=r}),t._uU(2," Range "),t.qZA(),t.qZA(),t.YNc(3,J,3,9,"tui-axes",2),t.ALo(4,"async")),2&a&&(t.xp6(1),t.Q6J("maxLength",e.maxLength)("ngModel",e.range),t.xp6(2),t.Q6J("ngIf",t.lcZ(4,3,e.computeLabels$(e.range))))},directives:[Z.H,V.d,x.JJ,x.On,p.O5,P.v,D.r],pipes:[p.Ov],styles:[".axes[_ngcontent-%COMP%]{height:12.5rem;color:#bc71c9}"],changeDetection:0}),(0,g.gn)([u.tuiPure],c.prototype,"computeLabels$",null),(0,g.gn)([u.tuiPure],c.prototype,"computeValue",null);var O=i(79121),$=i(69775),F=i(19288),Y=i(58413),T=i(25917);let Q=(()=>{class n{constructor(e){this.months$=e}transform({from:e,to:o}){const r=u.TuiDay.lengthBetween(e,o);if(r>90)return this.months$.pipe((0,h.U)(y=>Array.from({length:u.TuiMonth.lengthBetween(e,o)+1},(C,dt)=>y[e.append({month:dt}).month])));const l=Array.from({length:r},(y,C)=>e.append({day:C})),m=function(n){return n.filter(a=>!a.dayOfWeek()).map(String)}(l),d=l.map(String);return(0,T.of)(r>60?A(m):r>14?m:r>7?A(d):d)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.TUI_MONTHS,16))},n.\u0275pipe=t.Yjl({name:"labels",type:n,pure:!0}),n})();function A(n){return n.filter((a,e)=>!(e%2))}var I=i(47305),B=i(35271);function R(n,a){if(1&n&&(t.TgZ(0,"span",7),t.TgZ(1,"small",8),t._uU(2),t.qZA(),t.qZA()),2&n){const e=a.index;t.xp6(2),t.hij("Chart ",e+1,"")}}function w(n,a){if(1&n&&(t._UZ(0,"tui-line-days-chart",13),t.ALo(1,"tuiFilter")),2&n){const e=a.$implicit,o=t.oxw(3);t.Q6J("height",200)("value",t.Dn7(1,2,e,o.filter,o.range))}}function W(n,a){if(1&n&&(t.ynx(0),t.YNc(1,w,2,6,"tui-line-days-chart",12),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.days)}}function X(n,a){if(1&n&&(t._UZ(0,"tui-line-chart",15),t.ALo(1,"tuiMapper"),t.ALo(2,"tuiFilter")),2&n){const e=a.$implicit,o=t.oxw(3);t.Q6J("height",200)("width",o.getWidth(o.range))("value",t.Dn7(1,3,t.Dn7(2,7,e,o.filter,o.range),o.toNumbers,o.range))}}function z(n,a){if(1&n&&t.YNc(0,X,3,11,"tui-line-chart",14),2&n){const e=t.oxw(2);t.Q6J("ngForOf",e.days)}}function b(n,a){if(1&n&&(t.TgZ(0,"tui-axes",9),t.YNc(1,W,2,1,"ng-container",10),t.YNc(2,z,1,1,"ng-template",null,11,t.W1O),t.qZA()),2&n){const e=a.ngIf,o=t.MAs(3),r=t.oxw(),l=t.MAs(15);t.Q6J("verticalLines",e.length)("horizontalLines",4)("axisXLabels",e)("tuiLineChartHint",l),t.xp6(1),t.Q6J("ngIf",r.getWidth(r.show)>90)("ngIfElse",o)}}function j(n,a){if(1&n&&(t.TgZ(0,"div",7),t.TgZ(1,"span",17),t._uU(2),t.qZA(),t.qZA()),2&n){const e=a.$implicit;t.xp6(2),t.hij("$",e[1].toFixed(0),"")}}function G(n,a){if(1&n&&(t.TgZ(0,"div",16),t.TgZ(1,"strong"),t._uU(2),t.qZA(),t.qZA(),t.TgZ(3,"div"),t.YNc(4,j,3,1,"div",4),t.qZA()),2&n){const e=a.$implicit,o=t.oxw();t.xp6(2),t.Oqu(o.getDate(e[0][0],o.range.from)),t.xp6(2),t.Q6J("ngForOf",e)}}class s{constructor(a){this.isCypress=a,this.data=new u.TuiDayRange(u.TuiDay.currentLocal(),u.TuiDay.currentLocal().append({month:5})),this.show=this.data,this.days=this.computeArrays(this.data),this.maxLength={month:6},this.filter=([e],{from:o,to:r})=>e.daySameOrAfter(o)&&e.daySameOrBefore(r),this.toNumbers=(e,{from:o})=>e.map(([r,l])=>[u.TuiDay.lengthBetween(o,r),l])}get range(){return this.computeRange(this.show)}getWidth({from:a,to:e}){return u.TuiDay.lengthBetween(a,e)}getDate(a,e){return a instanceof u.TuiDay?a:e.append({day:a})}onDataChange(a){this.days=this.computeArrays(a)}computeRange(a){const{from:e,to:o}=a,r=u.TuiDay.lengthBetween(e,o),l=e.dayOfWeek(),m=o.dayOfWeek(),d=l?e.append({day:7-l}):e,y=m?o.append({day:7-m}):o,C=u.TuiDay.lengthBetween(d,y);return r>60?new u.TuiDayRange(d,y.append({day:C%14})):r>14?new u.TuiDayRange(d,y):r>7?new u.TuiDayRange(e,o.append({day:r%2})):a}computeData({from:a,to:e},o){return new Array(u.TuiDay.lengthBetween(a,e)+1).fill(0).reduce((r,l,m)=>[...r,[a.append({day:m}),this.isCypress?o:Math.max((m?r[m-1][1]:o)+10*Math.random()-5,0)]],[]).filter(([r])=>r.dayOfWeek()<5)}computeArrays(a){return[this.computeData(a,100),this.computeData(a,75),this.computeData(a,50)]}}s.\u0275fac=function(a){return new(a||s)(t.Y36(u.TUI_IS_CYPRESS))},s.\u0275cmp=t.Xpm({type:s,selectors:[["tui-line-days-chart-example-2"]],decls:16,vars:10,consts:[[1,"controls"],[1,"b-form",3,"maxLength","ngModel","ngModelChange"],[1,"b-form","tui-space_left-4",3,"maxLength","ngModel","ngModelChange"],[1,"legend"],["class","item",4,"ngFor","ngForOf"],["class","axes",3,"verticalLines","horizontalLines","axisXLabels","tuiLineChartHint",4,"ngIf"],["hint",""],[1,"item"],[1,"name"],[1,"axes",3,"verticalLines","horizontalLines","axisXLabels","tuiLineChartHint"],[4,"ngIf","ngIfElse"],["line",""],["class","chart",3,"height","value",4,"ngFor","ngForOf"],[1,"chart",3,"height","value"],["class","chart",3,"height","width","value",4,"ngFor","ngForOf"],[1,"chart",3,"height","width","value"],[1,"tui-space_bottom-2"],[1,"value"]],template:function(a,e){1&a&&(t.TgZ(0,"tui-notification"),t.TgZ(1,"code"),t._uU(2,"TuiLineDaysChart"),t.qZA(),t._uU(3," is used to show data of several months to simplify working with different number of days in months\n"),t.qZA(),t.TgZ(4,"p",0),t.TgZ(5,"tui-input-date-range",1),t.NdJ("ngModelChange",function(r){return e.data=r})("ngModelChange",function(r){return e.onDataChange(r)}),t._uU(6," Data "),t.qZA(),t.TgZ(7,"tui-input-date-range",2),t.NdJ("ngModelChange",function(r){return e.show=r}),t._uU(8," Visible range "),t.qZA(),t.qZA(),t.TgZ(9,"p",3),t.YNc(10,R,3,1,"span",4),t.qZA(),t.YNc(11,b,4,6,"tui-axes",5),t.ALo(12,"async"),t.ALo(13,"labels"),t.YNc(14,G,5,2,"ng-template",null,6,t.W1O)),2&a&&(t.xp6(5),t.Q6J("maxLength",e.maxLength)("ngModel",e.data),t.xp6(2),t.Q6J("maxLength",e.maxLength)("ngModel",e.show),t.xp6(3),t.Q6J("ngForOf",e.days),t.xp6(1),t.Q6J("ngIf",t.lcZ(12,6,t.lcZ(13,8,e.show))))},directives:[O.L,Z.H,V.d,x.JJ,x.On,p.sg,p.O5,P.v,$.T,F.w,D.r,Y.V],pipes:[p.Ov,Q,I.S,B.c],styles:['.axes[_ngcontent-%COMP%]{height:12.5rem}.controls[_ngcontent-%COMP%]{display:flex}.controls[_ngcontent-%COMP%]   .b-form[_ngcontent-%COMP%]{flex:1}.legend[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.item[_ngcontent-%COMP%]{color:var(--tui-support-01);display:flex;align-items:center;margin:0 .75rem}.item[_ngcontent-%COMP%]:first-child{color:var(--tui-support-08)}.item[_ngcontent-%COMP%]:last-child{color:var(--tui-support-12)}.item[_ngcontent-%COMP%]:before{content:"";border-bottom:.125rem solid;width:1rem;margin-right:.5rem}.name[_ngcontent-%COMP%]{color:var(--tui-text-01)}.value[_ngcontent-%COMP%]{color:var(--tui-text-01-night)}.chart[_ngcontent-%COMP%]{color:var(--tui-support-01);position:absolute;top:0;left:0;width:100%;height:100%}.chart[_ngcontent-%COMP%]:first-child{color:var(--tui-support-08)}.chart[_ngcontent-%COMP%]:last-child{color:var(--tui-support-12)}'],changeDetection:0}),(0,g.gn)([u.tuiPure],s.prototype,"getWidth",null),(0,g.gn)([u.tuiPure],s.prototype,"getDate",null),(0,g.gn)([u.tuiPure],s.prototype,"computeRange",null),(0,g.gn)([u.tuiPure],s.prototype,"computeData",null);var K=i(31823),q=i(54476),k=i(17023),tt=i(76349);function et(n,a){if(1&n&&(t.TgZ(0,"p"),t._uU(1,"Line chart but for days"),t.qZA(),t.TgZ(2,"tui-doc-example",2),t._UZ(3,"tui-line-days-chart-example-1"),t.qZA(),t.TgZ(4,"tui-doc-example",3),t._UZ(5,"tui-line-days-chart-example-2"),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("content",e.example1),t.xp6(2),t.Q6J("content",e.example2)}}function nt(n,a){1&n&&t._uU(0," Show dots on chart ")}function at(n,a){1&n&&(t._uU(0," Content of hint for hover. It has "),t.TgZ(1,"code"),t._uU(2,"$implicit"),t.qZA(),t._uU(3," in context with a tuple "),t.TgZ(4,"code"),t._uU(5,"[TuiDay, number]"),t.qZA())}function ot(n,a){1&n&&t._uU(0," Axis Y range, pixel scale is 1:1 ")}function it(n,a){1&n&&t._uU(0," Start of Y axis ")}function rt(n,a){1&n&&t._uU(0," Smoothing factor from 0 to 99 ")}function lt(n,a){1&n&&t._uU(0," Array of data ")}function ut(n,a){1&n&&t._uU(0," Function to stringify a value number to a string in axis X hint ")}function st(n,a){1&n&&t._uU(0," Function to stringify a value number to a string in axis Y hint ")}const mt=function(){return[]};function pt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"tui-doc-demo"),t.TgZ(1,"tui-axes",4),t.ALo(2,"async"),t._UZ(3,"tui-line-days-chart",5),t.qZA(),t.qZA(),t.TgZ(4,"tui-doc-documentation"),t.YNc(5,nt,1,0,"ng-template",6),t.NdJ("documentationPropertyValueChange",function(r){return t.CHM(e),t.oxw().dots=r}),t.YNc(6,at,6,0,"ng-template",7),t.ALo(7,"async"),t.NdJ("documentationPropertyValueChange",function(r){return t.CHM(e),t.oxw().hintContent=r}),t.YNc(8,ot,1,0,"ng-template",8),t.NdJ("documentationPropertyValueChange",function(r){return t.CHM(e),t.oxw().height=r}),t.YNc(9,it,1,0,"ng-template",9),t.NdJ("documentationPropertyValueChange",function(r){return t.CHM(e),t.oxw().y=r}),t.YNc(10,rt,1,0,"ng-template",10),t.NdJ("documentationPropertyValueChange",function(r){return t.CHM(e),t.oxw().smoothingFactor=r}),t.YNc(11,lt,1,0,"ng-template",11),t.NdJ("documentationPropertyValueChange",function(r){return t.CHM(e),t.oxw().value=r}),t.YNc(12,ut,1,0,"ng-template",12),t.ALo(13,"async"),t.NdJ("documentationPropertyValueChange",function(r){return t.CHM(e),t.oxw().xStringify=r}),t.YNc(14,st,1,0,"ng-template",13),t.NdJ("documentationPropertyValueChange",function(r){return t.CHM(e),t.oxw().yStringify=r}),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("verticalLines",3)("horizontalLines",4)("axisXLabels",t.lcZ(2,23,e.labels$)||t.DdM(29,mt)),t.xp6(2),t.Q6J("value",e.value)("y",e.y)("height",e.height)("hintContent",e.hintContent)("xStringify",e.xStringify)("yStringify",e.yStringify)("smoothingFactor",e.smoothingFactor)("dots",e.dots),t.xp6(2),t.Q6J("documentationPropertyValue",e.dots),t.xp6(1),t.Q6J("documentationPropertyValues",t.lcZ(7,25,e.hintContentVariants$))("documentationPropertyValue",e.hintContent),t.xp6(2),t.Q6J("documentationPropertyValue",e.height),t.xp6(1),t.Q6J("documentationPropertyValue",e.y),t.xp6(1),t.Q6J("documentationPropertyValue",e.smoothingFactor),t.xp6(1),t.Q6J("documentationPropertyValues",e.valueVariants)("documentationPropertyValue",e.value),t.xp6(1),t.Q6J("documentationPropertyValues",t.lcZ(13,27,e.xStringifyVariants$))("documentationPropertyValue",e.xStringify),t.xp6(2),t.Q6J("documentationPropertyValues",e.yStringifyVariants)("documentationPropertyValue",e.yStringify)}}function ct(n,a){if(1&n&&(t.TgZ(0,"ol",14),t.TgZ(1,"li"),t.TgZ(2,"p"),t._uU(3," Import "),t.TgZ(4,"code"),t._uU(5,"TuiLineDaysChartModule"),t.qZA(),t._uU(6," into a module where you want to use our component "),t.qZA(),t._UZ(7,"tui-doc-code",15),t.qZA(),t.TgZ(8,"li"),t.TgZ(9,"p"),t._uU(10,"Add to the template:"),t.qZA(),t._UZ(11,"tui-doc-code",16),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(7),t.Q6J("code",e.exampleModule),t.xp6(4),t.Q6J("code",e.exampleHtml)}}let ht=(()=>{class n{constructor(e){this.months$=e,this.exampleModule=i.e(83405).then(i.t.bind(i,83405,17)),this.exampleHtml=i.e(42231).then(i.t.bind(i,42231,17)),this.example1={TypeScript:i.e(18807).then(i.t.bind(i,18807,17)),HTML:i.e(23889).then(i.t.bind(i,23889,17)),LESS:i.e(43743).then(i.t.bind(i,43743,17))},this.example2={TypeScript:i.e(28904).then(i.t.bind(i,28904,17)),HTML:i.e(66161).then(i.t.bind(i,66161,17)),LESS:i.e(27918).then(i.t.bind(i,27918,17)),"pipe.ts":i.e(9361).then(i.t.bind(i,9361,17))},this.valueVariants=[new Array(91).fill(0).reduce((o,r,l)=>[...o,[new u.TuiDay(2020,0,1).append({day:l}),(l?o[l-1][1]:100)+20*Math.random()-10]],[]),[[new u.TuiDay(2020,1,10),10],[new u.TuiDay(2020,1,15),150],[new u.TuiDay(2020,1,17),10],[new u.TuiDay(2020,1,20),10],[new u.TuiDay(2020,1,25),150],[new u.TuiDay(2020,1,27),10]]],this.value=this.valueVariants[0],this.labels$=this.months$.pipe((0,h.U)(o=>Array.from({length:3},(r,l)=>o[l]))),this.yStringifyVariants=[o=>`${(10*o).toLocaleString("en-US",{maximumFractionDigits:0})} $`],this.xStringifyVariants$=this.months$.pipe((0,h.U)(o=>[({month:r,day:l})=>`${o[r]}, ${l}`])),this.hintContentVariants$=this.months$.pipe((0,h.U)(o=>["",({$implicit:r})=>`${o[r[0].month]}, ${r[0].day}\n${(10*r[1]).toLocaleString("en-US",{maximumFractionDigits:0})} $`])),this.yStringify=null,this.xStringify=null,this.hintContent="",this.dots=!1,this.smoothingFactor=0,this.y=0,this.height=200}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.TUI_MONTHS))},n.\u0275cmp=t.Xpm({type:n,selectors:[["example-tui-line-days-chart"]],decls:4,vars:0,consts:[["header","LineDaysChart","package","ADDON-CHARTS","type","components"],["pageTab",""],["id","base","heading","Basic",3,"content"],["id","complex","heading","Complex",3,"content"],[1,"axes",3,"verticalLines","horizontalLines","axisXLabels"],[3,"value","y","height","hintContent","xStringify","yStringify","smoothingFactor","dots"],["documentationPropertyName","dots","documentationPropertyMode","input","documentationPropertyType","boolean",3,"documentationPropertyValue","documentationPropertyValueChange"],["documentationPropertyName","hintContent","documentationPropertyMode","input","documentationPropertyType","PolymorpheusContent",3,"documentationPropertyValues","documentationPropertyValue","documentationPropertyValueChange"],["documentationPropertyName","height","documentationPropertyMode","input","documentationPropertyType","number",3,"documentationPropertyValue","documentationPropertyValueChange"],["documentationPropertyName","y","documentationPropertyMode","input","documentationPropertyType","number",3,"documentationPropertyValue","documentationPropertyValueChange"],["documentationPropertyName","smoothingFactor","documentationPropertyMode","input","documentationPropertyType","number",3,"documentationPropertyValue","documentationPropertyValueChange"],["documentationPropertyName","value","documentationPropertyMode","input","documentationPropertyType","[TuiDay, number][]",3,"documentationPropertyValues","documentationPropertyValue","documentationPropertyValueChange"],["documentationPropertyName","xStringify","documentationPropertyMode","input","documentationPropertyType","TuiStringHandler<TuiDay> | null",3,"documentationPropertyValues","documentationPropertyValue","documentationPropertyValueChange"],["documentationPropertyName","yStringify","documentationPropertyMode","input","documentationPropertyType","TuiStringHandler<number> | null",3,"documentationPropertyValues","documentationPropertyValue","documentationPropertyValueChange"],[1,"b-demo-steps"],["filename","myComponent.module.ts",3,"code"],["filename","myComponent.template.html",3,"code"]],template:function(e,o){1&e&&(t.TgZ(0,"tui-doc-page",0),t.YNc(1,et,6,2,"ng-template",1),t.YNc(2,pt,15,30,"ng-template",1),t.YNc(3,ct,12,2,"ng-template",1),t.qZA())},directives:[E.q,N.n,U.f,c,s,K.F,P.v,D.r,q.z,k.B,tt.c],pipes:[p.Ov],styles:[".axes[_ngcontent-%COMP%]{height:12.5rem;width:45.5rem;color:#bc71c9}"],changeDetection:0}),n})(),gt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[p.ez,x.u5,L.TuiAxesModule,M.TuiSelectModule,L.TuiLineChartModule,u.TuiMapperPipeModule,f.TuiNotificationModule,u.TuiFilterPipeModule,L.TuiLineDaysChartModule,M.TuiInputDateRangeModule,_.fV,S.Bz.forChild((0,_.Ve)(ht))]]}),n})()}}]);