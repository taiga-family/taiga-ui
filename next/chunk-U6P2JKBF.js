import{a as Se,c as Ee,d as ve,e as we,f as De,g as Me,h as $e,i as Be,l as Ae,n as Pe,o as Ve,p as Ie,q as Fe,s as ke}from"./chunk-TD5NBRZT.js";import"./chunk-KLP47EPH.js";import"./chunk-5FX3OVV7.js";import"./chunk-LU7CBR4B.js";import"./chunk-I5LWB4S2.js";import"./chunk-XSKI6CJM.js";import"./chunk-WXATT26L.js";import{e as Ce}from"./chunk-M3O4U27T.js";import"./chunk-RGGRH4AH.js";import"./chunk-VOVEQFEX.js";import{n as xe}from"./chunk-W7YVVRDW.js";import"./chunk-QLHTNIA4.js";import"./chunk-6AB27KFS.js";import"./chunk-H2Y3F5K4.js";import"./chunk-WVLZY2VJ.js";import"./chunk-5PDJBRUV.js";import"./chunk-2OM3EOCG.js";import"./chunk-UPB2PGRI.js";import"./chunk-NG54SK4A.js";import{b as ue}from"./chunk-NJ5A4VKE.js";import"./chunk-SFTRSDVA.js";import"./chunk-VXNUFRZP.js";import{b as _e}from"./chunk-L6M7T63J.js";import"./chunk-NZOLJCID.js";import{h as be}from"./chunk-B35PXKDE.js";import"./chunk-LZR367OU.js";import{a as fe}from"./chunk-SERSYTZ5.js";import{c as ge,e as he,l as Te}from"./chunk-6LB7V6MU.js";import"./chunk-BRT4EC2V.js";import"./chunk-FTCBM4DE.js";import"./chunk-EBHFP2TI.js";import{p as me,u as ce}from"./chunk-ZWWLGUVR.js";import{fa as se}from"./chunk-SDK4LXDJ.js";import"./chunk-LL2PODKS.js";import"./chunk-KFO6RLOG.js";import"./chunk-YKUD726V.js";import"./chunk-ENZR5XDR.js";import"./chunk-S4NBTRTG.js";import"./chunk-5PABLJY7.js";import"./chunk-SXUQLDLW.js";import{n as ye}from"./chunk-FDI6E7EX.js";import"./chunk-XPB6YNIV.js";import"./chunk-XHQXVLHQ.js";import"./chunk-PIT57PTL.js";import"./chunk-OBPPGIVQ.js";import{I as pe,M as de,R as $,f as X,u as Z}from"./chunk-TQEODDI3.js";import"./chunk-KWZHGPWS.js";import{C as re,D as le,b as ee,c as te,h as ie,l as ne,m as oe,q as ae}from"./chunk-TDHYON55.js";import{q as Q}from"./chunk-GOJWO2R3.js";import{Ac as v,Bc as m,Cb as r,F as J,J as P,La as g,Lc as K,Ma as h,Mc as d,Oc as T,Q as V,Qc as w,Rc as D,Sc as M,Tb as O,Tc as j,Xc as G,Zb as x,cd as u,dd as _,ea as N,fc as p,hc as S,ia as C,id as Y,j as b,ja as W,kc as U,mc as q,na as L,nc as H,oc as R,pc as l,qc as o,rc as z,vc as E,x as f,y as k}from"./chunk-2UPKG2B4.js";import"./chunk-B4AJQJMI.js";var We=()=>({precision:0});function Le(i,t){if(i&1){let e=E();l(0,"tui-reorder",11),M("itemsChange",function(a){g(e);let s=m();return D(s.initial,a)||(s.initial=a),h(a)}),v("enabledChange",function(a){g(e);let s=m();return h(s.onEnabled(a))}),o()}if(i&2){let e=m();p("enabled",e.enabled),w("items",e.initial)}}function Oe(i,t){i&1&&(l(0,"th",20),d(1," Name "),o()),i&2&&p("requiredSort",!0)}function Ue(i,t){if(i&1&&(l(0,"th",21),d(1," Date of Birth "),o()),i&2){let e=m(2);p("tuiSortable",e.dob)}}function qe(i,t){i&1&&(l(0,"th",20),d(1," Age "),o()),i&2&&p("requiredSort",!0)}function He(i,t){if(i&1&&(l(0,"td",23),d(1),o()),i&2){let e=m().$implicit,n=m(2);S("match",n.isMatch(e.name)),r(),T(" ",e.name," ")}}function Re(i,t){if(i&1&&(l(0,"td",23),d(1),o()),i&2){let e=m().$implicit,n=m(2);S("match",n.isMatch(e.dob)),r(),T(" ",e.dob," ")}}function ze(i,t){if(i&1&&(l(0,"td",23),d(1),o()),i&2){let e=m().$implicit,n=m(2);S("match",n.isMatch(e.age)),r(),T(" ",e.age," ")}}function Ke(i,t){i&1&&(l(0,"tr",17),x(1,He,2,3,"td",22)(2,Re,2,3,"td",22)(3,ze,2,3,"td",22),o()),i&2&&(r(),p("tuiCell","name"),r(),p("tuiCell","dob"),r(),p("tuiCell","age"))}function je(i,t){if(i&1){let e=E();l(0,"table",12),u(1,"async"),u(2,"async"),v("tuiSortChange",function(a){g(e);let s=m();return h(s.change(a))}),l(3,"thead")(4,"tr",13),x(5,Oe,2,1,"th",14)(6,Ue,2,1,"th",15)(7,qe,2,1,"th",14),o()(),j(8),u(9,"tuiTableSort"),l(10,"tbody",16),H(11,Ke,4,3,"tr",17,q),o(),l(13,"tfoot")(14,"tr")(15,"td",18)(16,"tui-table-pagination",19),u(17,"async"),u(18,"async"),v("paginationChange",function(a){g(e);let s=m();return h(s.onPagination(a))}),o()()()()()}if(i&2){let e,n=m();p("columns",n.columns)("direction",(e=_(1,10,n.direction$))!==null&&e!==void 0?e:-1)("tuiSortBy",_(2,12,n.sortKey$)),r(5),p("tuiHead","name"),r(),p("tuiHead","dob"),r(),p("tuiHead","age");let a=_(9,14,t);r(3),p("data",a),r(),R(a),r(4),p("colSpan",n.columns.length),r(),p("page",_(17,16,n.page$)||0)("total",_(18,18,n.total$)||0)}}var B=ye.currentLocal(),Ge=["John","Jane","Jack","Jill","James","Joan","Jim","Julia","Joe","Julia"],Ye=["Smith","West","Brown","Jones","Davis","Miller","Johnson","Jackson","Williams","Wilson"],Qe=Array.from({length:300},()=>{let i=B.append({day:-Math.floor(Math.random()*4e3)-7500}),t=et(i);return{name:`${Ye[Math.floor(Math.random()*10)]}, ${Ge[Math.floor(Math.random()*10)]}`,dob:i,age:t}}),Xe={Name:"name",Age:"age","Date of Birth":"dob"};function Ze(i,t){return(e,n)=>t*de(e[i],n[i])}function et(i){let t=B.year-i.year,e=B.month-i.month,n=B.day-i.day,a=pe(e>0||!e&&n>9);return t+a}var y=class y{constructor(){this.size$=new b(10);this.page$=new b(0);this.direction$=new b(we.Desc);this.sortKey$=new b("name");this.minAge=new ne(21);this.minAge$=Z(this.minAge).pipe(V(1e3),L(()=>this.page$.next(0)));this.request$=k([this.sortKey$,this.direction$,this.page$,this.size$,this.minAge$]).pipe(V(0),W(t=>this.getData(...t).pipe(C(null))),N());this.initial=["Name","Date of Birth","Age"];this.enabled=this.initial;this.columns=["name","dob","age"];this.dob=!1;this.search="";this.loading$=this.request$.pipe(f(t=>!t));this.total$=this.request$.pipe(P($),f(({length:t})=>t),C(1));this.data$=this.request$.pipe(P($),f(t=>t.filter($)),C([]))}onEnabled(t){this.enabled=t,this.columns=this.initial.filter(e=>t.includes(e)).map(e=>Xe[e]??"")}onPagination({page:t,size:e}){this.page$.next(t),this.size$.next(e)}isMatch(t){return!!this.search&&X(t,this.search)}change({sortKey:t,sortDirection:e}){this.sortKey$.next(t),this.direction$.next(e)}getData(t,e,n,a,s){console.info(`Sort by ${t} , direction : ${e}`);let c=n*a,Je=c+a,Ne=[...Qe].sort(Ze(t,e)).filter(A=>A.age>=s).map((A,F)=>F>=c&&F<Je?A:null);return J(Math.random()*1e3+1e3).pipe(f(()=>Ne))}};y.\u0275fac=function(e){return new(e||y)},y.\u0275cmp=O({type:y,selectors:[["ng-component"]],decls:30,vars:19,consts:[["dropdown",""],["tuiTextfieldSize","m",1,"filters"],[1,"input"],["tuiLabel",""],["tuiInput","",3,"ngModelChange","ngModel"],["tuiInputNumber","",3,"formControl","tuiNumberFormat"],[1,"filters"],["tuiCheckbox","","type","checkbox",3,"ngModelChange","ngModel"],["size","m","tuiButton","","tuiChevron","","tuiDropdownAuto","","type","button",3,"tuiDropdown"],[3,"loading","overlay"],["tuiTable","",1,"table",3,"columns","direction","tuiSortBy"],[1,"columns",3,"itemsChange","enabledChange","enabled","items"],["tuiTable","",1,"table",3,"tuiSortChange","columns","direction","tuiSortBy"],["tuiThGroup",""],["tuiSortable","","tuiTh","",3,"requiredSort",4,"tuiHead"],["tuiTh","",3,"tuiSortable",4,"tuiHead"],["tuiTbody","",3,"data"],["tuiTr",""],[3,"colSpan"],[1,"tui-space_top-2",3,"paginationChange","page","total"],["tuiSortable","","tuiTh","",3,"requiredSort"],["tuiTh","",3,"tuiSortable"],["tuiTd","",3,"match",4,"tuiCell"],["tuiTd",""]],template:function(e,n){if(e&1){let a=E();l(0,"p",1)(1,"tui-textfield",2)(2,"label",3),d(3,"Find on page"),o(),l(4,"input",4),M("ngModelChange",function(c){return g(a),D(n.search,c)||(n.search=c),h(c)}),o()(),l(5,"tui-textfield")(6,"label",3),d(7,"Minimum age"),o(),z(8,"input",5),o()(),l(9,"p",6)(10,"label",3)(11,"input",7),M("ngModelChange",function(c){return g(a),D(n.dob,c)||(n.dob=c),h(c)}),o(),d(12," Enable sorting by DOB "),o(),l(13,"button",8),d(14," Columns "),o(),x(15,Le,1,2,"ng-template",null,0,Y),o(),l(17,"tui-loader",9),u(18,"async"),l(19,"p")(20,"b"),d(21,"Sort key:"),o(),d(22),u(23,"async"),l(24,"b"),d(25,"direction:"),o(),d(26),u(27,"async"),o(),x(28,je,19,20,"table",10),u(29,"async"),o()}if(e&2){let a,s=K(16);r(4),w("ngModel",n.search),r(4),p("formControl",n.minAge)("tuiNumberFormat",G(18,We)),r(3),w("ngModel",n.dob),r(2),p("tuiDropdown",s),r(4),p("loading",!!_(18,10,n.loading$))("overlay",!0),r(5),T(" ",_(23,12,n.sortKey$),", "),r(4),T(" ",_(27,14,n.direction$)," "),r(2),U((a=_(29,16,n.data$))?28:-1,a)}},dependencies:[Q,re,te,ee,ie,oe,le,ae,se,be,ue,me,ce,he,Te,ge,fe,xe,_e,Ce,Se,De,Ie,Fe,Me,Pe,Ve,Ee,ve,Be,$e,Ae,ke],styles:[".table[_ngcontent-%COMP%]{inline-size:100%}.filters[_ngcontent-%COMP%]{display:flex;gap:1rem;white-space:nowrap;align-items:center}.input[_ngcontent-%COMP%]{flex:1}.columns[_ngcontent-%COMP%]{inline-size:10.625rem}.match[_ngcontent-%COMP%]{background:var(--tui-service-selection-background)}"],changeDetection:0});var I=y;export{I as default};
