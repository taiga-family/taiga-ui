import{a as ie,b as oe,f as I,g as ne}from"./chunk-UV7DBDNA.js";import{a as te,c as ee}from"./chunk-7573RU7O.js";import{b as Gt}from"./chunk-LBVBEC65.js";import{i as Xt}from"./chunk-ZNAFFE7Y.js";import{b as Jt}from"./chunk-EFYFB7HS.js";import{l as j,q as Zt}from"./chunk-OTWUVAPV.js";import{n as Kt}from"./chunk-FZ5GKFYF.js";import{F as Qt,g as qt}from"./chunk-26XHHYEI.js";import{K as Vt,fa as Nt,na as Mt,oa as $t,qa as zt}from"./chunk-3VEQMH2R.js";import{e as kt}from"./chunk-KFO6RLOG.js";import{a as Yt}from"./chunk-QARATVCH.js";import{$a as Wt,Ea as At,Oa as Ft,Va as jt,Wa as $,Za as Bt,_a as Ut,ab as Lt,va as Ht,y as Rt}from"./chunk-QUTX6DZN.js";import{a as Ot,f as It,h as Pt,j as Dt}from"./chunk-KWZHGPWS.js";import{g as Et}from"./chunk-TDHYON55.js";import{a as J,p as St,w as wt}from"./chunk-GOJWO2R3.js";import{Ac as y,Bb as w,Bc as r,Cb as a,Cc as ut,Dc as mt,Eb as L,Ic as dt,J as et,Ka as nt,Kc as _t,La as d,Ma as _,Mb as rt,Mc as m,Nc as g,Oc as O,Qc as ft,Rc as ht,Sc as yt,Tb as C,Tc as Ct,Uc as xt,Vb as N,Vc as z,Wc as Tt,Xc as vt,Yb as at,Yc as gt,Zb as u,_a as S,cd as K,ed as q,fc as h,kc as f,ld as bt,mc as x,nc as T,oc as v,pc as p,qc as c,rc as k,sc as st,ta as it,tc as lt,uc as pt,ud as M,vc as F,wa as ot,wc as ct,x as tt,za as l}from"./chunk-2UPKG2B4.js";var re=new ot("[WA_DOCUMENT_PIP]",{factory:()=>l(It).documentPictureInPicture??null});function se(o,e){if(o&1&&(st(0),m(1),lt()),o&2){let t=e.polymorpheusOutlet;a(),O(" ",t," ")}}var P=class P{constructor(){this.context=$()}};P.\u0275fac=function(t){return new(t||P)},P.\u0275cmp=C({type:P,selectors:[["ng-component"]],decls:2,vars:2,consts:[[4,"polymorpheusOutlet","polymorpheusOutletContext"]],template:function(t,i){t&1&&(p(0,"tui-root"),u(1,se,2,1,"ng-container",0),c()),t&2&&(a(),h("polymorpheusOutlet",i.context.content)("polymorpheusOutletContext",i.context))},dependencies:[Bt,Xt],encapsulation:2});var B=P;var D=class D{constructor(){this.pip=l(re);this.context=$();this.doc=l(J);this.options=l(Mt);this.popout=null}ngOnInit(){this.context.pip&&this.pip?this.pip.requestWindow(this.context.features).then(e=>this.process(e)).catch(e=>{throw this.context.$implicit.complete(),e}):this.process(this.doc.defaultView?.open("","_blank",Object.entries(this.context.features).map(([e,t])=>`${e}=${t}`).concat(this.context.pip?"popup":[]).join(",")))}ngOnDestroy(){this.popout?.close()}process(e){if(!e){this.context.$implicit.complete();return}this.popout=e,this.popout.document.write(`
          <!doctype html>
          <html lang="${this.doc.documentElement.getAttribute("lang")||"en"}">
            <head>
              <meta charset="utf-8" />
              <meta name="viewport" content="width=device-width,initial-scale=1" />
            </head>
            <body></body>
          </html>
        `),this.popout.document.title=this.context.title,this.popout.document.close(),this.doc.head.querySelectorAll('base, style, link[rel="stylesheet"]').forEach(i=>this.popout?.document.head.append(i.cloneNode(!0)));let t=[$t(this.options),jt(this.context),{provide:J,useValue:this.popout.document},bt()];kt({providers:t}).then(i=>{let n=i.bootstrap(B,this.popout?.document.body),s=()=>this.popout?.close();this.doc.defaultView?.addEventListener("pagehide",s),this.popout?.addEventListener("pagehide",()=>{this.context.$implicit.complete(),n.destroy(),i.destroy(),this.doc.defaultView?.removeEventListener("pagehide",s)})}).catch(i=>{throw this.context.$implicit.complete(),i})}};D.\u0275fac=function(t){return new(t||D)},D.\u0275cmp=C({type:D,selectors:[["ng-component"]],decls:0,vars:0,template:function(t,i){},encapsulation:2,changeDetection:0});var G=D,b=class b extends Ut{constructor(){super(l(zt));this.component=G;this.options={title:"",features:{},pip:!1}}};b.\u0275fac=function(i){return new(i||b)},b.\u0275prov=it({token:b,factory:b.\u0275fac,providedIn:"root"});var U=b;var E=class E{constructor(){this.tuiPopoutOptions=S({})}};E.\u0275fac=function(t){return new(t||E)},E.\u0275dir=N({type:E,selectors:[["ng-template","tuiPopout",""]],inputs:{tuiPopoutOptions:[1,"tuiPopoutOptions"]},features:[Tt([Wt(U)]),at([{directive:Lt,inputs:["options","tuiPopoutOptions","open","tuiPopout"],outputs:["openChange","tuiPopoutChange"]}])]});var ae=E;var[W,ei]=At({key:"taiga-search-history",history:"@tui.clock",popular:"@tui.search",empty:"@tui.search",remove:"@tui.trash"});function le(o,e){if(o&1&&(p(0,"label",0),m(1),c()),o&2){let t=r();a(),g(t.i18n().history)}}function pe(o,e){if(o&1){let t=F();p(0,"button",2),y("click",function(){let n=d(t).$implicit,s=r();return _(s.select(n))})("keydown.backspace",function(){let n=d(t).$implicit,s=r();return _(s.remove(n))})("keydown.delete",function(){let n=d(t).$implicit,s=r();return _(s.remove(n))})("mousedown.prevent",function(){return d(t),_(0)}),k(1,"div",3),p(2,"span",4),m(3),c(),p(4,"button",5),y("click.stop",function(){let n=d(t).$implicit,s=r();return _(s.remove(n))}),m(5," \u{1F5D1}\uFE0F "),c()()}if(o&2){let t=e.$implicit,i=r();a(),h("tuiAvatar",i.options.history),a(2),g(t),a(),h("iconStart",i.options.remove)}}function ce(o,e){if(o&1&&(p(0,"label",0),m(1),c()),o&2){let t=r();a(),g(t.i18n().popular)}}function ue(o,e){if(o&1){let t=F();p(0,"button",6),y("click",function(){let n=d(t).$implicit,s=r();return _(s.select(n))})("mousedown.prevent",function(){return d(t),_(0)}),k(1,"span",3),p(2,"span",4),m(3),c()()}if(o&2){let t=e.$implicit,i=r();a(),h("tuiAvatar",i.options.popular),a(2),g(t)}}var R=class R{constructor(){this.textfield=l(j);this.storage=l(Pt);this.control=l(Et);this.close=l(Vt);this.i18n=l(I);this.options=l(W);this.$=this.control.valueChanges?.pipe(tt(String),et(e=>!!e&&!this.popular().includes(e)),Ot()).subscribe(e=>{this.store(e)});this.history=this.items;this.popular=S([])}store(e){this.storage?.setItem(this.options.key,JSON.stringify(Array.from(new Set([e.trim(),...this.items])).filter((t,i,n)=>t&&!n.find(s=>s.startsWith(t)&&s!==t)).slice(0,5)))}remove(e){this.textfield.input()?.nativeElement.focus(),this.history=this.history.filter(t=>t!==e),this.storage?.setItem(this.options.key,JSON.stringify(this.items.filter(t=>t!==e)))}select(e){this.control.control?.setValue(e),this.textfield.input()?.nativeElement.focus()}get items(){return JSON.parse(this.storage?.getItem(this.options.key)||"[]")}};R.\u0275fac=function(t){return new(t||R)},R.\u0275cmp=C({type:R,selectors:[["tui-search-history"]],inputs:{popular:[1,"popular"]},decls:6,vars:2,consts:[[1,"t-sr-label"],["tuiCell","","type","button"],["tuiCell","","type","button",3,"click","keydown.backspace","keydown.delete","mousedown.prevent"],[3,"tuiAvatar"],["tuiTitle",""],["appearance","icon","size","xs","tabindex","-1","tuiIconButton","","type","button",3,"click.stop","iconStart"],["tuiCell","","type","button",3,"click","mousedown.prevent"]],template:function(t,i){t&1&&(u(0,le,2,1,"label",0),T(1,pe,6,3,"button",1,x),u(3,ce,2,1,"label",0),T(4,ue,4,2,"button",1,x)),t&2&&(f(i.history.length?0:-1),a(),v(i.history),a(2),f(i.popular().length?3:-1),a(),v(i.popular()))},dependencies:[Gt,Nt,Qt,Kt],styles:["[_nghost-%COMP%]:not(:empty){display:block;padding:.375rem 0}"],changeDetection:0});var Z=R;var H=class H{constructor(){this.platform=l(Dt).platform;this.texts=l(I);this.search=l(ne);this.placeholder=M(({hotkey:e}=this.texts())=>this.platform.startsWith("Mac")?`\u2318+K ${e}`:`Alt+K ${e}`)}};H.\u0275fac=function(t){return new(t||H)},H.\u0275dir=N({type:H,selectors:[["input","tuiSearchHotkey",""]],hostVars:1,hostBindings:function(t,i){t&1&&y("keydown.meta.k.stop",function(){return i.search.open()},!1,w)("keydown.alt.k.stop",function(){return i.search.open()},!1,w),t&2&&ct("placeholder",i.placeholder())}});var X=H;var me=["*"],de=()=>[],_e=o=>({$implicit:o});function fe(o,e){o&1&&mt(0)}function he(o,e){o&1&&k(0,"tui-loader",0)}function ye(o,e){if(o&1&&(p(0,"tui-block-status",1),k(1,"tui-icon",2),m(2),c()),o&2){let t=r(3);a(),h("icon",t.options.empty),a(),O(" ",t.i18n().empty," ")}}function Ce(o,e){if(o&1&&(p(0,"label",5),m(1),c()),o&2){let t=r(2).$implicit;a(),O(" ",t.key," ")}}function xe(o,e){if(o&1&&pt(0,6),o&2){let t=e.$implicit,i=r(6);h("ngTemplateOutlet",i.template()||null)("ngTemplateOutletContext",gt(2,_e,t))}}function Te(o,e){if(o&1&&(u(0,Ce,2,1,"label",5),T(1,xe,1,4,"ng-container",6,x)),o&2){let t=r().$implicit;r();let i=z(0),n=r(3);f(!n.active&&i.length>1?0:-1),a(),v(t.value)}}function ve(o,e){if(o&1&&u(0,Te,3,1),o&2){let t=e.$index,i=r(4);f(!i.active||i.active===t+1?0:-1)}}function ge(o,e){if(o&1&&(p(0,"button",8),m(1),c()),o&2){let t=r().$implicit;a(),O(" ",t.key," ")}}function be(o,e){if(o&1&&u(0,ge,2,1,"button",8),o&2){let t=e.$implicit;f(t.value.length?0:-1)}}function Se(o,e){if(o&1){let t=F();p(0,"tui-tabs",7),yt("activeItemIndexChange",function(n){d(t);let s=r(4);return ht(s.active,n)||(s.active=n),_(n)}),y("keydown.shift.tab.prevent",function(){d(t);let n=r(4);return _(n.tab(-1))},!1,w)("keydown.tab.prevent",function(){d(t);let n=r(4);return _(n.tab(1))},!1,w),p(1,"button",8),m(2),c(),T(3,be,1,1,null,null,x),c()}if(o&2){r();let t=z(0),i=r(3);ft("activeItemIndex",i.active),a(2),g(i.i18n().all),a(),v(t)}}function we(o,e){if(o&1&&(Ct(0),K(1,"keyvalue"),p(2,"tui-scrollbar",3),T(3,ve,1,1,null,null,x),K(5,"tuiFilter"),c(),u(6,Se,5,2,"tui-tabs",4)),o&2){let t=r(3),i=xt(q(1,1,t.results(),t.asIs)||vt(8,de));a(3),v(q(5,5,i,t.notEmpty)),a(3),f(i.length>1?6:-1)}}function ke(o,e){if(o&1&&u(0,ye,3,2,"tui-block-status",1)(1,we,7,9),o&2){let t=r(2);f(t.empty()?0:1)}}function Oe(o,e){if(o&1&&u(0,he,1,0,"tui-loader",0)(1,ke,2,1),o&2){let t=r();f(t.results()?1:0)}}var A=class A{constructor(){this.el=Ht();this.options=l(W);this.i18n=l(I);this.textfield=l(j);this.active=0;this.empty=M((e=this.results()||{})=>!Object.values(e).reduce((t,{length:i})=>i+t,0));this.template=rt(L);this.results=S({})}ngOnChanges(){this.active=0}onArrow(e,t){let i=Array.from(this.el.querySelectorAll("[tuiCell]"));i[0]===e&&t<0?this.textfield.input()?.nativeElement.focus():Ft(i.indexOf(e),i,t)}tab(e){let t=Object.values(this.results()||{}).filter(i=>i.length).length;this.active=Rt(this.active+e,0,t),this.textfield.input()?.nativeElement.focus()}notEmpty({value:e}){return!!e.length}asIs(){return 0}};A.\u0275fac=function(t){return new(t||A)},A.\u0275cmp=C({type:A,selectors:[["tui-search-results"]],contentQueries:function(t,i,n){t&1&&dt(n,i.template,L,5),t&2&&_t()},hostBindings:function(t,i){t&1&&y("keydown.arrowDown.prevent",function(s){return i.onArrow(s.target,1)})("keydown.arrowUp.prevent",function(s){return i.onArrow(s.target,-1)})},inputs:{results:[1,"results"]},features:[nt],ngContentSelectors:me,decls:2,vars:1,consts:[[1,"t-loader"],["size","m",1,"t-status"],["tuiSlot","top",1,"t-empty",3,"icon"],[1,"t-scrollbar"],["size","m",1,"t-tabs",3,"activeItemIndex"],[1,"t-sr-label"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["size","m",1,"t-tabs",3,"activeItemIndexChange","keydown.shift.tab.prevent","keydown.tab.prevent","activeItemIndex"],["tuiTab",""]],template:function(t,i){t&1&&(ut(),u(0,fe,1,0)(1,Oe,2,1)),t&2&&f(i.textfield.value()?1:0)},dependencies:[wt,St,ie,oe,Yt,Zt,Jt,qt,te,ee],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;border-radius:var(--tui-radius-l);background:var(--tui-background-base);box-shadow:inset 0 0 0 1px var(--tui-border-normal)}[_nghost-%COMP%]     [tuiCell]{inline-size:calc(100% - 2rem);padding:.375rem;margin:.25rem .625rem;border-radius:var(--tui-radius-l)}[_nghost-%COMP%]     [tuiCell]>[tuiAvatar]{border-radius:var(--tui-radius-m)}[_nghost-%COMP%]     .t-sr-label{display:block;font:var(--tui-typography-ui-s);color:var(--tui-text-secondary);margin:.75rem 1rem .5rem}.t-loader[_ngcontent-%COMP%]{margin:1rem 0}.t-status[_ngcontent-%COMP%]{margin-block-end:2rem}.t-empty[_ngcontent-%COMP%]{margin-block-start:1.5rem;font-size:6rem;color:var(--tui-text-primary)}.t-tabs[_ngcontent-%COMP%]{order:-1;margin:0 1rem;box-shadow:none;border-image:linear-gradient(0deg,var(--tui-border-normal) 1px,transparent 0) fill 0/0/0 1rem}.t-tabs[_ngcontent-%COMP%]:before{background:var(--tui-background-accent-opposite-pressed)}.t-scrollbar[_ngcontent-%COMP%]{max-block-size:30rem;padding:.375rem 0}"],changeDetection:0});var Y=A;export{re as a,U as b,ae as c,Z as d,X as e,Y as f};
