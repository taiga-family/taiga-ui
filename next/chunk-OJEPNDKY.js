import{a as P}from"./chunk-ZCNI33DW.js";import{i as A}from"./chunk-CKMEZIS7.js";import{c as N}from"./chunk-TUF2O6IU.js";import"./chunk-QYE6BRLY.js";import"./chunk-VJ5NJ5G6.js";import"./chunk-CJ4EEFLC.js";import"./chunk-SVUVAGA5.js";import"./chunk-HZY6KHTL.js";import"./chunk-B4FURJ5X.js";import"./chunk-7UGDNWOL.js";import"./chunk-WWLTLNBB.js";import"./chunk-AVZQ5FYG.js";import"./chunk-3K5B6ZFJ.js";import{a as x}from"./chunk-KP7R4XHG.js";import{J as j,x as w}from"./chunk-ZMN4OL6F.js";import{B as I,C as _}from"./chunk-77D46EB5.js";import"./chunk-VFUWH7UJ.js";import"./chunk-2MFSAHCZ.js";import"./chunk-ZZDBPDL5.js";import"./chunk-VYGUMXCT.js";import{n as O}from"./chunk-GXOFTGOU.js";import"./chunk-7UWLURE4.js";import{f as T}from"./chunk-PG52RPMH.js";import"./chunk-CECFGQK2.js";import"./chunk-ESL4LT5Z.js";import"./chunk-4H5JC6OQ.js";import"./chunk-MFXAPE46.js";import"./chunk-OOOGG2EO.js";import{c as k,i as C}from"./chunk-3JGTWRRM.js";import{b as E}from"./chunk-2NNJ62PY.js";import"./chunk-SRPRK7WC.js";import"./chunk-JNMFWLAQ.js";import"./chunk-G7V5KCZI.js";import"./chunk-XNOQ4KC2.js";import"./chunk-KYPSXI7P.js";import{i as h,n as M}from"./chunk-EOY6USMZ.js";import"./chunk-355QVY7S.js";import"./chunk-643UB756.js";import"./chunk-KI2HOOVL.js";import"./chunk-LL2PODKS.js";import"./chunk-QIT36Q2X.js";import"./chunk-KSA22X47.js";import"./chunk-XO7RFL6W.js";import"./chunk-HRKWSBLS.js";import"./chunk-S7AVUTSU.js";import"./chunk-NRW7GMFX.js";import"./chunk-DIP5DK36.js";import"./chunk-HXK3GUMY.js";import"./chunk-GSIOPKQB.js";import"./chunk-RIDLJBE2.js";import{s as f}from"./chunk-776UH3NW.js";import{B as S,b as y,h as v,m as b}from"./chunk-2ZAJENVJ.js";import"./chunk-U7E5I6OK.js";import"./chunk-A5CZPNGX.js";import{Cb as a,Mc as e,Oc as d,Pc as g,Tb as p,fc as o,pc as t,qc as i,rc as n,wb as u}from"./chunk-AXUCSVX7.js";import"./chunk-B4AJQJMI.js";var l=class l{constructor(){this.tuiMajor=parseInt(f);this.routes=x;this.runMigration=import("./chunk-WBXTCMH5.js");this.manuallyTriggerNxMigration=import("./chunk-MPKP7QHI.js").then(s=>({default:s.default.replace("x.x.x",`${this.tuiMajor-1}.0.0`)}))}};l.\u0275fac=function(m){return new(m||l)},l.\u0275cmp=p({type:l,selectors:[["ng-component"]],decls:213,vars:19,consts:[[3,"header"],["appearance","custom","tuiCardLarge",""],["tuiHeader",""],["tuiTitle",""],["tuiCheckbox","","type","checkbox",3,"ngModel"],["target","_blank","tuiLink","",3,"href"],[3,"code","lineNumbers"],["href","https://github.com/taiga-family/taiga-ui/tree/main/projects/legacy","target","_blank","tuiLink",""],["id","unused-imports","tuiAccordion","","tuiAccordionTarget",""],["appearance","neutral","iconStart","@tui.circle-question-mark","size","l","tuiBadge",""],["icon","","size","l","tuiNotification",""],["href","https://blog.jetbrains.com/webstorm/2018/05/optimize-imports-in-webstorm/#optimize-all-imports","target","_blank","tuiLink",""],["href","https://marketplace.visualstudio.com/items?itemName=bierner.folder-source-actions","target","_blank","tuiLink",""],["href","https://code.visualstudio.com/docs/languages/javascript#_organize-imports","target","_blank","tuiLink",""],["id","manual-install-transitive-peer-deps","tuiAccordion","","tuiAccordionTarget",""],["tuiLink","",3,"routerLink"],["id","nx-legacy-peer-deps-bug","tuiAccordion","","tuiAccordionTarget",""],["href","https://github.com/nrwl/nx/issues/26675","target","_blank","tuiLink",""],["code","npm_config_legacy_peer_deps=false nx migrate --run-migrations",1,"tui-space_top-2"],["id","heap-out-of-memory","tuiAccordion","","tuiAccordionTarget",""],[1,"tui-space_bottom-4"],["icon","","tuiNotification",""],["code","NODE_OPTIONS=--max-old-space-size=8192 nx migrate --run-migrations"],["href","https://github.com/taiga-family/taiga-ui/issues/new?template=1-bug-report.yml","target","_blank","tuiLink",""],["id","manual-run-schematics","tuiAccordion","","tuiAccordionTarget",""],[1,"tui-list","tui-list_ordered"],[1,"tui-list__item"],[3,"code"]],template:function(m,r){m&1&&(t(0,"tui-doc-page",0)(1,"div",1)(2,"header",2)(3,"h1",3),e(4,"Before you update"),i()(),t(5,"footer")(6,"label"),n(7,"input",4),e(8," Use Node.js LTS, NPM v10 or higher. "),i(),t(9,"label"),n(10,"input",4),e(11," Update Taiga UI version to "),t(12,"a",5),e(13),i()(),t(14,"label"),n(15,"input",4),e(16," Update Angular version to v19 or higher. "),i(),t(17,"label"),n(18,"input",4),e(19," Ensure Prettier\u2019s endOfLine option is set to auto for fix some issues with end of line after migration. "),i()()(),t(20,"div",1)(21,"header",2)(22,"h1",3),e(23,"Update to the new version"),i()(),t(24,"footer")(25,"label"),n(26,"input",4),e(27," Run migration schematics "),i(),n(28,"tui-doc-code",6),t(29,"label"),n(30,"input",4),t(31,"span"),e(32," Review all changed code lines. Some of them contain new code comments (something like "),t(33,"code"),e(34,"// TODO: (Taiga UI migration)"),i(),e(35," ). In most cases these comments contain instructions how to manually migrate some deleted entities by new alternative. "),i()(),t(36,"label"),n(37,"input",4),t(38,"span"),e(39," You can find out that your codebase now contains some imports from "),t(40,"code")(41,"a",7),e(42," @taiga-ui/legacy "),i()(),e(43),t(44,"code"),e(45,"@deprecated"),i(),e(46," tag (most IDEs displays the such entities as stricken-through). We strongly recommend to replace them by new alternatives as soon as possible! "),i()()()(),t(47,"div",1)(48,"header",2)(49,"h1",3),e(50,"Troubleshooting"),i()(),t(51,"footer")(52,"tui-accordion")(53,"button",8),n(54,"tui-icon",9),t(55,"div"),e(56," After running the migration schematics, I have a large amount of TypeScript errors "),t(57,"code"),e(58,"TS6133: <entityName> is declared but its value is never read."),i()()(),t(59,"tui-expand")(60,"div",10),e(61," We don't include any code formatting in our schematics on purpose. Otherwise, it will drastically slow down the overall process of schematics execution. So, "),t(62,"strong"),e(63,"use well-optimized prettier/eslint rules and power of your IDEs"),i(),e(64," . "),t(65,"p")(66,"u"),e(67,"If you are WebStorm user."),i(),e(68," Just make right click on the root folder with the codebase of your recently migrated application. Choose "),t(69,"a",11)(70,"i"),e(71,'"Optimize\xA0imports"'),i()(),e(72," from the context menu. It will automatically remove all unused imports across all the files in that folder. "),i(),t(73,"u"),e(74,"If you are Visual Studio Code user."),i(),e(75," Use an "),t(76,"a",12),e(77," Folder\xA0source\xA0actions "),i(),e(78," extension to trigger built-in "),t(79,"a",13)(80,"i"),e(81,"Organize Imports"),i()(),e(82," action in all files recursively in the root folder with the codebase of your recently migrated application. "),i()()(),t(83,"tui-accordion")(84,"button",14),n(85,"tui-icon",9),t(86,"div"),e(87," I use Yarn or cannot get rid of "),t(88,"code"),e(89,"legacy-peer-deps"),i(),e(90," and I need a workaround. Or, I ran "),t(91,"code"),e(92,"npm install"),i(),e(93," and got "),t(94,"code"),e(95,"Could not resolve dependency"),i(),e(96," (for "),t(97,"code"),e(98,"ng-web-apis"),i(),e(99," , "),t(100,"code"),e(101,"maskito"),i(),e(102," , "),t(103,"code"),e(104,"ng-polymorpheus"),i(),e(105," or "),t(106,"code"),e(107,"ng-event-plugins"),i(),e(108," packages) "),i()(),t(109,"tui-expand")(110,"div",10),e(111," Taiga UI depends on many other "),t(112,"a",15),e(113," Taiga Family packages "),i(),e(114," . "),n(115,"br")(116,"br"),e(117," Yarn and NPM with enabled "),t(118,"code"),e(119,"legacy-peer-deps"),i(),e(120," config do not automatically install transitive peer dependencies. It means that you should manage them "),t(121,"strong"),e(122,"manually"),i(),e(123," . Explore "),t(124,"code"),e(125,"package.json"),i(),e(126," of every used Taiga UI package. Find their "),t(127,"code"),e(128,"peerDependencies"),i(),e(129," and ensure that they are installed and their versions are compatible with constraints from Taiga libraries. "),i()()(),t(130,"tui-accordion")(131,"button",16),n(132,"tui-icon",9),t(133,"div"),e(134," I ran "),t(135,"code"),e(136,"nx migrate --run-migrations"),i(),e(137," and got "),t(138,"code"),e(139,"Cannot find module 'ts-morph'"),i(),e(140," error, but my project uses NPM without "),t(141,"code"),e(142,"legacy-peer-deps"),i()()(),t(143,"tui-expand")(144,"div",10),e(145," Command "),t(146,"code"),e(147,"ng migrate"),i(),e(148," has known "),t(149,"a",17),e(150," issue "),i(),e(151," . Just run "),t(152,"code"),e(153,"npm install"),i(),e(154," again and run "),n(155,"tui-doc-code",18),i()()(),t(156,"tui-accordion")(157,"button",19),n(158,"tui-icon",9),t(159,"div"),e(160," Migration fails with "),t(161,"code"),e(162,"FATAL ERROR: Reached heap limit Allocation failed - JavaScript heap out of memory"),i()()(),t(163,"tui-expand")(164,"div",10)(165,"div",20),e(166," Migration schematics recursively traverse every file and directory. This operation can be memory-intensive. If you encounter this error, try increasing the memory limit for the Node.js process. "),i(),t(167,"div"),e(168," For example: "),t(169,"p",21),e(170," The syntax for defining environment variables varies by OS and shell! "),n(171,"br"),e(172," The command below is for Unix-based systems and Nx CLI. "),i(),n(173,"tui-doc-code",22),i(),t(174,"p"),e(175," If the problem persists \u2013 "),t(176,"a",23),e(177," report the issue "),i()()()()(),t(178,"tui-accordion")(179,"button",24),n(180,"tui-icon",9),t(181,"div"),e(182," I still have some problems with running the basic version of "),t(183,"code"),e(184,"ng\xA0update"),i(),e(185," / "),t(186,"code"),e(187,"ng\xA0migrate"),i(),e(188," command, I need an approach to execute all schematics manually "),i()(),t(189,"tui-expand")(190,"div",10)(191,"ol",25)(192,"li",26),e(193," Manually update all Taiga UI's packages to "),t(194,"code"),e(195),i(),e(196," (i.e. just change versions inside your "),t(197,"code"),e(198,"package.json"),i(),e(199," by yourself without any console commands and then run "),t(200,"code"),e(201,"npm install"),i(),e(202," ). "),i(),t(203,"li",26),e(204," Check that "),t(205,"code"),e(206,"node_modules/@taiga-ui/cdk/package.json"),i(),e(207),i(),t(208,"li",26),e(209," Execute: "),n(210,"tui-doc-code",27),e(211," or "),n(212,"tui-doc-code",27),i()()()()()()()()),m&2&&(o("header",`Guide to update Taiga UI v${r.tuiMajor-1}\xA0->\xA0v${r.tuiMajor}`),a(7),o("ngModel",!1),a(3),o("ngModel",!1),a(2),o("href",`https://www.npmjs.com/package/@taiga-ui/cdk/v/v${r.tuiMajor-1}-lts`,u),a(),d(" latest v",r.tuiMajor-1,". "),a(2),o("ngModel",!1),a(3),o("ngModel",!1),a(8),o("ngModel",!1),a(2),o("code",r.runMigration)("lineNumbers",!1),a(2),o("ngModel",!1),a(7),o("ngModel",!1),a(6),g(" . This package is a transitional state for many outdated entities before their full removal. Everything you find inside this package in the ",r.tuiMajor,"th major release will be removed in the ",r.tuiMajor+1,"th one. So, you can just continue to use them for a while. However, some of those components already have modern alternatives \u2013 they will be marked by comment with "),a(69),o("routerLink",r.routes.About),a(83),d("v",r.tuiMajor,""),a(12),d(" contains the ",r.tuiMajor,"th major version "),a(3),o("code",`ng update @taiga-ui/cdk --migrate-only --from=${r.tuiMajor-1} --to=${r.tuiMajor}`),a(2),o("code",r.manuallyTriggerNxMigration))},dependencies:[S,y,v,b,_,I,C,P,O,A,T,w,j,h,E,k,N,M],styles:["[tuiAccordion][_ngcontent-%COMP%]{white-space:normal;block-size:fit-content;padding-block:1rem;font-weight:400}[tuiCardLarge][_ngcontent-%COMP%]{margin-block-start:1rem}[tuiCardLarge][data-appearance=custom][_ngcontent-%COMP%]{border:.25rem solid var(--tui-background-base-alt);border-radius:var(--tui-radius-m)}footer[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}label[_ngcontent-%COMP%]{display:flex;gap:.5rem}tui-accordion[_ngcontent-%COMP%]{border-radius:0}tui-accordion[_ngcontent-%COMP%]   [tuiButton][_ngcontent-%COMP%]{box-shadow:none;padding-inline-start:0;padding-block-start:0}tui-accordion[_ngcontent-%COMP%]   [tuiButton][_ngcontent-%COMP%]   [tuiBadge][_ngcontent-%COMP%]{align-self:flex-start;margin-block-start:.0625rem;margin-inline-start:.0625rem}tui-accordion[_ngcontent-%COMP%]   [tuiButton][_ngcontent-%COMP%]:active{background:none!important}tui-accordion[_ngcontent-%COMP%]   tui-expand[_ngcontent-%COMP%]{padding:0;box-shadow:none}"],changeDetection:0});var c=l;export{c as default};
