import{c as Fe}from"./chunk-34QFRBFN.js";import{Aa as X,Pb as he,Wa as Ie,Wb as $e,Xb as ke,_a as Le,td as Te,vd as _e}from"./chunk-NAEF7NDX.js";import{a as E,b as P,d as N,i as Ce}from"./chunk-42JZD6NG.js";function Oe(t){let{anchorOffset:e=0,focusOffset:s=0}=t.ownerDocument.getSelection()||{},n=Math.min(e,s),r=Math.max(e,s);return[n,r]}function Pt(t,[e,s]){var o,c;let n=t.ownerDocument,r=n.createRange();r.setStart(t.firstChild||t,Math.min(e,((o=t.textContent)==null?void 0:o.length)??0)),r.setEnd(t.lastChild||t,Math.min(s,((c=t.textContent)==null?void 0:c.length)??0));let i=n.getSelection();i&&(i.removeAllRanges(),i.addRange(r))}var fe=class{constructor(e){this.element=e,this.maxLength=1/0}get value(){return this.element.innerText.replace(/\n\n$/,`
`)}set value(e){this.element.innerHTML=e.replace(/\n$/,`

`)}get selectionStart(){return Oe(this.element)[0]}get selectionEnd(){return Oe(this.element)[1]}setSelectionRange(e,s){Pt(this.element,[e??0,s??0])}select(){this.setSelectionRange(0,this.value.length)}};function wt(t){let e=new fe(t);return new Proxy(t,{get(s,n){if(n in e)return e[n];let r=s[n];return typeof r=="function"?r.bind(s):r},set(s,n,r,i){return Reflect.set(n in e?e:s,n,r,i)}})}var We=t=>t.isContentEditable?wt(t):t.querySelector("input,textarea")||t,I={mask:/^.*$/,preprocessors:[],postprocessors:[],plugins:[],overwriteMode:"shift"},pe=class{constructor(){this.now=null,this.past=[],this.future=[]}undo(){let e=this.past.pop();e&&this.now&&(this.future.push(this.now),this.updateElement(e,"historyUndo"))}redo(){let e=this.future.pop();e&&this.now&&(this.past.push(this.now),this.updateElement(e,"historyRedo"))}updateHistory(e){if(!this.now){this.now=e;return}let s=this.now.value!==e.value,n=this.now.selection.some((r,i)=>r!==e.selection[i]);!s&&!n||(s&&(this.past.push(this.now),this.future=[]),this.now=e)}updateElement(e,s){this.now=e,this.updateElementState(e,{inputType:s,data:null})}};function Mt(t,...e){return e.every(({value:s})=>s===t.value)}function me(t,...e){return e.every(({value:s,selection:n})=>s===t.value&&n[0]===t.selection[0]&&n[1]===t.selection[1])}function Ve({value:t,selection:e},s,n){let[r,i]=e,o=typeof n=="function"?n({value:t,selection:e}):n;return{value:t,selection:o==="replace"?[r,Math.max(r+s.length,i)]:[r,i]}}function ee(t){return typeof t=="string"}function He(t,e,s,n){let r="";for(let i=e.length;i<t.length;i++){let o=t[i]||"",c=(n==null?void 0:n.value[i])===o;if(!ee(o)||o===s&&!c)return r;r+=o}return r}function Be(t,e){return Array.isArray(e)?t.length===e.length&&Array.from(t).every((s,n)=>{let r=e[n]||"";return ee(r)?s===r:s.match(r)}):e.test(t)}function yt(t,e,s){let n=null,r=null,i=Array.from(t.value).reduce((c,a,l)=>{let u=He(e,c,a,s),h=c+u,d=e[h.length]||"";return n===null&&l>=t.selection[0]&&(n=h.length),r===null&&l>=t.selection[1]&&(r=h.length),ee(d)?h+d:a.match(d)?h+a:u.startsWith(a)?h:c},""),o=He(e,i,"",s);return{value:Be(i+o,e)?i+o:i,selection:[n??i.length,r??i.length]}}function Rt({value:t,selection:e},s){let[n,r]=e,i=n,o=r,c=Array.from(t).reduce((a,l,u)=>{let h=a+l;return n===u&&(i=a.length),r===u&&(o=a.length),h.match(s)?h:a},"");return{value:c,selection:[Math.min(i,c.length),Math.min(o,c.length)]}}function z(t,e,s=null){if(Be(t.value,e))return t;let{value:n,selection:r}=Array.isArray(e)?yt(t,e,s):Rt(t,e);return{selection:r,value:Array.isArray(e)?n.slice(0,e.length):n}}function je(t,e){if(!Array.isArray(e))return t;let[s,n]=t.selection,r=[],i=Array.from(t.value).reduce((o,c,a)=>{let l=e[a]||"";return a===s&&r.push(o.length),a===n&&r.push(o.length),ee(l)&&l===c?o:o+c},"");return r.length<2&&r.push(...new Array(2-r.length).fill(i.length)),{value:i,selection:[r[0],r[1]]}}var U=class{constructor(e,s){this.maskOptions=s,this.unmaskInitialState={value:"",selection:[0,0]},this.value="",this.selection=[0,0];let n=this.getMaskExpression(e),{value:r,selection:i}=z(e,n);this.unmaskInitialState=je({value:r,selection:i},n),this.value=r,this.selection=i}addCharacters(e){let{value:s,selection:n,maskOptions:r}=this,i={value:s,selection:n},{selection:[o,c]}=Ve(i,e,r.overwriteMode),a=this.getMaskExpression({value:s.slice(0,o)+e+s.slice(c),selection:[o+e.length,o+e.length]}),[l,u]=Ve(this.unmaskInitialState,e,r.overwriteMode).selection,h=this.unmaskInitialState.value.slice(0,l)+e,d=h.length,g=z({value:h+this.unmaskInitialState.value.slice(u),selection:[d,d]},a,i),f=s.slice(0,o),p=z({value:h,selection:[d,d]},a,i);if(p.value===f||p.value.length<f.length&&je(p,a).value===this.unmaskInitialState.value.slice(0,l)||me(this,g))throw new Error("Invalid mask value");this.value=g.value,this.selection=g.selection}deleteCharacters(){let[e,s]=this.selection;if(e===s||!s)return;let{value:n}=this,r=this.getMaskExpression({value:n.slice(0,e)+n.slice(s),selection:[e,e]}),i={value:n},[o,c]=this.unmaskInitialState.selection,a=this.unmaskInitialState.value.slice(0,o)+this.unmaskInitialState.value.slice(c),l=z({value:a,selection:[o,o]},r,i);this.value=l.value,this.selection=l.selection}getMaskExpression(e){let{mask:s}=this.maskOptions;return typeof s=="function"?s(e):s}},W=class{constructor(e){this.element=e,this.listeners=[]}listen(e,s,n){let r=s;this.element.addEventListener(e,r,n),this.listeners.push(()=>this.element.removeEventListener(e,r,n))}destroy(){this.listeners.forEach(e=>e())}},b={CTRL:1,ALT:2,SHIFT:4,META:8},H={Y:89,Z:90};function j(t,e,s){return t.ctrlKey===!!(e&b.CTRL)&&t.altKey===!!(e&b.ALT)&&t.shiftKey===!!(e&b.SHIFT)&&t.metaKey===!!(e&b.META)&&t.keyCode===s}function bt(t){return j(t,b.CTRL,H.Y)||j(t,b.CTRL|b.SHIFT,H.Z)||j(t,b.META|b.SHIFT,H.Z)}function Nt(t){return j(t,b.CTRL,H.Z)||j(t,b.META,H.Z)}function L(t,e){var n;let s=t.value;if(typeof e=="string")t.value=e;else{let[r,i]=e.selection;t.value=e.value,t.matches(":focus")&&((n=t.setSelectionRange)==null||n.call(t,r,i))}t.value!==s&&t.dispatchEvent(new Event("input",{bubbles:!0}))}function Ct({value:t,selection:e},s){let[n,r]=e;if(n!==r)return[n,r];let i=s?t.slice(n).indexOf(`
`)+1||t.length:t.slice(0,r).lastIndexOf(`
`)+1;return[s?n:i,s?i:r]}function It({value:t,selection:e},s){let[n,r]=e;return n!==r?[n,r]:(s?[n,r+1]:[n-1,r]).map(o=>Math.min(Math.max(o,0),t.length))}var Lt=/\s+$/g,$t=/^\s+/g,Ue=/\s/;function kt({value:t,selection:e},s){let[n,r]=e;if(n!==r)return[n,r];if(s){let a=t.slice(n),[l]=a.match($t)||[""],u=a.trimStart().search(Ue);return[n,u!==-1?n+l.length+u:t.length]}let i=t.slice(0,r),[o]=i.match(Lt)||[""],c=i.trimEnd().split("").reverse().findIndex(a=>Ue.exec(a));return[c!==-1?r-o.length-c:0,r]}function q(t=[]){return(e,...s)=>t.reduce((n,r)=>E(E({},n),r(n,...s)),e)}function _(t,e){let s=E(E({},I),e),n=q(s.preprocessors),r=q(s.postprocessors),i=typeof t=="string"?{value:t,selection:[0,0]}:t,{elementState:o}=n({elementState:i,data:""},"validation"),c=new U(o,s),{value:a,selection:l}=r(c,i);return typeof t=="string"?a:{value:a,selection:l}}function Tt(){return t=>{let e=new W(t),s=!1,n,r=t.value;return e.listen("keydown",({key:i})=>{s=i==="Unidentified"}),e.listen("beforeinput",i=>{n=i,r=t.value}),e.listen("input",i=>{s&&n.defaultPrevented&&n.inputType==="deleteContentBackward"&&i.inputType==="deleteContentBackward"&&(t.value=r)},{capture:!0}),()=>e.destroy()}}var ge=" ";function _t(){let t="",e=0,s=null,n=!1;return r=>{let i=new W(r);return i.listen("beforeinput",o=>{var h,d;let{value:c,selectionStart:a,selectionEnd:l}=r,u=(s==null?void 0:s.inputType)==="insertText"&&(s==null?void 0:s.data)===ge&&!c.slice(0,Number(l)).endsWith(ge);o.inputType==="insertText"&&o.data===`.${ge}`&&((s==null?void 0:s.inputType)==="deleteContentBackward"&&n?(r.value=t,(h=r.setSelectionRange)==null||h.call(r,e,e)):u&&((d=r.setSelectionRange)==null||d.call(r,a,a))),n=u,s=o,t=c,e=Number((u?e:l)===c.length?l:a)}),()=>i.destroy()}}function _n(t){return(e,s)=>{let n=e.selectionStart??0,r=e.selectionEnd??0;L(e,{value:_(e.value,t||s),selection:[n,r]})}}var Ft=[_t(),Tt()],Q=class extends pe{constructor(e,s){super(),this.element=e,this.maskitoOptions=s,this.isTextArea=this.element.nodeName==="TEXTAREA",this.eventListener=new W(this.element),this.options=E(E({},I),this.maskitoOptions),this.upcomingElementState=null,this.preprocessor=q(this.options.preprocessors),this.postprocessor=q(this.options.postprocessors),this.teardowns=this.options.plugins.concat(Ft).map(n=>n(this.element,this.options)),this.updateHistory(this.elementState),this.eventListener.listen("keydown",n=>{if(bt(n))return n.preventDefault(),this.redo();if(Nt(n))return n.preventDefault(),this.undo()}),this.eventListener.listen("beforeinput",n=>{var i;let r=n.inputType.includes("Forward");switch(this.updateHistory(this.elementState),n.inputType){case"deleteByCut":case"deleteContentBackward":case"deleteContentForward":return this.handleDelete({event:n,isForward:r,selection:It(this.elementState,r)});case"deleteHardLineBackward":case"deleteHardLineForward":case"deleteSoftLineBackward":case"deleteSoftLineForward":return this.handleDelete({event:n,isForward:r,selection:Ct(this.elementState,r),force:!0});case"deleteWordBackward":case"deleteWordForward":return this.handleDelete({event:n,isForward:r,selection:kt(this.elementState,r)});case"historyRedo":return n.preventDefault(),this.redo();case"historyUndo":return n.preventDefault(),this.undo();case"insertCompositionText":return;case"insertLineBreak":case"insertParagraph":return this.handleEnter(n);case"insertReplacementText":return;case"insertFromDrop":case"insertFromPaste":case"insertText":default:return this.handleInsert(n,n.data??((i=n.dataTransfer)==null?void 0:i.getData("text/plain"))??"")}}),this.eventListener.listen("input",()=>{this.upcomingElementState&&!me(this.upcomingElementState,this.elementState)&&this.updateElementState(this.upcomingElementState),this.upcomingElementState=null},{capture:!0}),this.eventListener.listen("input",({inputType:n})=>{n!=="insertCompositionText"&&(this.ensureValueFitsMask(),this.updateHistory(this.elementState))}),this.eventListener.listen("compositionend",()=>{this.ensureValueFitsMask(),this.updateHistory(this.elementState)})}destroy(){this.eventListener.destroy(),this.teardowns.forEach(e=>e==null?void 0:e())}updateElementState({value:e,selection:s},n){let r=this.elementState.value;this.updateValue(e),this.updateSelectionRange(s),n&&r!==e&&this.dispatchInputEvent(n)}get elementState(){let{value:e,selectionStart:s,selectionEnd:n}=this.element;return{value:e,selection:[s??0,n??0]}}get maxLength(){let{maxLength:e}=this.element;return e===-1?1/0:e}updateSelectionRange([e,s]){var r;let{element:n}=this;n.matches(":focus")&&(n.selectionStart!==e||n.selectionEnd!==s)&&((r=n.setSelectionRange)==null||r.call(n,e,s))}updateValue(e){(this.element.value!==e||this.element.isContentEditable)&&(this.element.value=e)}ensureValueFitsMask(){this.updateElementState(_(this.elementState,this.options),{inputType:"insertText",data:null})}dispatchInputEvent(e={inputType:"insertText",data:null}){globalThis.InputEvent&&this.element.dispatchEvent(new InputEvent("input",P(E({},e),{bubbles:!0,cancelable:!1})))}handleDelete({event:e,selection:s,isForward:n}){let r={value:this.elementState.value,selection:s},{elementState:i}=this.preprocessor({elementState:r,data:""},n?"deleteForward":"deleteBackward"),o=new U(i,this.options);o.deleteCharacters();let c=this.postprocessor(o,r);if(Mt(r,i,o,c)){let[a,l]=i.selection;return e.preventDefault(),this.updateSelectionRange(n?[l,l]:[a,a])}this.upcomingElementState=c}handleInsert(e,s){let{options:n,maxLength:r,elementState:i}=this,[o,c]=i.selection,{elementState:a,data:l=s}=this.preprocessor({data:s,elementState:i},"insert"),u=new U(a,n);try{u.addCharacters(l)}catch{return e.preventDefault()}this.upcomingElementState=this.clampState(this.postprocessor(u,i)),i.value.length>=r&&o===c&&(n.overwriteMode==="replace"&&!me(this.upcomingElementState,i)?this.dispatchInputEvent({inputType:"insertText",data:s}):this.upcomingElementState=null)}handleEnter(e){(this.isTextArea||this.element.isContentEditable)&&this.handleInsert(e,`
`)}clampState({value:e,selection:s}){let[n,r]=s,i=this.maxLength;return{value:e.slice(0,i),selection:[Math.min(n,i),Math.min(r,i)]}}};var Zn=(()=>{let e=class e{constructor(){this.elementRef=X(Le).nativeElement,this.ngZone=X(Ie),this.maskedElement=null,this.initEffect=_e(()=>Ce(this,null,function*(){let r=this.options(),i=this.elementPredicate(),{maskedElement:o,elementRef:c,ngZone:a}=this;if(o==null||o.destroy(),!r)return;let l=yield i(c);this.elementPredicate()!==i||this.options()!==r||a.runOutsideAngular(()=>{this.maskedElement=new Q(l,r)})})),this.options=he(null,{alias:"maskito"}),this.elementPredicate=he(We,{alias:"maskitoElement"});let n=X(Fe,{self:!0,optional:!0});if(n){let r=n.writeValue.bind(n);n.writeValue=i=>{let o=Te(()=>this.options());r(o?_(String(i??""),o):i)}}}ngOnDestroy(){var n;(n=this.maskedElement)==null||n.destroy()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=$e({type:e,selectors:[["","maskito",""]],inputs:{options:[1,"maskito","options"],elementPredicate:[1,"maskitoElement","elementPredicate"]},outputs:{options:"maskitoChange",elementPredicate:"maskitoElementChange"}});let t=e;return t})(),Yn=(()=>{let e=class e{transform(n,r){return _(String(n??""),r??I)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=ke({name:"maskito",type:e,pure:!0});let t=e;return t})();function C(t,e,s){let n=Math.min(Number(s),Math.max(Number(e),Number(t)));return t instanceof Date?new Date(n):n}function qe(t){return t.replaceAll(/\W/g,"").length}var Qe={day:31,month:12,year:9999},Ot=[".",",","\u0431","\u044E"],et=new Date("0001-01-01T00:00"),ve=new Date("9999-12-31T23:59:59.999"),k="\xA0",Vt="\u200B",De="\u2013",tt="\u2014",ae="-",Ae="\u2212",nt="\u30FC",Ht=":",jt="\uFF1A",st=[ae,De,tt,nt,Ae],G={hours:23,minutes:59,seconds:59,milliseconds:999},xe={hours:0,minutes:0,seconds:0,milliseconds:0},se=new RegExp(`[${k}APM]+$`,"g"),re=new RegExp(`${k}[AP]M$`,"g"),Pe=[":","."],rt={hours:2,minutes:2,seconds:2,milliseconds:3},Ut=[ae,De,tt,Ae,nt],Wt=1,Ee=12,$={January:0,February:1,April:3,June:5,September:8,November:10,December:11};function Ge(t,{day:e=0,month:s=0,year:n=0}={}){if(e===0&&s===0&&n===0)return t;let r=t.getFullYear(),i=t.getMonth(),o=t.getDate(),c=(r+n)*Ee+i+s,a=Math.floor(c/Ee),l=c%Ee,u=Math.min(o,te(l,B(a)))+e;for(;u>te(l,B(a));)u-=te(l,B(a)),l===$.December?(a++,l=$.January):l++;for(;u<Wt;)l===$.January?(a--,l=$.December):l--,u+=te(l,B(a));return u=e<0||e===0&&B(r)&&(s<0||n<0)?u+1:u-1,new Date(a,l,u)}function te(t,e){switch(t){case $.April:case $.June:case $.November:case $.September:return 30;case $.February:return e?29:28;default:return 31}}function B(t){return t%400===0||t%4===0&&t%100!==0}var it=t=>{var e,s,n;return{day:((e=t.match(/d/g))==null?void 0:e.length)??0,month:((s=t.match(/m/g))==null?void 0:s.length)??0,year:((n=t.match(/y/g))==null?void 0:n.length)??0}};function ie(t){return{day:String(t.getDate()).padStart(2,"0"),month:String(t.getMonth()+1).padStart(2,"0"),year:String(t.getFullYear()).padStart(4,"0"),hours:String(t.getHours()).padStart(2,"0"),minutes:String(t.getMinutes()).padStart(2,"0"),seconds:String(t.getSeconds()).padStart(2,"0"),milliseconds:String(t.getMilliseconds()).padStart(3,"0")}}var Bt=["day","month","year"];function Gt(t){return[...Bt].sort((e,s)=>t.indexOf(e[0])>t.indexOf(s[0])?1:-1)}function Zt(t,e){let s=qe(e),[n=""]=new RegExp(`(\\D*\\d){${s}}`).exec(t)||[];return n}function le(t,e){return t.length<e.length?!1:t.split(/\D/).every(s=>!/^0+$/.exec(s))}function Y(t,e,s){let n=qe(e);return t.replace(s,"").match(new RegExp(`(\\D*\\d[^\\d\\s]*){1,${n}}`,"g"))||[]}function V(t,e){let s=e.replaceAll(/[^dmy]/g,""),n=t.replaceAll(/\D+/g,""),r={day:n.slice(s.indexOf("d"),s.lastIndexOf("d")+1),month:n.slice(s.indexOf("m"),s.lastIndexOf("m")+1),year:n.slice(s.indexOf("y"),s.lastIndexOf("y")+1)};return Object.fromEntries(Object.entries(r).filter(([i,o])=>!!o).sort(([i],[o])=>e.toLowerCase().indexOf(i.slice(0,1))>e.toLowerCase().indexOf(o.slice(0,1))?1:-1))}function Z(t,e){var r;let s=((r=t.year)==null?void 0:r.length)===2?`20${t.year}`:t.year,n=new Date(Number(s??"0"),Number(t.month??"1")-1,Number(t.day??"1"),Number((e==null?void 0:e.hours)??"0"),Number((e==null?void 0:e.minutes)??"0"),Number((e==null?void 0:e.seconds)??"0"),Number((e==null?void 0:e.milliseconds)??"0"));return n.setFullYear(Number(s??"0")),n}var ue=", ";function F({day:t,month:e,year:s,hours:n,minutes:r,seconds:i,milliseconds:o},{dateMode:c,dateTimeSeparator:a=ue,timeMode:l}){var d;let u=((d=c.match(/y/g))==null?void 0:d.length)===2?s==null?void 0:s.slice(-2):s;return(c+(l?a+l:"")).replaceAll(/d+/g,t??"").replaceAll(/m+/g,e??"").replaceAll(/y+/g,u??"").replaceAll(/H+/g,n??"").replaceAll("MSS",o??"").replaceAll(/M+/g,r??"").replaceAll(/S+/g,i??"").replaceAll(/^\D+/g,"").replaceAll(/\D+$/g,"")}function ot({dateString:t,dateModeTemplate:e,dateSegmentsSeparator:s,offset:n,selection:[r,i]}){var d;let o=V(t,e),c=Object.entries(o),a=Gt(e),l={};for(let g=0;g<c.length;g++){let[f,p]=c[g],m=F(l,{dateMode:e}),S=Qe[f],D=m.length&&s.length,v=n+m.length+D+it(e)[f],A=v>=r&&v===i;if(A&&Number(p)>Number(S)){let x=a[a.indexOf(f)+1];if(!x||x==="year")return{validatedDateString:"",updatedSelection:[r,i]};l[f]=`0${p.slice(0,-1)}`,c[g+1]=[x,p.slice(-1)+(((d=c[g+1])==null?void 0:d[1])??"").slice(1)];continue}if(A&&Number(p)<1)return{validatedDateString:"",updatedSelection:[r,i]};l[f]=p}let u=F(l,{dateMode:e}),h=u.length-t.length;return{validatedDateString:u,updatedSelection:[r+h,i+h]}}function T(t){return t}function we(){}var ct=/[\\^$.*+?()[\]{}|]/g,Yt=new RegExp(ct.source);function w(t){return t&&Yt.test(t)?t.replaceAll(ct,String.raw`\$&`):t}function Kt(t,e){let s="";for(let n=0;n<t.length;n++){if(t[n]!==e[n])return s;s+=t[n]}return s}function Se(t){return!t||typeof t=="object"&&Object.keys(t).length===0}var Jt=/^0+$/;function oe(t,e,s=0){let n=t.padEnd(e.length,"0");if(Number(n)<=Number(e))return{validatedSegmentValue:t,prefixedZeroesCount:s};if(n.endsWith("0"))return oe(`0${t.slice(0,e.length-1)}`,e,s+1);let r=t.slice(0,e.length-1);return Jt.exec(r)?{validatedSegmentValue:"",prefixedZeroesCount:s}:oe(`${r}0`,e,s)}function Ze(t){return t.replaceAll(new RegExp(jt,"g"),Ht)}function Ye(t){return t.replaceAll(/[０-９]/g,e=>String.fromCharCode(e.charCodeAt(0)-65248))}function at(){return({elementState:t,data:e})=>{let{value:s,selection:n}=t;return{elementState:{selection:n,value:Ze(s)},data:Ze(e)}}}function Me({dateModeTemplate:t,dateSegmentSeparator:e,splitFn:s,uniteFn:n}){return({value:r,selection:i})=>{var g;let[o,c]=i,{dateStrings:a,restPart:l=""}=s(r),u=[],h=0;a.forEach(f=>{let p=V(f,t),S=Object.entries(p).reduce((D,[v,A])=>{let{validatedSegmentValue:x,prefixedZeroesCount:R}=oe(A,`${Qe[v]}`);return h+=R,P(E({},D),{[v]:x})},{});u.push(F(S,{dateMode:t}))});let d=n(u,r)+((g=a[a.length-1])!=null&&g.endsWith(e)?e:"")+l;return h&&d.slice(c+h,c+h+e.length)===e&&(h+=e.length),{selection:[o+h,c+h],value:d}}}function lt({dateModeTemplate:t,firstDateEndSeparator:e,dateSegmentSeparator:s,pseudoFirstDateEndSeparators:n}){return({elementState:r,data:i})=>{let{value:o,selection:c}=r,[a,l]=c,u=Zt(o,t),h=n.filter(p=>!e.includes(p)&&p!==s),d=new RegExp(`[${h.join("")}]`,"gi"),g=u&&o.length>u.length?u+o.slice(u.length).replace(/^[\D\s]*/,e):o,f=g.length-o.length;return{elementState:{selection:[a+f,l+f],value:g},data:i.replace(d,e)}}}function K(){return({elementState:t,data:e})=>{let{value:s,selection:n}=t;return{elementState:{selection:n,value:Ye(s)},data:Ye(e)}}}function ut(t){return Array.from(t.replace(" AA","")).map(e=>Pe.includes(e)?e:/\d/).concat(t.includes("AA")?[k,/[AP]/i,/M/i]:[])}function Xt(t,e){return Object.fromEntries(Object.entries(t).map(([s,n])=>[s,e(String(n),rt[s])]))}function zt(t){return Xt(t,(e,s)=>e.padStart(s,"0"))}var Ke={HH:"hours",MM:"minutes",SS:"seconds",MSS:"milliseconds"};function ye(t,e){let s=t.replaceAll(/\D+/g,""),n=0;return Object.fromEntries(e.split(/\W/).filter(r=>Ke[r]).map(r=>{let i=s.slice(n,n+r.length);return n+=r.length,[Ke[r],i]}))}var qt=/^\D*/,Qt=/\D*$/;function en({hours:t="",minutes:e="",seconds:s="",milliseconds:n=""}){return`${t}:${e}:${s}.${n}`.replace(qt,"").replace(Qt,"")}var tn=new RegExp(`[${Pe.map(w).join("")}]$`);function dt({value:t,selection:e},{mode:s,timeSegmentMaxValues:n=G}){let[r,i]=e,o=ye(t,s),c=Object.entries(o),a=zt(n),l={},u=0;for(let[S,D]of c){let v=a[S],{validatedSegmentValue:A,prefixedZeroesCount:x}=oe(D,String(v));u+=x,l[S]=A}let[h=""]=t.match(/^\D+(?=\d)/g)||[],[d=""]=t.match(/\D+$/g)||[],g=h+en(l)+d,f=Math.max(g.length-t.length-u,0),p=r+u+f,m=i+u+f;return p===m&&u&&g.slice(0,m+1).match(tn)&&(p++,m++),{value:g,selection:[p,m]}}function ht({timeMode:t,timeSegmentMinValues:e=xe,timeSegmentMaxValues:s=G,parseValue:n=r=>({timeString:r})}){let r=new RegExp(`[^\\d${Pe.map(w).join("")}]+`);return({elementState:i,data:o},c)=>{if(c!=="insert")return{elementState:i,data:o};let{value:a,selection:l}=i,[u,h]=l,d=o.replace(r,""),g=h+d.length,f=a.slice(0,u)+d+a.slice(g),{timeString:p,restValue:m=""}=n(f),S=Object.entries(ye(p,t)),D=m.length;for(let[v,A]of S){let x=e[v],R=s[v],O=Number(A),Ne=D+rt[v];if(Ne>=u&&Ne<=g&&O!==C(O,x,R))return{elementState:i,data:""};D+=A.length+1}return{elementState:i,data:o}}}function gt(t){if(!t.includes("AA"))return T;let e=/^[AP]$/gi;return({elementState:s,data:n})=>{let{value:r,selection:i}=s,o=r.toUpperCase(),c=n.toUpperCase();return o.match(re)&&c.match(e)?{elementState:{value:o.replaceAll(re,""),selection:i},data:`${c}M`}:{elementState:{selection:i,value:o},data:c}}}function ft(t){return t.includes("AA")?({value:e,selection:s},n)=>{if(!e.match(se)||e.match(re))return{value:e,selection:s};let[r,i]=s;if(n.value.match(re)){let a=e.replace(se,"");return{value:a,selection:[Math.min(r,a.length),Math.min(i,a.length)]}}let o=`${k}${e.includes("P")?"P":"A"}M`,c=e.replace(se,a=>a!==k?o:a);return{value:c,selection:i>=c.indexOf(o)?[c.length,c.length]:s}}:T}function pt(t,e){let s=it(e);return Object.fromEntries(Object.entries(t).map(([n,r])=>{let i=s[n];return[n,r.length===i&&/^0+$/.exec(r)?"1".padStart(i,"0"):r]}))}var nn="1972";function mt({dateModeTemplate:t,min:e=et,max:s=ve,rangeSeparator:n="",dateSegmentSeparator:r="."}){return({value:i,selection:o})=>{let c=n&&i.endsWith(n),a=Y(i,t,n),l="";for(let u of a){l+=l?n:"";let h=V(u,t);if(!le(u,t)){let f=pt(h,t),p=F(f,{dateMode:t}),m=u.endsWith(r)?r:"";l+=p+m;continue}let d=Z(E({year:nn},h)),g=C(d,e,s);l+=F(ie(g),{dateMode:t})}return{selection:o,value:l+(c?n:"")}}}function Re({dateModeTemplate:t,dateSegmentsSeparator:e,rangeSeparator:s="",dateTimeSeparator:n=ue}){return({elementState:r,data:i})=>{let o=t.split(e),c=i.includes(n),a=i.slice(0,c?i.indexOf(n):1/0).split(/\D/).filter(Boolean);if(!a.length||a.length%o.length!==0)return{elementState:r,data:i};let l=a.reduce((u,h,d)=>{let g=o[d%o.length]??"",f=Math.trunc(d/o.length),p=d%o.length===o.length-1;return u[f]||(u[f]=""),u[f]+=p?h:`${h.padStart(g.length,"0")}${e}`,u},[]);return{elementState:r,data:c?`${l[0]}${i.slice(i.indexOf(n))}`:l.join(s)}}}function Et(t){let e=new RegExp(`${w(t)}$`),s=new RegExp(t&&`(${t.split("").map(w).reduce((n,r,i,o)=>`${n}|${o.slice(0,i+1).join("")}`)})$`);return t?({value:n,selection:r},i)=>{if(!n&&!i.value.endsWith(t))return{value:n,selection:r};if(!n.match(s)&&!i.value.endsWith(t))return{selection:r,value:n+t};let o=i.value.replace(e,""),c=i.selection[1]>o.length,a=Kt(o,n);return{selection:r,value:Array.from(t).reverse().reduce((l,u,h)=>{let d=l.length-1-h,g=a[d]===u&&c;return l[d]!==u||g?l.slice(0,d+1)+u+l.slice(d+1):l},n)}}:T}function St(t){return t?({value:e,selection:s},n)=>{if(e.startsWith(t)||!e&&!n.value.startsWith(t))return{value:e,selection:s};let[r,i]=s,o=Array.from(t).reduce((a,l,u)=>a[u]===l?a:a.slice(0,u)+l+a.slice(u),e),c=o.length-e.length;return{selection:[r+c,i+c],value:o}}:T}function vt({dateModeTemplate:t,dateSegmentsSeparator:e,rangeSeparator:s=""}){return({elementState:n,data:r})=>{let{value:i,selection:o}=n;if(r===e)return{elementState:n,data:o[0]===i.length?r:""};if(!r.replaceAll(/\D/g,""))return{elementState:n,data:r};let c=r.replaceAll(new RegExp(`[^\\d${w(e)}${s}]`,"g"),""),[a,l]=o,u=l+r.length,h=i.slice(0,a)+c+i.slice(u),d=Y(h,t,s),g="",f=!!s&&h.includes(s);for(let m of d){let{validatedDateString:S,updatedSelection:D}=ot({dateString:m,dateModeTemplate:t,dateSegmentsSeparator:e,offset:g.length,selection:[a,u]});if(m&&!S)return{elementState:n,data:""};u=D[1],g+=f&&!g?S+s:S}let p=g.slice(a,u);return{elementState:{selection:o,value:g.slice(0,a)+p.split(e).map(m=>"0".repeat(m.length)).join(e)+g.slice(u)},data:p}}}function J(t,e,s){return(n,r)=>{let i=()=>e(n,r);return n.addEventListener(t,i,s),()=>n.removeEventListener(t,i,s)}}function zn(t){return J("focus",e=>{e.value||L(e,t)})}function sn(t){return(e,s)=>{let n=e.ownerDocument,r=0,i=()=>r++,o=()=>{r=Math.max(--r,0)},c=()=>{if(e.matches(":focus")){if(r)return n.addEventListener("mouseup",c,{once:!0,passive:!0});t(e,s)}};return n.addEventListener("selectionchange",c,{passive:!0}),e.addEventListener("focus",c,{passive:!0}),e.addEventListener("mousedown",i,{passive:!0}),n.addEventListener("mouseup",o,{passive:!0}),()=>{n.removeEventListener("selectionchange",c),e.removeEventListener("focus",c),e.removeEventListener("mousedown",i),n.removeEventListener("mouseup",o)}}}function qn(t){return sn(e=>{let s=e.selectionStart??0,n=e.selectionEnd??0,[r,i]=t(e.value,[s,n]);(r>s||i<n)&&e.setSelectionRange(C(s,r,i),C(n,r,i))})}function Qn(t){return J("blur",e=>{e.value===t&&L(e,"")})}function Dt(t){return t<0?we:e=>{let s=n=>{let r=Number(e.selectionStart),i=e.value.toUpperCase();if(n.key!=="ArrowUp"&&n.key!=="ArrowDown"||r<t)return;n.preventDefault();let o=i.includes("A")?"P":i.includes("P")||n.key==="ArrowUp"?"A":"P",c=`${k}${o}M`;L(e,{value:i.length===t?i+c:i.replace(se,c),selection:[r,r]})};return e.addEventListener("keydown",s),()=>e.removeEventListener("keydown",s)}}function At({step:t,fullMode:e,timeSegmentMaxValues:s}){let n=rn(e);return t<=0?we:r=>{let i=o=>{if(o.key!=="ArrowUp"&&o.key!=="ArrowDown")return;o.preventDefault();let c=r.selectionStart??0,a=on({segmentsIndexes:n,selectionStart:c});if(!a)return;let l=cn({selection:n.get(a),value:r.value,toAdd:o.key==="ArrowUp"?t:-t,max:s[a]});L(r,{value:l,selection:[c,c]})};return r.addEventListener("keydown",i),()=>r.removeEventListener("keydown",i)}}function rn(t){return new Map([["hours",ne(t,"HH")],["milliseconds",ne(t,"MSS")],["minutes",ne(t,"MM")],["seconds",ne(t,"SS")]])}function ne(t,e){let s=t.indexOf(e);return s===-1?[-1,-1]:[s,s+e.length]}function on({segmentsIndexes:t,selectionStart:e}){for(let[s,n]of t.entries()){let[r,i]=n;if(r<=e&&e<=i)return s}return null}function cn({selection:t,value:e,toAdd:s,max:n}){let[r,i]=t,o=Number(e.slice(r,i).padEnd(i-r,"0")),c=an(o+s,n+1);return e.slice(0,r)+String(c).padStart(i-r,"0")+e.slice(i,e.length)}function an(t,e){return t<0&&(t+=Math.floor(Math.abs(t)/e+1)*e),t%e}function de(t=""){let e=(s,[n,r])=>r>=s.length-t.length;return({elementState:s},n)=>{let{value:r,selection:i}=s;if(!r||e(r,i))return{elementState:s};let[o,c]=i,a=r.slice(o,c).replaceAll(/\d/g,"0"),l=r.slice(0,o)+a+r.slice(c);return a.replaceAll(/\D/g,"")?n==="validation"||n==="insert"&&o===c?{elementState:{selection:i,value:l}}:{elementState:{selection:n==="deleteBackward"||n==="insert"?[o,o]:[c,c],value:l}}:{elementState:s}}}function es({mode:t,separator:e=".",max:s,min:n}){let r=t.split("/").join(e);return P(E({},I),{mask:Array.from(r).map(i=>e.includes(i)?i:/\d/),overwriteMode:"replace",preprocessors:[K(),de(),Re({dateModeTemplate:r,dateSegmentsSeparator:e}),vt({dateModeTemplate:r,dateSegmentsSeparator:e})],postprocessors:[Me({dateModeTemplate:r,dateSegmentSeparator:e,splitFn:i=>({dateStrings:[i]}),uniteFn:([i=""])=>i}),mt({min:n,max:s,dateModeTemplate:r,dateSegmentSeparator:e})]})}var ts=Intl.DateTimeFormat("en-US",{month:"2-digit",day:"2-digit",year:"numeric"});function ln({dateModeTemplate:t,rangeSeparator:e,minLength:s,maxLength:n,max:r=ve}){return Se(s)&&Se(n)?T:({value:i,selection:o})=>{let c=Y(i,t,e);if(c.length!==2||c.some(f=>!le(f,t)))return{value:i,selection:o};let[a,l]=c.map(f=>Z(V(f,t)));if(!a||!l)return{value:i,selection:o};let u=Ge(a,s),h=Se(n)?r:Ge(a,n),d=C(l,u,r),g=d>h?h:d;return{selection:o,value:c[0]+e+F(ie(g),{dateMode:t})}}}function un({dateModeTemplate:t,rangeSeparator:e}){return({value:s,selection:n})=>{let r=Y(s,t,e),i=r.length===2&&r.every(d=>le(d,t)),[o,c]=n,a=o>=s.length,l=o===0&&c>=s.length;if(!(a||l)||!i)return{value:s,selection:n};let[u,h]=r.map(d=>Z(V(d,t)));return{selection:n,value:u&&h&&u>h?r.reverse().join(e):s}}}function ns({mode:t,min:e,max:s,minLength:n,maxLength:r,dateSeparator:i=".",rangeSeparator:o=`${k}${De}${k}`}){let c=t.split("/").join(i),a=Array.from(c).map(l=>i.includes(l)?l:/\d/);return P(E({},I),{mask:[...a,...Array.from(o),...a],overwriteMode:"replace",preprocessors:[K(),lt({dateModeTemplate:c,dateSegmentSeparator:i,firstDateEndSeparator:o,pseudoFirstDateEndSeparators:Ut}),de(),Re({dateModeTemplate:c,rangeSeparator:o,dateSegmentsSeparator:i}),vt({dateModeTemplate:c,rangeSeparator:o,dateSegmentsSeparator:i})],postprocessors:[Me({dateModeTemplate:c,dateSegmentSeparator:i,splitFn:l=>({dateStrings:Y(l,c,o)}),uniteFn:(l,u)=>l.reduce((h,d,g)=>h+d+(!g&&u.includes(o)?o:""),"")}),mt({min:e,max:s,dateModeTemplate:c,rangeSeparator:o,dateSegmentSeparator:i}),ln({dateModeTemplate:c,minLength:n,maxLength:r,max:s,rangeSeparator:o}),un({dateModeTemplate:c,rangeSeparator:o})]})}function dn(t,{dateMode:e,timeMode:s,dateTimeSeparator:n=ue}){return t.length>=e.length+s.length+n.length&&(t.split(n)[0]??"").split(/\D/).every(r=>!/^0+$/.exec(r))}function ss({mode:t,timeSegmentMaxValues:e={},timeSegmentMinValues:s={},step:n=0,prefix:r="",postfix:i=""}){let o=t.includes("AA"),c=E(E(E({},G),o?{hours:12}:{}),e),a=E(E(E({},xe),o?{hours:1}:{}),s),l=[...r,...ut(t)];return{mask:i?({value:u})=>hn(l,u).concat(...i):l,preprocessors:[K(),at(),de(i),gt(t),ht({timeMode:t,timeSegmentMinValues:a,timeSegmentMaxValues:c})],postprocessors:[ft(t),u=>dt(u,{mode:t,timeSegmentMaxValues:c}),St(r),Et(i)],plugins:[At({fullMode:t,step:n,timeSegmentMaxValues:c}),Dt(t.indexOf("AA"))],overwriteMode:"replace"}}function hn(t,e){let s=Math.min(e.replaceAll(/\D/g,"").length,t.filter(r=>typeof r!="string").length)||1,n=t.findIndex(r=>typeof r!="string"&&!--s)+1;return t.slice(0,n)}var gn=/[^dmy]/g,fn=/^\D*/;function ce(t,e){let s=e.replaceAll(gn,"").length,[n=""]=new RegExp(`(\\d[^\\d]*){0,${s-1}}\\d?`).exec(t)||[],[r=""]=fn.exec(t.slice(n.length))||[];return[n,t.slice(n.length+r.length)]}function pn({dateModeTemplate:t,timeMode:e,min:s=et,max:n=ve,dateTimeSeparator:r}){return({value:i,selection:o})=>{let[c,a]=ce(i,t),l=V(c,t),u=ye(a,e);if(!dn(i,{dateMode:t,timeMode:e,dateTimeSeparator:r})){let p=pt(l,t),{year:m,month:S,day:D}=le(c,t)?ie(C(Z(p),s,n)):p,v=F(E({year:m,month:S,day:D},u),{dateMode:t,dateTimeSeparator:r,timeMode:e}),A=i.slice(v.length);return{selection:o,value:v+A}}let h=Z(l,u),d=C(h,s,n),[g=""]=i.match(/\D+$/g)||[],f=F(ie(d),{dateMode:t,dateTimeSeparator:r,timeMode:e})+g;return{selection:o,value:f}}}function mn({dateModeTemplate:t,dateSegmentsSeparator:e,dateTimeSeparator:s,timeMode:n,timeSegmentMaxValues:r}){return({elementState:i,data:o})=>{let{value:c,selection:a}=i;if(o===e)return{elementState:i,data:a[0]===c.length?o:""};let l=o.replaceAll(/\D/g,"");if(!l)return{elementState:i,data:o};let[u,h]=a,d=h+o.length,g=c.slice(0,u)+l+c.slice(d),[f,p]=ce(g,t),m="",S=g.includes(s),{validatedDateString:D,updatedSelection:v}=ot({dateString:f,dateSegmentsSeparator:e,dateModeTemplate:t,offset:0,selection:[u,d]});if(f&&!D)return{elementState:i,data:""};d=v[1],m+=D;let A=dt({value:p,selection:[u,d]},{mode:n,timeSegmentMaxValues:r});d=A.selection[1],m+=S?s+A.value:A.value;let x=m.slice(u,d);return{elementState:{selection:a,value:m.slice(0,u)+x.split(e).map(R=>"0".repeat(R.length)).join(e)+m.slice(d)},data:x}}}function rs({dateMode:t,timeMode:e,dateSeparator:s=".",min:n,max:r,dateTimeSeparator:i=ue,timeStep:o=0}){let c=e.includes("AA"),a=t.split("/").join(s),l=E(E({},G),c?{hours:12}:{}),u=E(E({},xe),c?{hours:1}:{}),h=`${a}${i}${e}`;return P(E({},I),{mask:[...Array.from(a).map(d=>s.includes(d)?d:/\d/),...i.split(""),...ut(e)],overwriteMode:"replace",preprocessors:[K(),at(),lt({dateModeTemplate:a,dateSegmentSeparator:s,firstDateEndSeparator:i,pseudoFirstDateEndSeparators:i.split("")}),de(),gt(e),Re({dateModeTemplate:a,dateSegmentsSeparator:s,dateTimeSeparator:i}),ht({timeMode:e,timeSegmentMinValues:u,timeSegmentMaxValues:l,parseValue:d=>{let[g,f]=ce(d,a);return{timeString:f,restValue:g+i}}}),mn({dateModeTemplate:a,dateSegmentsSeparator:s,dateTimeSeparator:i,timeMode:e,timeSegmentMaxValues:l})],postprocessors:[ft(e),Me({dateModeTemplate:a,dateSegmentSeparator:s,splitFn:d=>{let[g,f]=ce(d,a);return{dateStrings:[g],restPart:f}},uniteFn:([d],g)=>d+(g.includes(i)?i:"")}),pn({min:n,max:r,dateModeTemplate:a,timeMode:e,dateTimeSeparator:i})],plugins:[At({step:o,fullMode:h,timeSegmentMaxValues:G}),Dt(h.indexOf("AA"))]})}function En(t,{prefix:e,postfix:s,decimalSeparator:n,decimalPseudoSeparators:r,minusSign:i,minusPseudoSigns:o,maximumFractionDigits:c}){var v,A,x,R;let a=[...r,n].map(O=>`\\${O}`).join(""),l=[...o,i].map(O=>`\\${O}`).join(""),u=e&&new RegExp(`^([${l}])?(${e.split("").map(w).join("?")}?)`),h=s&&new RegExp(`${s.split("").map(w).join("?")}?$`),[,,d=""]=t.match(u)??[],[g=""]=t.match(h)??[],f=t.replace(u,e&&"$1").replace(h,""),p=new RegExp(n&&c>0?`^[${a}]`:""),m=new RegExp(t.endsWith(s)?"":String.raw`^\d+`),S=new RegExp(n&&c>0?`[${a}]$`:""),D=new RegExp(t.startsWith(e)?"":String.raw`\d+$`);return{extractedPrefix:d.replace(S,"").replace(D,""),extractedPostfix:g.replace(p,"").replace(m,""),cleanValue:(((v=D.exec(d))==null?void 0:v[0])??"")+(((A=S.exec(d))==null?void 0:A[0])??"")+f+(((x=m.exec(g))==null?void 0:x[0])??"")+(((R=p.exec(g))==null?void 0:R[0])??"")}}function xt({decimalPseudoSeparators:t,decimalSeparator:e,maximumFractionDigits:s,min:n,minusSign:r,minusPseudoSigns:i,postfix:o,prefix:c,thousandSeparator:a}){let l=n<0&&[r,...i].includes(c)?"":Je(c),u=String.raw`\d`,h=n<0?`[${r}${i.map(S=>`\\${S}`).join("")}]?`:"",d=a?`[${u}${w(a).replaceAll(/\s/g,String.raw`\s`)}]*`:`[${u}]*`,g=Number.isFinite(s)?s:"",f=s>0?`([${w(e)}${t.map(w).join("")}]${u}{0,${g}})?`:"",p=Je(o),m=`(${h+l}|${l+h})`;return new RegExp(`^${m}${d}${f}${p}$`)}function Je(t){return t?`${t.split("").map(e=>`${w(e)}?`).join("")}`:""}function M(t,e){var p;let{extractedPrefix:s,cleanValue:n,extractedPostfix:r}=En(t,e),{decimalSeparator:i,minusSign:o,minusPseudoSigns:c,decimalPseudoSeparators:a,maximumFractionDigits:l}=e,[u="",h=""]=i?n.split(i):[n],d=[o,...c].map(m=>`\\${m}`).join(""),[,g="",f=""]=new RegExp(`^([${d}])?(.*)`).exec(u)||[];return{prefix:s,minus:g,integerPart:f,decimalPart:h,decimalSeparator:i&&l>0?((p=new RegExp(`[${[i,...a].map(w).join("")}]`,"i").exec(n))==null?void 0:p[0])??"":"",postfix:r}}function y({minus:t="",integerPart:e="",decimalPart:s="",prefix:n="",postfix:r="",decimalSeparator:i=""},o){let c=s?o.decimalSeparator:i;return`${o.negativePattern==="minusFirst"?t+n:n+t}${e}${c}${s}${r}`}function be(t,{decimalSeparator:e=".",minusSign:s="",minusPseudoSigns:n=st}={}){let r=!!new RegExp(`^\\D*[${w(s)}\\${n.join("\\")}]`).exec(t),i=w(e),o=t.replaceAll(new RegExp(`${i}(?!\\d)`,"g"),"").replaceAll(new RegExp(`[^\\d${i}]`,"g"),"").replace(e,e&&".");return o?+`${r?ae:""}${o}`:NaN}function Sn(t){let e=String(t),[s="",n]=e.split("e-"),r=e;if(n){let[,i]=s.split("."),o=Number(n)+((i==null?void 0:i.length)??0);r=t.toFixed(o)}return r}function vn({decimalSeparator:t,thousandSeparator:e,decimalPseudoSeparators:s=Ot}){return s.filter(n=>n!==e&&n!==t)}function Dn(t){return({elementState:e,data:s})=>{let{value:n}=e,c=M(s,t),{prefix:r,postfix:i}=c,o=N(c,["prefix","postfix"]);return{elementState:e,data:y(P(E({},o),{prefix:n.startsWith(r)?"":r,postfix:n.endsWith(i)?"":i}),t)}}}function An(t){let{minimumFractionDigits:e}=t;return e?({value:s,selection:n})=>{if(Number.isNaN(be(s,t)))return{value:s,selection:n};let o=M(s,t),{decimalPart:r}=o,i=N(o,["decimalPart"]);return{value:y(P(E({},i),{decimalPart:r.padEnd(e,"0")}),t),selection:n}}:T}function xn(t){return({value:e,selection:s})=>{let[n]=s,{prefix:r,minus:i,integerPart:o,decimalSeparator:c,decimalPart:a,postfix:l}=M(e,t),u=!o&&!a&&c;return!o&&!Number(a)&&n===(i+r).length||u?{selection:s,value:y({prefix:r,minus:i,postfix:l},t)}:{value:e,selection:s}}}function Pn(t){let e=!0,s=xt(P(E({},t),{prefix:"",postfix:"",thousandSeparator:"",maximumFractionDigits:1/0,min:Number.MIN_SAFE_INTEGER}));return({elementState:n,data:r})=>{if(!e)return{elementState:n,data:r};e=!1;let{value:i,selection:o}=n,[c,a]=o,p=M(i,t),{prefix:l,postfix:u}=p,h=N(p,["prefix","postfix"]),d=y(h,t),g=_({selection:[Math.max(c-l.length,0),Math.max(a-l.length,0)],value:d},{mask:s}),f=d.slice(0,Math.max(a-l.length,0)).length-g.value.slice(0,g.selection[1]).length;return{elementState:{selection:[Math.max(c-f,0),Math.max(a-f,0)],value:y(P(E({},M(g.value,t)),{prefix:l,postfix:u}),t)},data:r}}}function wn(t){return({elementState:e},s)=>{let{value:n,selection:r}=e,[i,o]=r,{prefix:c,minusSign:a,negativePattern:l}=t,u=l==="prefixFirst"?c:a+c,h=y(P(E({},M(n,t)),{minus:""}),t),d=n.length-h.length;return{elementState:s.includes("delete")&&n.includes(a)&&i<u.length?{value:h,selection:[Math.max(i-d,u.length-1),Math.max(o-d,u.length-1)]}:e}}}function Mn(t){let{thousandSeparator:e}=t,s=r=>{let i=w(e);return r.replace(new RegExp(`^(\\D+)?[0${i}]+(?=0)`),"$1").replace(new RegExp(`^(\\D+)?[0${i}]+(?=[1-9])`),"$1")},n=(r,i)=>{let o=r.slice(0,i),c=r.slice(i).startsWith("0");return o.length-s(o).length+(c?1:0)};return({value:r,selection:i})=>{let[o,c]=i,g=M(r,t),{integerPart:a}=g,l=N(g,["integerPart"]),u=s(a);if(a===u)return{value:r,selection:i};let h=o-n(r,o),d=c-n(r,c);return{value:y(P(E({},l),{integerPart:u}),t),selection:[Math.max(h,0),Math.max(d,0)]}}}function yn({min:t,max:e,decimalSeparator:s,minusSign:n}){return({value:r,selection:i})=>{let o=be(r,{decimalSeparator:s,minusSign:n}),c=o>0?Math.min(o,e):Math.max(o,t);if(o&&c!==o){let a=`${c}`.replace(".",s).replace(ae,n);return{value:a,selection:[a.length,a.length]}}return{value:r,selection:i}}}function Rn({decimalSeparator:t,thousandSeparator:e,minimumFractionDigits:s}){return({elementState:n,data:r},i)=>{let{value:o,selection:c}=n,[a,l]=c,u=o.slice(a,l),h=s?[t,e]:[e],d=!!s&&a>o.indexOf(t)&&!!u.match(/^0+$/gi);return i!=="deleteBackward"&&i!=="deleteForward"||!h.includes(u)&&!d?{elementState:n,data:r}:{elementState:{value:o,selection:i==="deleteForward"?[l,l]:[a,a]},data:r}}}function bn(t){let{maximumFractionDigits:e,decimalSeparator:s}=t,n=new RegExp(`^\\D*${w(s)}`);return({elementState:r,data:i})=>{let{value:o,selection:c}=r,S=M(o,t),{prefix:a,postfix:l}=S,u=N(S,["prefix","postfix"]),h=y(u,t),[d,g]=c,f=C(d-a.length,0,h.length),p=C(g-a.length,0,h.length);if(e<=0||h.slice(0,f).includes(s)||h.slice(p).includes(s)||!i.match(n))return{elementState:r,data:i};let m=/\d+/.exec(h.slice(0,f));return{elementState:r,data:m?i:`0${i}`}}}function Nn({prefix:t,minusSign:e,negativePattern:s}){return({value:n,selection:r},i)=>St(n.includes(e)&&s==="minusFirst"?e+t:t)({value:n,selection:r},i)}function Xe(n){var r=n,{validCharacter:t,pseudoCharacters:e}=r,s=N(r,["validCharacter","pseudoCharacters"]);let i=new RegExp(`[${e.join("")}]`,"gi");return({elementState:o,data:c})=>{let{value:a,selection:l}=o,f=M(a,s),{prefix:u,postfix:h}=f,d=N(f,["prefix","postfix"]),g=y(d,s).replace(i,t);return{elementState:{selection:l,value:y(P(E({},M(g,s)),{prefix:u,postfix:h}),s)},data:c.replace(i,t)}}}function Cn(t){let{decimalSeparator:e}=t;return e?({elementState:s,data:n})=>{let{value:r,selection:i}=s,[o,c]=i;return{elementState:s,data:!M(r,t).decimalSeparator||r.slice(o,c+1).includes(e)?n:n.replaceAll(new RegExp(w(e),"gi"),"")}}:T}function In(t){let{thousandSeparator:e}=t;if(!e)return T;let s=(...n)=>n.every(r=>/\s/.test(r));return({value:n,selection:r})=>{let[i,o]=r,[c,a]=r,{prefix:l,minus:u,integerPart:h,decimalSeparator:d,decimalPart:g,postfix:f}=M(n,t),p=y({minus:u,integerPart:h,decimalSeparator:d,decimalPart:g},t).length-(u+h+(d?d+g:"")).length;p>0&&i&&i<=p&&(c-=p),p>0&&o&&o<=p&&(a-=p);let m=Array.from(h).reduceRight((S,D,v)=>{let x=!(!v&&D===e)&&!!S.length&&(S.length+1)%4===0,R=D===e||s(D,e);return x&&R?e+S:!x&&R?(c&&v<=i&&c--,a&&v<=o&&a--,S):x?(v<i&&c++,v<o&&a++,D+e+S):D+S},"");return{value:y({prefix:l,minus:u,integerPart:m,decimalSeparator:d,decimalPart:g,postfix:f},t),selection:[c,a]}}}function Ln(t){let{maximumFractionDigits:e,decimalSeparator:s}=t;if(e>0||!s)return T;let n=new RegExp(`${w(s)}.*$`,"g");return({elementState:r,data:i})=>{let{value:o,selection:c}=r,p=M(o,t),{prefix:a,postfix:l}=p,u=N(p,["prefix","postfix"]),[h,d]=c,g=y(u,t).replace(n,""),f=y(P(E({},M(g,t)),{prefix:a,postfix:l}),t);return{elementState:{selection:[Math.min(h,f.length),Math.min(d,f.length)],value:f},data:i.replace(n,"")}}}var ze=[0,0];function $n(t){let e=Mn(t);return J("blur",s=>{let n=e({value:s.value,selection:ze},{value:"",selection:ze}).value;L(s,n)},{capture:!0})}function kn({min:t,max:e,decimalSeparator:s,minusSign:n}){return J("blur",(r,i)=>{let o=be(r.value,{decimalSeparator:s,minusSign:n}),c=C(o,t,e);!Number.isNaN(o)&&o!==c&&L(r,_(Sn(c),i))},{capture:!0})}function Tn(t){let{decimalSeparator:e}=t;return e?J("blur",s=>{let a=M(s.value,t),{prefix:n,postfix:r}=a,i=N(a,["prefix","postfix"]),o=y(i,t).replace(new RegExp(`^(\\D+)?${w(e)}`),`$10${e}`),c=y(P(E({},M(o,t)),{prefix:n,postfix:r}),t);L(s,c)},{capture:!0}):we}function is({max:t=Number.MAX_SAFE_INTEGER,min:e=Number.MIN_SAFE_INTEGER,thousandSeparator:s=k,decimalSeparator:n=".",decimalPseudoSeparators:r,prefix:i="",postfix:o="",minusSign:c=Ae,minusPseudoSigns:a=st.filter(d=>d!==s&&d!==n&&d!==c),maximumFractionDigits:l=0,minimumFractionDigits:u=0,negativePattern:h="prefixFirst"}={}){let d=vn({decimalSeparator:n,thousandSeparator:s,decimalPseudoSeparators:r}),g={max:t,min:e,thousandSeparator:s,postfix:o,minusSign:c,minusPseudoSigns:a,maximumFractionDigits:l,decimalPseudoSeparators:d,negativePattern:h,decimalSeparator:l<=0&&n===s?"":n,prefix:i.endsWith(n)&&l>0?`${i}${Vt}`:i,minimumFractionDigits:Math.min(u,l)};return P(E({},I),{mask:xt(g),preprocessors:[K(),Pn(g),Dn(g),Xe(P(E({},g),{validCharacter:c,pseudoCharacters:a})),Xe(P(E({},g),{validCharacter:n,pseudoCharacters:d})),bn(g),Rn(g),Ln(g),Cn(g),wn(g)],postprocessors:[yn(g),Nn(g),Et(o),In(g),An(g),xn(g)],plugins:[$n(g),Tn(g),kn(g)],overwriteMode:u>0?({value:f,selection:[p]})=>p<=f.indexOf(n)?"shift":"replace":"shift"})}export{I as a,_ as b,_n as c,Zn as d,Yn as e,St as f,zn as g,sn as h,qn as i,Qn as j,es as k,ns as l,ss as m,rs as n,be as o,is as p};
