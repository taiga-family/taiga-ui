import{c as Oe}from"./chunk-TDHYON55.js";import{$a as $e,Ob as ge,Vb as Ie,Wa as Te,Wb as Ne,td as ke,vd as _e,za as z}from"./chunk-2UPKG2B4.js";import{a as m,b as A,d as C,h as Le}from"./chunk-B4AJQJMI.js";function Fe(t){let{anchorOffset:e=0,focusOffset:s=0}=t.ownerDocument.getSelection()||{},n=Math.min(e,s),r=Math.max(e,s);return[n,r]}function yt(t,[e,s]){let n=t.ownerDocument,r=n.createRange();r.setStart(t.firstChild||t,Math.min(e,t.textContent?.length??0)),r.setEnd(t.lastChild||t,Math.min(s,t.textContent?.length??0));let i=n.getSelection();i&&(i.removeAllRanges(),i.addRange(r))}var he=class{constructor(e){this.element=e,this.maxLength=1/0}get value(){return this.element.innerText.replace(/\n\n$/,`
`)}set value(e){this.element.innerHTML=e.replace(/\n$/,`

`)}get selectionStart(){return Fe(this.element)[0]}get selectionEnd(){return Fe(this.element)[1]}setSelectionRange(e,s){yt(this.element,[e??0,s??0])}select(){this.setSelectionRange(0,this.value.length)}};function wt(t){let e=new he(t);return new Proxy(t,{get(s,n){if(n in e)return e[n];let r=s[n];return typeof r=="function"?r.bind(s):r},set(s,n,r,i){return Reflect.set(n in e?e:s,n,r,i)}})}var Be=t=>t.isContentEditable?wt(t):t.querySelector("input,textarea")||t,T={mask:/^.*$/,preprocessors:[],postprocessors:[],plugins:[],overwriteMode:"shift"},pe=class{constructor(){this.now=null,this.past=[],this.future=[]}undo(){let e=this.past.pop();e&&this.now&&(this.future.push(this.now),this.updateElement(e,"historyUndo"))}redo(){let e=this.future.pop();e&&this.now&&(this.past.push(this.now),this.updateElement(e,"historyRedo"))}updateHistory(e){if(!this.now){this.now=e;return}let s=this.now.value!==e.value,n=this.now.selection.some((r,i)=>r!==e.selection[i]);!s&&!n||(s&&(this.past.push(this.now),this.future=[]),this.now=e)}updateElement(e,s){this.now=e,this.updateElementState(e,{inputType:s,data:null})}};function Mt(t,...e){return e.every(({value:s})=>s===t.value)}function me(t,...e){return e.every(({value:s,selection:n})=>s===t.value&&n[0]===t.selection[0]&&n[1]===t.selection[1])}function Ve({value:t,selection:e},s,n){let[r,i]=e,o=typeof n=="function"?n({value:t,selection:e}):n;return{value:t,selection:o==="replace"?[r,Math.max(r+s.length,i)]:[r,i]}}function ee(t){return typeof t=="string"}function He(t,e,s,n){let r="";for(let i=e.length;i<t.length;i++){let o=t[i]||"",c=n?.value[i]===o;if(!ee(o)||o===s&&!c)return r;r+=o}return r}function We(t,e){return Array.isArray(e)?t.length===e.length&&Array.from(t).every((s,n)=>{let r=e[n]||"";return ee(r)?s===r:s.match(r)}):e.test(t)}function Rt(t,e,s){let n=null,r=null,i=Array.from(t.value).reduce((c,l,a)=>{let u=He(e,c,l,s),g=c+u,d=e[g.length]||"";return n===null&&a>=t.selection[0]&&(n=g.length),r===null&&a>=t.selection[1]&&(r=g.length),ee(d)?g+d:l.match(d)?g+l:u.startsWith(l)?g:c},""),o=He(e,i,"",s);return{value:We(i+o,e)?i+o:i,selection:[n??i.length,r??i.length]}}function bt({value:t,selection:e},s){let[n,r]=e,i=n,o=r,c=Array.from(t).reduce((l,a,u)=>{let g=l+a;return n===u&&(i=l.length),r===u&&(o=l.length),g.match(s)?g:l},"");return{value:c,selection:[Math.min(i,c.length),Math.min(o,c.length)]}}function X(t,e,s=null){if(We(t.value,e))return t;let{value:n,selection:r}=Array.isArray(e)?Rt(t,e,s):bt(t,e);return{selection:r,value:Array.isArray(e)?n.slice(0,e.length):n}}function Ue(t,e){if(!Array.isArray(e))return t;let[s,n]=t.selection,r=[],i=Array.from(t.value).reduce((o,c,l)=>{let a=e[l]||"";return l===s&&r.push(o.length),l===n&&r.push(o.length),ee(a)&&a===c?o:o+c},"");return r.length<2&&r.push(...new Array(2-r.length).fill(i.length)),{value:i,selection:[r[0],r[1]]}}var j=class{constructor(e,s){this.maskOptions=s,this.unmaskInitialState={value:"",selection:[0,0]},this.value="",this.selection=[0,0];let n=this.getMaskExpression(e),{value:r,selection:i}=X(e,n);this.unmaskInitialState=Ue({value:r,selection:i},n),this.value=r,this.selection=i}addCharacters(e){let{value:s,selection:n,maskOptions:r}=this,i={value:s,selection:n},{selection:[o,c]}=Ve(i,e,r.overwriteMode),l=this.getMaskExpression({value:s.slice(0,o)+e+s.slice(c),selection:[o+e.length,o+e.length]}),[a,u]=Ve(this.unmaskInitialState,e,r.overwriteMode).selection,g=this.unmaskInitialState.value.slice(0,a)+e,d=g.length,f=X({value:g+this.unmaskInitialState.value.slice(u),selection:[d,d]},l,i),h=s.slice(0,o),p=X({value:g,selection:[d,d]},l,i);if(p.value===h||p.value.length<h.length&&Ue(p,l).value===this.unmaskInitialState.value.slice(0,a)||me(this,f))throw new Error("Invalid mask value");this.value=f.value,this.selection=f.selection}deleteCharacters(){let[e,s]=this.selection;if(e===s||!s)return;let{value:n}=this,r=this.getMaskExpression({value:n.slice(0,e)+n.slice(s),selection:[e,e]}),i={value:n},[o,c]=this.unmaskInitialState.selection,l=this.unmaskInitialState.value.slice(0,o)+this.unmaskInitialState.value.slice(c),a=X({value:l,selection:[o,o]},r,i);this.value=a.value,this.selection=a.selection}getMaskExpression(e){let{mask:s}=this.maskOptions;return typeof s=="function"?s(e):s}},B=class{constructor(e){this.element=e,this.listeners=[]}listen(e,s,n){let r=s;this.element.addEventListener(e,r,n),this.listeners.push(()=>this.element.removeEventListener(e,r,n))}destroy(){this.listeners.forEach(e=>e())}},b={CTRL:1,ALT:2,SHIFT:4,META:8},H={Y:89,Z:90};function U(t,e,s){return t.ctrlKey===!!(e&b.CTRL)&&t.altKey===!!(e&b.ALT)&&t.shiftKey===!!(e&b.SHIFT)&&t.metaKey===!!(e&b.META)&&t.keyCode===s}function Ct(t){return U(t,b.CTRL,H.Y)||U(t,b.CTRL|b.SHIFT,H.Z)||U(t,b.META|b.SHIFT,H.Z)}function Lt(t){return U(t,b.CTRL,H.Z)||U(t,b.META,H.Z)}function $(t,e){let s=t.value;if(typeof e=="string")t.value=e;else{let[n,r]=e.selection;t.value=e.value,t.matches(":focus")&&t.setSelectionRange?.(n,r)}t.value!==s&&t.dispatchEvent(new Event("input",{bubbles:!0}))}function Tt({value:t,selection:e},s){let[n,r]=e;if(n!==r)return[n,r];let i=s?t.slice(n).indexOf(`
`)+1||t.length:t.slice(0,r).lastIndexOf(`
`)+1;return[s?n:i,s?i:r]}function $t({value:t,selection:e},s){let[n,r]=e;return n!==r?[n,r]:(s?[n,r+1]:[n-1,r]).map(o=>Math.min(Math.max(o,0),t.length))}var It=/\s+$/g,Nt=/^\s+/g,je=/\s/;function kt({value:t,selection:e},s){let[n,r]=e;if(n!==r)return[n,r];if(s){let l=t.slice(n),[a]=l.match(Nt)||[""],u=l.trimStart().search(je);return[n,u!==-1?n+a.length+u:t.length]}let i=t.slice(0,r),[o]=i.match(It)||[""],c=i.trimEnd().split("").reverse().findIndex(l=>je.exec(l));return[c!==-1?r-o.length-c:0,r]}function q(t=[]){return(e,...s)=>t.reduce((n,r)=>m(m({},n),r(n,...s)),e)}function I(t,e){let s=m(m({},T),e),n=q(s.preprocessors),r=q(s.postprocessors),i=typeof t=="string"?{value:t,selection:[0,0]}:t,{elementState:o}=n({elementState:i,data:""},"validation"),c=new j(o,s),{value:l,selection:a}=r(c,i);return typeof t=="string"?l:{value:l,selection:a}}function _t(){return t=>{let e=new B(t),s=!1,n,r=t.value;return e.listen("keydown",({key:i})=>{s=i==="Unidentified"}),e.listen("beforeinput",i=>{n=i,r=t.value}),e.listen("input",i=>{s&&n.defaultPrevented&&n.inputType==="deleteContentBackward"&&i.inputType==="deleteContentBackward"&&(t.value=r)},{capture:!0}),()=>e.destroy()}}var fe=" ";function Ot(){let t="",e=0,s=null,n=!1;return r=>{let i=new B(r);return i.listen("beforeinput",o=>{let{value:c,selectionStart:l,selectionEnd:a}=r,u=s?.inputType==="insertText"&&s?.data===fe&&!c.slice(0,Number(a)).endsWith(fe);o.inputType==="insertText"&&o.data===`.${fe}`&&(s?.inputType==="deleteContentBackward"&&n?(r.value=t,r.setSelectionRange?.(e,e)):u&&r.setSelectionRange?.(l,l)),n=u,s=o,t=c,e=Number((u?e:a)===c.length?a:l)}),()=>i.destroy()}}function Un(t){return(e,s)=>{let n=e.selectionStart??0,r=e.selectionEnd??0;$(e,{value:I(e.value,t||s),selection:[n,r]})}}var Ft=[Ot(),_t()],Q=class extends pe{constructor(e,s){super(),this.element=e,this.maskitoOptions=s,this.isTextArea=this.element.nodeName==="TEXTAREA",this.eventListener=new B(this.element),this.options=m(m({},T),this.maskitoOptions),this.upcomingElementState=null,this.preprocessor=q(this.options.preprocessors),this.postprocessor=q(this.options.postprocessors),this.teardowns=this.options.plugins.concat(Ft).map(n=>n(this.element,this.options)),this.updateHistory(this.elementState),this.eventListener.listen("keydown",n=>{if(Ct(n))return n.preventDefault(),this.redo();if(Lt(n))return n.preventDefault(),this.undo()}),this.eventListener.listen("beforeinput",n=>{let r=n.inputType.includes("Forward");switch(this.updateHistory(this.elementState),n.inputType){case"deleteByCut":case"deleteContentBackward":case"deleteContentForward":return this.handleDelete({event:n,isForward:r,selection:$t(this.elementState,r)});case"deleteHardLineBackward":case"deleteHardLineForward":case"deleteSoftLineBackward":case"deleteSoftLineForward":return this.handleDelete({event:n,isForward:r,selection:Tt(this.elementState,r),force:!0});case"deleteWordBackward":case"deleteWordForward":return this.handleDelete({event:n,isForward:r,selection:kt(this.elementState,r)});case"historyRedo":return n.preventDefault(),this.redo();case"historyUndo":return n.preventDefault(),this.undo();case"insertCompositionText":return;case"insertLineBreak":case"insertParagraph":return this.handleEnter(n);case"insertReplacementText":return;case"insertFromDrop":case"insertFromPaste":case"insertText":default:return this.handleInsert(n,n.data??n.dataTransfer?.getData("text/plain")??"")}}),this.eventListener.listen("input",()=>{this.upcomingElementState&&!me(this.upcomingElementState,this.elementState)&&this.updateElementState(this.upcomingElementState),this.upcomingElementState=null},{capture:!0}),this.eventListener.listen("input",({inputType:n})=>{n!=="insertCompositionText"&&(this.ensureValueFitsMask(),this.updateHistory(this.elementState))}),this.eventListener.listen("compositionend",()=>{this.ensureValueFitsMask(),this.updateHistory(this.elementState)})}destroy(){this.eventListener.destroy(),this.teardowns.forEach(e=>e?.())}updateElementState({value:e,selection:s},n){let r=this.elementState.value;this.updateValue(e),this.updateSelectionRange(s),n&&r!==e&&this.dispatchInputEvent(n)}get elementState(){let{value:e,selectionStart:s,selectionEnd:n}=this.element;return{value:e,selection:[s??0,n??0]}}get maxLength(){let{maxLength:e}=this.element;return e===-1?1/0:e}updateSelectionRange([e,s]){let{element:n}=this;n.matches(":focus")&&(n.selectionStart!==e||n.selectionEnd!==s)&&n.setSelectionRange?.(e,s)}updateValue(e){(this.element.value!==e||this.element.isContentEditable)&&(this.element.value=e)}ensureValueFitsMask(){this.updateElementState(I(this.elementState,this.options),{inputType:"insertText",data:null})}dispatchInputEvent(e={inputType:"insertText",data:null}){globalThis.InputEvent&&this.element.dispatchEvent(new InputEvent("input",A(m({},e),{bubbles:!0,cancelable:!1})))}handleDelete({event:e,selection:s,isForward:n}){let r={value:this.elementState.value,selection:s},{elementState:i}=this.preprocessor({elementState:r,data:""},n?"deleteForward":"deleteBackward"),o=new j(i,this.options);o.deleteCharacters();let c=this.postprocessor(o,r);if(Mt(r,i,o,c)){let[l,a]=i.selection;return e.preventDefault(),this.updateSelectionRange(n?[a,a]:[l,l])}this.upcomingElementState=c}handleInsert(e,s){let{options:n,maxLength:r,elementState:i}=this,[o,c]=i.selection,{elementState:l,data:a=s}=this.preprocessor({data:s,elementState:i},"insert"),u=new j(l,n);try{u.addCharacters(a)}catch{return e.preventDefault()}this.upcomingElementState=this.clampState(this.postprocessor(u,i)),i.value.length>=r&&o===c&&(n.overwriteMode==="replace"&&!me(this.upcomingElementState,i)?this.dispatchInputEvent({inputType:"insertText",data:s}):this.upcomingElementState=null)}handleEnter(e){(this.isTextArea||this.element.isContentEditable)&&this.handleInsert(e,`
`)}clampState({value:e,selection:s}){let[n,r]=s,i=this.maxLength;return{value:e.slice(0,i),selection:[Math.min(n,i),Math.min(r,i)]}}};var Xn=(()=>{let e=class e{constructor(){this.elementRef=z($e).nativeElement,this.ngZone=z(Te),this.maskedElement=null,this.initEffect=_e(()=>Le(this,null,function*(){let r=this.options(),i=this.elementPredicate(),{maskedElement:o,elementRef:c,ngZone:l}=this;if(o?.destroy(),!r)return;let a=yield i(c);this.elementPredicate()!==i||this.options()!==r||l.runOutsideAngular(()=>{this.maskedElement=new Q(a,r)})})),this.options=ge(null,{alias:"maskito"}),this.elementPredicate=ge(Be,{alias:"maskitoElement"});let n=z(Oe,{self:!0,optional:!0});if(n){let r=n.writeValue.bind(n);n.writeValue=i=>{let o=ke(()=>this.options());r(o?I(String(i??""),o):i)}}}ngOnDestroy(){this.maskedElement?.destroy()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Ie({type:e,selectors:[["","maskito",""]],inputs:{options:[1,"maskito","options"],elementPredicate:[1,"maskitoElement","elementPredicate"]},outputs:{options:"maskitoChange",elementPredicate:"maskitoElementChange"}});let t=e;return t})(),qn=(()=>{let e=class e{transform(n,r){return I(String(n??""),r??T)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=Ne({name:"maskito",type:e,pure:!0});let t=e;return t})();function M(t,e,s){let n=Ht(e??t,t);return Vt(s??n,n)}function Vt(t,...e){return e.reduce((s,n)=>s<n?s:n,t)}function Ht(t,...e){return e.reduce((s,n)=>s>n?s:n,t)}function qe(t){return t.replaceAll(/\W/g,"").length}var Qe={day:31,month:12,year:9999},Ut=[".",",","\u0431","\u044E"],et=new Date("0001-01-01T00:00"),ve=new Date("9999-12-31T23:59:59.999"),L="\xA0",jt="\u200B",De="\u2013",tt="\u2014",F="-",ce="\u2212",nt="\u30FC",Bt=":",Wt="\uFF1A",st=[F,De,tt,nt,ce],le={hours:23,minutes:59,seconds:59,milliseconds:999},Ae={hours:0,minutes:0,seconds:0,milliseconds:0},ne=new RegExp(`[${L}APM]+$`,"g"),se=new RegExp(`${L}[AP]M$`,"g"),xe=[":","."],rt={hours:2,minutes:2,seconds:2,milliseconds:3},Gt=[F,De,tt,ce,nt],Zt=1,Ee=12,N={January:0,February:1,April:3,June:5,September:8,November:10,December:11};function Ge(t,{day:e=0,month:s=0,year:n=0}={}){if(e===0&&s===0&&n===0)return t;let r=t.getFullYear(),i=t.getMonth(),o=t.getDate(),c=(r+n)*Ee+i+s,l=Math.floor(c/Ee),a=c%Ee,u=W(a,G(l)),g=W(i,G(l)),d=e;for(o>=u?d+=o-(g-u):g<u&&o===g?d+=o+(u-g):d+=o;d>W(a,G(l));)d-=W(a,G(l)),a===N.December?(l++,a=N.January):a++;for(;d<Zt;)a===N.January?(l--,a=N.December):a--,d+=W(a,G(l));return d=e<0||s<0||n<0?d+1:d-1,new Date(l,a,d)}function W(t,e){switch(t){case N.April:case N.June:case N.November:case N.September:return 30;case N.February:return e?29:28;default:return 31}}function G(t){return t%400===0||t%4===0&&t%100!==0}var it=t=>({day:t.match(/d/g)?.length??0,month:t.match(/m/g)?.length??0,year:t.match(/y/g)?.length??0});function re(t){return{day:String(t.getDate()).padStart(2,"0"),month:String(t.getMonth()+1).padStart(2,"0"),year:String(t.getFullYear()).padStart(4,"0"),hours:String(t.getHours()).padStart(2,"0"),minutes:String(t.getMinutes()).padStart(2,"0"),seconds:String(t.getSeconds()).padStart(2,"0"),milliseconds:String(t.getMilliseconds()).padStart(3,"0")}}var Yt=["day","month","year"];function Kt(t){return[...Yt].sort((e,s)=>t.indexOf(e[0])>t.indexOf(s[0])?1:-1)}function Jt(t,e){let s=qe(e),[n=""]=new RegExp(`(\\D*\\d){${s}}`).exec(t)||[];return n}function ae(t,e){return t.length<e.length?!1:t.split(/\D/).every(s=>!/^0+$/.exec(s))}function Y(t,e,s){let n=qe(e);return t.replace(s,"").match(new RegExp(`(\\D*\\d[^\\d\\s]*){1,${n}}`,"g"))||[]}function V(t,e){let s=e.replaceAll(/[^dmy]/g,""),n=t.replaceAll(/\D+/g,""),r={day:n.slice(s.indexOf("d"),s.lastIndexOf("d")+1),month:n.slice(s.indexOf("m"),s.lastIndexOf("m")+1),year:n.slice(s.indexOf("y"),s.lastIndexOf("y")+1)};return Object.fromEntries(Object.entries(r).filter(([i,o])=>!!o).sort(([i],[o])=>e.toLowerCase().indexOf(i.slice(0,1))>e.toLowerCase().indexOf(o.slice(0,1))?1:-1))}function Z(t,e){let s=t.year?.length===2?`20${t.year}`:t.year,n=new Date(Number(s??"0"),Number(t.month??"1")-1,Number(t.day??"1"),Number(e?.hours??"0"),Number(e?.minutes??"0"),Number(e?.seconds??"0"),Number(e?.milliseconds??"0"));return n.setFullYear(Number(s??"0")),n}var ue=", ";function _({day:t,month:e,year:s,hours:n,minutes:r,seconds:i,milliseconds:o},{dateMode:c,dateTimeSeparator:l=ue,timeMode:a}){let u=c.match(/y/g)?.length===2?s?.slice(-2):s;return(c+(a?l+a:"")).replaceAll(/d+/g,t??"").replaceAll(/m+/g,e??"").replaceAll(/y+/g,u??"").replaceAll(/H+/g,n??"").replaceAll("MSS",o??"").replaceAll(/M+/g,r??"").replaceAll(/S+/g,i??"").replaceAll(/^\D+/g,"").replaceAll(/\D+$/g,"")}function ot({dateString:t,dateModeTemplate:e,dateSegmentsSeparator:s,offset:n,selection:[r,i]}){let o=V(t,e),c=Object.entries(o),l=Kt(e),a={};for(let d=0;d<c.length;d++){let[f,h]=c[d],p=_(a,{dateMode:e}),E=Qe[f],S=p.length&&s.length,v=n+p.length+S+it(e)[f],D=v>=r&&v===i;if(D&&Number(h)>Number(E)){let P=l[l.indexOf(f)+1];if(!P||P==="year")return{validatedDateString:"",updatedSelection:[r,i]};a[f]=`0${h.slice(0,-1)}`,c[d+1]=[P,h.slice(-1)+(c[d+1]?.[1]??"").slice(1)];continue}if(D&&Number(h)<1)return{validatedDateString:"",updatedSelection:[r,i]};a[f]=h}let u=_(a,{dateMode:e}),g=u.length-t.length;return{validatedDateString:u,updatedSelection:[r+g,i+g]}}function k(t){return t}function Pe(){}var ct=/[\\^$.*+?()[\]{}|]/g,zt=new RegExp(ct.source);function x(t){return t&&zt.test(t)?t.replaceAll(ct,String.raw`\$&`):t}function Xt(t,e){let s="";for(let n=0;n<t.length;n++){if(t[n]!==e[n])return s;s+=t[n]}return s}function Se(t){return!t||typeof t=="object"&&Object.keys(t).length===0}var qt=/^0+$/;function ie(t,e,s=0){let n=t.padEnd(e.length,"0");if(Number(n)<=Number(e))return{validatedSegmentValue:t,prefixedZeroesCount:s};if(n.endsWith("0"))return ie(`0${t.slice(0,e.length-1)}`,e,s+1);let r=t.slice(0,e.length-1);return qt.exec(r)?{validatedSegmentValue:"",prefixedZeroesCount:s}:ie(`${r}0`,e,s)}function Ze(t){return t.replaceAll(new RegExp(Wt,"g"),Bt)}function Ye(t){return t.replaceAll(/[０-９]/g,e=>String.fromCharCode(e.charCodeAt(0)-65248))}function lt(){return({elementState:t,data:e})=>{let{value:s,selection:n}=t;return{elementState:{selection:n,value:Ze(s)},data:Ze(e)}}}function ye({dateModeTemplate:t,dateSegmentSeparator:e,splitFn:s,uniteFn:n}){return({value:r,selection:i})=>{let[o,c]=i,{dateStrings:l,restPart:a=""}=s(r),u=[],g=0;l.forEach(f=>{let h=V(f,t),E=Object.entries(h).reduce((S,[v,D])=>{let{validatedSegmentValue:P,prefixedZeroesCount:R}=ie(D,`${Qe[v]}`);return g+=R,A(m({},S),{[v]:P})},{});u.push(_(E,{dateMode:t}))});let d=n(u,r)+(l[l.length-1]?.endsWith(e)?e:"")+a;return g&&d.slice(c+g,c+g+e.length)===e&&(g+=e.length),{selection:[o+g,c+g],value:d}}}function at({dateModeTemplate:t,firstDateEndSeparator:e,dateSegmentSeparator:s,pseudoFirstDateEndSeparators:n}){return({elementState:r,data:i})=>{let{value:o,selection:c}=r,[l,a]=c,u=Jt(o,t),g=n.filter(p=>!e.includes(p)&&p!==s),d=new RegExp(`[${g.join("")}]`,"gi"),f=u&&o.length>u.length?u+o.slice(u.length).replace(/^[\D\s]*/,e):o,h=f.length-o.length;return{elementState:{selection:[l+h,a+h],value:f},data:i.replace(d,e)}}}function K(){return({elementState:t,data:e})=>{let{value:s,selection:n}=t;return{elementState:{selection:n,value:Ye(s)},data:Ye(e)}}}function ut(t){return Array.from(t.replace(" AA","")).map(e=>xe.includes(e)?e:/\d/).concat(t.includes("AA")?[L,/[AP]/i,/M/i]:[])}function Qt(t,e){return Object.fromEntries(Object.entries(t).map(([s,n])=>[s,e(String(n),rt[s])]))}function en(t){return Qt(t,(e,s)=>e.padStart(s,"0"))}var Ke={HH:"hours",MM:"minutes",SS:"seconds",MSS:"milliseconds"};function we(t,e){let s=t.replaceAll(/\D+/g,""),n=0;return Object.fromEntries(e.split(/\W/).filter(r=>Ke[r]).map(r=>{let i=s.slice(n,n+r.length);return n+=r.length,[Ke[r],i]}))}var tn=/^\D*/,nn=/\D*$/;function sn({hours:t="",minutes:e="",seconds:s="",milliseconds:n=""}){return`${t}:${e}:${s}.${n}`.replace(tn,"").replace(nn,"")}var rn=new RegExp(`[${xe.map(x).join("")}]$`);function dt({value:t,selection:e},{mode:s,timeSegmentMaxValues:n=le}){let[r,i]=e,o=we(t,s),c=Object.entries(o),l=en(n),a={},u=0;for(let[S,v]of c){let D=l[S],{validatedSegmentValue:P,prefixedZeroesCount:R}=ie(v,String(D));u+=R,a[S]=P}let[g=""]=t.match(/^\D+(?=\d)/g)||[],[d=""]=t.match(/\D+$/g)||[],f=g+sn(a)+d,h=Math.max(f.length-t.length-u,0),p=r+u+h,E=i+u+h;return p===E&&u&&f.slice(0,E+1).match(rn)&&(p++,E++),{value:f,selection:[p,E]}}function gt({timeMode:t,timeSegmentMinValues:e=Ae,timeSegmentMaxValues:s=le,parseValue:n=r=>({timeString:r})}){let r=new RegExp(`[^\\d${xe.map(x).join("")}]+`);return({elementState:i,data:o},c)=>{if(c!=="insert")return{elementState:i,data:o};let{value:l,selection:a}=i,[u,g]=a,d=o.replace(r,""),f=g+d.length,h=l.slice(0,u)+d+l.slice(f),{timeString:p,restValue:E=""}=n(h),S=Object.entries(we(p,t)),v=E.length;for(let[D,P]of S){let R=e[D],O=s[D],be=Number(P),Ce=v+rt[D];if(Ce>=u&&Ce<=f&&be!==M(be,R,O))return{elementState:i,data:""};v+=P.length+1}return{elementState:i,data:o}}}function ft(t){if(!t.includes("AA"))return k;let e=/^[AP]$/gi;return({elementState:s,data:n})=>{let{value:r,selection:i}=s,o=r.toUpperCase(),c=n.toUpperCase();return o.match(se)&&c.match(e)?{elementState:{value:o.replaceAll(se,""),selection:i},data:`${c}M`}:{elementState:{selection:i,value:o},data:c}}}function ht(t){return t.includes("AA")?({value:e,selection:s},n)=>{if(!e.match(ne)||e.match(se))return{value:e,selection:s};let[r,i]=s;if(n.value.match(se)){let l=e.replace(ne,"");return{value:l,selection:[Math.min(r,l.length),Math.min(i,l.length)]}}let o=`${L}${e.includes("P")?"P":"A"}M`,c=e.replace(ne,l=>l!==L?o:l);return{value:c,selection:i>=c.indexOf(o)?[c.length,c.length]:s}}:k}function pt(t,e){let s=it(e);return Object.fromEntries(Object.entries(t).map(([n,r])=>{let i=s[n];return[n,r.length===i&&/^0+$/.exec(r)?"1".padStart(i,"0"):r]}))}var on="1972";function mt({dateModeTemplate:t,min:e=et,max:s=ve,rangeSeparator:n="",dateSegmentSeparator:r="."}){return({value:i,selection:o})=>{let c=n&&i.endsWith(n),l=Y(i,t,n),a="";for(let u of l){a+=a?n:"";let g=V(u,t);if(!ae(u,t)){let h=pt(g,t),p=_(h,{dateMode:t}),E=u.endsWith(r)?r:"";a+=p+E;continue}let d=Z(m({year:on},g)),f=M(d,e,s);a+=_(re(f),{dateMode:t})}return{selection:o,value:a+(c?n:"")}}}function Me({dateModeTemplate:t,dateSegmentsSeparator:e,rangeSeparator:s="",dateTimeSeparator:n=ue}){return({elementState:r,data:i})=>{let o=t.split(e),c=i.includes(n),l=i.slice(0,c?i.indexOf(n):1/0).split(/\D/).filter(Boolean);if(!l.length||l.length%o.length!==0)return{elementState:r,data:i};let a=l.reduce((u,g,d)=>{let f=o[d%o.length]??"",h=Math.trunc(d/o.length),p=d%o.length===o.length-1;return u[h]||(u[h]=""),u[h]+=p?g:`${g.padStart(f.length,"0")}${e}`,u},[]);return{elementState:r,data:c?`${a[0]}${i.slice(i.indexOf(n))}`:a.join(s)}}}function Et(t){let e=new RegExp(`${x(t)}$`),s=new RegExp(t&&`(${t.split("").map(x).reduce((n,r,i,o)=>`${n}|${o.slice(0,i+1).join("")}`)})$`);return t?({value:n,selection:r},i)=>{if(!n&&!i.value.endsWith(t))return{value:n,selection:r};if(!n.match(s)&&!i.value.endsWith(t))return{selection:r,value:n+t};let o=i.value.replace(e,""),c=i.selection[1]>o.length,l=Xt(o,n);return{selection:r,value:Array.from(t).reverse().reduce((a,u,g)=>{let d=a.length-1-g,f=l[d]===u&&c;return a[d]!==u||f?a.slice(0,d+1)+u+a.slice(d+1):a},n)}}:k}function St(t){return t?({value:e,selection:s},n)=>{if(e.startsWith(t)||!e&&!n.value.startsWith(t))return{value:e,selection:s};let[r,i]=s,o=Array.from(t).reduce((l,a,u)=>l[u]===a?l:l.slice(0,u)+a+l.slice(u),e),c=o.length-e.length;return{selection:[r+c,i+c],value:o}}:k}function vt({dateModeTemplate:t,dateSegmentsSeparator:e,rangeSeparator:s=""}){return({elementState:n,data:r})=>{let{value:i,selection:o}=n;if(r===e)return{elementState:n,data:o[0]===i.length?r:""};if(!r.replaceAll(/\D/g,""))return{elementState:n,data:r};let c=r.replaceAll(new RegExp(`[^\\d${x(e)}${s}]`,"g"),""),[l,a]=o,u=a+r.length,g=i.slice(0,l)+c+i.slice(u),d=Y(g,t,s),f="",h=!!s&&g.includes(s);for(let E of d){let{validatedDateString:S,updatedSelection:v}=ot({dateString:E,dateModeTemplate:t,dateSegmentsSeparator:e,offset:f.length,selection:[l,u]});if(E&&!S)return{elementState:n,data:""};u=v[1],f+=h&&!f?S+s:S}let p=f.slice(l,u);return{elementState:{selection:o,value:f.slice(0,l)+p.split(e).map(E=>"0".repeat(E.length)).join(e)+f.slice(u)},data:p}}}function J(t,e,s){return(n,r)=>{let i=()=>e(n,r);return n.addEventListener(t,i,s),()=>n.removeEventListener(t,i,s)}}function ns(t){return J("focus",e=>{e.value||$(e,t)})}function cn(t){return(e,s)=>{let n=e.ownerDocument,r=0,i=()=>r++,o=()=>{r=Math.max(--r,0)},c=()=>{if(e.matches(":focus")){if(r)return n.addEventListener("mouseup",c,{once:!0,passive:!0});t(e,s)}};return n.addEventListener("selectionchange",c,{passive:!0}),e.addEventListener("focus",c,{passive:!0}),e.addEventListener("mousedown",i,{passive:!0}),n.addEventListener("mouseup",o,{passive:!0}),()=>{n.removeEventListener("selectionchange",c),e.removeEventListener("focus",c),e.removeEventListener("mousedown",i),n.removeEventListener("mouseup",o)}}}function ss(t){return cn(e=>{let s=e.selectionStart??0,n=e.selectionEnd??0,[r,i]=t(e.value,[s,n]);(r>s||i<n)&&e.setSelectionRange(M(s,r,i),M(n,r,i))})}function rs(t){return J("blur",e=>{e.value===t&&$(e,"")})}function Dt(t){return t<0?Pe:e=>{let s=n=>{let r=Number(e.selectionStart),i=e.value.toUpperCase();if(n.key!=="ArrowUp"&&n.key!=="ArrowDown"||r<t)return;n.preventDefault();let o=i.includes("A")?"P":i.includes("P")||n.key==="ArrowUp"?"A":"P",c=`${L}${o}M`;$(e,{value:i.length===t?i+c:i.replace(ne,c),selection:[r,r]})};return e.addEventListener("keydown",s),()=>e.removeEventListener("keydown",s)}}function At({step:t,fullMode:e,timeSegmentMinValues:s,timeSegmentMaxValues:n}){let r=ln(e);return t<=0?Pe:i=>{let o=c=>{if(c.key!=="ArrowUp"&&c.key!=="ArrowDown")return;c.preventDefault();let l=i.selectionStart??0,a=an({segmentsIndexes:r,selectionStart:l});if(!a)return;let u=un({selection:r.get(a),value:i.value,toAdd:c.key==="ArrowUp"?t:-t,min:s[a],max:n[a]});$(i,{value:u,selection:[l,l]})};return i.addEventListener("keydown",o),()=>i.removeEventListener("keydown",o)}}function ln(t){return new Map([["hours",te(t,"HH")],["milliseconds",te(t,"MSS")],["minutes",te(t,"MM")],["seconds",te(t,"SS")]])}function te(t,e){let s=t.indexOf(e);return s===-1?[-1,-1]:[s,s+e.length]}function an({segmentsIndexes:t,selectionStart:e}){for(let[s,n]of t.entries()){let[r,i]=n;if(r<=e&&e<=i)return s}return null}function un({selection:t,value:e,toAdd:s,min:n,max:r}){let[i,o]=t,c=Number(e.slice(i,o).padEnd(o-i,"0")),l=dn(c+s,n,r+1);return e.slice(0,i)+String(l).padStart(o-i,"0")+e.slice(o,e.length)}function dn(t,e,s){let n=s-e;return((t-e)%n+n)%n+e}function de(t=""){let e=(s,[n,r])=>r>=s.length-t.length;return({elementState:s},n)=>{let{value:r,selection:i}=s;if(!r||e(r,i))return{elementState:s};let[o,c]=i,l=r.slice(o,c).replaceAll(/\d/g,"0"),a=r.slice(0,o)+l+r.slice(c);return l.replaceAll(/\D/g,"")?n==="validation"||n==="insert"&&o===c?{elementState:{selection:i,value:a}}:{elementState:{selection:n==="deleteBackward"||n==="insert"?[o,o]:[c,c],value:a}}:{elementState:s}}}function is({mode:t,separator:e=".",max:s,min:n}){let r=t.split("/").join(e);return A(m({},T),{mask:Array.from(r).map(i=>e.includes(i)?i:/\d/),overwriteMode:"replace",preprocessors:[K(),de(),Me({dateModeTemplate:r,dateSegmentsSeparator:e}),vt({dateModeTemplate:r,dateSegmentsSeparator:e})],postprocessors:[ye({dateModeTemplate:r,dateSegmentSeparator:e,splitFn:i=>({dateStrings:[i]}),uniteFn:([i=""])=>i}),mt({min:n,max:s,dateModeTemplate:r,dateSegmentSeparator:e})]})}var os=Intl.DateTimeFormat("en-US",{month:"2-digit",day:"2-digit",year:"numeric"});function gn({dateModeTemplate:t,rangeSeparator:e,minLength:s,maxLength:n,max:r=ve}){return Se(s)&&Se(n)?k:({value:i,selection:o})=>{let c=Y(i,t,e);if(c.length!==2||c.some(h=>!ae(h,t)))return{value:i,selection:o};let[l,a]=c.map(h=>Z(V(h,t)));if(!l||!a)return{value:i,selection:o};let u=Ge(l,s),g=Se(n)?r:Ge(l,n),d=M(a,u,r),f=d>g?g:d;return{selection:o,value:c[0]+e+_(re(f),{dateMode:t})}}}function fn({dateModeTemplate:t,rangeSeparator:e}){return({value:s,selection:n})=>{let r=Y(s,t,e),i=r.length===2&&r.every(d=>ae(d,t)),[o,c]=n,l=o>=s.length,a=o===0&&c>=s.length;if(!(l||a)||!i)return{value:s,selection:n};let[u,g]=r.map(d=>Z(V(d,t)));return{selection:n,value:u&&g&&u>g?r.reverse().join(e):s}}}function cs({mode:t,min:e,max:s,minLength:n,maxLength:r,dateSeparator:i=".",rangeSeparator:o=`${L}${De}${L}`}){let c=t.split("/").join(i),l=Array.from(c).map(a=>i.includes(a)?a:/\d/);return A(m({},T),{mask:[...l,...Array.from(o),...l],overwriteMode:"replace",preprocessors:[K(),at({dateModeTemplate:c,dateSegmentSeparator:i,firstDateEndSeparator:o,pseudoFirstDateEndSeparators:Gt}),de(),Me({dateModeTemplate:c,rangeSeparator:o,dateSegmentsSeparator:i}),vt({dateModeTemplate:c,rangeSeparator:o,dateSegmentsSeparator:i})],postprocessors:[ye({dateModeTemplate:c,dateSegmentSeparator:i,splitFn:a=>({dateStrings:Y(a,c,o)}),uniteFn:(a,u)=>a.reduce((g,d,f)=>g+d+(!f&&u.includes(o)?o:""),"")}),mt({min:e,max:s,dateModeTemplate:c,rangeSeparator:o,dateSegmentSeparator:i}),gn({dateModeTemplate:c,minLength:n,maxLength:r,max:s,rangeSeparator:o}),fn({dateModeTemplate:c,rangeSeparator:o})]})}function hn(t,{dateMode:e,timeMode:s,dateTimeSeparator:n=ue}){return t.length>=e.length+s.length+n.length&&(t.split(n)[0]??"").split(/\D/).every(r=>!/^0+$/.exec(r))}function ls({mode:t,timeSegmentMaxValues:e={},timeSegmentMinValues:s={},step:n=0,prefix:r="",postfix:i=""}){let o=t.includes("AA"),c=m(m(m({},le),o?{hours:12}:{}),e),l=m(m(m({},Ae),o?{hours:1}:{}),s),a=[...r,...ut(t)];return{mask:i?({value:u})=>pn(a,u).concat(...i):a,preprocessors:[K(),lt(),de(i),ft(t),gt({timeMode:t,timeSegmentMinValues:l,timeSegmentMaxValues:c})],postprocessors:[ht(t),u=>dt(u,{mode:t,timeSegmentMaxValues:c}),St(r),Et(i)],plugins:[At({fullMode:t,step:n,timeSegmentMinValues:l,timeSegmentMaxValues:c}),Dt(t.indexOf("AA"))],overwriteMode:"replace"}}function pn(t,e){let s=Math.min(e.replaceAll(/\D/g,"").length,t.filter(r=>typeof r!="string").length)||1,n=t.findIndex(r=>typeof r!="string"&&!--s)+1;return t.slice(0,n)}var mn=/[^dmy]/g,En=/^\D*/;function oe(t,e){let s=e.replaceAll(mn,"").length,[n=""]=new RegExp(`(\\d[^\\d]*){0,${s-1}}\\d?`).exec(t)||[],[r=""]=En.exec(t.slice(n.length))||[];return[n,t.slice(n.length+r.length)]}function Sn({dateModeTemplate:t,timeMode:e,min:s=et,max:n=ve,dateTimeSeparator:r}){return({value:i,selection:o})=>{let[c,l]=oe(i,t),a=V(c,t),u=we(l,e);if(!hn(i,{dateMode:t,timeMode:e,dateTimeSeparator:r})){let p=pt(a,t),{year:E,month:S,day:v}=ae(c,t)?re(M(Z(p),s,n)):p,D=_(m({year:E,month:S,day:v},u),{dateMode:t,dateTimeSeparator:r,timeMode:e}),P=i.slice(D.length);return{selection:o,value:D+P}}let g=Z(a,u),d=M(g,s,n),[f=""]=i.match(/\D+$/g)||[],h=_(re(d),{dateMode:t,dateTimeSeparator:r,timeMode:e})+f;return{selection:o,value:h}}}function vn({dateModeTemplate:t,dateSegmentsSeparator:e,dateTimeSeparator:s,timeMode:n,timeSegmentMaxValues:r}){return({elementState:i,data:o})=>{let{value:c,selection:l}=i;if(o===e)return{elementState:i,data:l[0]===c.length?o:""};let a=o.replaceAll(/\D/g,"");if(!a)return{elementState:i,data:o};let[u,g]=l,d=g+o.length,f=c.slice(0,u)+a+c.slice(d),[h,p]=oe(f,t),E="",S=f.includes(s),{validatedDateString:v,updatedSelection:D}=ot({dateString:h,dateSegmentsSeparator:e,dateModeTemplate:t,offset:0,selection:[u,d]});if(h&&!v)return{elementState:i,data:""};d=D[1],E+=v;let P=dt({value:p,selection:[u,d]},{mode:n,timeSegmentMaxValues:r});d=P.selection[1],E+=S?s+P.value:P.value;let R=E.slice(u,d);return{elementState:{selection:l,value:E.slice(0,u)+R.split(e).map(O=>"0".repeat(O.length)).join(e)+E.slice(d)},data:R}}}function as({dateMode:t,timeMode:e,dateSeparator:s=".",min:n,max:r,dateTimeSeparator:i=ue,timeStep:o=0}){let c=e.includes("AA"),l=t.split("/").join(s),a=m(m({},le),c?{hours:12}:{}),u=m(m({},Ae),c?{hours:1}:{}),g=`${l}${i}${e}`;return A(m({},T),{mask:[...Array.from(l).map(d=>s.includes(d)?d:/\d/),...i.split(""),...ut(e)],overwriteMode:"replace",preprocessors:[K(),lt(),at({dateModeTemplate:l,dateSegmentSeparator:s,firstDateEndSeparator:i,pseudoFirstDateEndSeparators:i.split("")}),de(),ft(e),Me({dateModeTemplate:l,dateSegmentsSeparator:s,dateTimeSeparator:i}),gt({timeMode:e,timeSegmentMinValues:u,timeSegmentMaxValues:a,parseValue:d=>{let[f,h]=oe(d,l);return{timeString:h,restValue:f+i}}}),vn({dateModeTemplate:l,dateSegmentsSeparator:s,dateTimeSeparator:i,timeMode:e,timeSegmentMaxValues:a})],postprocessors:[ht(e),ye({dateModeTemplate:l,dateSegmentSeparator:s,splitFn:d=>{let[f,h]=oe(d,l);return{dateStrings:[f],restPart:h}},uniteFn:([d],f)=>d+(f.includes(i)?i:"")}),Sn({min:n,max:r,dateModeTemplate:l,timeMode:e,dateTimeSeparator:i})],plugins:[At({step:o,fullMode:g,timeSegmentMinValues:u,timeSegmentMaxValues:a}),Dt(g.indexOf("AA"))]})}function Dn(t,{prefix:e,postfix:s,decimalSeparator:n,decimalPseudoSeparators:r,minusSign:i,minusPseudoSigns:o,maximumFractionDigits:c}){let l=[...r,n].map(D=>`\\${D}`).join(""),a=[...o,i].map(D=>`\\${D}`).join(""),u=e&&new RegExp(`^([${a}])?(${e.split("").map(x).join("?")}?)`),g=s&&new RegExp(`${s.split("").map(x).join("?")}?$`),[,,d=""]=t.match(u)??[],[f=""]=t.match(g)??[],h=t.replace(u,e&&"$1").replace(g,""),p=new RegExp(n&&c>0?`^[${l}]`:""),E=new RegExp(t.endsWith(s)?"":String.raw`^\d+`),S=new RegExp(n&&c>0?`[${l}]$`:""),v=new RegExp(t.startsWith(e)?"":String.raw`\d+$`);return{extractedPrefix:d.replace(S,"").replace(v,""),extractedPostfix:f.replace(p,"").replace(E,""),cleanValue:(v.exec(d)?.[0]??"")+(S.exec(d)?.[0]??"")+h+(E.exec(f)?.[0]??"")+(p.exec(f)?.[0]??"")}}function xt({decimalPseudoSeparators:t,decimalSeparator:e,maximumFractionDigits:s,min:n,minusSign:r,minusPseudoSigns:i,postfix:o,prefix:c,thousandSeparator:l}){let a=n<0&&[r,...i].includes(c)?"":Je(c),u=String.raw`\d`,g=n<0?`[${r}${i.map(S=>`\\${S}`).join("")}]?`:"",d=l?`[${u}${x(l).replaceAll(/\s/g,String.raw`\s`)}]*`:`[${u}]*`,f=Number.isFinite(s)?s:"",h=s>0?`([${x(e)}${t.map(x).join("")}]${u}{0,${f}})?`:"",p=Je(o),E=`(${g+a}|${a+g})`;return new RegExp(`^${E}${d}${h}${p}$`)}function Je(t){return t?`${t.split("").map(e=>`${x(e)}?`).join("")}`:""}function y(t,e){let{extractedPrefix:s,cleanValue:n,extractedPostfix:r}=Dn(t,e),{decimalSeparator:i,minusSign:o,minusPseudoSigns:c,decimalPseudoSeparators:l,maximumFractionDigits:a}=e,[u="",g=""]=i?n.split(i):[n],d=[o,...c].map(p=>`\\${p}`).join(""),[,f="",h=""]=new RegExp(`^([${d}])?(.*)`).exec(u)||[];return{prefix:s,minus:f,integerPart:h,decimalPart:g,decimalSeparator:i&&a>0?new RegExp(`[${[i,...l].map(x).join("")}]`,"i").exec(n)?.[0]??"":"",postfix:r}}function w({minus:t="",integerPart:e="",decimalPart:s="",prefix:n="",postfix:r="",decimalSeparator:i=""},o){let c=s?o.decimalSeparator:i;return`${o.negativePattern==="minusFirst"?t+n:n+t}${e}${c}${s}${r}`}function Re(t,{bigint:e=!1,decimalSeparator:s=".",maximumFractionDigits:n=0,minusPseudoSigns:r=st,minusSign:i=ce,thousandSeparator:o=L}={}){let c=!!new RegExp(`^\\D*[${x(i)}\\${r.join("\\")}]`).exec(t),l=x(s),a=t.replaceAll(new RegExp(`${l}(?!\\d)`,"g"),"").replaceAll(new RegExp(`[^\\d${n<=0&&s===o?"":l}]`,"g"),"").replace(s,s&&".");if(a){let u=c?F:"";return e?BigInt(`${u}${a}`):+`${u}${a}`}return e?null:NaN}var An=[],xn={minusSign:F,minusPseudoSigns:[],prefix:"",postfix:"",decimalSeparator:".",decimalPseudoSeparators:[],maximumFractionDigits:1/0};function Pt(t){let e=String(t),[s="",n]=e.split("e");if(!n)return e;if(!n.startsWith(F))return t.toLocaleString(An,{useGrouping:!1});let{minus:r,integerPart:i,decimalPart:o}=y(s,xn),c=i+o,l=Math.abs(Number(n)),a=l-i.length,u;if(a>=0)u=`0.${"0".repeat(a)}${c}`;else{let g=i.length-l;u=`${c.slice(0,g)}.${c.slice(g)}`}return r+u}function Pn({decimalSeparator:t,thousandSeparator:e,decimalPseudoSeparators:s=Ut}){return s.filter(n=>n!==e&&n!==t)}function yn(t){return({elementState:e,data:s})=>{let{value:n}=e,c=y(s,t),{prefix:r,postfix:i}=c,o=C(c,["prefix","postfix"]);return{elementState:e,data:w(A(m({},o),{prefix:n.startsWith(r)?"":r,postfix:n.endsWith(i)?"":i}),t)}}}function wn(t){let{minimumFractionDigits:e}=t;return e?({value:s,selection:n})=>{if(Number.isNaN(Re(s,t)))return{value:s,selection:n};let o=y(s,t),{decimalPart:r}=o,i=C(o,["decimalPart"]);return{value:w(A(m({},i),{decimalPart:r.padEnd(e,"0")}),t),selection:n}}:k}function Mn(t){return({value:e,selection:s})=>{let[n]=s,{prefix:r,minus:i,integerPart:o,decimalSeparator:c,decimalPart:l,postfix:a}=y(e,t),u=!o&&!l&&c;return!o&&!Number(l)&&n===(i+r).length||u?{selection:s,value:w({prefix:r,minus:i,postfix:a},t)}:{value:e,selection:s}}}function Rn(t){let e=!0,s=xt(A(m({},t),{prefix:"",postfix:"",thousandSeparator:"",maximumFractionDigits:1/0,min:-1/0}));return({elementState:n,data:r})=>{if(!e)return{elementState:n,data:r};e=!1;let{value:i,selection:o}=n,[c,l]=o,p=y(i,t),{prefix:a,postfix:u}=p,g=C(p,["prefix","postfix"]),d=w(g,t),f=I({selection:[Math.max(c-a.length,0),Math.max(l-a.length,0)],value:d},{mask:s}),h=d.slice(0,Math.max(l-a.length,0)).length-f.value.slice(0,f.selection[1]).length;return{elementState:{selection:[Math.max(c-h,0),Math.max(l-h,0)],value:w(A(m({},y(f.value,t)),{prefix:a&&t.prefix,postfix:u&&t.postfix}),t)},data:r}}}function bn(t){return({elementState:e},s)=>{let{value:n,selection:r}=e,[i,o]=r,{prefix:c,minusSign:l,negativePattern:a}=t,u=a==="prefixFirst"?c:l+c,g=w(A(m({},y(n,t)),{minus:""}),t),d=n.length-g.length;return{elementState:s.includes("delete")&&n.includes(l)&&i<u.length?{value:g,selection:[Math.max(i-d,u.length-1),Math.max(o-d,u.length-1)]}:e}}}function Cn(t){let{thousandSeparator:e}=t,s=r=>{let i=x(e);return r.replace(new RegExp(`^(\\D+)?[0${i}]+(?=0)`),"$1").replace(new RegExp(`^(\\D+)?[0${i}]+(?=[1-9])`),"$1")},n=(r,i)=>{let o=r.slice(0,i),c=r.slice(i).startsWith("0");return o.length-s(o).length+(c?1:0)};return({value:r,selection:i})=>{let[o,c]=i,f=y(r,t),{integerPart:l}=f,a=C(f,["integerPart"]),u=s(l);if(l===u)return{value:r,selection:i};let g=o-n(r,o),d=c-n(r,c);return{value:w(A(m({},a),{integerPart:u}),t),selection:[Math.max(g,0),Math.max(d,0)]}}}function Ln({min:t,max:e,decimalSeparator:s,minusSign:n,maximumFractionDigits:r}){return({value:i,selection:o})=>{let c=Re(i,{decimalSeparator:s,minusSign:n,bigint:!r&&!i.includes(s)})??NaN,l=c>0?M(c,null,e):M(c,t);if(c&&l!==c){let a=`${l}`.replace(".",s).replace(F,n);return{value:a,selection:[a.length,a.length]}}return{value:i,selection:o}}}function Tn({decimalSeparator:t,thousandSeparator:e,minimumFractionDigits:s}){return({elementState:n,data:r},i)=>{let{value:o,selection:c}=n,[l,a]=c,u=o.slice(l,a),g=s?[t,e]:[e],d=!!s&&l>o.indexOf(t)&&!!u.match(/^0+$/gi);return i!=="deleteBackward"&&i!=="deleteForward"||!g.includes(u)&&!d?{elementState:n,data:r}:{elementState:{value:o,selection:i==="deleteForward"?[a,a]:[l,l]},data:r}}}function $n(t){let{maximumFractionDigits:e,decimalSeparator:s}=t,n=new RegExp(`^\\D*${x(s)}`);return({elementState:r,data:i})=>{let{value:o,selection:c}=r,S=y(o,t),{prefix:l,postfix:a}=S,u=C(S,["prefix","postfix"]),g=w(u,t),[d,f]=c,h=M(d-l.length,0,g.length),p=M(f-l.length,0,g.length);if(e<=0||g.slice(0,h).includes(s)||g.slice(p).includes(s)||!i.match(n))return{elementState:r,data:i};let E=/\d+/.exec(g.slice(0,h));return{elementState:r,data:E?i:`0${i}`}}}function In({prefix:t,minusSign:e,negativePattern:s}){return({value:n,selection:r},i)=>St(n.includes(e)&&s==="minusFirst"?e+t:t)({value:n,selection:r},i)}function ze(n){var r=n,{validCharacter:t,pseudoCharacters:e}=r,s=C(r,["validCharacter","pseudoCharacters"]);let i=new RegExp(`[${e.join("")}]`,"gi");return({elementState:o,data:c})=>{let{value:l,selection:a}=o,h=y(l,s),{prefix:u,postfix:g}=h,d=C(h,["prefix","postfix"]),f=w(d,s).replace(i,t);return{elementState:{selection:a,value:w(A(m({},y(f,s)),{prefix:u,postfix:g}),s)},data:c.replace(i,t)}}}function Nn(t){let{decimalSeparator:e}=t;return e?({elementState:s,data:n})=>{let{value:r,selection:i}=s,[o,c]=i;return{elementState:s,data:!y(r,t).decimalSeparator||r.slice(o,c+1).includes(e)?n:n.replaceAll(new RegExp(x(e),"gi"),"")}}:k}function kn(t){let{thousandSeparator:e}=t;if(!e)return k;let s=(...n)=>n.every(r=>/\s/.test(r));return({value:n,selection:r})=>{let[i,o]=r,[c,l]=r,{prefix:a,minus:u,integerPart:g,decimalSeparator:d,decimalPart:f,postfix:h}=y(n,t),p=w({minus:u,integerPart:g,decimalSeparator:d,decimalPart:f},t).length-(u+g+(d?d+f:"")).length;p>0&&i&&i<=p&&(c-=p),p>0&&o&&o<=p&&(l-=p);let E=Array.from(g).reduceRight((S,v,D)=>{let R=!(!D&&v===e)&&!!S.length&&(S.length+1)%4===0,O=v===e||s(v,e);return R&&O?e+S:!R&&O?(c&&D<=i&&c--,l&&D<=o&&l--,S):R?(D<i&&c++,D<o&&l++,v+e+S):v+S},"");return{value:w({prefix:a,minus:u,integerPart:E,decimalSeparator:d,decimalPart:f,postfix:h},t),selection:[c,l]}}}function _n(t){let{maximumFractionDigits:e,decimalSeparator:s}=t;if(e>0||!s)return k;let n=new RegExp(`${x(s)}.*$`,"g");return({elementState:r,data:i})=>{let{value:o,selection:c}=r,p=y(o,t),{prefix:l,postfix:a}=p,u=C(p,["prefix","postfix"]),[g,d]=c,f=w(u,t).replace(n,""),h=w(A(m({},y(f,t)),{prefix:l,postfix:a}),t);return{elementState:{selection:[Math.min(g,h.length),Math.min(d,h.length)],value:h},data:i.replace(n,"")}}}var Xe=[0,0];function On(t){let e=Cn(t);return J("blur",s=>{let n=e({value:s.value,selection:Xe},{value:"",selection:Xe}).value;$(s,n)},{capture:!0})}function Fn({min:t,max:e,decimalSeparator:s,minusSign:n,maximumFractionDigits:r}){return J("blur",(i,o)=>{let c=Re(i.value,{decimalSeparator:s,minusSign:n,bigint:!r&&!i.value.includes(s)})??NaN,l=M(c,t,e);!Number.isNaN(c)&&c!==l&&$(i,I(Pt(l),o))},{capture:!0})}function Vn(t){let{decimalSeparator:e}=t;return e?J("blur",s=>{let l=y(s.value,t),{prefix:n,postfix:r}=l,i=C(l,["prefix","postfix"]),o=w(i,t).replace(new RegExp(`^(\\D+)?${x(e)}`),`$10${e}`),c=w(A(m({},y(o,t)),{prefix:n,postfix:r}),t);$(s,c)},{capture:!0}):Pe}function Hn({max:t=1/0,min:e=-1/0,thousandSeparator:s=L,decimalSeparator:n=".",decimalPseudoSeparators:r,prefix:i="",postfix:o="",minusSign:c=ce,minusPseudoSigns:l=st.filter(d=>d!==s&&d!==n&&d!==c),maximumFractionDigits:a=0,minimumFractionDigits:u=0,negativePattern:g="prefixFirst"}={}){let d=Pn({decimalSeparator:n,thousandSeparator:s,decimalPseudoSeparators:r}),f={max:t,min:e,thousandSeparator:s,postfix:o,minusSign:c,minusPseudoSigns:l,maximumFractionDigits:a,decimalPseudoSeparators:d,negativePattern:g,decimalSeparator:a<=0&&n===s?"":n,prefix:i.endsWith(n)&&a>0?`${i}${jt}`:i,minimumFractionDigits:Math.min(u,a)};return A(m({},T),{mask:xt(f),preprocessors:[K(),Rn(f),yn(f),ze(A(m({},f),{validCharacter:c,pseudoCharacters:l})),ze(A(m({},f),{validCharacter:n,pseudoCharacters:d})),$n(f),Tn(f),_n(f),Nn(f),bn(f)],postprocessors:[Ln(f),In(f),Et(o),kn(f),wn(f),Mn(f)],plugins:[On(f),Vn(f),Fn(f)],overwriteMode:u>0?({value:h,selection:[p]})=>p<=h.indexOf(n)?"shift":"replace":"shift"})}function us(t,e){if(Number.isNaN(t)||t===null)return"";let{min:s=-1/0,max:n=1/0,decimalSeparator:r="."}=e,i=Pt(M(t,s,n)).replace(".",r);return I(i,Hn(e))}export{T as a,I as b,Un as c,Xn as d,qn as e,St as f,ns as g,cn as h,ss as i,rs as j,is as k,cs as l,ls as m,as as n,Re as o,Hn as p,us as q};
