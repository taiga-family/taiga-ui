import{c as Oe}from"./chunk-A2R73ZSN.js";import{$a as Ie,Pb as he,Wa as Ne,Wb as $e,Xb as ke,sd as Te,ud as _e,za as z}from"./chunk-MAQQ6KKR.js";import{a as E,b as P,d as L,i as Le}from"./chunk-42JZD6NG.js";function Fe(t){let{anchorOffset:e=0,focusOffset:s=0}=t.ownerDocument.getSelection()||{},n=Math.min(e,s),r=Math.max(e,s);return[n,r]}function yt(t,[e,s]){var o,c;let n=t.ownerDocument,r=n.createRange();r.setStart(t.firstChild||t,Math.min(e,((o=t.textContent)==null?void 0:o.length)??0)),r.setEnd(t.lastChild||t,Math.min(s,((c=t.textContent)==null?void 0:c.length)??0));let i=n.getSelection();i&&(i.removeAllRanges(),i.addRange(r))}var pe=class{constructor(e){this.element=e,this.maxLength=1/0}get value(){return this.element.innerText.replace(/\n\n$/,`
`)}set value(e){this.element.innerHTML=e.replace(/\n$/,`

`)}get selectionStart(){return Fe(this.element)[0]}get selectionEnd(){return Fe(this.element)[1]}setSelectionRange(e,s){yt(this.element,[e??0,s??0])}select(){this.setSelectionRange(0,this.value.length)}};function wt(t){let e=new pe(t);return new Proxy(t,{get(s,n){if(n in e)return e[n];let r=s[n];return typeof r=="function"?r.bind(s):r},set(s,n,r,i){return Reflect.set(n in e?e:s,n,r,i)}})}var Be=t=>t.isContentEditable?wt(t):t.querySelector("input,textarea")||t,I={mask:/^.*$/,preprocessors:[],postprocessors:[],plugins:[],overwriteMode:"shift"},me=class{constructor(){this.now=null,this.past=[],this.future=[]}undo(){let e=this.past.pop();e&&this.now&&(this.future.push(this.now),this.updateElement(e,"historyUndo"))}redo(){let e=this.future.pop();e&&this.now&&(this.past.push(this.now),this.updateElement(e,"historyRedo"))}updateHistory(e){if(!this.now){this.now=e;return}let s=this.now.value!==e.value,n=this.now.selection.some((r,i)=>r!==e.selection[i]);!s&&!n||(s&&(this.past.push(this.now),this.future=[]),this.now=e)}updateElement(e,s){this.now=e,this.updateElementState(e,{inputType:s,data:null})}};function Mt(t,...e){return e.every(({value:s})=>s===t.value)}function Ee(t,...e){return e.every(({value:s,selection:n})=>s===t.value&&n[0]===t.selection[0]&&n[1]===t.selection[1])}function Ve({value:t,selection:e},s,n){let[r,i]=e,o=typeof n=="function"?n({value:t,selection:e}):n;return{value:t,selection:o==="replace"?[r,Math.max(r+s.length,i)]:[r,i]}}function ee(t){return typeof t=="string"}function He(t,e,s,n){let r="";for(let i=e.length;i<t.length;i++){let o=t[i]||"",c=(n==null?void 0:n.value[i])===o;if(!ee(o)||o===s&&!c)return r;r+=o}return r}function We(t,e){return Array.isArray(e)?t.length===e.length&&Array.from(t).every((s,n)=>{let r=e[n]||"";return ee(r)?s===r:s.match(r)}):e.test(t)}function Rt(t,e,s){let n=null,r=null,i=Array.from(t.value).reduce((c,l,a)=>{let u=He(e,c,l,s),g=c+u,d=e[g.length]||"";return n===null&&a>=t.selection[0]&&(n=g.length),r===null&&a>=t.selection[1]&&(r=g.length),ee(d)?g+d:l.match(d)?g+l:u.startsWith(l)?g:c},""),o=He(e,i,"",s);return{value:We(i+o,e)?i+o:i,selection:[n??i.length,r??i.length]}}function bt({value:t,selection:e},s){let[n,r]=e,i=n,o=r,c=Array.from(t).reduce((l,a,u)=>{let g=l+a;return n===u&&(i=l.length),r===u&&(o=l.length),g.match(s)?g:l},"");return{value:c,selection:[Math.min(i,c.length),Math.min(o,c.length)]}}function X(t,e,s=null){if(We(t.value,e))return t;let{value:n,selection:r}=Array.isArray(e)?Rt(t,e,s):bt(t,e);return{selection:r,value:Array.isArray(e)?n.slice(0,e.length):n}}function je(t,e){if(!Array.isArray(e))return t;let[s,n]=t.selection,r=[],i=Array.from(t.value).reduce((o,c,l)=>{let a=e[l]||"";return l===s&&r.push(o.length),l===n&&r.push(o.length),ee(a)&&a===c?o:o+c},"");return r.length<2&&r.push(...new Array(2-r.length).fill(i.length)),{value:i,selection:[r[0],r[1]]}}var U=class{constructor(e,s){this.maskOptions=s,this.unmaskInitialState={value:"",selection:[0,0]},this.value="",this.selection=[0,0];let n=this.getMaskExpression(e),{value:r,selection:i}=X(e,n);this.unmaskInitialState=je({value:r,selection:i},n),this.value=r,this.selection=i}addCharacters(e){let{value:s,selection:n,maskOptions:r}=this,i={value:s,selection:n},{selection:[o,c]}=Ve(i,e,r.overwriteMode),l=this.getMaskExpression({value:s.slice(0,o)+e+s.slice(c),selection:[o+e.length,o+e.length]}),[a,u]=Ve(this.unmaskInitialState,e,r.overwriteMode).selection,g=this.unmaskInitialState.value.slice(0,a)+e,d=g.length,h=X({value:g+this.unmaskInitialState.value.slice(u),selection:[d,d]},l,i),f=s.slice(0,o),p=X({value:g,selection:[d,d]},l,i);if(p.value===f||p.value.length<f.length&&je(p,l).value===this.unmaskInitialState.value.slice(0,a)||Ee(this,h))throw new Error("Invalid mask value");this.value=h.value,this.selection=h.selection}deleteCharacters(){let[e,s]=this.selection;if(e===s||!s)return;let{value:n}=this,r=this.getMaskExpression({value:n.slice(0,e)+n.slice(s),selection:[e,e]}),i={value:n},[o,c]=this.unmaskInitialState.selection,l=this.unmaskInitialState.value.slice(0,o)+this.unmaskInitialState.value.slice(c),a=X({value:l,selection:[o,o]},r,i);this.value=a.value,this.selection=a.selection}getMaskExpression(e){let{mask:s}=this.maskOptions;return typeof s=="function"?s(e):s}},B=class{constructor(e){this.element=e,this.listeners=[]}listen(e,s,n){let r=s;this.element.addEventListener(e,r,n),this.listeners.push(()=>this.element.removeEventListener(e,r,n))}destroy(){this.listeners.forEach(e=>e())}},C={CTRL:1,ALT:2,SHIFT:4,META:8},H={Y:89,Z:90};function j(t,e,s){return t.ctrlKey===!!(e&C.CTRL)&&t.altKey===!!(e&C.ALT)&&t.shiftKey===!!(e&C.SHIFT)&&t.metaKey===!!(e&C.META)&&t.keyCode===s}function Ct(t){return j(t,C.CTRL,H.Y)||j(t,C.CTRL|C.SHIFT,H.Z)||j(t,C.META|C.SHIFT,H.Z)}function Lt(t){return j(t,C.CTRL,H.Z)||j(t,C.META,H.Z)}function $(t,e){var n;let s=t.value;if(typeof e=="string")t.value=e;else{let[r,i]=e.selection;t.value=e.value,t.matches(":focus")&&((n=t.setSelectionRange)==null||n.call(t,r,i))}t.value!==s&&t.dispatchEvent(new Event("input",{bubbles:!0}))}function Nt({value:t,selection:e},s){let[n,r]=e;if(n!==r)return[n,r];let i=s?t.slice(n).indexOf(`
`)+1||t.length:t.slice(0,r).lastIndexOf(`
`)+1;return[s?n:i,s?i:r]}function It({value:t,selection:e},s){let[n,r]=e;return n!==r?[n,r]:(s?[n,r+1]:[n-1,r]).map(o=>Math.min(Math.max(o,0),t.length))}var $t=/\s+$/g,kt=/^\s+/g,Ue=/\s/;function Tt({value:t,selection:e},s){let[n,r]=e;if(n!==r)return[n,r];if(s){let l=t.slice(n),[a]=l.match(kt)||[""],u=l.trimStart().search(Ue);return[n,u!==-1?n+a.length+u:t.length]}let i=t.slice(0,r),[o]=i.match($t)||[""],c=i.trimEnd().split("").reverse().findIndex(l=>Ue.exec(l));return[c!==-1?r-o.length-c:0,r]}function q(t=[]){return(e,...s)=>t.reduce((n,r)=>E(E({},n),r(n,...s)),e)}function k(t,e){let s=E(E({},I),e),n=q(s.preprocessors),r=q(s.postprocessors),i=typeof t=="string"?{value:t,selection:[0,0]}:t,{elementState:o}=n({elementState:i,data:""},"validation"),c=new U(o,s),{value:l,selection:a}=r(c,i);return typeof t=="string"?l:{value:l,selection:a}}function _t(){return t=>{let e=new B(t),s=!1,n,r=t.value;return e.listen("keydown",({key:i})=>{s=i==="Unidentified"}),e.listen("beforeinput",i=>{n=i,r=t.value}),e.listen("input",i=>{s&&n.defaultPrevented&&n.inputType==="deleteContentBackward"&&i.inputType==="deleteContentBackward"&&(t.value=r)},{capture:!0}),()=>e.destroy()}}var fe=" ";function Ot(){let t="",e=0,s=null,n=!1;return r=>{let i=new B(r);return i.listen("beforeinput",o=>{var g,d;let{value:c,selectionStart:l,selectionEnd:a}=r,u=(s==null?void 0:s.inputType)==="insertText"&&(s==null?void 0:s.data)===fe&&!c.slice(0,Number(a)).endsWith(fe);o.inputType==="insertText"&&o.data===`.${fe}`&&((s==null?void 0:s.inputType)==="deleteContentBackward"&&n?(r.value=t,(g=r.setSelectionRange)==null||g.call(r,e,e)):u&&((d=r.setSelectionRange)==null||d.call(r,l,l))),n=u,s=o,t=c,e=Number((u?e:a)===c.length?a:l)}),()=>i.destroy()}}function Vn(t){return(e,s)=>{let n=e.selectionStart??0,r=e.selectionEnd??0;$(e,{value:k(e.value,t||s),selection:[n,r]})}}var Ft=[Ot(),_t()],Q=class extends me{constructor(e,s){super(),this.element=e,this.maskitoOptions=s,this.isTextArea=this.element.nodeName==="TEXTAREA",this.eventListener=new B(this.element),this.options=E(E({},I),this.maskitoOptions),this.upcomingElementState=null,this.preprocessor=q(this.options.preprocessors),this.postprocessor=q(this.options.postprocessors),this.teardowns=this.options.plugins.concat(Ft).map(n=>n(this.element,this.options)),this.updateHistory(this.elementState),this.eventListener.listen("keydown",n=>{if(Ct(n))return n.preventDefault(),this.redo();if(Lt(n))return n.preventDefault(),this.undo()}),this.eventListener.listen("beforeinput",n=>{var i;let r=n.inputType.includes("Forward");switch(this.updateHistory(this.elementState),n.inputType){case"deleteByCut":case"deleteContentBackward":case"deleteContentForward":return this.handleDelete({event:n,isForward:r,selection:It(this.elementState,r)});case"deleteHardLineBackward":case"deleteHardLineForward":case"deleteSoftLineBackward":case"deleteSoftLineForward":return this.handleDelete({event:n,isForward:r,selection:Nt(this.elementState,r),force:!0});case"deleteWordBackward":case"deleteWordForward":return this.handleDelete({event:n,isForward:r,selection:Tt(this.elementState,r)});case"historyRedo":return n.preventDefault(),this.redo();case"historyUndo":return n.preventDefault(),this.undo();case"insertCompositionText":return;case"insertLineBreak":case"insertParagraph":return this.handleEnter(n);case"insertReplacementText":return;case"insertFromDrop":case"insertFromPaste":case"insertText":default:return this.handleInsert(n,n.data??((i=n.dataTransfer)==null?void 0:i.getData("text/plain"))??"")}}),this.eventListener.listen("input",()=>{this.upcomingElementState&&!Ee(this.upcomingElementState,this.elementState)&&this.updateElementState(this.upcomingElementState),this.upcomingElementState=null},{capture:!0}),this.eventListener.listen("input",({inputType:n})=>{n!=="insertCompositionText"&&(this.ensureValueFitsMask(),this.updateHistory(this.elementState))}),this.eventListener.listen("compositionend",()=>{this.ensureValueFitsMask(),this.updateHistory(this.elementState)})}destroy(){this.eventListener.destroy(),this.teardowns.forEach(e=>e==null?void 0:e())}updateElementState({value:e,selection:s},n){let r=this.elementState.value;this.updateValue(e),this.updateSelectionRange(s),n&&r!==e&&this.dispatchInputEvent(n)}get elementState(){let{value:e,selectionStart:s,selectionEnd:n}=this.element;return{value:e,selection:[s??0,n??0]}}get maxLength(){let{maxLength:e}=this.element;return e===-1?1/0:e}updateSelectionRange([e,s]){var r;let{element:n}=this;n.matches(":focus")&&(n.selectionStart!==e||n.selectionEnd!==s)&&((r=n.setSelectionRange)==null||r.call(n,e,s))}updateValue(e){(this.element.value!==e||this.element.isContentEditable)&&(this.element.value=e)}ensureValueFitsMask(){this.updateElementState(k(this.elementState,this.options),{inputType:"insertText",data:null})}dispatchInputEvent(e={inputType:"insertText",data:null}){globalThis.InputEvent&&this.element.dispatchEvent(new InputEvent("input",P(E({},e),{bubbles:!0,cancelable:!1})))}handleDelete({event:e,selection:s,isForward:n}){let r={value:this.elementState.value,selection:s},{elementState:i}=this.preprocessor({elementState:r,data:""},n?"deleteForward":"deleteBackward"),o=new U(i,this.options);o.deleteCharacters();let c=this.postprocessor(o,r);if(Mt(r,i,o,c)){let[l,a]=i.selection;return e.preventDefault(),this.updateSelectionRange(n?[a,a]:[l,l])}this.upcomingElementState=c}handleInsert(e,s){let{options:n,maxLength:r,elementState:i}=this,[o,c]=i.selection,{elementState:l,data:a=s}=this.preprocessor({data:s,elementState:i},"insert"),u=new U(l,n);try{u.addCharacters(a)}catch{return e.preventDefault()}this.upcomingElementState=this.clampState(this.postprocessor(u,i)),i.value.length>=r&&o===c&&(n.overwriteMode==="replace"&&!Ee(this.upcomingElementState,i)?this.dispatchInputEvent({inputType:"insertText",data:s}):this.upcomingElementState=null)}handleEnter(e){(this.isTextArea||this.element.isContentEditable)&&this.handleInsert(e,`
`)}clampState({value:e,selection:s}){let[n,r]=s,i=this.maxLength;return{value:e.slice(0,i),selection:[Math.min(n,i),Math.min(r,i)]}}};var Jn=(()=>{let e=class e{constructor(){this.elementRef=z(Ie).nativeElement,this.ngZone=z(Ne),this.maskedElement=null,this.initEffect=_e(()=>Le(this,null,function*(){let r=this.options(),i=this.elementPredicate(),{maskedElement:o,elementRef:c,ngZone:l}=this;if(o==null||o.destroy(),!r)return;let a=yield i(c);this.elementPredicate()!==i||this.options()!==r||l.runOutsideAngular(()=>{this.maskedElement=new Q(a,r)})})),this.options=he(null,{alias:"maskito"}),this.elementPredicate=he(Be,{alias:"maskitoElement"});let n=z(Oe,{self:!0,optional:!0});if(n){let r=n.writeValue.bind(n);n.writeValue=i=>{let o=Te(()=>this.options());r(o?k(String(i??""),o):i)}}}ngOnDestroy(){var n;(n=this.maskedElement)==null||n.destroy()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=$e({type:e,selectors:[["","maskito",""]],inputs:{options:[1,"maskito","options"],elementPredicate:[1,"maskitoElement","elementPredicate"]},outputs:{options:"maskitoChange",elementPredicate:"maskitoElementChange"}});let t=e;return t})(),zn=(()=>{let e=class e{transform(n,r){return k(String(n??""),r??I)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=ke({name:"maskito",type:e,pure:!0});let t=e;return t})();function R(t,e,s){let n=Ht(e??t,t);return Vt(s??n,n)}function Vt(t,...e){return e.reduce((s,n)=>s<n?s:n,t)}function Ht(t,...e){return e.reduce((s,n)=>s>n?s:n,t)}function qe(t){return t.replaceAll(/\W/g,"").length}var Qe={day:31,month:12,year:9999},jt=[".",",","\u0431","\u044E"],et=new Date("0001-01-01T00:00"),De=new Date("9999-12-31T23:59:59.999"),N="\xA0",Ut="\u200B",Ae="\u2013",tt="\u2014",ce="-",le="\u2212",nt="\u30FC",Bt=":",Wt="\uFF1A",st=[ce,Ae,tt,nt,le],ae={hours:23,minutes:59,seconds:59,milliseconds:999},xe={hours:0,minutes:0,seconds:0,milliseconds:0},ne=new RegExp(`[${N}APM]+$`,"g"),se=new RegExp(`${N}[AP]M$`,"g"),Pe=[":","."],rt={hours:2,minutes:2,seconds:2,milliseconds:3},Gt=[ce,Ae,tt,le,nt],Zt=1,Se=12,T={January:0,February:1,April:3,June:5,September:8,November:10,December:11};function Ge(t,{day:e=0,month:s=0,year:n=0}={}){if(e===0&&s===0&&n===0)return t;let r=t.getFullYear(),i=t.getMonth(),o=t.getDate(),c=(r+n)*Se+i+s,l=Math.floor(c/Se),a=c%Se,u=W(a,G(l)),g=W(i,G(l)),d=e;for(o>=u?d+=o-(g-u):g<u&&o===g?d+=o+(u-g):d+=o;d>W(a,G(l));)d-=W(a,G(l)),a===T.December?(l++,a=T.January):a++;for(;d<Zt;)a===T.January?(l--,a=T.December):a--,d+=W(a,G(l));return d=e<0||s<0||n<0?d+1:d-1,new Date(l,a,d)}function W(t,e){switch(t){case T.April:case T.June:case T.November:case T.September:return 30;case T.February:return e?29:28;default:return 31}}function G(t){return t%400===0||t%4===0&&t%100!==0}var it=t=>{var e,s,n;return{day:((e=t.match(/d/g))==null?void 0:e.length)??0,month:((s=t.match(/m/g))==null?void 0:s.length)??0,year:((n=t.match(/y/g))==null?void 0:n.length)??0}};function re(t){return{day:String(t.getDate()).padStart(2,"0"),month:String(t.getMonth()+1).padStart(2,"0"),year:String(t.getFullYear()).padStart(4,"0"),hours:String(t.getHours()).padStart(2,"0"),minutes:String(t.getMinutes()).padStart(2,"0"),seconds:String(t.getSeconds()).padStart(2,"0"),milliseconds:String(t.getMilliseconds()).padStart(3,"0")}}var Yt=["day","month","year"];function Kt(t){return[...Yt].sort((e,s)=>t.indexOf(e[0])>t.indexOf(s[0])?1:-1)}function Jt(t,e){let s=qe(e),[n=""]=new RegExp(`(\\D*\\d){${s}}`).exec(t)||[];return n}function ue(t,e){return t.length<e.length?!1:t.split(/\D/).every(s=>!/^0+$/.exec(s))}function Y(t,e,s){let n=qe(e);return t.replace(s,"").match(new RegExp(`(\\D*\\d[^\\d\\s]*){1,${n}}`,"g"))||[]}function V(t,e){let s=e.replaceAll(/[^dmy]/g,""),n=t.replaceAll(/\D+/g,""),r={day:n.slice(s.indexOf("d"),s.lastIndexOf("d")+1),month:n.slice(s.indexOf("m"),s.lastIndexOf("m")+1),year:n.slice(s.indexOf("y"),s.lastIndexOf("y")+1)};return Object.fromEntries(Object.entries(r).filter(([i,o])=>!!o).sort(([i],[o])=>e.toLowerCase().indexOf(i.slice(0,1))>e.toLowerCase().indexOf(o.slice(0,1))?1:-1))}function Z(t,e){var r;let s=((r=t.year)==null?void 0:r.length)===2?`20${t.year}`:t.year,n=new Date(Number(s??"0"),Number(t.month??"1")-1,Number(t.day??"1"),Number((e==null?void 0:e.hours)??"0"),Number((e==null?void 0:e.minutes)??"0"),Number((e==null?void 0:e.seconds)??"0"),Number((e==null?void 0:e.milliseconds)??"0"));return n.setFullYear(Number(s??"0")),n}var de=", ";function O({day:t,month:e,year:s,hours:n,minutes:r,seconds:i,milliseconds:o},{dateMode:c,dateTimeSeparator:l=de,timeMode:a}){var d;let u=((d=c.match(/y/g))==null?void 0:d.length)===2?s==null?void 0:s.slice(-2):s;return(c+(a?l+a:"")).replaceAll(/d+/g,t??"").replaceAll(/m+/g,e??"").replaceAll(/y+/g,u??"").replaceAll(/H+/g,n??"").replaceAll("MSS",o??"").replaceAll(/M+/g,r??"").replaceAll(/S+/g,i??"").replaceAll(/^\D+/g,"").replaceAll(/\D+$/g,"")}function ot({dateString:t,dateModeTemplate:e,dateSegmentsSeparator:s,offset:n,selection:[r,i]}){var d;let o=V(t,e),c=Object.entries(o),l=Kt(e),a={};for(let h=0;h<c.length;h++){let[f,p]=c[h],m=O(a,{dateMode:e}),S=Qe[f],D=m.length&&s.length,v=n+m.length+D+it(e)[f],A=v>=r&&v===i;if(A&&Number(p)>Number(S)){let x=l[l.indexOf(f)+1];if(!x||x==="year")return{validatedDateString:"",updatedSelection:[r,i]};a[f]=`0${p.slice(0,-1)}`,c[h+1]=[x,p.slice(-1)+(((d=c[h+1])==null?void 0:d[1])??"").slice(1)];continue}if(A&&Number(p)<1)return{validatedDateString:"",updatedSelection:[r,i]};a[f]=p}let u=O(a,{dateMode:e}),g=u.length-t.length;return{validatedDateString:u,updatedSelection:[r+g,i+g]}}function _(t){return t}function ye(){}var ct=/[\\^$.*+?()[\]{}|]/g,zt=new RegExp(ct.source);function y(t){return t&&zt.test(t)?t.replaceAll(ct,String.raw`\$&`):t}function Xt(t,e){let s="";for(let n=0;n<t.length;n++){if(t[n]!==e[n])return s;s+=t[n]}return s}function ve(t){return!t||typeof t=="object"&&Object.keys(t).length===0}var qt=/^0+$/;function ie(t,e,s=0){let n=t.padEnd(e.length,"0");if(Number(n)<=Number(e))return{validatedSegmentValue:t,prefixedZeroesCount:s};if(n.endsWith("0"))return ie(`0${t.slice(0,e.length-1)}`,e,s+1);let r=t.slice(0,e.length-1);return qt.exec(r)?{validatedSegmentValue:"",prefixedZeroesCount:s}:ie(`${r}0`,e,s)}function Ze(t){return t.replaceAll(new RegExp(Wt,"g"),Bt)}function Ye(t){return t.replaceAll(/[０-９]/g,e=>String.fromCharCode(e.charCodeAt(0)-65248))}function lt(){return({elementState:t,data:e})=>{let{value:s,selection:n}=t;return{elementState:{selection:n,value:Ze(s)},data:Ze(e)}}}function we({dateModeTemplate:t,dateSegmentSeparator:e,splitFn:s,uniteFn:n}){return({value:r,selection:i})=>{var h;let[o,c]=i,{dateStrings:l,restPart:a=""}=s(r),u=[],g=0;l.forEach(f=>{let p=V(f,t),S=Object.entries(p).reduce((D,[v,A])=>{let{validatedSegmentValue:x,prefixedZeroesCount:b}=ie(A,`${Qe[v]}`);return g+=b,P(E({},D),{[v]:x})},{});u.push(O(S,{dateMode:t}))});let d=n(u,r)+((h=l[l.length-1])!=null&&h.endsWith(e)?e:"")+a;return g&&d.slice(c+g,c+g+e.length)===e&&(g+=e.length),{selection:[o+g,c+g],value:d}}}function at({dateModeTemplate:t,firstDateEndSeparator:e,dateSegmentSeparator:s,pseudoFirstDateEndSeparators:n}){return({elementState:r,data:i})=>{let{value:o,selection:c}=r,[l,a]=c,u=Jt(o,t),g=n.filter(p=>!e.includes(p)&&p!==s),d=new RegExp(`[${g.join("")}]`,"gi"),h=u&&o.length>u.length?u+o.slice(u.length).replace(/^[\D\s]*/,e):o,f=h.length-o.length;return{elementState:{selection:[l+f,a+f],value:h},data:i.replace(d,e)}}}function K(){return({elementState:t,data:e})=>{let{value:s,selection:n}=t;return{elementState:{selection:n,value:Ye(s)},data:Ye(e)}}}function ut(t){return Array.from(t.replace(" AA","")).map(e=>Pe.includes(e)?e:/\d/).concat(t.includes("AA")?[N,/[AP]/i,/M/i]:[])}function Qt(t,e){return Object.fromEntries(Object.entries(t).map(([s,n])=>[s,e(String(n),rt[s])]))}function en(t){return Qt(t,(e,s)=>e.padStart(s,"0"))}var Ke={HH:"hours",MM:"minutes",SS:"seconds",MSS:"milliseconds"};function Me(t,e){let s=t.replaceAll(/\D+/g,""),n=0;return Object.fromEntries(e.split(/\W/).filter(r=>Ke[r]).map(r=>{let i=s.slice(n,n+r.length);return n+=r.length,[Ke[r],i]}))}var tn=/^\D*/,nn=/\D*$/;function sn({hours:t="",minutes:e="",seconds:s="",milliseconds:n=""}){return`${t}:${e}:${s}.${n}`.replace(tn,"").replace(nn,"")}var rn=new RegExp(`[${Pe.map(y).join("")}]$`);function dt({value:t,selection:e},{mode:s,timeSegmentMaxValues:n=ae}){let[r,i]=e,o=Me(t,s),c=Object.entries(o),l=en(n),a={},u=0;for(let[S,D]of c){let v=l[S],{validatedSegmentValue:A,prefixedZeroesCount:x}=ie(D,String(v));u+=x,a[S]=A}let[g=""]=t.match(/^\D+(?=\d)/g)||[],[d=""]=t.match(/\D+$/g)||[],h=g+sn(a)+d,f=Math.max(h.length-t.length-u,0),p=r+u+f,m=i+u+f;return p===m&&u&&h.slice(0,m+1).match(rn)&&(p++,m++),{value:h,selection:[p,m]}}function gt({timeMode:t,timeSegmentMinValues:e=xe,timeSegmentMaxValues:s=ae,parseValue:n=r=>({timeString:r})}){let r=new RegExp(`[^\\d${Pe.map(y).join("")}]+`);return({elementState:i,data:o},c)=>{if(c!=="insert")return{elementState:i,data:o};let{value:l,selection:a}=i,[u,g]=a,d=o.replace(r,""),h=g+d.length,f=l.slice(0,u)+d+l.slice(h),{timeString:p,restValue:m=""}=n(f),S=Object.entries(Me(p,t)),D=m.length;for(let[v,A]of S){let x=e[v],b=s[v],F=Number(A),Ce=D+rt[v];if(Ce>=u&&Ce<=h&&F!==R(F,x,b))return{elementState:i,data:""};D+=A.length+1}return{elementState:i,data:o}}}function ht(t){if(!t.includes("AA"))return _;let e=/^[AP]$/gi;return({elementState:s,data:n})=>{let{value:r,selection:i}=s,o=r.toUpperCase(),c=n.toUpperCase();return o.match(se)&&c.match(e)?{elementState:{value:o.replaceAll(se,""),selection:i},data:`${c}M`}:{elementState:{selection:i,value:o},data:c}}}function ft(t){return t.includes("AA")?({value:e,selection:s},n)=>{if(!e.match(ne)||e.match(se))return{value:e,selection:s};let[r,i]=s;if(n.value.match(se)){let l=e.replace(ne,"");return{value:l,selection:[Math.min(r,l.length),Math.min(i,l.length)]}}let o=`${N}${e.includes("P")?"P":"A"}M`,c=e.replace(ne,l=>l!==N?o:l);return{value:c,selection:i>=c.indexOf(o)?[c.length,c.length]:s}}:_}function pt(t,e){let s=it(e);return Object.fromEntries(Object.entries(t).map(([n,r])=>{let i=s[n];return[n,r.length===i&&/^0+$/.exec(r)?"1".padStart(i,"0"):r]}))}var on="1972";function mt({dateModeTemplate:t,min:e=et,max:s=De,rangeSeparator:n="",dateSegmentSeparator:r="."}){return({value:i,selection:o})=>{let c=n&&i.endsWith(n),l=Y(i,t,n),a="";for(let u of l){a+=a?n:"";let g=V(u,t);if(!ue(u,t)){let f=pt(g,t),p=O(f,{dateMode:t}),m=u.endsWith(r)?r:"";a+=p+m;continue}let d=Z(E({year:on},g)),h=R(d,e,s);a+=O(re(h),{dateMode:t})}return{selection:o,value:a+(c?n:"")}}}function Re({dateModeTemplate:t,dateSegmentsSeparator:e,rangeSeparator:s="",dateTimeSeparator:n=de}){return({elementState:r,data:i})=>{let o=t.split(e),c=i.includes(n),l=i.slice(0,c?i.indexOf(n):1/0).split(/\D/).filter(Boolean);if(!l.length||l.length%o.length!==0)return{elementState:r,data:i};let a=l.reduce((u,g,d)=>{let h=o[d%o.length]??"",f=Math.trunc(d/o.length),p=d%o.length===o.length-1;return u[f]||(u[f]=""),u[f]+=p?g:`${g.padStart(h.length,"0")}${e}`,u},[]);return{elementState:r,data:c?`${a[0]}${i.slice(i.indexOf(n))}`:a.join(s)}}}function Et(t){let e=new RegExp(`${y(t)}$`),s=new RegExp(t&&`(${t.split("").map(y).reduce((n,r,i,o)=>`${n}|${o.slice(0,i+1).join("")}`)})$`);return t?({value:n,selection:r},i)=>{if(!n&&!i.value.endsWith(t))return{value:n,selection:r};if(!n.match(s)&&!i.value.endsWith(t))return{selection:r,value:n+t};let o=i.value.replace(e,""),c=i.selection[1]>o.length,l=Xt(o,n);return{selection:r,value:Array.from(t).reverse().reduce((a,u,g)=>{let d=a.length-1-g,h=l[d]===u&&c;return a[d]!==u||h?a.slice(0,d+1)+u+a.slice(d+1):a},n)}}:_}function St(t){return t?({value:e,selection:s},n)=>{if(e.startsWith(t)||!e&&!n.value.startsWith(t))return{value:e,selection:s};let[r,i]=s,o=Array.from(t).reduce((l,a,u)=>l[u]===a?l:l.slice(0,u)+a+l.slice(u),e),c=o.length-e.length;return{selection:[r+c,i+c],value:o}}:_}function vt({dateModeTemplate:t,dateSegmentsSeparator:e,rangeSeparator:s=""}){return({elementState:n,data:r})=>{let{value:i,selection:o}=n;if(r===e)return{elementState:n,data:o[0]===i.length?r:""};if(!r.replaceAll(/\D/g,""))return{elementState:n,data:r};let c=r.replaceAll(new RegExp(`[^\\d${y(e)}${s}]`,"g"),""),[l,a]=o,u=a+r.length,g=i.slice(0,l)+c+i.slice(u),d=Y(g,t,s),h="",f=!!s&&g.includes(s);for(let m of d){let{validatedDateString:S,updatedSelection:D}=ot({dateString:m,dateModeTemplate:t,dateSegmentsSeparator:e,offset:h.length,selection:[l,u]});if(m&&!S)return{elementState:n,data:""};u=D[1],h+=f&&!h?S+s:S}let p=h.slice(l,u);return{elementState:{selection:o,value:h.slice(0,l)+p.split(e).map(m=>"0".repeat(m.length)).join(e)+h.slice(u)},data:p}}}function J(t,e,s){return(n,r)=>{let i=()=>e(n,r);return n.addEventListener(t,i,s),()=>n.removeEventListener(t,i,s)}}function es(t){return J("focus",e=>{e.value||$(e,t)})}function cn(t){return(e,s)=>{let n=e.ownerDocument,r=0,i=()=>r++,o=()=>{r=Math.max(--r,0)},c=()=>{if(e.matches(":focus")){if(r)return n.addEventListener("mouseup",c,{once:!0,passive:!0});t(e,s)}};return n.addEventListener("selectionchange",c,{passive:!0}),e.addEventListener("focus",c,{passive:!0}),e.addEventListener("mousedown",i,{passive:!0}),n.addEventListener("mouseup",o,{passive:!0}),()=>{n.removeEventListener("selectionchange",c),e.removeEventListener("focus",c),e.removeEventListener("mousedown",i),n.removeEventListener("mouseup",o)}}}function ts(t){return cn(e=>{let s=e.selectionStart??0,n=e.selectionEnd??0,[r,i]=t(e.value,[s,n]);(r>s||i<n)&&e.setSelectionRange(R(s,r,i),R(n,r,i))})}function ns(t){return J("blur",e=>{e.value===t&&$(e,"")})}function Dt(t){return t<0?ye:e=>{let s=n=>{let r=Number(e.selectionStart),i=e.value.toUpperCase();if(n.key!=="ArrowUp"&&n.key!=="ArrowDown"||r<t)return;n.preventDefault();let o=i.includes("A")?"P":i.includes("P")||n.key==="ArrowUp"?"A":"P",c=`${N}${o}M`;$(e,{value:i.length===t?i+c:i.replace(ne,c),selection:[r,r]})};return e.addEventListener("keydown",s),()=>e.removeEventListener("keydown",s)}}function At({step:t,fullMode:e,timeSegmentMinValues:s,timeSegmentMaxValues:n}){let r=ln(e);return t<=0?ye:i=>{let o=c=>{if(c.key!=="ArrowUp"&&c.key!=="ArrowDown")return;c.preventDefault();let l=i.selectionStart??0,a=an({segmentsIndexes:r,selectionStart:l});if(!a)return;let u=un({selection:r.get(a),value:i.value,toAdd:c.key==="ArrowUp"?t:-t,min:s[a],max:n[a]});$(i,{value:u,selection:[l,l]})};return i.addEventListener("keydown",o),()=>i.removeEventListener("keydown",o)}}function ln(t){return new Map([["hours",te(t,"HH")],["milliseconds",te(t,"MSS")],["minutes",te(t,"MM")],["seconds",te(t,"SS")]])}function te(t,e){let s=t.indexOf(e);return s===-1?[-1,-1]:[s,s+e.length]}function an({segmentsIndexes:t,selectionStart:e}){for(let[s,n]of t.entries()){let[r,i]=n;if(r<=e&&e<=i)return s}return null}function un({selection:t,value:e,toAdd:s,min:n,max:r}){let[i,o]=t,c=Number(e.slice(i,o).padEnd(o-i,"0")),l=dn(c+s,n,r+1);return e.slice(0,i)+String(l).padStart(o-i,"0")+e.slice(o,e.length)}function dn(t,e,s){let n=s-e;return((t-e)%n+n)%n+e}function ge(t=""){let e=(s,[n,r])=>r>=s.length-t.length;return({elementState:s},n)=>{let{value:r,selection:i}=s;if(!r||e(r,i))return{elementState:s};let[o,c]=i,l=r.slice(o,c).replaceAll(/\d/g,"0"),a=r.slice(0,o)+l+r.slice(c);return l.replaceAll(/\D/g,"")?n==="validation"||n==="insert"&&o===c?{elementState:{selection:i,value:a}}:{elementState:{selection:n==="deleteBackward"||n==="insert"?[o,o]:[c,c],value:a}}:{elementState:s}}}function ss({mode:t,separator:e=".",max:s,min:n}){let r=t.split("/").join(e);return P(E({},I),{mask:Array.from(r).map(i=>e.includes(i)?i:/\d/),overwriteMode:"replace",preprocessors:[K(),ge(),Re({dateModeTemplate:r,dateSegmentsSeparator:e}),vt({dateModeTemplate:r,dateSegmentsSeparator:e})],postprocessors:[we({dateModeTemplate:r,dateSegmentSeparator:e,splitFn:i=>({dateStrings:[i]}),uniteFn:([i=""])=>i}),mt({min:n,max:s,dateModeTemplate:r,dateSegmentSeparator:e})]})}var rs=Intl.DateTimeFormat("en-US",{month:"2-digit",day:"2-digit",year:"numeric"});function gn({dateModeTemplate:t,rangeSeparator:e,minLength:s,maxLength:n,max:r=De}){return ve(s)&&ve(n)?_:({value:i,selection:o})=>{let c=Y(i,t,e);if(c.length!==2||c.some(f=>!ue(f,t)))return{value:i,selection:o};let[l,a]=c.map(f=>Z(V(f,t)));if(!l||!a)return{value:i,selection:o};let u=Ge(l,s),g=ve(n)?r:Ge(l,n),d=R(a,u,r),h=d>g?g:d;return{selection:o,value:c[0]+e+O(re(h),{dateMode:t})}}}function hn({dateModeTemplate:t,rangeSeparator:e}){return({value:s,selection:n})=>{let r=Y(s,t,e),i=r.length===2&&r.every(d=>ue(d,t)),[o,c]=n,l=o>=s.length,a=o===0&&c>=s.length;if(!(l||a)||!i)return{value:s,selection:n};let[u,g]=r.map(d=>Z(V(d,t)));return{selection:n,value:u&&g&&u>g?r.reverse().join(e):s}}}function is({mode:t,min:e,max:s,minLength:n,maxLength:r,dateSeparator:i=".",rangeSeparator:o=`${N}${Ae}${N}`}){let c=t.split("/").join(i),l=Array.from(c).map(a=>i.includes(a)?a:/\d/);return P(E({},I),{mask:[...l,...Array.from(o),...l],overwriteMode:"replace",preprocessors:[K(),at({dateModeTemplate:c,dateSegmentSeparator:i,firstDateEndSeparator:o,pseudoFirstDateEndSeparators:Gt}),ge(),Re({dateModeTemplate:c,rangeSeparator:o,dateSegmentsSeparator:i}),vt({dateModeTemplate:c,rangeSeparator:o,dateSegmentsSeparator:i})],postprocessors:[we({dateModeTemplate:c,dateSegmentSeparator:i,splitFn:a=>({dateStrings:Y(a,c,o)}),uniteFn:(a,u)=>a.reduce((g,d,h)=>g+d+(!h&&u.includes(o)?o:""),"")}),mt({min:e,max:s,dateModeTemplate:c,rangeSeparator:o,dateSegmentSeparator:i}),gn({dateModeTemplate:c,minLength:n,maxLength:r,max:s,rangeSeparator:o}),hn({dateModeTemplate:c,rangeSeparator:o})]})}function fn(t,{dateMode:e,timeMode:s,dateTimeSeparator:n=de}){return t.length>=e.length+s.length+n.length&&(t.split(n)[0]??"").split(/\D/).every(r=>!/^0+$/.exec(r))}function os({mode:t,timeSegmentMaxValues:e={},timeSegmentMinValues:s={},step:n=0,prefix:r="",postfix:i=""}){let o=t.includes("AA"),c=E(E(E({},ae),o?{hours:12}:{}),e),l=E(E(E({},xe),o?{hours:1}:{}),s),a=[...r,...ut(t)];return{mask:i?({value:u})=>pn(a,u).concat(...i):a,preprocessors:[K(),lt(),ge(i),ht(t),gt({timeMode:t,timeSegmentMinValues:l,timeSegmentMaxValues:c})],postprocessors:[ft(t),u=>dt(u,{mode:t,timeSegmentMaxValues:c}),St(r),Et(i)],plugins:[At({fullMode:t,step:n,timeSegmentMinValues:l,timeSegmentMaxValues:c}),Dt(t.indexOf("AA"))],overwriteMode:"replace"}}function pn(t,e){let s=Math.min(e.replaceAll(/\D/g,"").length,t.filter(r=>typeof r!="string").length)||1,n=t.findIndex(r=>typeof r!="string"&&!--s)+1;return t.slice(0,n)}var mn=/[^dmy]/g,En=/^\D*/;function oe(t,e){let s=e.replaceAll(mn,"").length,[n=""]=new RegExp(`(\\d[^\\d]*){0,${s-1}}\\d?`).exec(t)||[],[r=""]=En.exec(t.slice(n.length))||[];return[n,t.slice(n.length+r.length)]}function Sn({dateModeTemplate:t,timeMode:e,min:s=et,max:n=De,dateTimeSeparator:r}){return({value:i,selection:o})=>{let[c,l]=oe(i,t),a=V(c,t),u=Me(l,e);if(!fn(i,{dateMode:t,timeMode:e,dateTimeSeparator:r})){let p=pt(a,t),{year:m,month:S,day:D}=ue(c,t)?re(R(Z(p),s,n)):p,v=O(E({year:m,month:S,day:D},u),{dateMode:t,dateTimeSeparator:r,timeMode:e}),A=i.slice(v.length);return{selection:o,value:v+A}}let g=Z(a,u),d=R(g,s,n),[h=""]=i.match(/\D+$/g)||[],f=O(re(d),{dateMode:t,dateTimeSeparator:r,timeMode:e})+h;return{selection:o,value:f}}}function vn({dateModeTemplate:t,dateSegmentsSeparator:e,dateTimeSeparator:s,timeMode:n,timeSegmentMaxValues:r}){return({elementState:i,data:o})=>{let{value:c,selection:l}=i;if(o===e)return{elementState:i,data:l[0]===c.length?o:""};let a=o.replaceAll(/\D/g,"");if(!a)return{elementState:i,data:o};let[u,g]=l,d=g+o.length,h=c.slice(0,u)+a+c.slice(d),[f,p]=oe(h,t),m="",S=h.includes(s),{validatedDateString:D,updatedSelection:v}=ot({dateString:f,dateSegmentsSeparator:e,dateModeTemplate:t,offset:0,selection:[u,d]});if(f&&!D)return{elementState:i,data:""};d=v[1],m+=D;let A=dt({value:p,selection:[u,d]},{mode:n,timeSegmentMaxValues:r});d=A.selection[1],m+=S?s+A.value:A.value;let x=m.slice(u,d);return{elementState:{selection:l,value:m.slice(0,u)+x.split(e).map(b=>"0".repeat(b.length)).join(e)+m.slice(d)},data:x}}}function cs({dateMode:t,timeMode:e,dateSeparator:s=".",min:n,max:r,dateTimeSeparator:i=de,timeStep:o=0}){let c=e.includes("AA"),l=t.split("/").join(s),a=E(E({},ae),c?{hours:12}:{}),u=E(E({},xe),c?{hours:1}:{}),g=`${l}${i}${e}`;return P(E({},I),{mask:[...Array.from(l).map(d=>s.includes(d)?d:/\d/),...i.split(""),...ut(e)],overwriteMode:"replace",preprocessors:[K(),lt(),at({dateModeTemplate:l,dateSegmentSeparator:s,firstDateEndSeparator:i,pseudoFirstDateEndSeparators:i.split("")}),ge(),ht(e),Re({dateModeTemplate:l,dateSegmentsSeparator:s,dateTimeSeparator:i}),gt({timeMode:e,timeSegmentMinValues:u,timeSegmentMaxValues:a,parseValue:d=>{let[h,f]=oe(d,l);return{timeString:f,restValue:h+i}}}),vn({dateModeTemplate:l,dateSegmentsSeparator:s,dateTimeSeparator:i,timeMode:e,timeSegmentMaxValues:a})],postprocessors:[ft(e),we({dateModeTemplate:l,dateSegmentSeparator:s,splitFn:d=>{let[h,f]=oe(d,l);return{dateStrings:[h],restPart:f}},uniteFn:([d],h)=>d+(h.includes(i)?i:"")}),Sn({min:n,max:r,dateModeTemplate:l,timeMode:e,dateTimeSeparator:i})],plugins:[At({step:o,fullMode:g,timeSegmentMinValues:u,timeSegmentMaxValues:a}),Dt(g.indexOf("AA"))]})}function Dn(t,{prefix:e,postfix:s,decimalSeparator:n,decimalPseudoSeparators:r,minusSign:i,minusPseudoSigns:o,maximumFractionDigits:c}){var v,A,x,b;let l=[...r,n].map(F=>`\\${F}`).join(""),a=[...o,i].map(F=>`\\${F}`).join(""),u=e&&new RegExp(`^([${a}])?(${e.split("").map(y).join("?")}?)`),g=s&&new RegExp(`${s.split("").map(y).join("?")}?$`),[,,d=""]=t.match(u)??[],[h=""]=t.match(g)??[],f=t.replace(u,e&&"$1").replace(g,""),p=new RegExp(n&&c>0?`^[${l}]`:""),m=new RegExp(t.endsWith(s)?"":String.raw`^\d+`),S=new RegExp(n&&c>0?`[${l}]$`:""),D=new RegExp(t.startsWith(e)?"":String.raw`\d+$`);return{extractedPrefix:d.replace(S,"").replace(D,""),extractedPostfix:h.replace(p,"").replace(m,""),cleanValue:(((v=D.exec(d))==null?void 0:v[0])??"")+(((A=S.exec(d))==null?void 0:A[0])??"")+f+(((x=m.exec(h))==null?void 0:x[0])??"")+(((b=p.exec(h))==null?void 0:b[0])??"")}}function xt({decimalPseudoSeparators:t,decimalSeparator:e,maximumFractionDigits:s,min:n,minusSign:r,minusPseudoSigns:i,postfix:o,prefix:c,thousandSeparator:l}){let a=n<0&&[r,...i].includes(c)?"":Je(c),u=String.raw`\d`,g=n<0?`[${r}${i.map(S=>`\\${S}`).join("")}]?`:"",d=l?`[${u}${y(l).replaceAll(/\s/g,String.raw`\s`)}]*`:`[${u}]*`,h=Number.isFinite(s)?s:"",f=s>0?`([${y(e)}${t.map(y).join("")}]${u}{0,${h}})?`:"",p=Je(o),m=`(${g+a}|${a+g})`;return new RegExp(`^${m}${d}${f}${p}$`)}function Je(t){return t?`${t.split("").map(e=>`${y(e)}?`).join("")}`:""}function w(t,e){var p;let{extractedPrefix:s,cleanValue:n,extractedPostfix:r}=Dn(t,e),{decimalSeparator:i,minusSign:o,minusPseudoSigns:c,decimalPseudoSeparators:l,maximumFractionDigits:a}=e,[u="",g=""]=i?n.split(i):[n],d=[o,...c].map(m=>`\\${m}`).join(""),[,h="",f=""]=new RegExp(`^([${d}])?(.*)`).exec(u)||[];return{prefix:s,minus:h,integerPart:f,decimalPart:g,decimalSeparator:i&&a>0?((p=new RegExp(`[${[i,...l].map(y).join("")}]`,"i").exec(n))==null?void 0:p[0])??"":"",postfix:r}}function M({minus:t="",integerPart:e="",decimalPart:s="",prefix:n="",postfix:r="",decimalSeparator:i=""},o){let c=s?o.decimalSeparator:i;return`${o.negativePattern==="minusFirst"?t+n:n+t}${e}${c}${s}${r}`}function be(t,{bigint:e=!1,decimalSeparator:s=".",maximumFractionDigits:n=0,minusPseudoSigns:r=st,minusSign:i=le,thousandSeparator:o=N}={}){let c=!!new RegExp(`^\\D*[${y(i)}\\${r.join("\\")}]`).exec(t),l=y(s),a=t.replaceAll(new RegExp(`${l}(?!\\d)`,"g"),"").replaceAll(new RegExp(`[^\\d${n<=0&&s===o?"":l}]`,"g"),"").replace(s,s&&".");if(a){let u=c?ce:"";return e?BigInt(`${u}${a}`):+`${u}${a}`}return e?null:NaN}function Pt(t){let e=String(t),[s="",n]=e.split("e-"),r=e;if(n&&typeof t=="number"){let[,i]=s.split("."),o=Number(n)+((i==null?void 0:i.length)??0);r=t.toFixed(o)}return r}function An({decimalSeparator:t,thousandSeparator:e,decimalPseudoSeparators:s=jt}){return s.filter(n=>n!==e&&n!==t)}function xn(t){return({elementState:e,data:s})=>{let{value:n}=e,c=w(s,t),{prefix:r,postfix:i}=c,o=L(c,["prefix","postfix"]);return{elementState:e,data:M(P(E({},o),{prefix:n.startsWith(r)?"":r,postfix:n.endsWith(i)?"":i}),t)}}}function Pn(t){let{minimumFractionDigits:e}=t;return e?({value:s,selection:n})=>{if(Number.isNaN(be(s,t)))return{value:s,selection:n};let o=w(s,t),{decimalPart:r}=o,i=L(o,["decimalPart"]);return{value:M(P(E({},i),{decimalPart:r.padEnd(e,"0")}),t),selection:n}}:_}function yn(t){return({value:e,selection:s})=>{let[n]=s,{prefix:r,minus:i,integerPart:o,decimalSeparator:c,decimalPart:l,postfix:a}=w(e,t),u=!o&&!l&&c;return!o&&!Number(l)&&n===(i+r).length||u?{selection:s,value:M({prefix:r,minus:i,postfix:a},t)}:{value:e,selection:s}}}function wn(t){let e=!0,s=xt(P(E({},t),{prefix:"",postfix:"",thousandSeparator:"",maximumFractionDigits:1/0,min:-1/0}));return({elementState:n,data:r})=>{if(!e)return{elementState:n,data:r};e=!1;let{value:i,selection:o}=n,[c,l]=o,p=w(i,t),{prefix:a,postfix:u}=p,g=L(p,["prefix","postfix"]),d=M(g,t),h=k({selection:[Math.max(c-a.length,0),Math.max(l-a.length,0)],value:d},{mask:s}),f=d.slice(0,Math.max(l-a.length,0)).length-h.value.slice(0,h.selection[1]).length;return{elementState:{selection:[Math.max(c-f,0),Math.max(l-f,0)],value:M(P(E({},w(h.value,t)),{prefix:a,postfix:u}),t)},data:r}}}function Mn(t){return({elementState:e},s)=>{let{value:n,selection:r}=e,[i,o]=r,{prefix:c,minusSign:l,negativePattern:a}=t,u=a==="prefixFirst"?c:l+c,g=M(P(E({},w(n,t)),{minus:""}),t),d=n.length-g.length;return{elementState:s.includes("delete")&&n.includes(l)&&i<u.length?{value:g,selection:[Math.max(i-d,u.length-1),Math.max(o-d,u.length-1)]}:e}}}function Rn(t){let{thousandSeparator:e}=t,s=r=>{let i=y(e);return r.replace(new RegExp(`^(\\D+)?[0${i}]+(?=0)`),"$1").replace(new RegExp(`^(\\D+)?[0${i}]+(?=[1-9])`),"$1")},n=(r,i)=>{let o=r.slice(0,i),c=r.slice(i).startsWith("0");return o.length-s(o).length+(c?1:0)};return({value:r,selection:i})=>{let[o,c]=i,h=w(r,t),{integerPart:l}=h,a=L(h,["integerPart"]),u=s(l);if(l===u)return{value:r,selection:i};let g=o-n(r,o),d=c-n(r,c);return{value:M(P(E({},a),{integerPart:u}),t),selection:[Math.max(g,0),Math.max(d,0)]}}}function bn({min:t,max:e,decimalSeparator:s,minusSign:n,maximumFractionDigits:r}){return({value:i,selection:o})=>{let c=be(i,{decimalSeparator:s,minusSign:n,bigint:!(r&&i.includes(s))})??NaN,l=c>0?R(c,null,e):R(c,t);if(c&&l!==c){let a=`${l}`.replace(".",s).replace(ce,n);return{value:a,selection:[a.length,a.length]}}return{value:i,selection:o}}}function Cn({decimalSeparator:t,thousandSeparator:e,minimumFractionDigits:s}){return({elementState:n,data:r},i)=>{let{value:o,selection:c}=n,[l,a]=c,u=o.slice(l,a),g=s?[t,e]:[e],d=!!s&&l>o.indexOf(t)&&!!u.match(/^0+$/gi);return i!=="deleteBackward"&&i!=="deleteForward"||!g.includes(u)&&!d?{elementState:n,data:r}:{elementState:{value:o,selection:i==="deleteForward"?[a,a]:[l,l]},data:r}}}function Ln(t){let{maximumFractionDigits:e,decimalSeparator:s}=t,n=new RegExp(`^\\D*${y(s)}`);return({elementState:r,data:i})=>{let{value:o,selection:c}=r,S=w(o,t),{prefix:l,postfix:a}=S,u=L(S,["prefix","postfix"]),g=M(u,t),[d,h]=c,f=R(d-l.length,0,g.length),p=R(h-l.length,0,g.length);if(e<=0||g.slice(0,f).includes(s)||g.slice(p).includes(s)||!i.match(n))return{elementState:r,data:i};let m=/\d+/.exec(g.slice(0,f));return{elementState:r,data:m?i:`0${i}`}}}function Nn({prefix:t,minusSign:e,negativePattern:s}){return({value:n,selection:r},i)=>St(n.includes(e)&&s==="minusFirst"?e+t:t)({value:n,selection:r},i)}function ze(n){var r=n,{validCharacter:t,pseudoCharacters:e}=r,s=L(r,["validCharacter","pseudoCharacters"]);let i=new RegExp(`[${e.join("")}]`,"gi");return({elementState:o,data:c})=>{let{value:l,selection:a}=o,f=w(l,s),{prefix:u,postfix:g}=f,d=L(f,["prefix","postfix"]),h=M(d,s).replace(i,t);return{elementState:{selection:a,value:M(P(E({},w(h,s)),{prefix:u,postfix:g}),s)},data:c.replace(i,t)}}}function In(t){let{decimalSeparator:e}=t;return e?({elementState:s,data:n})=>{let{value:r,selection:i}=s,[o,c]=i;return{elementState:s,data:!w(r,t).decimalSeparator||r.slice(o,c+1).includes(e)?n:n.replaceAll(new RegExp(y(e),"gi"),"")}}:_}function $n(t){let{thousandSeparator:e}=t;if(!e)return _;let s=(...n)=>n.every(r=>/\s/.test(r));return({value:n,selection:r})=>{let[i,o]=r,[c,l]=r,{prefix:a,minus:u,integerPart:g,decimalSeparator:d,decimalPart:h,postfix:f}=w(n,t),p=M({minus:u,integerPart:g,decimalSeparator:d,decimalPart:h},t).length-(u+g+(d?d+h:"")).length;p>0&&i&&i<=p&&(c-=p),p>0&&o&&o<=p&&(l-=p);let m=Array.from(g).reduceRight((S,D,v)=>{let x=!(!v&&D===e)&&!!S.length&&(S.length+1)%4===0,b=D===e||s(D,e);return x&&b?e+S:!x&&b?(c&&v<=i&&c--,l&&v<=o&&l--,S):x?(v<i&&c++,v<o&&l++,D+e+S):D+S},"");return{value:M({prefix:a,minus:u,integerPart:m,decimalSeparator:d,decimalPart:h,postfix:f},t),selection:[c,l]}}}function kn(t){let{maximumFractionDigits:e,decimalSeparator:s}=t;if(e>0||!s)return _;let n=new RegExp(`${y(s)}.*$`,"g");return({elementState:r,data:i})=>{let{value:o,selection:c}=r,p=w(o,t),{prefix:l,postfix:a}=p,u=L(p,["prefix","postfix"]),[g,d]=c,h=M(u,t).replace(n,""),f=M(P(E({},w(h,t)),{prefix:l,postfix:a}),t);return{elementState:{selection:[Math.min(g,f.length),Math.min(d,f.length)],value:f},data:i.replace(n,"")}}}var Xe=[0,0];function Tn(t){let e=Rn(t);return J("blur",s=>{let n=e({value:s.value,selection:Xe},{value:"",selection:Xe}).value;$(s,n)},{capture:!0})}function _n({min:t,max:e,decimalSeparator:s,minusSign:n,maximumFractionDigits:r}){return J("blur",(i,o)=>{let c=be(i.value,{decimalSeparator:s,minusSign:n,bigint:!(r&&i.value.includes(s))})??NaN,l=R(c,t,e);!Number.isNaN(c)&&c!==l&&$(i,k(Pt(l),o))},{capture:!0})}function On(t){let{decimalSeparator:e}=t;return e?J("blur",s=>{let l=w(s.value,t),{prefix:n,postfix:r}=l,i=L(l,["prefix","postfix"]),o=M(i,t).replace(new RegExp(`^(\\D+)?${y(e)}`),`$10${e}`),c=M(P(E({},w(o,t)),{prefix:n,postfix:r}),t);$(s,c)},{capture:!0}):ye}function Fn({max:t=1/0,min:e=-1/0,thousandSeparator:s=N,decimalSeparator:n=".",decimalPseudoSeparators:r,prefix:i="",postfix:o="",minusSign:c=le,minusPseudoSigns:l=st.filter(d=>d!==s&&d!==n&&d!==c),maximumFractionDigits:a=0,minimumFractionDigits:u=0,negativePattern:g="prefixFirst"}={}){let d=An({decimalSeparator:n,thousandSeparator:s,decimalPseudoSeparators:r}),h={max:t,min:e,thousandSeparator:s,postfix:o,minusSign:c,minusPseudoSigns:l,maximumFractionDigits:a,decimalPseudoSeparators:d,negativePattern:g,decimalSeparator:a<=0&&n===s?"":n,prefix:i.endsWith(n)&&a>0?`${i}${Ut}`:i,minimumFractionDigits:Math.min(u,a)};return P(E({},I),{mask:xt(h),preprocessors:[K(),wn(h),xn(h),ze(P(E({},h),{validCharacter:c,pseudoCharacters:l})),ze(P(E({},h),{validCharacter:n,pseudoCharacters:d})),Ln(h),Cn(h),kn(h),In(h),Mn(h)],postprocessors:[bn(h),Nn(h),Et(o),$n(h),Pn(h),yn(h)],plugins:[Tn(h),On(h),_n(h)],overwriteMode:u>0?({value:f,selection:[p]})=>p<=f.indexOf(n)?"shift":"replace":"shift"})}function ls(t,e){if(Number.isNaN(t)||t===null)return"";let{min:s=-1/0,max:n=1/0,decimalSeparator:r="."}=e,i=Pt(R(t,s,n)).replace(".",r);return k(i,Fn(e))}export{I as a,k as b,Vn as c,Jn as d,zn as e,St as f,es as g,cn as h,ts as i,ns as j,ss as k,is as l,os as m,cs as n,be as o,Fn as p,ls as q};
