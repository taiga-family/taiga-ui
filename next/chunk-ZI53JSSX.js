import{a as T,b as g,c as L,d as p}from"./chunk-HDGWTFNH.js";import{a as P,f as N,i as w}from"./chunk-WK2IG7V3.js";import{a as m,b as a}from"./chunk-42JZD6NG.js";var v="x";function C({countryIsoCode:n,metadata:e}){let t=!0;return({elementState:r,data:s})=>{if(!t)return{elementState:r,data:s};let{value:o,selection:l}=r;t=!1;try{let u=g(o,n,e);return{elementState:{value:`+${T(n,e)} ${u.nationalNumber}`,selection:l}}}catch{return{elementState:r}}}}function G({phone:n,metadata:e}){return L(n,e)==="TOO_LONG"?G({phone:n.slice(0,n.length-1),metadata:e}):n}function k({value:n,template:e,prefix:t}){return[...t,...e?e.slice(t.length).split("").map(r=>r===v||/\d/.test(r)?/\d/:r):new Array(Math.max(n.length-t.length,t.length)).fill(/\d/)]}function F(n,e){let t=new p({},e);return t.input(n),t.getCountry()}function A(n,e,t){n.input(e.replaceAll(/[^\d+]/g,""));let r=n.getTemplate(),s=r.split(" "),o=s.length>1?`${s.slice(0,2).join(" ")} ${s.slice(2).join(t)}`:r;return n.reset(),o.trim()}function b({currentTemplate:n,newTemplate:e,currentPhoneLength:t,newPhoneLength:r}){return e.length<n.length&&r>t?n:e}var M=3;function $(n){return({value:e,selection:t})=>({value:e.length>M?G({phone:e,metadata:n}):e,selection:t})}function E({prefix:n,countryIsoCode:e,metadata:t}){return({elementState:r,data:s})=>{let{selection:o,value:l}=r,[u]=o,c=u<n.length,h=n.trim();if(l&&!l.startsWith(h)&&!s){let i=new p({defaultCountry:e},t);i.input(l);let f=i.getNumberValue()??"";return i.reset(),{elementState:{value:i.input(f),selection:o}}}try{let i=L(s,{defaultCountry:e},t);if(!i||i==="TOO_SHORT"){let f=e?g(s,e,t):g(s,t),{nationalNumber:O,countryCallingCode:_}=f;return{elementState:{selection:o,value:c?"":n},data:c?`+${_} ${O}`:O}}}catch{return{elementState:r}}return{elementState:r}}}function V({defaultIsoCode:n,metadata:e,separator:t="-"}){let r=new p(n,e),s="+",o="",l=0;return a(m({},P),{mask:({value:u})=>{let c=A(r,u,t),h=u.replaceAll(/\D/g,"").length;return o=b({currentTemplate:o,newTemplate:c,currentPhoneLength:l,newPhoneLength:h}),l=h,o.length===1?["+",/\d/]:k({value:u,template:o,prefix:s})},preprocessors:[E({prefix:s,countryIsoCode:n,metadata:e})],postprocessors:[$(e)]})}function y({countryIsoCode:n,metadata:e,separator:t="-"}){let r=T(n,e),s=new p(n,e),o=`+${r} `,l="",u=0;return a(m({},P),{mask:({value:c})=>{let h=A(s,c,t),i=c.replaceAll(/\D/g,"").length;return l=b({currentTemplate:l,newTemplate:h,currentPhoneLength:u,newPhoneLength:i}),u=i,k({value:c,template:l,prefix:o})},plugins:[w((c,[h,i])=>[h===i?o.length:0,c.length])],preprocessors:[C({countryIsoCode:n,metadata:e}),E({prefix:o,countryIsoCode:n,metadata:e})],postprocessors:[N(o),$(e)]})}function j({countryIsoCode:n,metadata:e,strict:t=!0,separator:r="-"}){return t&&n?y({countryIsoCode:n,metadata:e,separator:r}):V({defaultIsoCode:n,metadata:e,separator:r})}export{F as a,j as b};
