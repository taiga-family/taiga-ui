import{a as R,b as g,c as H,d as k}from"./chunk-IJA3E6PF.js";import{a as M}from"./chunk-N3ADFBVI.js";import{a as D}from"./chunk-DHT7BGPC.js";import{a as U}from"./chunk-JOSS74KB.js";import{a as O}from"./chunk-L7WUFU7G.js";import{Xa as C}from"./chunk-QUTX6DZN.js";import{ta as F,za as N}from"./chunk-2UPKG2B4.js";import{a as l,b as h,h as f}from"./chunk-B4AJQJMI.js";var Y="https://stackblitz.com",q=["angular-cli","create-react-app","html","javascript","node","polymer","typescript","vue"],X=["project","search","ports","settings"],Q=["light","dark"],Z=["editor","preview"],K={clickToLoad:e=>d("ctl",e),devToolsHeight:e=>x("devtoolsheight",e),forceEmbedLayout:e=>d("embed",e),hideDevTools:e=>d("hidedevtools",e),hideExplorer:e=>d("hideExplorer",e),hideNavigation:e=>d("hideNavigation",e),openFile:e=>E("file",e),showSidebar:e=>ee("showSidebar",e),sidebarView:e=>S("sidebarView",e,X),startScript:e=>E("startScript",e),terminalHeight:e=>x("terminalHeight",e),theme:e=>S("theme",e,Q),view:e=>S("view",e,Z),zenMode:e=>d("zenMode",e),organization:e=>`${E("orgName",e?.name)}&${E("orgProvider",e?.provider)}`,crossOriginIsolated:e=>d("corp",e)};function z(e={}){let t=Object.entries(e).map(([n,r])=>r!=null&&K.hasOwnProperty(n)?K[n](r):"").filter(Boolean);return t.length?`?${t.join("&")}`:""}function d(e,t){return t===!0?`${e}=1`:""}function ee(e,t){return typeof t=="boolean"?`${e}=${t?"1":"0"}`:""}function x(e,t){if(typeof t=="number"&&!Number.isNaN(t)){let n=Math.min(100,Math.max(0,t));return`${e}=${encodeURIComponent(Math.round(n))}`}return""}function S(e,t="",n=[]){return n.includes(t)?`${e}=${encodeURIComponent(t)}`:""}function E(e,t){return(Array.isArray(t)?t:[t]).filter(r=>typeof r=="string"&&r.trim()!=="").map(r=>`${e}=${encodeURIComponent(r)}`).join("&")}function B(){return Math.random().toString(36).slice(2,6)+Math.random().toString(36).slice(2,6)}function j(e,t){return`${G(t)}${e}${z(t)}`}function I(e,t){let n={forceEmbedLayout:!0};return t&&typeof t=="object"&&Object.assign(n,t),`${G(n)}${e}${z(n)}`}function G(e={}){return(typeof e.origin=="string"?e.origin:Y).replace(/\/$/,"")}function A(e,t,n){if(!t||!e||!e.parentNode)throw new Error("Invalid Element");e.id&&(t.id=e.id),e.className&&(t.className=e.className),te(t,n),ne(e,t,n),e.replaceWith(t)}function L(e){if(typeof e=="string"){let t=document.getElementById(e);if(!t)throw new Error(`Could not find element with id '${e}'`);return t}else if(e instanceof HTMLElement)return e;throw new Error(`Invalid element: ${e}`)}function $(e){return e&&e.newWindow===!1?"_self":"_blank"}function te(e,t={}){let n=Object.hasOwnProperty.call(t,"height")?`${t.height}`:"300",r=Object.hasOwnProperty.call(t,"width")?`${t.width}`:void 0;e.setAttribute("height",n),r?e.setAttribute("width",r):e.setAttribute("style","width:100%;")}function ne(e,t,n={}){let r=e.allow?.split(";")?.map(i=>i.trim())??[];n.crossOriginIsolated&&!r.includes("cross-origin-isolated")&&r.push("cross-origin-isolated"),r.length>0&&(t.allow=r.join("; "))}var b=class{constructor(t){this.pending={},this.port=t,this.port.onmessage=this.messageListener.bind(this)}request({type:t,payload:n}){return new Promise((r,i)=>{let o=B();this.pending[o]={resolve:r,reject:i},this.port.postMessage({type:t,payload:h(l({},n),{__reqid:o})})})}messageListener(t){if(typeof t.data.payload?.__reqid!="string")return;let{type:n,payload:r}=t.data,{__reqid:i,__success:o,__error:s}=r;this.pending[i]&&(o?this.pending[i].resolve(this.cleanResult(r)):this.pending[i].reject(s?`${n}: ${s}`:n),delete this.pending[i])}cleanResult(t){let n=l({},t);return delete n.__reqid,delete n.__success,delete n.__error,Object.keys(n).length?n:null}},P=class{constructor(t,n){this.editor={openFile:r=>this._rdc.request({type:"SDK_OPEN_FILE",payload:{path:r}}),setCurrentFile:r=>this._rdc.request({type:"SDK_SET_CURRENT_FILE",payload:{path:r}}),setTheme:r=>this._rdc.request({type:"SDK_SET_UI_THEME",payload:{theme:r}}),setView:r=>this._rdc.request({type:"SDK_SET_UI_VIEW",payload:{view:r}}),showSidebar:(r=!0)=>this._rdc.request({type:"SDK_TOGGLE_SIDEBAR",payload:{visible:r}})},this.preview={origin:"",getUrl:()=>this._rdc.request({type:"SDK_GET_PREVIEW_URL",payload:{}}).then(r=>r?.url??null),setUrl:(r="/")=>{if(typeof r!="string"||!r.startsWith("/"))throw new Error(`Invalid argument: expected a path starting with '/', got '${r}'`);return this._rdc.request({type:"SDK_SET_PREVIEW_URL",payload:{path:r}})}},this._rdc=new b(t),Object.defineProperty(this.preview,"origin",{value:typeof n.previewOrigin=="string"?n.previewOrigin:null,writable:!1})}applyFsDiff(t){let n=r=>r!==null&&typeof r=="object";if(!n(t)||!n(t.create))throw new Error("Invalid diff object: expected diff.create to be an object.");if(!Array.isArray(t.destroy))throw new Error("Invalid diff object: expected diff.destroy to be an array.");return this._rdc.request({type:"SDK_APPLY_FS_DIFF",payload:t})}getDependencies(){return this._rdc.request({type:"SDK_GET_DEPS_SNAPSHOT",payload:{}})}getFsSnapshot(){return this._rdc.request({type:"SDK_GET_FS_SNAPSHOT",payload:{}})}},y=[],T=class{constructor(t){this.id=B(),this.element=t,this.pending=new Promise((n,r)=>{let i=({data:c,ports:a})=>{c?.action==="SDK_INIT_SUCCESS"&&c.id===this.id&&(this.vm=new P(a[0],c.payload),n(this.vm),s())},o=()=>{this.element.contentWindow?.postMessage({action:"SDK_INIT",id:this.id},"*")};function s(){window.clearInterval(m),window.removeEventListener("message",i)}window.addEventListener("message",i),o();let p=0,m=window.setInterval(()=>{if(this.vm){s();return}if(p>=20){s(),r("Timeout: Unable to establish a connection with the StackBlitz VM"),y.forEach((c,a)=>{c.id===this.id&&y.splice(a,1)});return}p++,o()},500)}),y.push(this)}},re=e=>{let t=e instanceof Element?"element":"id";return y.find(n=>n[t]===e)??null};function ie(e,t){let n=document.createElement("input");return n.type="hidden",n.name=e,n.value=t,n}function oe(e){return e.replace(/\[/g,"%5B").replace(/\]/g,"%5D")}function V({template:e,title:t,description:n,dependencies:r,files:i,settings:o}){if(!q.includes(e)){let c=q.map(a=>`'${a}'`).join(", ");console.warn(`Unsupported project.template: must be one of ${c}`)}let s=[],p=(c,a,J="")=>{s.push(ie(c,typeof a=="string"?a:J))};p("project[title]",t),typeof n=="string"&&n.length>0&&p("project[description]",n),p("project[template]",e,"javascript"),r&&(e==="node"?console.warn("Invalid project.dependencies: dependencies must be provided as a 'package.json' file when using the 'node' template."):p("project[dependencies]",JSON.stringify(r))),o&&p("project[settings]",JSON.stringify(o)),Object.entries(i).forEach(([c,a])=>{p(`project[files][${oe(c)}]`,a)});let m=document.createElement("form");return m.method="POST",m.setAttribute("style","display:none!important;"),m.append(...s),m}function se(e,t){let n=V(e);return n.action=I("/run",t),n.id="sb_run",`<!doctype html>
<html>
<head><title></title></head>
<body>
  ${n.outerHTML}
  <script>document.getElementById('${n.id}').submit();<\/script>
</body>
</html>`}function ce(e,t){let n=V(e);n.action=j("/run",t),n.target=$(t),document.body.appendChild(n),n.submit(),document.body.removeChild(n)}function _(e){return e?.contentWindow?(re(e)??new T(e)).pending:Promise.reject("Provided element is not an iframe.")}function ae(e,t){ce(e,t)}function le(e,t){let n=j(`/edit/${e}`,t),r=$(t);window.open(n,r)}function pe(e,t){let n=j(`/github/${e}`,t),r=$(t);window.open(n,r)}function de(e,t,n){let r=L(e),i=se(t,n),o=document.createElement("iframe");return A(r,o,n),o.contentDocument?.write(i),_(o)}function ue(e,t,n){let r=L(e),i=document.createElement("iframe");return i.src=I(`/edit/${t}`,n),A(r,i,n),_(i)}function me(e,t,n){let r=L(e),i=document.createElement("iframe");return i.src=I(`/github/${t}`,n),A(r,i,n),_(i)}var v={connect:_,embedGithubProject:me,embedProject:de,embedProjectId:ue,openGithubProject:pe,openProject:ae,openProjectId:le};var w={SELECTOR:"app",TEMPLATE_URL:"./app.html",STYLE_URL:"./app.less",CLASS_NAME:"App"},u=class u{constructor(){this.deps=N(M);this.name="Stackblitz";this.content=new C(U)}edit(t,n,r){return f(this,null,function*(){if(!r.HTML||!r.TypeScript)return;let i=new O(r.TypeScript),o=H(r),s=k(o);i.selector=w.SELECTOR,i.templateUrl=w.TEMPLATE_URL,i.styleUrl=w.STYLE_URL,i.className=w.CLASS_NAME,i.defaultExport=!1,v.openProject(h(l({},yield this.getStackblitzProjectConfig()),{title:`${t}-${n}`,description:`Taiga UI example of the component ${t}`,files:h(l(l({},yield this.getBaseAngularProjectFiles()),s),{[g`app.ts`]:i.toString(),[g`app.html`]:r.HTML,[g`app.less`]:R(r.LESS||"")})}))})}openStarter(o,s){return f(this,arguments,function*({title:t,description:n,files:r},i){return v.openProject(h(l({},yield this.getStackblitzProjectConfig()),{title:t,description:n,files:l(l({},yield this.getBaseAngularProjectFiles()),r)}),i)})}getBaseAngularProjectFiles(){return f(this,null,function*(){let{tsconfig:t,angularJson:n,mainTs:r,indexHtml:i,globalStyles:o}=yield D.getProjectFiles();return{"tsconfig.json":t,"angular.json":n,"src/main.ts":r,"src/index.html":i,"src/styles.less":o}})}getStackblitzProjectConfig(){return f(this,null,function*(){return{template:"angular-cli",dependencies:yield this.deps.get(),tags:["Angular","Taiga UI","Angular components","UI Kit"]}})}};u.\u0275fac=function(n){return new(n||u)},u.\u0275prov=F({token:u,factory:u.\u0275fac});var W=u;export{W as a};
