import{e as Pt,f as it,g as $t,h as It,i as je,m as Xt,n as Wt}from"./chunk-U5ZOPORR.js";import{a as ne,q as Ve}from"./chunk-LMWAED2A.js";import{W as Be,b as Ee}from"./chunk-6LS3O5RC.js";import{m as jt,n as oe,u as Xe}from"./chunk-Y3QK6NQW.js";import{a as W,c as Qe}from"./chunk-DXWWDGKR.js";import{A as De,Aa as Re,I as He,M as ke,Oa as Fe,V as Ct,W as Ae,_a as Ye,a as B,aa as Ne,c as Se,ca as Tt,d as Oe,da as $e,ea as Qt,g as Le,ia as v,l as ze,n as X,o as we,ra as re,za as Y}from"./chunk-TQVNNECG.js";import{p as Me,q as Vt}from"./chunk-RGJEWAQ3.js";import{Bc as Q,Cc as l,Db as s,Dc as F,E as de,Ec as $,Fc as Ht,G as ee,Gc as bt,Hb as xe,Hc as E,I as q,Ic as R,Ka as ge,Kc as Ce,La as K,Lc as Te,Ma as J,Mb as be,Mc as j,Na as lt,Nc as P,Oc as kt,Pc as D,Ta as ft,Ub as x,Uc as et,V as Rt,Va as gt,Vc as w,Wa as tt,Wb as yt,Wc as S,Xc as k,Yc as Pe,Za as z,Zc as vt,_a as ye,_b as I,_c as At,ab as Bt,ba as me,dd as _t,ed as Nt,fc as C,gc as _,hc as p,hd as Ie,i as ce,ia as Ft,ic as M,j as ue,ja as st,jd as Yt,k as pe,lc as b,ma as he,mc as ct,na as fe,nc as T,oc as f,pc as g,qc as u,rc as c,sc as m,tc as ve,td as ut,uc as _e,vc as ie,w as H,wc as xt,x as Z,za as d}from"./chunk-YJQUARX2.js";import{h as y}from"./chunk-42JZD6NG.js";var li=["arc"],ci=["*"];function ui(n,t){if(n&1&&(lt(),u(0,"svg",5),m(1,"path",6)(2,"path",7,0),c()),n&2){let e=t.$index,i=l();p("height",i.getDiameter(e),"rem")("inset-block-start",i.getInset(e),"rem")("inset-inline-end",i.getInset(e),"rem")("inset-inline-start",i.getInset(e),"rem"),s(2),p("stroke",`var(--tui-chart-categorical-${e.toString().padStart(2,"0")})`)("stroke-dasharray",i.getLength(e),"em")("stroke-dashoffset",i.initialized()?i.getOffset(e):i.getLength(e),"em"),M("t-value_inactive",i.isInactive(e))}}var pi=.76,We={m:9,l:11,xl:16},di={m:.25,l:.375,xl:.5625},mi={m:.125,l:.1875,xl:.25};function hi(n){return n.map(({nativeElement:t},e)=>ee(re(t,"mouseenter").pipe(H(()=>e)),re(t,"mouseleave").pipe(H(()=>NaN))))}var Mt=class Mt{constructor(){this.arcs$=new pe(1);this.initialized=Bt(!1);this.$=de(0).pipe(Y(),B()).subscribe(()=>this.initialized.set(!0));this.value=[];this.size="m";this.max=100;this.minLabel="0%";this.maxLabel="100%";this.activeItemIndex=NaN;this.activeItemIndexChange=this.arcs$.pipe(st(t=>t.changes.pipe(Ft(null),st(()=>ee(...hi(t))))),fe(t=>{this.activeItemIndex=t}))}set arcs(t){this.arcs$.next(t)}get width(){return We[this.size]}get strokeWidth(){return di[this.size]}isInactive(t){return!Number.isNaN(this.activeItemIndex)&&t!==this.activeItemIndex}getInset(t){return this.strokeWidth/2+t*(this.strokeWidth+mi[this.size])}getDiameter(t){return We[this.size]-2*this.getInset(t)}getLength(t){return Math.PI*this.getDiameter(t)*pi}getOffset(t){return this.getLength(t)*(1-Math.min((this.value[t]||0)/this.max,1))}};Mt.\u0275fac=function(e){return new(e||Mt)},Mt.\u0275cmp=x({type:Mt,selectors:[["tui-arc-chart"]],viewQuery:function(e,i){if(e&1&&bt(li,5),e&2){let r;E(r=R())&&(i.arcs=r)}},hostVars:7,hostBindings:function(e,i){e&2&&(C("data-size",i.size),p("width",i.width,"rem")("height",i.width,"rem")("stroke-width",i.strokeWidth,"rem"))},inputs:{value:"value",size:"size",max:"max",minLabel:"minLabel",maxLabel:"maxLabel",activeItemIndex:"activeItemIndex"},outputs:{activeItemIndexChange:"activeItemIndexChange"},ngContentSelectors:ci,decls:10,vars:2,consts:[["arc",""],["focusable","false","viewBox","-100 -100 200 200","xmlns","http://www.w3.org/2000/svg",1,"t-svg",3,"height","inset-block-start","inset-inline-end","inset-inline-start"],[1,"t-content"],[1,"t-wrapper"],[1,"t-percent"],["focusable","false","viewBox","-100 -100 200 200","xmlns","http://www.w3.org/2000/svg",1,"t-svg"],["d","M -70 70 A 100 100 0 1 1 70 70","vector-effect","non-scaling-stroke"],["d","M -70 70 A 100 100 0 1 1 70 70","vector-effect","non-scaling-stroke",1,"t-value"]],template:function(e,i){e&1&&(F(),f(0,ui,4,16,":svg:svg",1,ct),u(2,"div",2)(3,"div",3),$(4),c()(),u(5,"div",4)(6,"span"),P(7),c(),u(8,"span"),P(9),c()()),e&2&&(g("-".repeat(i.value.length)),s(7),kt(i.minLabel),s(2),kt(i.maxLabel))},styles:["[_nghost-%COMP%]{position:relative;display:block;flex-shrink:0}.t-svg[_ngcontent-%COMP%]{position:absolute;inset:0;overflow:visible;fill:none;stroke:currentColor;stroke-linecap:round;color:var(--tui-background-neutral-1);font-size:1rem;pointer-events:none}.t-value[_ngcontent-%COMP%]{pointer-events:auto;transition:stroke-dashoffset var(--tui-duration) ease-in-out,opacity var(--tui-duration) ease-in-out .1s}.t-value_inactive[_ngcontent-%COMP%]{transition-property:stroke-dashoffset,opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;opacity:.16}.t-content[_ngcontent-%COMP%]{position:absolute;top:0;left:0;inline-size:100%;block-size:100%;display:flex;justify-content:center;align-items:center;text-align:center;color:var(--tui-text-secondary);font:var(--tui-font-text-xs);pointer-events:none}[data-size=xl][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{font:var(--tui-font-text-m)}.t-wrapper[_ngcontent-%COMP%]{pointer-events:auto}.t-wrapper[_ngcontent-%COMP%]:first-line{color:var(--tui-text-primary)}[data-size=m][_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]:first-line{font:var(--tui-font-text-s);font-weight:700}[data-size=l][_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]:first-line{font:var(--tui-font-text-m);font-weight:700}[data-size=xl][_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]:first-line{font:var(--tui-font-heading-5)}.t-percent[_ngcontent-%COMP%]{position:absolute;left:25%;bottom:11%;display:flex;inline-size:50%;justify-content:space-between;font:var(--tui-font-text-xs);color:var(--tui-text-secondary)}[data-size=xl][_nghost-%COMP%]   .t-percent[_ngcontent-%COMP%]{font:var(--tui-font-text-m)}"],changeDetection:0});var Ue=Mt;var fi=["*"];function gi(n,t){if(n&1&&(u(0,"div",12),P(1),c()),n&2){l();let e=S(1);s(),D(" ",e," ")}}function yi(n,t){if(n&1&&(u(0,"div",14),P(1),c()),n&2){let e=t.$implicit,i=l(3);s(),D(" ",e||i.fallbackLabel," ")}}function xi(n,t){if(n&1&&(u(0,"div",13),f(1,yi,2,1,"div",14,T),c()),n&2){l(2);let e=S(2);s(),g(e)}}function bi(n,t){if(n&1&&(u(0,"div",11),et(1),I(2,gi,2,1,"div",12)(3,xi,3,0,"div",13),c()),n&2){let e=l(),i=S(3),r=S(4);M("t-side_padding",r),s();let o=w(e.axisYName());s(),b(o?2:-1),s(),b(i?-1:3)}}function vi(n,t){if(n&1&&m(0,"div",15),n&2){let e=t.$index;l();let i=S(9),r=S(10);p("border-right-style",i(e,r))}}function _i(n,t){if(n&1&&m(0,"div",16),n&2){let e=t.$index;l();let i=S(14),r=S(15);p("border-top-style",i(e,r))}}function Ci(n,t){if(n&1&&(u(0,"div",14),P(1),c()),n&2){let e=t.$implicit,i=l(2);s(),D(" ",e||i.fallbackLabel," ")}}function Ti(n,t){if(n&1&&(u(0,"div",7),f(1,Ci,2,1,"div",14,T),c()),n&2){l();let e=S(2);s(),g(e)}}function Pi(n,t){if(n&1&&(u(0,"div",17),P(1),c()),n&2){let e=t.$implicit,i=l(2);s(),D(" ",e||i.fallbackLabel," ")}}function Ii(n,t){if(n&1&&(u(0,"div",8),f(1,Pi,2,1,"div",17,T),c()),n&2){l();let e=S(0);s(),g(e)}}function Mi(n,t){if(n&1&&(u(0,"div",19),P(1),c()),n&2){let e=t.$implicit,i=l(2);M("t-label-x_transparent",e===null),s(),D(" ",e||i.fallbackLabel," ")}}function Si(n,t){if(n&1&&(u(0,"div",10),f(1,Mi,2,3,"div",18,T),c()),n&2){let e=l();s(),g(e.axisXLabels())}}function Oi(n,t){if(n&1&&(u(0,"div",17),P(1),c()),n&2){let e=t.$implicit,i=l(3);s(),D(" ",e||i.fallbackLabel," ")}}function Li(n,t){if(n&1&&(u(0,"div",20),f(1,Oi,2,1,"div",17,T),c()),n&2){l(2);let e=S(0);s(),g(e)}}function zi(n,t){if(n&1&&(u(0,"div",21),P(1),c()),n&2){l();let e=S(2);s(),D(" ",e," ")}}function wi(n,t){if(n&1&&(u(0,"div",11),I(1,Li,3,0,"div",20),et(2),I(3,zi,2,1,"div",21),c()),n&2){let e=l(),i=S(1),r=S(4);M("t-side_padding",r),s(),b(i?-1:1),s();let o=w(e.axisYSecondaryName());s(),b(o?3:-1)}}var Di=()=>"dashed";var Hi=()=>"solid",kn=()=>"none",St=class St{constructor(){this.centeredXLabels=ut(()=>this.axisY()==="none");this.axisX=z("solid");this.axisXLabels=z([]);this.axisY=z("solid");this.axisYInset=z(!1);this.axisYLabels=z([]);this.axisYName=z("");this.axisYSecondaryInset=z(!1);this.axisYSecondaryLabels=z([]);this.axisYSecondaryName=z("");this.horizontalLines=z(0);this.horizontalLinesHandler=z(Hi);this.verticalLines=z(0);this.verticalLinesHandler=z(Di);this.fallbackLabel=De;this.hasXLabels=ut(()=>!!this.axisXLabels().length);this.hasYLabels=ut(()=>{let t=this.axisYName();return this.axisYLabels().length&&!this.axisYInset()||!!t});this.hasYSecondaryLabels=ut(()=>{let t=this.axisYSecondaryName();return this.axisYSecondaryLabels().length&&!this.axisYSecondaryInset()||!!t})}};St.\u0275fac=function(e){return new(e||St)},St.\u0275cmp=x({type:St,selectors:[["tui-axes"]],hostAttrs:["dir","ltr"],hostVars:2,hostBindings:function(e,i){e&2&&M("_centered",i.centeredXLabels())},inputs:{axisX:[1,"axisX"],axisXLabels:[1,"axisXLabels"],axisY:[1,"axisY"],axisYInset:[1,"axisYInset"],axisYLabels:[1,"axisYLabels"],axisYName:[1,"axisYName"],axisYSecondaryInset:[1,"axisYSecondaryInset"],axisYSecondaryLabels:[1,"axisYSecondaryLabels"],axisYSecondaryName:[1,"axisYSecondaryName"],horizontalLines:[1,"horizontalLines"],horizontalLinesHandler:[1,"horizontalLinesHandler"],verticalLines:[1,"verticalLines"],verticalLinesHandler:[1,"verticalLinesHandler"]},ngContentSelectors:fi,decls:24,vars:18,consts:[[1,"t-side",3,"t-side_padding"],[1,"t-wrapper"],[1,"t-grid"],[1,"t-vertical"],["automation-id","tui-axex__vertical-line",1,"t-line","t-line_vertical",3,"border-right-style"],[1,"t-horizontal"],["automation-id","tui-axex__horizontal-line",1,"t-line",3,"border-top-style"],[1,"t-labels-y","t-labels-y_inset"],[1,"t-labels-y","t-labels-y_inset","t-labels-y_inset_secondary"],[1,"t-content"],[1,"t-labels-x"],[1,"t-side"],["automation-id","tui-axex__axis-y-name",1,"t-name","t-name_primary"],[1,"t-labels-y","t-labels-y_primary"],["automation-id","tui-axex__axis-y-label",1,"t-label-y"],["automation-id","tui-axex__vertical-line",1,"t-line","t-line_vertical"],["automation-id","tui-axex__horizontal-line",1,"t-line"],["automation-id","tui-axex__axis-y-secondary-label",1,"t-label-y"],["automation-id","tui-axex__axis-x-label",1,"t-label-x",3,"t-label-x_transparent"],["automation-id","tui-axex__axis-x-label",1,"t-label-x"],[1,"t-labels-y","t-labels-y_secondary"],["automation-id","tui-axex__axis-y-secondary-name",1,"t-name"]],template:function(e,i){if(e&1&&(F(),et(0)(1)(2)(3)(4),I(5,bi,4,5,"div",0),u(6,"div",1)(7,"div",2)(8,"div",3),et(9)(10),f(11,vi,1,2,"div",4,ct),c(),u(13,"div",5),et(14)(15),f(16,_i,1,2,"div",6,ct),c(),I(18,Ti,3,0,"div",7)(19,Ii,3,0,"div",8),u(20,"div",9),$(21),c()(),I(22,Si,3,0,"div",10),c(),I(23,wi,4,5,"div",0)),e&2){w(i.axisYSecondaryLabels()),s();let r=w(i.axisYSecondaryInset());s(),w(i.axisYLabels()),s();let o=w(i.axisYInset());s();let a=w(i.hasXLabels());s(),b(i.hasYLabels()?5:-1),s(2),p("border-bottom-style",i.axisX())("border-left-style",i.axisY()),s(2),w(i.verticalLinesHandler()),s();let h=w(i.verticalLines());s(),g("-".repeat(h)),s(3),w(i.horizontalLinesHandler()),s();let O=w(i.horizontalLines());s(),g("-".repeat(O)),s(2),b(o?18:-1),s(),b(r?19:-1),s(3),b(a?22:-1),s(),b(i.hasYSecondaryLabels()?23:-1)}},styles:['[_nghost-%COMP%]{display:flex}.t-wrapper[_ngcontent-%COMP%]{display:flex;flex:1;block-size:100%;flex-direction:column}.t-grid[_ngcontent-%COMP%]{position:relative;display:flex;flex:1;justify-content:space-around;align-items:flex-end;border-width:1px;border-color:var(--tui-border-normal);isolation:isolate}.t-horizontal[_ngcontent-%COMP%]{position:absolute;top:0;left:0;inline-size:100%;block-size:100%;display:flex;flex-direction:column}.t-vertical[_ngcontent-%COMP%]{position:absolute;top:0;left:0;inline-size:100%;block-size:100%;display:flex}._centered[_nghost-%COMP%]   .t-vertical[_ngcontent-%COMP%]:after{content:"";display:block;flex:1 0 1px}.t-line[_ngcontent-%COMP%]{flex:2 0 1px;box-sizing:border-box;border-width:1px;border-color:var(--tui-border-normal)}._centered[_nghost-%COMP%]   .t-line_vertical[_ngcontent-%COMP%]:first-child{flex:1 0 1px;pointer-events:none}.t-side[_ngcontent-%COMP%]{display:flex;align-items:stretch}.t-side_padding[_ngcontent-%COMP%]{padding-block-end:2rem}.t-name[_ngcontent-%COMP%]{font:var(--tui-font-text-xs);writing-mode:tb;text-align:center;padding-block-end:.75rem;color:var(--tui-text-secondary)}.t-name_primary[_ngcontent-%COMP%]{transform:rotate(180deg)}.t-labels-y[_ngcontent-%COMP%]{display:flex;font:var(--tui-font-text-xs);flex-direction:column-reverse;justify-content:space-between;color:var(--tui-text-secondary)}.t-labels-y_primary[_ngcontent-%COMP%]{text-align:end;padding-inline-end:.75rem}.t-labels-y_secondary[_ngcontent-%COMP%]{padding-inline-start:.75rem}.t-labels-y_transparent[_ngcontent-%COMP%]{border-color:transparent}.t-labels-y_inset[_ngcontent-%COMP%]{position:absolute;top:.5625rem;left:.25rem;bottom:-.75rem;pointer-events:none}.t-labels-y_inset_secondary[_ngcontent-%COMP%]{left:auto;right:.25rem;text-align:end}.t-labels-x[_ngcontent-%COMP%]{position:relative;display:flex;font:var(--tui-font-text-xs);border-inline-end:1px solid transparent;color:var(--tui-text-secondary)}.t-label-x[_ngcontent-%COMP%]{block-size:.4375rem;border-inline-start:1px solid var(--tui-border-normal);flex:1;margin-block-end:1.5625rem}.t-label-x[_ngcontent-%COMP%]:before{content:"";display:block;block-size:.5625rem}.t-label-x_transparent[_ngcontent-%COMP%]{border-color:transparent}._centered[_nghost-%COMP%]   .t-label-x[_ngcontent-%COMP%]{block-size:2rem;text-align:center;border:none;margin:0}[_nghost-%COMP%]:not(._centered)   .t-label-x[_ngcontent-%COMP%]:last-child:not(:first-child){position:absolute;right:0;text-align:end;border-inline-start:none}.t-label-y[_ngcontent-%COMP%]:first-child{margin-block-end:-.375rem}.t-label-y[_ngcontent-%COMP%]:last-child{margin-block-start:-.375rem}.t-content[_ngcontent-%COMP%]{position:absolute;inset:0 0 -1px -1px;display:flex;align-items:flex-end}'],changeDetection:0});var Ge=St;function ki(n,t){if(n&1&&m(0,"div",1),n&2){let e=t.$implicit,i=t.$index,r=l();p("background",`var(--tui-chart-categorical-${i.toString().padStart(2,"0")})`)("height",r.getHeight(e),"%")}}var pt=class pt{constructor(){this.value=[];this.size="m"}getHeight(t){return 100*t/this.getSum(this.value)}getSum(t){return Ct(...t)}};pt.\u0275fac=function(e){return new(e||pt)},pt.\u0275cmp=x({type:pt,selectors:[["tui-bar"]],hostVars:1,hostBindings:function(e,i){e&2&&C("data-size",i.size)},inputs:{value:"value",size:"size"},decls:2,vars:0,consts:[["automation-id","tui-bar__bar",3,"background","height"],["automation-id","tui-bar__bar"]],template:function(e,i){e&1&&f(0,ki,1,4,"div",0,T),e&2&&g(i.value)},styles:["[_nghost-%COMP%]{display:flex;min-inline-size:.125rem;flex-direction:column-reverse;border-top-left-radius:var(--tui-radius-l);border-top-right-radius:var(--tui-radius-l);overflow:hidden}[data-size=l][_nghost-%COMP%]{inline-size:1rem;max-inline-size:1rem;margin:0 .1875rem}[data-size=m][_nghost-%COMP%]{inline-size:.5rem;max-inline-size:.5rem;margin:0 .1875rem}[data-size=s][_nghost-%COMP%]{inline-size:.25rem;max-inline-size:.5rem;margin:0 .125rem}"],changeDetection:0}),y([v],pt.prototype,"getSum",1);var Ut=pt;var Ai=["*"],Ni=(n,t)=>({$implicit:n,index:t,flexible:!1}),$i=(n,t)=>({$implicit:n,index:t,flexible:!0});function Ei(n,t){if(n&1&&ie(0,2),n&2){let e=t.$implicit,i=t.$index;l(2);let r=j(3);_("ngTemplateOutlet",r)("ngTemplateOutletContext",At(2,Ni,e,i))}}function Ri(n,t){if(n&1&&f(0,Ei,1,5,"ng-container",2,T),n&2){let e=l();g(e.computedValue)}}function Fi(n,t){if(n&1&&(u(0,"div",3),ie(1,2),c()),n&2){let e=t.$implicit,i=t.$index;l(2);let r=j(3);s(),_("ngTemplateOutlet",r)("ngTemplateOutletContext",At(2,$i,e,i))}}function Bi(n,t){if(n&1&&f(0,Fi,2,5,"div",3,T),n&2){let e=l();g(e.computedValue)}}function Yi(n,t){if(n&1&&m(0,"tui-bar",4),n&2){let e=t.flexible,i=t.index,r=t.$implicit,o=l();p("background",`var(--tui-chart-categorical-${i.toString().padStart(2,"0")})`)("height",o.getHeight(r),"%"),M("t-bar_flexible",e)("t-bar_negative",r<0),_("size",o.computedSize)("value",o.computedSegments)}}var Vi=100,Qi=[],ji=[1],dt=class dt{constructor(){this.value=[];this.size="m";this.collapsed=!1}get computedValue(){return this.collapsed?ji:this.value}get computedSegments(){return this.collapsed?this.value:Qi}get computedSize(){return this.size||"m"}getHeight(t){return Math.abs(Vi*t/this.getLargest(this.computedValue))}getLargest(t){return t.some(e=>e>0)?t.reduce((e,i)=>e>i?e:i,0):Math.abs(t.reduce((e,i)=>e<i?e:i,0))}};dt.\u0275fac=function(e){return new(e||dt)},dt.\u0275cmp=x({type:dt,selectors:[["tui-bar-set"]],inputs:{value:"value",size:"size",collapsed:"collapsed"},ngContentSelectors:Ai,decls:6,vars:1,consts:[["bar",""],[1,"t-label"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"t-wrapper"],["automation-id","tui-bar-set__bar",1,"t-bar",3,"size","value"]],template:function(e,i){e&1&&(F(),I(0,Ri,2,0)(1,Bi,2,0)(2,Yi,1,10,"ng-template",null,0,Yt),u(4,"span",1),$(5),c()),e&2&&b(i.size?0:1)},dependencies:[Me,Ut],styles:["[_nghost-%COMP%]{position:relative;display:flex;block-size:100%;align-items:flex-end;justify-content:center}.t-wrapper[_ngcontent-%COMP%]{display:flex;flex:1;block-size:100%;align-items:flex-end}.t-wrapper[_ngcontent-%COMP%]:first-of-type{margin-inline-start:25%}.t-wrapper[_ngcontent-%COMP%]:last-of-type{margin-inline-end:25%}.t-bar[_ngcontent-%COMP%]{transform-origin:bottom center}.t-bar_negative[_ngcontent-%COMP%]{transform:rotate(180deg);opacity:var(--tui-disabled-opacity)}.t-bar.t-bar_flexible[_ngcontent-%COMP%]{max-inline-size:none;inline-size:75%;margin:0 auto}.t-label[_ngcontent-%COMP%]{position:absolute;top:-1.5rem;font:var(--tui-font-text-xs);color:var(--tui-text-secondary)}"],changeDetection:0}),y([v],dt.prototype,"getLargest",1);var Gt=dt;var Xi=n=>({$implicit:n});function Wi(n,t){if(n&1){let e=xt();u(0,"div",2),_t(1,"async"),Q("click",function(){let r=K(e).$index,o=l();return J(o.tapColumn.emit(r))})("keydown.enter",function(){let r=K(e).$index,o=l();return J(o.tapColumn.emit(r))})("mouseenter.once",function(){return K(e),J(0)}),u(2,"div",3),_t(3,"tuiMapper"),m(4,"div",4,0)(6,"tui-bar-set",5),c()()}if(n&2){let e=t.$implicit,i=t.$index,r=j(5),o=l();M("t-wrapper_hoverable",!!o.hintContent)("t-wrapper_hovered",Nt(1,16,o.drivers.get(i))),_("tuiHint",o.hintContent)("tuiHintAppearance",o.hintAppearance)("tuiHintContext",vt(23,Xi,i))("tuiHintDescribe",o.getHintId(i))("tuiHintHost",r),s(2),p("height",Ie(3,18,e,o.percentMapper,o.collapsed,o.computedMax),"%"),s(4),_("collapsed",o.collapsed)("id",o.getHintId(i))("size",o.size)("tabIndex",o.hintContent?0:-1)("value",e)}}var nt=class nt{constructor(){this.hintOptions=d(it,{optional:!0});this.autoId=Tt();this.drivers=X;this.value=[];this.max=NaN;this.size="m";this.collapsed=!1;this.tapColumn=new gt;this.percentMapper=(t,e,i)=>100*(e?Ct(...t):Math.max(...t))/i}get transposed(){return this.transpose(this.value)}get computedMax(){return this.max||this.getMax(this.value,this.collapsed)}get hintContent(){var t;return((t=this.hintOptions)==null?void 0:t.content)||""}get hintAppearance(){var t;return((t=this.hintOptions)==null?void 0:t.appearance)||""}getHintId(t){return`${this.autoId}_${t}`}transpose(t){return t.reduce((e,i)=>i.map((r,o)=>[...e[o]||[],i[o]||0]),[])}getMax(t,e){return e?Math.max(...t.reduce((i,r)=>i.map((o,a)=>o+(r[a]||0)))):t.reduce((i,r)=>Math.max(...r,i),0)}};nt.\u0275fac=function(e){return new(e||nt)},nt.\u0275cmp=x({type:nt,selectors:[["tui-bar-chart"]],viewQuery:function(e,i){if(e&1&&bt($t,5),e&2){let r;E(r=R())&&(i.drivers=r)}},inputs:{value:"value",max:"max",size:"size",collapsed:"collapsed"},outputs:{tapColumn:"tapColumn"},features:[k([],[Pt({direction:"top"})])],decls:2,vars:0,consts:[["hintHost",""],[1,"t-wrapper",3,"t-wrapper_hoverable","t-wrapper_hovered","tuiHint","tuiHintAppearance","tuiHintContext","tuiHintDescribe","tuiHintHost"],[1,"t-wrapper",3,"click","keydown.enter","mouseenter.once","tuiHint","tuiHintAppearance","tuiHintContext","tuiHintDescribe","tuiHintHost"],[1,"t-container"],[1,"t-host"],[1,"t-set",3,"collapsed","id","size","tabIndex","value"]],template:function(e,i){e&1&&f(0,Wi,7,25,"div",1,T),e&2&&g(i.transposed)},dependencies:[Vt,Gt,It,Xt,Wt,Xe],styles:["[_nghost-%COMP%]{display:flex;flex:1;block-size:100%}.t-wrapper[_ngcontent-%COMP%]{transition-property:background-color;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;position:relative;display:flex;flex:1;align-items:flex-end;justify-content:center;block-size:100%}.t-wrapper_hoverable[_ngcontent-%COMP%]{cursor:pointer}.t-wrapper_hoverable[_ngcontent-%COMP%]:hover, .t-wrapper_hoverable.t-wrapper_hovered[_ngcontent-%COMP%]{background-color:#0000000d}.t-container[_ngcontent-%COMP%]{flex:1}.t-host[_ngcontent-%COMP%]{position:absolute;left:50%;right:50%}.t-set[_ngcontent-%COMP%]{border-radius:var(--tui-radius-m);pointer-events:none;outline:none}.t-set[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 2px var(--tui-border-focus)}"],changeDetection:0}),y([v],nt.prototype,"transpose",1),y([v],nt.prototype,"getMax",1);var Ze=nt;var Ui=[[["","tuiCheckbox",""]],"*"],Gi=["[tuiCheckbox]","*"],Ot=class Ot{constructor(){this.active=!1;this.color="";this.text="";this.size="m";this.disabled=!1}get computedColor(){return this.color==="var(--tui-background-accent-1)"?null:this.color}};Ot.\u0275fac=function(e){return new(e||Ot)},Ot.\u0275cmp=x({type:Ot,selectors:[["tui-legend-item"]],hostVars:5,hostBindings:function(e,i){e&2&&(C("data-size",i.size),p("--tui-background-accent-1",i.computedColor),M("_disabled",i.disabled))},inputs:{active:"active",color:"color",text:"text",size:"size",disabled:"disabled"},ngContentSelectors:Gi,decls:7,vars:4,consts:[["appearance","outline-grayscale","size","s","tuiButton","","type","button",1,"t-button",3,"tuiAppearanceState"],[1,"t-wrapper"],[1,"t-dot"],[1,"t-text"]],template:function(e,i){e&1&&(F(Ui),u(0,"button",0)(1,"div",1),$(2),m(3,"span",2),u(4,"span",3),P(5),c(),$(6,1),c()()),e&2&&(_("tuiAppearanceState",i.active?"hover":null),s(3),p("background-color",i.color||"var(--tui-background-accent-1)"),s(2),kt(i.text))},dependencies:[Be],styles:["[_nghost-%COMP%]{display:inline-block}.t-button[_ngcontent-%COMP%]{block-size:2rem;font-weight:700}[data-size=m][_nghost-%COMP%]   .t-button[_ngcontent-%COMP%]{block-size:2.25rem;font:var(--tui-font-text-m);font-weight:700}.t-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;pointer-events:none}._disabled[_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]{color:var(--tui-text-tertiary)}.t-dot[_ngcontent-%COMP%]{inline-size:.5rem;block-size:.5rem;border-radius:100%;flex-shrink:0}._disabled[_nghost-%COMP%]   .t-dot[_ngcontent-%COMP%]{background:var(--tui-border-normal)}.t-dot[_ngcontent-%COMP%]:not(:first-child){display:none}.t-text[_ngcontent-%COMP%]{margin:0 .5rem;font-weight:400}"],changeDetection:0});var qe=Ot;function Ke(n,t){let e=t[0]-n[0],i=t[1]-n[1];return Math.atan2(i,e)}function Je(n,t){let e=t[0]-n[0],i=t[1]-n[1];return Math.sqrt(e**2+i**2)}function se(n,t,e,i=!1,r=.2){let o=n||[0,0],a=t||n||[0,0],h=e||n||[0,0],O=Ke(a,h)+(i?Math.PI:0),L=Je(a,h)*r,N=o[0]+Math.cos(O)*L,V=o[1]+Math.sin(O)*L;return[N,V]}var Zi="M 100 0 A 100 100 0 1 1 100 0 L 0 0";function ti(n){return n*Math.PI/180}function ei(n=0,t=0){let e=ti(n),i=ti(t),r=Math.cos(e)*100,o=Math.sin(e)*100,a=Math.cos(i)*100,h=Math.sin(i)*100,O=Ae(t-n>180),L=["M",r,o,"A 100 100 0",O,1,a,h,"L 0 0"];return Number.isNaN(a)?Zi:L.join(" ")}function ii(n,t,e){let[i,r]=se(n[t-1],n[t-2],n[t],!1,e),[o,a]=se(n[t],n[t-1],n[t+1],!0,e),h=n[t]??[0,0];return`C ${i},${r} ${o},${a} ${h[0]},${h[1]}`}function ni(n){return`L ${n}`}var qi=500;function ri(n,t,e){let i=[...n[t]??[0,0]];return e?ii(n,t,e/qi):ni([i[0],i[1]])}var Ki={dots:!1,filled:!1,smoothingFactor:0},[Zt,Ar]=He(Ki);var Ji=(n,t)=>({$implicit:n,index:t});function tn(n,t){if(n&1&&m(0,"div",8),n&2){let e=t.$implicit,i=l(2);p("inset-block-end",i.getBottom(e[1]),"%")("inset-inline-start",i.getLeft(e[0]),"%")}}function en(n,t){if(n&1&&f(0,tn,1,4,"div",7,T),n&2){let e=l();g(e.value)}}function nn(n,t){if(n&1){let e=xt();u(0,"div",11),_t(1,"async"),Q("mouseenter",function(){K(e);let r=l().$index,o=l(2);return J(o.onMouseEnter(r))}),m(2,"div",12)(3,"div",13,0),c()}if(n&2){let e=j(4),i=l(),r=i.$implicit,o=i.$index,a=l(2),h=S(0);p("inset-inline-start",a.getLeft(a.getX(o)),"%")("width",a.getWidth(o),"%"),M("t-column_hint_hovered",Nt(1,20,a.drivers()[o]))("t-column_hovered",h===o),_("tuiHint",(a.hintDirective==null?null:a.hintDirective.hint)||a.hintContent)("tuiHintContext",At(22,Ji,a.getImplicit(r),o))("tuiHintDescribe",a.isFocusable?a.getHintId(o):null)("tuiHintHost",e),s(2),p("inset-inline-start",a.getOffset(o),"%"),s(),p("inset-block-end",a.getBottom(r[1]),"%")("inset-inline-start",a.getOffset(o),"%"),_("id",a.getHintId(o))("tabIndex",a.isFocusable?0:-1)}}function rn(n,t){if(n&1&&m(0,"div",14),n&2){let e=l().$implicit,i=l(2);p("inset-block-end",i.getBottom(e[1]),"%")}}function on(n,t){if(n&1&&I(0,nn,5,25,"div",9)(1,rn,1,2,"div",10),n&2){let e=t.$count,i=l(2);b(e>1||i.dots?0:-1),s(),b(i.isFocusable?1:-1)}}function an(n,t){if(n&1&&f(0,on,2,2,null,null,T),n&2){let e=l();g(e.value)}}function sn(n,t){if(n&1&&(u(0,"div",17),P(1),c()),n&2){let e=l(),i=l();p("inset-inline-start",i.getLeft(e[0]),"%"),s(),D(" ",i.xStringify(e[0])," ")}}function ln(n,t){if(n&1&&(u(0,"div",18),P(1),c()),n&2){let e=l(),i=l();p("inset-block-end",i.getBottom(e[1]),"%"),s(),D(" ",i.yStringify(e[1])," ")}}function cn(n,t){if(n&1&&I(0,sn,2,3,"div",15)(1,ln,2,3,"div",16),n&2){let e=l();b(e.xStringify?0:-1),s(),b(e.yStringify?1:-1)}}var rt=class rt{constructor(){this.zone=d(tt);this.options=d(Zt);this.hover$=new ce;this.autoId=Tt();this.resize=Oe(d(ne,{self:!0}).pipe(H(([t])=>(t==null?void 0:t.contentRect.height)||NaN),q(t=>!Number.isNaN(t))),{initialValue:NaN});this.box=Bt("");this.hintDirective=d(Lt,{optional:!0});this.hintOptions=d(it,{optional:!0});this.viewBox=ut(()=>{if(Number.isNaN(this.resize()))return"0 0 0 0";let t=this.height/Math.max(this.resize(),1),[e=0,i=0,r=0,o=0]=this.box().split(" ").map(Number);return`${e} ${i-t} ${r} ${o+2*t}`});this.drivers=be($t);this.drivers$=Se(this.drivers);this.x=0;this.y=0;this.width=0;this.height=0;this.smoothingFactor=this.options.smoothingFactor;this.xStringify=null;this.yStringify=null;this.filled=this.options.filled;this.dots=this.options.dots;this.value=[]}set valueSetter(t){this.value=t.filter(e=>!e.some(Number.isNaN))}ngOnChanges(){this.box.set(`${this.x} ${this.y} ${this.width} ${this.height}`)}onHovered(t){this.hover$.next(t)}get hovered$(){return this.hover$.pipe(Rt(),Re(this.zone))}get hintContent(){var t;return((t=this.hintOptions)==null?void 0:t.content)||""}get fillId(){return`tui-line-chart-${this.autoId}`}get fill(){return this.filled?`url(#${this.fillId})`:"none"}get d(){return this.getD(this.value,this.smoothingFactor)}get fillD(){var t,e;return this.value.length?`${this.d}V ${this.y} H ${(t=this.value[0])==null?void 0:t[0]} V ${(e=this.value[0])==null?void 0:e[1]}`:this.d}get isFocusable(){return!this.hintDirective&&this.hasHints}get hasHints(){var t;return!!this.xStringify||!!this.yStringify||!!((t=this.hintDirective)!=null&&t.hint)||!!this.hintContent}onMouseLeave(){this.hintDirective||this.onHovered(NaN)}getX(t){var e,i,r,o;return this.isSinglePoint?(((e=this.value[0])==null?void 0:e[0])||0)/2:t?((((i=this.value[t-1])==null?void 0:i[0])||0)+(((r=this.value[t])==null?void 0:r[0])||0))/2:2*(((o=this.value[0])==null?void 0:o[0])||0)-this.getX(1)}getWidth(t){return 100*this.computeWidth(t)/this.width}getHintId(t){return`${this.autoId}_${t}`}getImplicit(t){var e;return((e=this.hintDirective)==null?void 0:e.getContext(this.value.indexOf(t),this))??t}getHovered(t){return Qt(t)&&Number.isInteger(t)?this.value[t]??null:null}getBottom(t){return 100*(t-this.y)/this.height}getLeft(t){return 100*(t-this.x)/this.width}getOffset(t){var e;return 100*((((e=this.value[t])==null?void 0:e[0])||0)-this.getX(t))/this.computeWidth(t)}onMouseEnter(t){this.hintDirective?this.hintDirective.raise(t,this):this.onHovered(t)}get isSinglePoint(){return this.value.length===1}getD(t,e){return t.reduce((i,r,o)=>o?`${i} ${ri(t,o,e)}`:`M ${r}`,"")}computeWidth(t){var e;return t===this.value.length-1?2*((((e=this.value[t])==null?void 0:e[0])||0)-this.getX(t)):this.getX(t+1)-this.getX(t)}};rt.\u0275fac=function(e){return new(e||rt)},rt.\u0275cmp=x({type:rt,selectors:[["tui-line-chart"]],viewQuery:function(e,i){e&1&&Ce(i.drivers,$t,5),e&2&&Te()},hostBindings:function(e,i){e&1&&Q("mouseleave",function(){return i.onMouseLeave()})},inputs:{x:"x",y:"y",width:"width",height:"height",smoothingFactor:"smoothingFactor",xStringify:"xStringify",yStringify:"yStringify",filled:"filled",dots:"dots",valueSetter:[0,"value","valueSetter"]},features:[k([ne],[Pt({direction:"top",hideDelay:0})]),ge],decls:12,vars:11,consts:[["hintHost",""],["focusable","false","height","100%","preserveAspectRatio","none","width","100%","xmlns","http://www.w3.org/2000/svg",1,"t-svg"],["x1","0","x2","0","y1","1","y2","0"],["offset","0%","stop-color","currentColor","stop-opacity","0.5"],["offset","100%","stop-color","currentColor","stop-opacity","0"],["stroke","none"],["fill","none","stroke","currentColor","stroke-width","2","vector-effect","non-scaling-stroke"],[1,"t-dot",3,"inset-block-end","inset-inline-start"],[1,"t-dot"],[1,"t-column",3,"t-column_hint_hovered","t-column_hovered","inset-inline-start","width","tuiHint","tuiHintContext","tuiHintDescribe","tuiHintHost"],[1,"t-line","t-line_horizontal",3,"inset-block-end"],[1,"t-column",3,"mouseenter","tuiHint","tuiHintContext","tuiHintDescribe","tuiHintHost"],[1,"t-line","t-line_vertical"],[1,"t-host",3,"id","tabIndex"],[1,"t-line","t-line_horizontal"],[1,"t-hint","t-hint_x",3,"inset-inline-start"],[1,"t-hint","t-hint_y",3,"inset-block-end"],[1,"t-hint","t-hint_x"],[1,"t-hint","t-hint_y"]],template:function(e,i){if(e&1&&(et(0),_t(1,"async"),lt(),u(2,"svg",1)(3,"defs")(4,"linearGradient",2),m(5,"stop",3)(6,"stop",4),c()(),m(7,"path",5)(8,"path",6),c(),I(9,en,2,0)(10,an,2,0)(11,cn,2,2)),e&2){let r,o=w(Nt(1,8,i.hovered$));s(2),C("viewBox",i.viewBox()),s(2),C("id",i.fillId),s(3),C("d",i.fillD)("fill",i.fill),s(),C("d",i.d),s(),b(i.dots?9:-1),s(),b(i.hasHints?10:-1),s(),b((r=i.getHovered(o))?11:-1,r)}},dependencies:[Vt,It,Xt,Wt],styles:['[_nghost-%COMP%]{display:flex;inline-size:100%;block-size:100%;pointer-events:none}.t-svg[_ngcontent-%COMP%]{block-size:calc(100% + 1px);transform:scaleY(-1);margin:-.03125rem 0}.t-column[_ngcontent-%COMP%]{position:absolute;top:0;block-size:100%;pointer-events:auto}.t-dot[_ngcontent-%COMP%]{position:absolute;inline-size:.375rem;block-size:.375rem;border-radius:100%;background:currentColor;margin:-.1875rem;box-shadow:0 0 0 2px #fff}.t-host[_ngcontent-%COMP%]{position:absolute;left:50%;inline-size:.5rem;block-size:.5rem;border-radius:100%;opacity:0;background:#fff;margin:-.25rem;box-shadow:0 0 0 2px currentColor,0 .0625rem .1875rem .125rem #0000001a;outline:none;pointer-events:none}.t-host[_ngcontent-%COMP%]:focus, .t-column_hovered[_ngcontent-%COMP%]   .t-host[_ngcontent-%COMP%], .t-column[_ngcontent-%COMP%]:hover   .t-host[_ngcontent-%COMP%], .t-column_hint_hovered[_ngcontent-%COMP%]   .t-host[_ngcontent-%COMP%]{opacity:1}.t-line[_ngcontent-%COMP%]{position:absolute;opacity:0;background:var(--tui-border-normal)}.t-line_vertical[_ngcontent-%COMP%]{top:0;bottom:0;left:50%;inline-size:1px}.t-line_horizontal[_ngcontent-%COMP%]{z-index:-1;inline-size:100%;block-size:1px}[style^="z-index: 0"][_nghost-%COMP%]   .t-column_hovered[_ngcontent-%COMP%]   .t-line[_ngcontent-%COMP%], [_nghost-%COMP%]:not([style])   .t-column[_ngcontent-%COMP%]:hover   .t-line[_ngcontent-%COMP%], [_nghost-%COMP%]:not([style])   .t-column_hint_hovered[_ngcontent-%COMP%]   .t-line[_ngcontent-%COMP%], [style^="z-index: 0"][_nghost-%COMP%]   .t-column_hovered[_ngcontent-%COMP%] + .t-line[_ngcontent-%COMP%], [_nghost-%COMP%]:not([style])   .t-column[_ngcontent-%COMP%]:hover + .t-line[_ngcontent-%COMP%], [_nghost-%COMP%]:not([style])   .t-column_hint_hovered[_ngcontent-%COMP%] + .t-line[_ngcontent-%COMP%]{opacity:1}.t-hint[_ngcontent-%COMP%]{position:absolute;box-shadow:var(--tui-shadow-small);font:var(--tui-font-text-xs);block-size:1.25rem;line-height:1.25rem;margin-block-end:-.625rem;padding:0 .375rem;white-space:nowrap;color:var(--tui-text-primary);background:var(--tui-background-base);transform:translate3d(-50%,0,0)}.t-hint_x[_ngcontent-%COMP%]{bottom:0}.t-hint_y[_ngcontent-%COMP%]{left:0}'],changeDetection:0}),y([v],rt.prototype,"hovered$",1),y([v],rt.prototype,"getD",1);var ot=rt;var mt=class mt{constructor(){this.charts=X;this.chartsRef=X;this.renderer=d(xe);this.destroyRef=d(ft);this.zone=d(tt);this.hovered$=d(W)}ngAfterViewInit(){Z([Et(this.charts.toArray()),this.hovered$]).pipe(q(t=>!t.some(Boolean)),Y(this.zone),B(this.destroyRef)).subscribe(()=>{this.charts.forEach(t=>t.onHovered(NaN))})}getContext(t,e){return this.computeContext(...this.charts.map(({value:i})=>i))[t]||[]}raise(t,e){let i=this.charts.map(o=>o.value[t]??[0,0]),r=[...i].sort((o,a)=>o[1]-a[1]);this.charts.forEach(o=>o.onHovered(t)),this.chartsRef.forEach(({nativeElement:o},a)=>this.renderer.setStyle(o,"z-index",r.indexOf(i[a]??[0,0])))}computeContext(...t){return(t[0]||[]).map((e,i)=>t.map(r=>r[i]??[0,0]))}};mt.\u0275fac=function(e){return new(e||mt)},mt.\u0275dir=yt({type:mt,selectors:[["","tuiLineChartHint",""]],contentQueries:function(e,i,r){if(e&1&&(Ht(r,ot,4),Ht(r,ot,4,ye)),e&2){let o;E(o=R())&&(i.charts=o),E(o=R())&&(i.chartsRef=o)}},inputs:{hint:[0,"tuiLineChartHint","hint"]},features:[k([W])]}),y([v],mt.prototype,"computeContext",1);var Lt=mt;function Et(n){return Z(n.map(({drivers$:t})=>t.pipe(H(e=>e.map(i=>i.pipe(Ft(!1))))))).pipe(H(t=>t.reduce((e,i)=>e.concat(i),[])),st(t=>Z(t)),H(t=>t.some(Boolean)),Rt())}var un=n=>({$implicit:n});function pn(n,t){if(n&1&&m(0,"tui-line-chart",2),n&2){let e,i,r=t.$implicit,o=t.$index,a=l(),h=j(3);p("z-index",a.zIndex),_("dots",a.dots)("height",a.height)("smoothingFactor",a.smoothingFactor)("tuiHintContent",a.hintContent?h:"")("value",r)("width",o===0?a.firstWidth:a.getWidth((e=r[0]==null?null:r[0][0])!==null&&e!==void 0?e:0))("x",o===0?0:a.getX((i=r[0]==null?null:r[0][0])!==null&&i!==void 0?i:0))("xStringify",a.xStringify?a.daysStringify:null)("y",a.y)("yStringify",a.yStringify)}}function dn(n,t){if(n&1&&(ve(0),P(1),_e()),n&2){let e=t.polymorpheusOutlet;s(),D(" ",e," ")}}function mn(n,t){if(n&1&&I(0,dn,2,1,"ng-container",3),n&2){let e=t.$implicit,i=l();_("polymorpheusOutlet",i.hintContent)("polymorpheusOutletContext",vt(2,un,i.getHintContext(e[0],i.value)))}}var hn=[NaN,NaN],G=class G{constructor(){this.destroyRef=d(ft);this.zone=d(tt);this.hovered$=d(W);this.options=d(Zt);this.hintDirective=d(Kt,{optional:!0});this.charts=X;this.y=0;this.height=0;this.smoothingFactor=this.options.smoothingFactor;this.xStringify=null;this.yStringify=null;this.dots=this.options.dots;this.zIndex=0;this.value=[];this.daysStringify=t=>{let e=this.getDay(t);return this.xStringify&&e?this.xStringify(e):""}}set valueSetter(t){var a;if(!t.length){this.value=[];return}let e=(a=t[0])==null?void 0:a[0],i=t[t.length-1],r=[...t],o=e&&i?oe.lengthBetween(e,i[0])+1:0;this.value=Array.from({length:o},(h,O)=>{var le;let L=(le=r[0])==null?void 0:le[0],N=e==null?void 0:e.append({day:O}),V=L&&(N!=null&&N.daySame(L))?r.shift():null,Dt=V?V[1]:NaN;return[N,Dt]})}get hint(){var t;return((t=this.hintDirective)==null?void 0:t.hint)??this.hintContent}ngAfterViewInit(){Z([Et(this.charts.toArray()),this.hovered$]).pipe(q(t=>!t.some(Boolean)),Y(this.zone),B(this.destroyRef)).subscribe(()=>{this.onHovered(NaN)})}onHovered(t){var a;if($e(t)){this.charts.forEach(h=>h.onHovered(NaN));return}let e=(a=this.value[0])==null?void 0:a[0],i=e&&t?jt.lengthBetween(e,t):0,r=e&&t?oe.lengthBetween(e,t)+e.day-1:0,o=this.charts.get(i);this.charts.forEach(h=>{h===o?o.onHovered(o.value.findIndex(O=>O[0]===r)):h.onHovered(NaN)})}raise(t,{value:e}){var o;let i=((o=e[t])==null?void 0:o[0])||0,r=this.getDay(i);r&&(this.hintDirective?this.hintDirective.raise(r):this.onHovered(r))}getContext(t,{value:e}){var o;let i=((o=e[t])==null?void 0:o[0])||0,r=this.getDay(i);return this.hintDirective&&r?this.hintDirective.getContext(r):this.getHintContext(i,this.value)}get months(){return this.value.length?this.breakMonths(this.value):we}get firstWidth(){var t;return this.months.length*(((t=this.value[0])==null?void 0:t[0].daysCount)||0)}getHintContext(t,e){var i,r;return e[t-(((r=(i=e[0])==null?void 0:i[0])==null?void 0:r.day)||0)+1]??null}getX(t){var a;let e=(a=this.value[0])==null?void 0:a[0],i=this.getDay(t),o=(e&&i?jt.lengthBetween(e,i):0)*((i==null?void 0:i.daysCount)||0);return t-o}getWidth(t){var e;return(((e=this.getDay(t))==null?void 0:e.daysCount)||0)*this.months.length}breakMonths(t){var o,a,h;let e=(((o=t[0])==null?void 0:o[0].day)||1)-1,i=(a=t[0])==null?void 0:a[0],r=(h=t[t.length-1])==null?void 0:h[0];return Array.from({length:i&&r?jt.lengthBetween(i,r)+1:0},(O,L)=>L+((i==null?void 0:i.month)||0)+((i==null?void 0:i.year)||0)*12).map(O=>t.map(([{month:L,year:N},V],Dt)=>L+N*12===O?[Dt+e,V]:null).filter(Qt)).map((O,L,N)=>{var V;return L===N.length-1?O:[...O,((V=N[L+1])==null?void 0:V.find(Dt=>!Number.isNaN(Dt[1])))||hn]})}getDay(t){var i,r;let e=(i=this.value[0])==null?void 0:i[0];return(r=this.value[t-((e==null?void 0:e.day)||0)+1])==null?void 0:r[0]}};G.\u0275fac=function(e){return new(e||G)},G.\u0275cmp=x({type:G,selectors:[["tui-line-days-chart"]],viewQuery:function(e,i){if(e&1&&bt(ot,5),e&2){let r;E(r=R())&&(i.charts=r)}},hostVars:2,hostBindings:function(e,i){e&2&&p("z-index",i.zIndex)},inputs:{y:"y",height:"height",smoothingFactor:"smoothingFactor",hintContent:"hintContent",xStringify:"xStringify",yStringify:"yStringify",dots:"dots",valueSetter:[0,"value","valueSetter"]},features:[k([W,{provide:Lt,useExisting:G}])],decls:4,vars:0,consts:[["hint",""],[1,"t-chart",3,"dots","height","smoothingFactor","z-index","tuiHintContent","value","width","x","xStringify","y","yStringify"],[1,"t-chart",3,"dots","height","smoothingFactor","tuiHintContent","value","width","x","xStringify","y","yStringify"],[4,"polymorpheusOutlet","polymorpheusOutletContext"]],template:function(e,i){e&1&&(f(0,pn,1,12,"tui-line-chart",1,T),I(2,mn,1,4,"ng-template",null,0,Yt)),e&2&&g(i.months)},dependencies:[Ye,it,ot],styles:["[_nghost-%COMP%]{display:block}.t-chart[_ngcontent-%COMP%]{position:absolute;top:0;left:0;inline-size:100%;block-size:100%}"],changeDetection:0}),y([v],G.prototype,"getHintContext",1),y([v],G.prototype,"breakMonths",1);var qt=G;function oi(n,t){return n.find(([e])=>e.daySame(t))||[t,NaN]}var ht=class ht{constructor(){this.charts=X;this.destroyRef=d(ft);this.zone=d(tt);this.hovered$=d(W)}ngAfterContentInit(){Z([...this.charts.map(({charts:t})=>Et(t.toArray())),this.hovered$]).pipe(q(t=>!t.some(Boolean)),Y(this.zone),B(this.destroyRef)).subscribe(()=>{this.charts.forEach(t=>t.onHovered(NaN))})}getContext(t){return this.getMap(...this.charts.map(({value:e})=>e)).get(String(t))||[]}raise(t){let e=this.charts.map(({value:r})=>t?oi(r,t):[]).filter(([r,o])=>!Number.isNaN(o)),i=[...e].sort((r,o)=>r[1]-o[1]);this.charts.forEach((r,o)=>{let a=e[o];r.onHovered(t),r.zIndex=Math.max(a?i.indexOf(a):0,0)})}getMap(...t){return(t[0]||[]).reduce((e,[i])=>e.set(String(i),t.map(r=>oi(r,i))),new Map)}};ht.\u0275fac=function(e){return new(e||ht)},ht.\u0275dir=yt({type:ht,selectors:[["","tuiLineChartHint",""]],contentQueries:function(e,i,r){if(e&1&&Ht(r,qt,4),e&2){let o;E(o=R())&&(i.charts=o)}},inputs:{hint:[0,"tuiLineChartHint","hint"]},features:[k([W])]}),y([v],ht.prototype,"getMap",1);var Kt=ht;var zt=class zt{constructor(){this.sector$=new ue([0,0]);this.el=Fe();this.performance=d(ze);this.animationFrame$=d(Le);this.speed=d(Ee);this.$=this.sector$.pipe(me(),st(([t,e])=>{let i=this.performance.now(),r=e[0]-t[0],o=e[1]-t[1];return this.animationFrame$.pipe(H(a=>Ne(ke((a-i)/Ve(this.speed),0,1))),he(a=>a<1,!0),H(a=>[t[0]+r*a,e[1]>359?e[1]:t[1]+o*a]))}),Y(),B()).subscribe(([t,e])=>this.el.setAttribute("d",ei(t,e)))}set tuiPieChart(t){this.sector$.next(t)}};zt.\u0275fac=function(e){return new(e||zt)},zt.\u0275dir=yt({type:zt,selectors:[["path","tuiPieChart",""]],inputs:{tuiPieChart:"tuiPieChart"}});var Jt=zt;var fn=n=>({$implicit:n}),gn=()=>[0,0];function yn(n,t){if(n&1){let e=xt();lt(),u(0,"path",5),Q("tuiHoveredChange",function(r){let o=K(e).$index,a=l();return J(a.onHovered(r,o))}),c()}if(n&2){let e=t.$index,i=l();p("color",`var(--tui-chart-categorical-${e.toString().padStart(2,"0")})`),_("tuiHint",i.hintContent)("tuiHintContext",vt(6,fn,e))("tuiPieChart",i.segments[e]||Pe(8,gn)),C("transform",i.getTransform(e))}}var xn={xs:"50",s:"50",m:"77.8",l:"81.9",xl:"81.3"},ai={xs:1.15,s:1.25,m:1.11,l:1.09,xl:1.08},at=class at{constructor(){this.hintOptions=d(it,{optional:!0});this.autoId=Tt();this.value=[];this.size="m";this.masked=!1;this.activeItemIndex=NaN;this.activeItemIndexChange=new gt;this.hintOptions&&(this.hintOptions.showDelay=0,this.hintOptions.hideDelay=0)}get empty(){return!this.getSum(this.value)}get hintContent(){var t;return((t=this.hintOptions)==null?void 0:t.content)||""}get maskId(){return`tui-ring-chart-${this.autoId}`}get mask(){return this.masked?`url(#${this.maskId})`:null}get radius(){return xn[this.size]}get segments(){return this.getSegments(this.value)}getTransform(t){let e=this.masked?`scale(${ai[this.size]})`:`scale(${ai.xs})`;return t===this.activeItemIndex?e:null}onHovered(t,e){this.updateActiveItemIndex(t?e:NaN)}getSum(t){return Ct(...t)}getSegments(t){return t.map((e,i,r)=>r.reduce((o,a,h)=>h<i?this.getDeg(a)+o:o,this.getDeg(e))).map((e,i,r)=>[r[i-1]||0,Math.min(e,359.9999)])}getDeg(t){return 360*(t/this.getSum(this.value))||0}updateActiveItemIndex(t){t!==this.activeItemIndex&&(this.activeItemIndex=t,this.activeItemIndexChange.next(t))}};at.\u0275fac=function(e){return new(e||at)},at.\u0275cmp=x({type:at,selectors:[["tui-pie-chart"]],hostVars:3,hostBindings:function(e,i){e&2&&(C("data-size",i.size),M("_empty",i.empty))},inputs:{value:"value",size:"size",masked:"masked",activeItemIndex:"activeItemIndex"},outputs:{activeItemIndexChange:"activeItemIndexChange"},features:[k([],[Pt({direction:"top-right",appearance:"floating"})])],decls:9,vars:4,consts:[["focusable","false","height","100%","viewBox","-100 -100 200 200","width","100%","xmlns","http://www.w3.org/2000/svg",1,"t-svg"],["fill","white","height","400","width","400","x","-200","y","-200"],["cx","0","cy","0"],["cx","0","cy","0","r","100",1,"t-placeholder"],["automation-id","tui-pie-chart__segment","d","","fill","currentColor","tuiHintPointer","",1,"t-segment",3,"color","tuiHint","tuiHintContext","tuiPieChart"],["automation-id","tui-pie-chart__segment","d","","fill","currentColor","tuiHintPointer","",1,"t-segment",3,"tuiHoveredChange","tuiHint","tuiHintContext","tuiPieChart"]],template:function(e,i){e&1&&(lt(),u(0,"svg",0)(1,"defs")(2,"mask"),m(3,"rect",1)(4,"circle",2),c()(),u(5,"g"),m(6,"circle",3),f(7,yn,1,9,":svg:path",4,ct),c()()),e&2&&(s(2),C("id",i.maskId),s(2),C("r",i.radius),s(),p("mask",i.mask),s(2),g("-".repeat(i.segments.length)))},dependencies:[It,je,Qe,Jt],styles:["[_nghost-%COMP%]{position:relative;display:block;inline-size:var(--t-size);block-size:var(--t-size);border-radius:100%}[data-size=xs][_nghost-%COMP%]{--t-size: 2rem;pointer-events:none}[data-size=s][_nghost-%COMP%]{--t-size: 4rem}[data-size=m][_nghost-%COMP%]{--t-size: 9rem}[data-size=l][_nghost-%COMP%]{--t-size: 11rem}[data-size=xl][_nghost-%COMP%]{--t-size: 16rem}.t-svg[_ngcontent-%COMP%]{position:relative;overflow:visible;transform:rotate(-90deg)}.t-segment[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}._empty[_nghost-%COMP%]   .t-segment[_ngcontent-%COMP%]{display:none}.t-placeholder[_ngcontent-%COMP%]{fill:var(--tui-background-neutral-1)}"],changeDetection:0}),y([v],at.prototype,"getSum",1),y([v],at.prototype,"getSegments",1);var te=at;var bn=["*"],wt=class wt{constructor(){this.value=[];this.size="m";this.activeItemIndex=NaN;this.activeItemIndexChange=new gt}onActiveItemIndexChange(t){this.updateActiveItemIndex(t)}updateActiveItemIndex(t){t!==this.activeItemIndex&&(this.activeItemIndex=t,this.activeItemIndexChange.next(t))}};wt.\u0275fac=function(e){return new(e||wt)},wt.\u0275cmp=x({type:wt,selectors:[["tui-ring-chart"]],hostVars:1,hostBindings:function(e,i){e&2&&C("data-size",i.size)},inputs:{value:"value",size:"size",activeItemIndex:"activeItemIndex"},outputs:{activeItemIndexChange:"activeItemIndexChange"},ngContentSelectors:bn,decls:5,vars:4,consts:[[1,"t-content"],[1,"t-wrapper"],[1,"t-chart",3,"activeItemIndexChange","activeItemIndex","masked","size","value"],[1,"t-shield"]],template:function(e,i){e&1&&(F(),u(0,"div",0)(1,"div",1),$(2),c()(),u(3,"tui-pie-chart",2),Q("activeItemIndexChange",function(o){return i.onActiveItemIndexChange(o)}),c(),m(4,"div",3)),e&2&&(s(3),_("activeItemIndex",i.activeItemIndex)("masked",!0)("size",i.size)("value",i.value))},dependencies:[te],styles:["[_nghost-%COMP%]{position:relative;display:block;inline-size:var(--t-size);block-size:var(--t-size);flex-shrink:0;border-radius:100%}[data-size=xs][_nghost-%COMP%]{--t-size: 3rem}[data-size=s][_nghost-%COMP%]{--t-size: 4rem}[data-size=m][_nghost-%COMP%]{--t-size: 9rem}[data-size=l][_nghost-%COMP%]{--t-size: 11rem}[data-size=xl][_nghost-%COMP%]{--t-size: 16rem}.t-content[_ngcontent-%COMP%]{position:absolute;top:0;left:0;inline-size:100%;block-size:100%;display:flex;font:var(--tui-font-text-m);max-block-size:100%;flex-direction:column;justify-content:center;text-align:center;padding:1.5rem;border-radius:100%;box-sizing:border-box;overflow:hidden;word-break:break-word;white-space:pre-wrap;color:var(--tui-text-secondary)}[data-size=m][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{font:var(--tui-font-text-xs)}.t-wrapper[_ngcontent-%COMP%]:first-line{color:var(--tui-text-primary)}[data-size=l][_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]:first-line{font:var(--tui-font-text-l);font-weight:700}[data-size=m][_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]:first-line{font:var(--tui-font-text-m);font-weight:700}.t-shield[_ngcontent-%COMP%]{position:absolute;inset:25%;border-radius:100%}.t-chart[_ngcontent-%COMP%]{inline-size:100%;block-size:100%}"],changeDetection:0});var si=wt;export{Ue as a,Di as b,Hi as c,kn as d,Ge as e,Ut as f,Gt as g,Ze as h,qe as i,Lt as j,ot as k,Kt as l,qt as m,te as n,si as o};
