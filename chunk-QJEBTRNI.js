import{Aa as Ct,Ba as N,J as _t,Pa as yt,Ra as l,a as E,h as j,oa as vt,pb as Ot,ra as L,rb as St,va as gt,za as V}from"./chunk-6USYPSCO.js";import{a as ft,q as bt}from"./chunk-ZRMXKGW5.js";import{$a as M,$b as b,Cc as x,Dc as _,E as et,Eb as A,Ec as mt,Fc as pt,G as W,I as ot,La as q,Ma as J,Ta as at,V as it,Vb as U,Xb as a,Yc as v,_a as k,ed as ut,f as tt,fd as dt,ia as rt,ja as nt,jc as m,la as lt,mc as p,oa as F,rc as I,sc as P,ta as st,tc as R,vd as ht,w,wa as ct,xc as K,za as r}from"./chunk-AN37RPX6.js";var Ft={mode:"always"},[B,Jt]=_t(Ft);var ee="[tuiScrollRef]",c=new ct("",{factory:()=>new M(r(ft).documentElement)}),g=class g{};g.\u0275fac=function(t){return new(t||g)},g.\u0275dir=a({type:g,selectors:[["","tuiScrollRef",""]],features:[v([vt(c,M)])]});var Tt=g;var u=class u extends tt{constructor(){super(t=>this.scroll$.subscribe(t));this.el=l();this.element=r(c).nativeElement;this.scroll$=W(L(this.el.parentElement,"mousedown").pipe(ot(({target:t})=>t!==this.el),w(t=>this.getScrolled(t,.5,.5))),L(this.el,"mousedown").pipe(V(),nt(t=>{let{ownerDocument:o}=this.el,n=this.el.getBoundingClientRect(),s=kt(t,n),h=At(t,n);return L(o,"mousemove").pipe(w(f=>this.getScrolled(f,s,h)),lt(L(o,"mouseup")))})))}getScrolled({clientY:t,clientX:o},n,s){let{offsetHeight:h,offsetWidth:f}=this.el,{top:D,left:H,right:xt,width:Q,height:X}=this.el.parentElement.getBoundingClientRect(),Y=this.el.matches('[dir="rtl"] :scope'),Et=Y?xt:H,Lt=Y?-1:1,zt=this.element.scrollHeight-X,Dt=this.element.scrollWidth-Q,Ht=(t-D-h*n)/(X-h),Wt=(o-Et-f*s*Lt)/(Q-f);return[zt*Ht,Dt*Wt]}};u.\u0275fac=function(o){return new(o||u)},u.\u0275prov=st({token:u,factory:u.\u0275fac});var z=u;function kt({clientY:i},{top:e,height:t}){return(i-e)/t}function At({clientX:i},{left:e,width:t}){return(i-e)/t}var $=24,y=class y{constructor(){this.el=r(c).nativeElement;this.style=l().style;this.scrollSub=r(z).pipe(E()).subscribe(([e,t])=>{this.el.style.scrollBehavior="auto",this.tuiScrollbar()==="horizontal"?this.el.scrollLeft=t:this.el.scrollTop=e,this.el.style.scrollBehavior=""});this.styleSub=W(r(j).pipe(F(100,N())),gt(this.el)).pipe(V(),E()).subscribe(()=>{let e={scrollTop:this.el.scrollTop,scrollHeight:this.el.scrollHeight,clientHeight:this.el.clientHeight,scrollLeft:this.el.scrollLeft,scrollWidth:this.el.scrollWidth,clientWidth:this.el.clientWidth},t=`${this.getThumb(e)*100}%`,o=`${this.getView(e)*100}%`;this.tuiScrollbar()==="vertical"?(this.style.top=t,this.style.height=o):(this.style.left=t,this.style.insetInlineStart=t,this.style.width=o)});this.tuiScrollbar=k("vertical")}getScrolled(e){return this.tuiScrollbar()==="vertical"?e.scrollTop/(e.scrollHeight-e.clientHeight):e.scrollLeft/(e.scrollWidth-e.clientWidth)}getCompensation(e){return e.clientHeight*e.clientHeight/e.scrollHeight>$&&this.tuiScrollbar()==="vertical"||e.clientWidth*e.clientWidth/e.scrollWidth>$&&this.tuiScrollbar()==="horizontal"?0:this.tuiScrollbar()==="vertical"?$/e.clientHeight:$/e.clientWidth}getThumb(e){let t=this.getCompensation(e)||this.getView(e);return Math.abs(this.getScrolled(e)*(1-t))}getView(e){return this.tuiScrollbar()==="vertical"?Math.ceil(e.clientHeight/e.scrollHeight*100)/100:Math.ceil(e.clientWidth/e.scrollWidth*100)/100}};y.\u0275fac=function(t){return new(t||y)},y.\u0275dir=a({type:y,selectors:[["","tuiScrollbar",""]],inputs:{tuiScrollbar:[1,"tuiScrollbar"]},features:[v([z])]});var Z=y;function jt(i,e){}function Vt(i,e){if(i&1){let t=K();I(0,"div",2),x("mousedown.capture.prevent",function(){return q(t),J(0)}),R(1,"div",3),P()}if(i&2){let t=_();m("t-bar_has-horizontal",t[1])}}function Nt(i,e){if(i&1){let t=K();I(0,"div",4),x("mousedown.capture.prevent",function(){return q(t),J(0)}),R(1,"div",5),P()}if(i&2){let t=_();m("t-bar_has-vertical",t[0])}}function Bt(i,e){if(i&1&&b(0,Vt,2,2,"div",0)(1,Nt,2,2,"div",1),i&2){let t=e;p(t[0]?0:-1),A(),p(t[1]?1:-1)}}function $t(i,e){if(i&1&&(b(0,Bt,2,2),ut(1,"async")),i&2){let t,o=_();p((t=dt(1,1,o.refresh$))?0:-1,t)}}var O=class O{constructor(){this.scrollRef=r(c).nativeElement;this.nativeScrollbar=r(B).mode==="native";this.refresh$=r(j).pipe(F(300,N()),w(()=>this.scrollbars),rt([!1,!1]),it((e,t)=>e[0]===t[0]&&e[1]===t[1]),Ct())}get scrollbars(){let{clientHeight:e,scrollHeight:t,clientWidth:o,scrollWidth:n}=this.scrollRef;return[Math.ceil(e/t*100)<100,Math.ceil(o/n*100)<100]}};O.\u0275fac=function(t){return new(t||O)},O.\u0275cmp=U({type:O,selectors:[["tui-scroll-controls"]],decls:2,vars:1,consts:[["tuiAnimated","",1,"t-bar","t-bar_vertical",3,"t-bar_has-horizontal"],["tuiAnimated","",1,"t-bar","t-bar_horizontal",3,"t-bar_has-vertical"],["tuiAnimated","",1,"t-bar","t-bar_vertical",3,"mousedown.capture.prevent"],["tuiScrollbar","vertical",1,"t-thumb"],["tuiAnimated","",1,"t-bar","t-bar_horizontal",3,"mousedown.capture.prevent"],["tuiScrollbar","horizontal",1,"t-thumb"]],template:function(t,o){t&1&&b(0,jt,0,0)(1,$t,2,3),t&2&&p(o.nativeScrollbar?0:1)},dependencies:[bt,Ot,Z],styles:["[_nghost-%COMP%]{position:sticky;top:0;left:0;z-index:1;inset-inline-start:0;min-inline-size:calc(100% - 1px);min-block-size:calc(100% - 1px);max-inline-size:calc(100% - 1px);max-block-size:calc(100% - 1px);margin-inline-end:calc(-100% + 1px);pointer-events:none;overflow:hidden;color:var(--tui-text-primary)}  [tuiScrollable]{scrollbar-width:none;-ms-overflow-style:none}  [tuiScrollable]::-webkit-scrollbar,   [tuiScrollable]::-webkit-scrollbar-thumb{display:none}.t-bar[_ngcontent-%COMP%]{position:absolute;right:0;pointer-events:auto}.t-bar.tui-enter[_ngcontent-%COMP%], .t-bar.tui-leave[_ngcontent-%COMP%]{animation-name:tuiFade}.t-bar_vertical[_ngcontent-%COMP%]{top:.25rem;bottom:.25rem;inline-size:.875rem}@supports (inset-inline-end: 0){.t-bar_vertical[_ngcontent-%COMP%]{right:unset;inset-inline-end:0}}.t-bar_horizontal[_ngcontent-%COMP%]{bottom:0;left:0;inset-inline-start:0;block-size:.875rem}.t-bar_has-horizontal[_ngcontent-%COMP%]{bottom:.5rem}.t-bar_has-vertical[_ngcontent-%COMP%]{right:.5rem}.t-thumb[_ngcontent-%COMP%]{transition-property:all;transition-duration:.15s;transition-timing-function:ease-in-out;position:absolute;border-radius:6.25rem;border:.25rem solid transparent;cursor:pointer;pointer-events:auto;-webkit-user-select:none;user-select:none;background:currentColor;background-clip:content-box;box-sizing:border-box;transition-property:width,height,opacity;opacity:.2}.t-thumb[_ngcontent-%COMP%]:hover{opacity:.24}.t-thumb[_ngcontent-%COMP%]:active{opacity:.48}.t-bar_vertical[_ngcontent-%COMP%]   .t-thumb[_ngcontent-%COMP%]{right:0;inset-inline-end:0;inline-size:.75rem;min-block-size:1.25rem}.t-bar_vertical[_ngcontent-%COMP%]:hover   .t-thumb[_ngcontent-%COMP%], .t-bar_vertical[_ngcontent-%COMP%]   .t-thumb[_ngcontent-%COMP%]:active{inline-size:.875rem}.t-bar_horizontal[_ngcontent-%COMP%]   .t-thumb[_ngcontent-%COMP%]{bottom:0;block-size:.75rem;min-inline-size:1.25rem}.t-bar_horizontal[_ngcontent-%COMP%]:hover   .t-thumb[_ngcontent-%COMP%], .t-bar_horizontal[_ngcontent-%COMP%]   .t-thumb[_ngcontent-%COMP%]:active{block-size:.875rem}"],changeDetection:0});var G=O;var Zt=["*"];function Gt(i,e){if(i&1&&R(0,"tui-scroll-controls",2),i&2){let t=_();m("t-hover-mode",t.options.mode==="hover")}}var Mt="tui-scroll-into-view",It="tui-scrollable",d=class d{constructor(){this.el=l();this.options=r(B);this.isIOS=r(St);this.browserScrollRef=new M(this.el)}get delegated(){return this.scrollRef!==this.el||this.options.mode==="native"}get scrollRef(){return this.browserScrollRef.nativeElement}set scrollRef(e){this.browserScrollRef.nativeElement=e}scrollIntoView(e){var D,H;if(this.delegated)return;let{offsetHeight:t,offsetWidth:o}=e,{offsetTop:n,offsetLeft:s}=yt(this.scrollRef,e),h=n+t/2-this.scrollRef.clientHeight/2,f=s+o/2-this.scrollRef.clientWidth/2;(H=(D=this.scrollRef).scrollTo)==null||H.call(D,f,h)}};d.\u0275fac=function(t){return new(t||d)},d.\u0275cmp=U({type:d,selectors:[["tui-scrollbar"]],hostVars:2,hostBindings:function(t,o){t&1&&x("tui-scrollable.stop",function(s){return o.scrollRef=s.detail})("tui-scroll-into-view.stop",function(s){return o.scrollIntoView(s.detail)}),t&2&&m("_native-hidden",o.options.mode!=="native"&&(!o.isIOS||o.options.mode==="hidden"))},features:[v([{provide:c,useFactory:()=>r(d).browserScrollRef}])],ngContentSelectors:Zt,decls:3,vars:3,consts:[[1,"t-bars",3,"t-hover-mode"],[1,"t-content"],[1,"t-bars"]],template:function(t,o){t&1&&(mt(),b(0,Gt,1,2,"tui-scroll-controls",0),I(1,"div",1),pt(2),P()),t&2&&(p(!o.isIOS&&o.options.mode!=="native"&&o.options.mode!=="hidden"?0:-1),A(),m("t-content_delegated",o.delegated))},dependencies:[G],styles:["[_nghost-%COMP%]{position:relative;display:flex;max-block-size:100%;isolation:isolate;overflow:auto}._native-hidden[_nghost-%COMP%]{scrollbar-width:none;-ms-overflow-style:none}._native-hidden[_nghost-%COMP%]::-webkit-scrollbar, ._native-hidden[_nghost-%COMP%]::-webkit-scrollbar-thumb{display:none}[_nghost-%COMP%]   .t-hover-mode[_ngcontent-%COMP%]:not(:active){transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;opacity:0}[_nghost-%COMP%]:hover   .t-hover-mode[_ngcontent-%COMP%]{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;opacity:1}.t-content[_ngcontent-%COMP%]{isolation:isolate;flex:1;flex-basis:auto;inline-size:100%;block-size:max-content}.t-content_delegated[_ngcontent-%COMP%]{block-size:100%}.t-bars[_ngcontent-%COMP%]{color:var(--tui-text-primary)}"],changeDetection:0});var wt=d;var S=class S{constructor(){this.el=l()}ngOnInit(){this.el.dispatchEvent(new CustomEvent(It,{bubbles:!0,detail:this.el}))}};S.\u0275fac=function(t){return new(t||S)},S.\u0275dir=a({type:S,selectors:[["","tuiScrollable",""]]});var Pt=S;var T=class T{constructor(){this.el=l();this.destroyRef=r(at);this.tuiScrollIntoView=k();this.dispatchEvent=ht(()=>{this.tuiScrollIntoView()&&et(0).pipe(E(this.destroyRef)).subscribe(()=>{this.el.dispatchEvent(new CustomEvent(Mt,{bubbles:!0,detail:this.el}))})})}};T.\u0275fac=function(t){return new(t||T)},T.\u0275dir=a({type:T,selectors:[["","tuiScrollIntoView",""]],inputs:{tuiScrollIntoView:[1,"tuiScrollIntoView"]}});var Rt=T;export{ee as a,c as b,Tt as c,B as d,Jt as e,G as f,wt as g,Rt as h,Pt as i};
