import{c as Kt,i as fe}from"./chunk-P2ZLKCHH.js";import{b as Te}from"./chunk-GPECXDQ2.js";import{g as Rt,i as Le,j as Et,w as Ht}from"./chunk-LQUSMZ33.js";import{d as G}from"./chunk-UVC7USCE.js";import{d as Y,g as Ut,h as Ue,i as zt,j as Wt,k as jt,l as Yt,m as Gt,n as $t}from"./chunk-DG4OZBES.js";import{a as Be,b as $}from"./chunk-BORSLDT5.js";import{f as Fe,i as Ie,k as pe,l as z,n as wt,o as ce,p as w,q as Xt}from"./chunk-USZITTWE.js";import{A as Ne,C as se,I as le,M as kt,O as Pt,p as Ot,u as He}from"./chunk-25D3M2G5.js";import{B as Vt,E as Re,da as Ee,z as At}from"./chunk-WLTEZ4U5.js";import{e as W,g as me,h as de,i as j}from"./chunk-GYH77W5G.js";import{e as Nt,h as Ft,i as ve,j as Lt,m as Bt,n as l,p as f,q as y,r as R,t as I,u as Jt}from"./chunk-HZ7OQNC6.js";import{Da as Pe,Ea as we,Fa as H,Ga as St,H as Ke,L as qe,T as Mt,c as Ct,va as bt,y as xt}from"./chunk-OEF4G3B4.js";import{n as ue}from"./chunk-3H47OIE2.js";import{$c as De,Ac as d,Bb as ct,Bc as m,Cb as _e,Ka as mt,La as c,Ma as T,Mc as _t,Oc as Dt,Pa as g,Qc as Ge,Rc as $e,Sa as dt,Sc as Xe,Tb as B,Va as je,Vb as b,Wc as P,Xb as _,Yb as h,Zb as D,_a as p,bd as It,c as lt,cd as V,d as pt,ec as M,fc as O,fd as ke,gc as Tt,gd as Je,hc as Ye,hd as re,kc as k,mc as ft,md as vt,nc as ht,oc as yt,pc as S,qc as A,rc as gt,sd as U,td as s,ud as ae,vc as E,wa as Ve,wc as Oe,za as u}from"./chunk-JYXVX5RO.js";import{a as x,b as q}from"./chunk-HU6DUUP4.js";var qt=(r,n,e)=>t=>{if(!n||n instanceof f||!e)return r(t);let i=Object.fromEntries(Object.entries(e).map(([C,oe])=>[C,-oe])),o=n.append(i).append({day:1}),a=n.append(e).append({day:-1});return o.dayBefore(t)&&a.dayAfter(t)||r(t)};var Zt=(r,n,e,t)=>{if(n instanceof f&&!n.isSingleDay||!n||!e)return t?r||y:r||R;let i=Object.fromEntries(Object.entries(e).map(([v,C])=>[v,-C])),a=(n instanceof l?n:n.from).append(t?i:e).append({day:t?1:-1});return t?a.dayBefore(r||y)?r||y:a:r&&a.dayAfter(r)?r:a};var Qt=(r,n,e,t)=>[r,n,e,t,!1],ei=(r,n,e,t)=>[r,n,e,t,!0],oi=(r,n,e,t,i,o)=>[r,n,e,t,i,o];function ri(r,n){if(r&1){let e=E();S(0,"tui-calendar",2),V(1,"tuiMapper"),V(2,"tuiMapper"),V(3,"tuiMapper"),V(4,"tuiMapper"),V(5,"tuiMapper"),Xe("hoveredItemChange",function(i){c(e);let o=m();return $e(o.hoveredItem,i)||(o.hoveredItem=i),T(i)}),d("dayClick",function(i){c(e);let o=m();return T(o.onDayClick(i))})("monthChange",function(i){c(e);let o=m();return T(o.onMonthChange(i.append({month:-1})))}),A()}if(r&2){let e=m();O("disabledItemHandler",Je(1,9,e.disabledItemHandler,e.disabledMapper,e.currentValue,e.minLength))("markerHandler",e.markerHandler)("max",re(2,14,De(34,Qt,e.max,e.capsMapper,e.currentValue,e.maxLength)))("min",re(3,20,De(39,ei,e.min,e.capsMapper,e.currentValue,e.maxLength)))("minViewedMonth",ke(4,26,e.defaultViewedMonth,e.monthOffset,1))("month",ke(5,30,e.defaultViewedMonth,e.monthOffset,1))("showAdjacent",!1)("value",e.currentValue),Ge("hoveredItem",e.hoveredItem)}}function ai(r,n){if(r&1&&gt(0,"tui-icon",7),r&2){let e=m(4);O("icon",e.icons.check)}}function ui(r,n){if(r&1){let e=E();S(0,"button",6),d("click",function(){let i=c(e).$implicit,o=m(3);return T(o.onItemSelect(i))})("pointerdown.prevent.zoneless",function(){return c(e),T(0)}),_t(1),D(2,ai,1,1,"tui-icon",7),A()}if(r&2){let e=n.$implicit,t=m(3);M("aria-checked",t.isItemActive(e)),_e(),Dt(" ",e," "),_e(),k(t.isItemActive(e)?2:-1)}}function si(r,n){if(r&1&&(S(0,"tui-data-list",4),ht(1,ui,3,3,"button",5,ft),V(3,"tuiMapper"),A()),r&2){let e=m(2);Tt("flex",1),_e(),yt(re(3,2,It(9,oi,e.items,e.mapper,e.min,e.max,e.minLength,e.otherDateText())))}}function li(r,n){if(r&1&&D(0,si,4,16,"tui-data-list",3),r&2){let e=m();k(e.mobile?-1:0)}}var Z=class Z{constructor(){this.selectedPeriod=null;this.cdr=u(vt);this.currentValue=null;this.previousValue=null;this.hoveredItem=null;this.month=Bt.currentLocal();this.otherDateText=u(Rt);this.icons=u(Vt);this.capsMapper=Zt;this.mobile=u(ue);this.disabledItemHandler=Ct;this.markerHandler=null;this.items=[];this.min=y;this.max=R;this.minLength=null;this.maxLength=null;this.item=null;this.valueChange=new je;this.itemChange=new je;this.monthOffset=(n,e)=>n.append({month:e});this.mapper=(n,e,t,i,o)=>[...n.filter(a=>(i===null||a.range.from.append(i).append({day:-1}).daySameOrBefore(a.range.to))&&(e===null||a.range.to.daySameOrAfter(e))&&(t===null||a.range.from.daySameOrBefore(t))),o||""];this.disabledMapper=(n,e,t)=>qt(n,e,t)}set valueSetter(n){this.currentValue=n}set defaultViewedMonth(n){this.currentValue||(this.month=n)}set value(n){this.cdr.markForCheck(),this.currentValue=n,this.initDefaultViewedMonth()}get defaultViewedMonth(){return this.month}get selectedActivePeriod(){return this.selectedPeriod}set selectedActivePeriod(n){this.selectedPeriod=n}ngOnChanges(){this.currentValue||this.initDefaultViewedMonth()}ngOnInit(){this.initDefaultViewedMonth()}onEsc(n){n.key!=="Escape"||!(this.currentValue instanceof l)||(n.stopPropagation(),this.currentValue=this.previousValue)}isItemActive(n){let{activePeriod:e}=this;return qe(n)&&e===null||e===n||e?.toString()===n.toString()}onItemSelect(n){qe(n)?this.activePeriod!==null&&(this.selectedActivePeriod=null,this.itemChange.emit(null),this.updateValue(null)):(this.selectedActivePeriod=n,this.itemChange.emit(n),this.updateValue(n.range.dayLimit(this.min,this.max))),this.initDefaultViewedMonth()}onMonthChange(n){this.month=n}onDayClick(n){if(this.previousValue=this.currentValue,this.selectedActivePeriod=null,this.currentValue instanceof l){let e=f.sort(this.currentValue,n);this.currentValue=e,this.itemChange.emit(this.findItemByDayRange(e)),this.updateValue(e)}else this.currentValue=n}updateValue(n){this.currentValue=n,this.valueChange.emit(n)}get activePeriod(){return this.item??this.selectedActivePeriod??(this.items.find(n=>Mt(this.currentValue instanceof l?new f(this.currentValue,this.currentValue):this.currentValue,n.range,(e,t)=>e.from.daySame(t.from.dayLimit(this.min,this.max))&&e.to.daySame(t.to.dayLimit(this.min,this.max))))||null)}initDefaultViewedMonth(){this.currentValue instanceof l?this.month=this.currentValue:this.currentValue?this.month=this.items.length?this.currentValue.to:this.currentValue.from:this.max&&this.month.monthSameOrAfter(this.max)?this.month=this.items.length?this.max:this.max.append({month:-1}):this.min&&this.month.monthSameOrBefore(this.min)&&(this.month=this.min)}findItemByDayRange(n){return this.items.find(e=>n.daySame(e.range))??null}};Z.\u0275fac=function(e){return new(e||Z)},Z.\u0275cmp=B({type:Z,selectors:[["tui-calendar-range"]],hostVars:2,hostBindings:function(e,t){e&1&&d("keydown.capture",function(o){return t.onEsc(o)},!1,ct),e&2&&Ye("_mobile",t.mobile)},inputs:{disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",items:"items",min:"min",max:"max",minLength:"minLength",maxLength:"maxLength",item:"item",valueSetter:[0,"value","valueSetter"],defaultViewedMonth:"defaultViewedMonth"},outputs:{valueChange:"valueChange",itemChange:"itemChange"},features:[P([At(Z),Kt({rangeMode:!0})]),mt],decls:7,vars:43,consts:[["automation-id","tui-calendar-range__calendar",3,"hoveredItemChange","dayClick","monthChange","disabledItemHandler","markerHandler","max","maxViewedMonth","min","month","showAdjacent","value","hoveredItem"],[3,"disabledItemHandler","markerHandler","max","min","minViewedMonth","month","showAdjacent","value","hoveredItem"],[3,"hoveredItemChange","dayClick","monthChange","disabledItemHandler","markerHandler","max","min","minViewedMonth","month","showAdjacent","value","hoveredItem"],["automation-id","tui-calendar-range__menu","role","menu",3,"flex"],["automation-id","tui-calendar-range__menu","role","menu"],["automation-id","tui-calendar-range__menu__item","role","menuitemradio","tuiOption","","type","button"],["automation-id","tui-calendar-range__menu__item","role","menuitemradio","tuiOption","","type","button",3,"click","pointerdown.prevent.zoneless"],["automation-id","tui-calendar-range__checkmark",1,"t-check",3,"icon"]],template:function(e,t){e&1&&(S(0,"tui-calendar",0),V(1,"tuiMapper"),V(2,"tuiMapper"),V(3,"tuiMapper"),V(4,"tuiMapper"),Xe("hoveredItemChange",function(o){return $e(t.hoveredItem,o)||(t.hoveredItem=o),o}),d("dayClick",function(o){return t.onDayClick(o)})("monthChange",function(o){return t.onMonthChange(o)}),A(),D(5,ri,6,44,"tui-calendar",1)(6,li,1,1)),e&2&&(Ye("t-calendar",!t.mobile),O("disabledItemHandler",Je(1,12,t.disabledItemHandler,t.disabledMapper,t.currentValue,t.minLength))("markerHandler",t.markerHandler)("max",re(2,17,De(33,Qt,t.max,t.capsMapper,t.currentValue,t.maxLength)))("maxViewedMonth",t.items.length||t.mobile?null:ke(3,23,t.defaultViewedMonth,t.monthOffset,-1))("min",re(4,27,De(38,ei,t.min,t.capsMapper,t.currentValue,t.maxLength)))("month",t.defaultViewedMonth)("showAdjacent",!!t.items.length||t.mobile)("value",t.currentValue),Ge("hoveredItem",t.hoveredItem),_e(5),k(!t.items.length&&!t.mobile?5:6))},dependencies:[fe,kt,Pt,Xt,Jt],styles:["[_nghost-%COMP%]:not(._mobile){display:flex;min-inline-size:30rem}.t-calendar[_ngcontent-%COMP%]{border-inline-end:1px solid var(--tui-border-normal)}.t-check[_ngcontent-%COMP%]{font-size:1rem;margin-inline-start:auto}"],changeDetection:0});var Ce=Z;var X=class{constructor(n,e,t){this.range=n;this.name=e;this.content=t}toString(){return this.name}};function pi(){try{return u(Ht)()}catch{return["For all the time","Today","Yesterday","Current week","Current month","Previous month"]}}function Ki(r=pi()){let n=l.currentLocal(),e=n.append({day:-1}),t=n.append({day:-n.dayOfWeek()}),i=t.append({day:6}),o=n.append({day:1-n.day}),a=o.append({month:1,day:-1}),v=o.append({month:-1});return[new X(new f(y,n),r[0]),new X(new f(n,n),r[1]),new X(new f(e,e),r[2]),new X(new f(t,i),r[3]),new X(new f(o,a),r[4]),new X(new f(v,o.append({day:-1})),r[5])]}var xe={icon:"@tui.calendar",min:y,max:R,valueTransformer:me},[N,un]=we(xe);function mi(r,n){return r.replaceAll(/[^0-9A-ZА-Я]/gi,n)}function he(r=pt){let n=u(Et),e=u(Re);return H(z,"filler",s(()=>{let{mode:t,separator:i}=e(),o=n()??"",a=o&&mi(o[t],i);return r(a)}),{})}var ee=class ee extends de{constructor(){super(...arguments);this.calendar=wt(e=>e instanceof fe||e instanceof Ce);this.options=u(N);this.el=bt();this.input=u(Be);this.filler=he();this.mobile=u(ue);this.open=u(He).open;this.icon=Ee(this.options.icon);this.handlers=u(Ie);this.format=u(Re);this.dropdownEnabled=Ne(s(()=>!this.native&&this.interactive()));this.identity=H(Ie,"identityMatcher",(e,t)=>e.daySame(t),{});this.valueEffect=ae(()=>{let e=this.stringify(this.value())||(this.filler().length===this.el.value.length?"":this.el.value);this.input.value.set(e)});this.calendarIn=ae(()=>{this.calendar()&&this.processCalendar(this.calendar())});this.calendarOut=ae(e=>{let t=this.calendar()?.valueChange.subscribe(i=>this.setDate(i));e(()=>t?.unsubscribe())});this.native=!!u(w,{optional:!0})&&this.mobile}writeValue(e){let t=this.control.pristine&&this.control.untouched&&!e;(U(()=>e!==this.value())||t)&&(super.writeValue(e),this.input.value.set(this.stringify(this.value())))}setDate(e){this.onChange(e),this.open.set(!1),this.el.closest("tui-dropdown")||this.el.blur()}processCalendar(e){let t=this.value();e.value=Array.isArray(t)?t[0]:t,e.disabledItemHandler=this.handlers.disabledItemHandler(),e.min=this.min(),e.max=this.max()}onClick(){!this.mobile&&this.dropdownEnabled()&&this.open.update(e=>!e)}stringify(e){return e?.toString(this.format().mode,this.format().separator)??""}};ee.\u0275fac=(()=>{let e;return function(i){return(e||(e=g(ee)))(i||ee)}})(),ee.\u0275dir=b({type:ee,hostVars:2,hostBindings:function(t,i){t&1&&d("input",function(a){return i.onValueChange(a.target.value)})("click.capture.stop",function(){return i.onClick()}),t&2&&(Oe("disabled",i.disabled()),M("inputmode",i.mobile&&i.open()?"none":"numeric"))},features:[_]});var te=ee,J=class J extends te{constructor(){super(...arguments);this.max=p(this.options.max,{transform:e=>e instanceof l?e:R});this.min=p(this.options.min,{transform:e=>e instanceof l?e:y});this.mask=G(s(()=>jt({separator:this.format().separator,mode:this.format().mode,min:this.min().toLocalNativeDate(),max:this.max().toLocalNativeDate()})))}onValueChange(e){this.control?.control?.updateValueAndValidity({emitEvent:!1}),this.onChange(e.length===ve?l.normalizeParse(e,this.format().mode):null)}};J.\u0275fac=(()=>{let e;return function(i){return(e||(e=g(J)))(i||J)}})(),J.\u0275dir=b({type:J,selectors:[["input","tuiInputDate",""]],inputs:{max:[1,"max"],min:[1,"min"]},features:[P([le(Te),j(J),W(N)]),h([$,se,pe,Y]),_]});var Me=J;var ci=["tuiInputDate","","type","date"];function Ti(r,n){if(r&1){let e=E();S(0,"input",2),d("click.stop.zoneless",function(){return c(e),T(0)})("input",function(i){c(e);let o=m(2);return T(o.onInput(i.target.value))})("pointerdown.stop.zoneless",function(){return c(e),T(0)}),A()}if(r&2){let e,t=m(2);O("max",t.host.max().toJSON())("min",t.host.min().toJSON())("value",(e=t.host.value())==null?null:e.toJSON()),M("list",t.list())}}function fi(r,n){r&1&&D(0,Ti,1,4,"input",1)}var ye=class ye{constructor(){this.host=u(Me);this.list=p()}onInput(n){if(!n)return this.host.onChange(null);let[e=0,t=0,i=0]=n.split("-").map(Number);this.host.onChange(new l(e,t-1,i))}};ye.\u0275fac=function(e){return new(e||ye)},ye.\u0275cmp=B({type:ye,selectors:[["input","tuiInputDate","","type","date"]],hostAttrs:["ngSkipHydration","true"],hostVars:1,hostBindings:function(e,t){e&2&&M("list",null)},inputs:{list:[1,"list"]},features:[h([w])],attrs:ci,decls:1,vars:1,consts:[["type","date",3,"max","min","value"],["type","date",3,"max","min","value","click.stop.zoneless","input","pointerdown.stop.zoneless",4,"tuiTextfieldContent"],["type","date",3,"click.stop.zoneless","input","pointerdown.stop.zoneless","max","min","value"]],template:function(e,t){e&1&&D(0,fi,1,0,"input",0),e&2&&k(t.host.native?0:-1)},dependencies:[ce],styles:[`tui-textfield input[tuiInputDate]~.t-content input[type=date]{position:absolute;inset:0 0 0 auto;inline-size:2.5rem;padding:0;opacity:0}tui-textfield input[tuiInputDate]~.t-content input[type=date]::-webkit-calendar-picker-indicator{position:absolute;top:0;left:0;inline-size:100%;block-size:100%}
`],encapsulation:2,changeDetection:0});var tt=ye;var ze=new Ve("",{factory:()=>q(x({},u(N)),{valueTransformer:me})}),To=r=>Pe(ze,r,xe);var K=class K extends te{constructor(){super(...arguments);this.max=p(this.options.max,{transform:e=>e instanceof l?e:R});this.min=p(this.options.min,{transform:e=>e instanceof l?e:y});this.filler=he(e=>`${e}${Nt}${e}`);this.mask=G(s(()=>Yt({dateSeparator:this.format().separator,mode:this.format().mode,min:this.min().toLocalNativeDate(),max:this.max().toLocalNativeDate(),minLength:this.minLength()||{},maxLength:this.maxLength()||{}})));this.minLength=p(null);this.maxLength=p(null)}processCalendar(e){super.processCalendar(e),e.minLength=this.minLength(),e.maxLength=this.maxLength()}onValueChange(e){this.control?.control?.updateValueAndValidity({emitEvent:!1}),this.onChange(e.length===Lt?f.normalizeParse(e,this.format().mode):null)}};K.\u0275fac=(()=>{let e;return function(i){return(e||(e=g(K)))(i||K)}})(),K.\u0275dir=b({type:K,selectors:[["input","tuiInputDateRange",""]],inputs:{max:[1,"max"],min:[1,"min"],minLength:[1,"minLength"],maxLength:[1,"maxLength"]},features:[P([j(K),W(ze),St(N,ze)]),h([$,se,Y]),_]});var rt=K;var hi={icon:"@tui.clock",mode:"HH:MM",timeSegmentMaxValues:{},timeSegmentMinValues:{},valueTransformer:null},[at,Ao]=we(hi);var F=class F extends de{constructor(){super(...arguments);this.input=u(Be);this.dropdown=u(Ot);this.open=u(He).open;this.options=u(at);this.fillers=u(Le);this.icon=Ee(this.options.icon);this.dropdownEnabled=Ne(s(()=>!this.native&&this.interactive()));this.filler=H(z,"filler",s((e=this.fillers()?.[this.timeMode()]??"")=>this.postfix()?"":this.prefix()+e),{});this.mask=G(s(()=>this.computeMask(q(x({},this.options),{mode:this.timeMode(),step:this.interactive()&&!this.dropdown.content()?1:0,prefix:this.prefix(),postfix:this.postfix()}))));this.accept=p([]);this.timeMode=p(this.options.mode,{alias:"mode"});this.prefix=p("");this.postfix=p("");this.native=!!u(w,{optional:!0})&&u(ue)}setValue(e){this.onChange(e),e?this.input.value.set(this.stringify(e)):this.input.setValue(e),!e&&this.dropdownEnabled()&&this.open.set(!0)}writeValue(e){let t=this.control.pristine&&this.control.untouched&&!e;(U(()=>e!==this.value())||t)&&(super.writeValue(e),U(()=>this.input.value.set(this.stringify(this.value()))))}onInput(e){let t=e.replace(this.prefix(),"").replace(this.postfix(),""),i=t.length===this.timeMode().length?I.fromString(t):null,o=this.accept().length&&i?this.findNearestTime(i,this.accept()):i;this.control?.control?.updateValueAndValidity({emitEvent:!1}),this.onChange(o),o&&o!==i&&this.input.value.set(this.stringify(o))}toggle(){this.open.update(e=>!e)}onBlur(e){let t=e.replace(this.prefix(),"").replace(this.postfix(),"");if(t&&!this.value()){let i=I.fromString(t),o=this.accept().length?this.findNearestTime(i,this.accept()):i;this.control?.control?.updateValueAndValidity({emitEvent:!1}),this.onChange(o),o&&this.input.value.set(this.stringify(o))}}computeMask(e){let t=Gt(e),{mode:i,prefix:o,postfix:a}=e,v=Ue(oe=>{oe.inputMode=oe.selectionStart>=i.indexOf(" AA")?"text":"numeric"}),C=zt(oe=>[o.length,oe.length-a.length]);return q(x({},t),{plugins:t.plugins.concat(C,Ut(o+a),Wt(o+a),i.includes("AA")?v:[])})}findNearestTime(e,t){return t.reduce((i,o)=>Math.abs(o.valueOf()-e.valueOf())<Math.abs(i.valueOf()-e.valueOf())?o:i)}stringify(e){return this.prefix()+(e?.toString(this.timeMode())||"")+this.postfix()}};F.\u0275fac=(()=>{let e;return function(i){return(e||(e=g(F)))(i||F)}})(),F.\u0275dir=b({type:F,selectors:[["input","tuiInputTime",""]],hostAttrs:["inputmode","numeric"],hostVars:1,hostBindings:function(t,i){t&1&&d("click",function(){return i.toggle()})("input",function(a){return i.onInput(a.target.value)})("blur",function(a){return i.onBlur(a.target.value)}),t&2&&Oe("disabled",i.disabled())},inputs:{accept:[1,"accept"],timeMode:[1,"mode","timeMode"],prefix:[1,"prefix"],postfix:[1,"postfix"]},features:[P([j(F),Fe(F),W(at),le(Te)]),h([$,Y]),_]});var be=F;var yi=["tuiInputTime","","type","time"];function gi(r,n){if(r&1){let e=E();S(0,"input",2),d("change",function(i){c(e);let o=m(2);return T(o.setValue(i.target.value))}),A()}if(r&2){let e=m(2);O("step",e.step())("value",e.value()),M("list",e.list)}}function _i(r,n){r&1&&D(0,gi,1,3,"input",1)}var ge=class ge{constructor(){this.list=u(new dt("list"),{optional:!0})}getStep(n){switch(n){case"HH:MM:SS":case"HH:MM:SS AA":return 1;case"HH:MM:SS.MSS":case"HH:MM:SS.MSS AA":return .001;default:return 60}}toISOString(n){let[e,t]=Array.isArray(n)?n:[null,n],i=e?e.toJSON()+(t?"T":""):"",o=t?t.toString("HH:MM:SS.MSS"):"";return i+o}};ge.\u0275fac=function(e){return new(e||ge)},ge.\u0275dir=b({type:ge,hostVars:1,hostBindings:function(e,t){e&2&&M("list",null)}});var Se=ge,ie=class ie extends Se{constructor(){super(...arguments);this.control=u(de);this.host=u(be);this.value=s(()=>this.toISOString(this.control.value()));this.step=s(()=>this.getStep(this.host.timeMode()))}setValue(e){this.host.setValue(I.fromString(e))}};ie.\u0275fac=(()=>{let e;return function(i){return(e||(e=g(ie)))(i||ie)}})(),ie.\u0275cmp=B({type:ie,selectors:[["input","tuiInputTime","","type","time"]],hostAttrs:["ngSkipHydration","true"],features:[h([w]),_],attrs:yi,decls:1,vars:1,consts:[["type","time",3,"step","value"],["type","time",3,"step","value","change",4,"tuiTextfieldContent"],["type","time",3,"change","step","value"]],template:function(t,i){t&1&&D(0,_i,1,0,"input",0),t&2&&k(i.host.native?0:-1)},dependencies:[ce],styles:[`tui-textfield input[tuiInputTime]~.t-content input[type=time]{position:absolute;right:0;left:auto;inline-size:calc(var(--t-right) + var(--t-padding));opacity:0;margin:0;padding:0}tui-textfield input[tuiInputTime]~.t-content input[type=time]::-webkit-calendar-picker-indicator{position:absolute;top:0;left:0;inline-size:100%;block-size:100%}
`],encapsulation:2,changeDetection:0});var ut=ie;var ni={valueTransformer:me,timeMode:"HH:MM",dateTimeSeparator:", "},We=new Ve("",{factory:()=>x(x({},u(N)),ni)}),pr=r=>Pe(We,r,x(x({},xe),ni));var Di=new I(0,0),Ii=I.fromAbsoluteMilliseconds(Ft-1),L=class L extends te{constructor(){super(...arguments);this.timeFillers=u(Le);this.options=u(We);this.filler=he(e=>`${e}${this.options.dateTimeSeparator}${this.timeFillers()?.[this.timeMode()]??""}`);this.valueEffect=ae(lt);this.identity=H(Ie,"identityMatcher",(e,t)=>Ke(...e.map(Number))===Ke(...t.map(Number)),{});this.disabledItemHandler=H(pe,"disabledItemHandler",s(()=>e=>!!(e&&this.handlers.disabledItemHandler()(e))));this.mask=G(s(()=>this.computeMask({dateMode:this.format().mode,timeMode:this.timeMode(),min:this.toNativeDate([this.min(),this.minTime()]),max:this.toNativeDate([this.max(),this.maxTime()]),dateSeparator:this.format().separator,dateTimeSeparator:this.options.dateTimeSeparator})));this.min=s((e=this.minInput())=>Array.isArray(e)?e[0]:e??this.options.min);this.max=s((e=this.maxInput())=>Array.isArray(e)?e[0]:e??this.options.max);this.minTime=s((e=this.minInput())=>Array.isArray(e)?e[1]:Di);this.maxTime=s((e=this.maxInput())=>Array.isArray(e)?e[1]:Ii);this.timeMode=p(this.options.timeMode);this.minInput=p(this.options.min,{alias:"min"});this.maxInput=p(this.options.max,{alias:"max"})}setValue(e){this.onChange(e),this.input.value.set(this.stringify(e))}setDate(e){let[t,i]=this.clampTime([e,this.value()?.[1]??null]);this.setValue([t,i]),this.open.set(!1),setTimeout((o=ve+this.options.dateTimeSeparator.length)=>this.el.setSelectionRange(o,o))}writeValue(e){let t=this.control.pristine&&this.control.untouched&&!e;(U(()=>e!==this.value())||t)&&(super.writeValue(e),U(()=>this.input.value.set(this.stringify(this.value()))))}processCalendar(e){super.processCalendar(e),e.disabledItemHandler=t=>this.handlers.disabledItemHandler()([t,null])}onValueChange(e){this.input.value.set(e),this.control?.control?.updateValueAndValidity({emitEvent:!1});let[t="",i=""]=e.split(this.options.dateTimeSeparator),o=t.length>=ve?l.normalizeParse(t,this.format().mode):null,a=i.length===this.timeMode().length?I.fromString(i):null;if(!o||i&&!a)return this.onChange(null);let[v,C=null]=this.value()??[];(!v?.daySame(o)||Number(a)!==Number(C))&&this.onChange([o,a])}stringify(e){let[t,i]=e??[],o=t?.toString(this.format().mode,this.format().separator)??"",a=i?.toString(this.timeMode());return a?`${o}${this.options.dateTimeSeparator}${a}`:o}onBlur(e){let[t="",i=""]=e.split(this.options.dateTimeSeparator);if(i&&!this.value()){let o=I.fromString(i),a=[l.normalizeParse(t,this.format().mode),o];this.control?.control?.updateValueAndValidity({emitEvent:!1}),this.onChange(a),this.input.value.set(this.stringify(a))}}clampTime([e,t]){let i=e.daySame(this.min())?this.minTime().toAbsoluteMilliseconds():-1/0,o=e.daySame(this.max())?this.maxTime().toAbsoluteMilliseconds():1/0;return[e,t&&I.fromAbsoluteMilliseconds(xt(t.toAbsoluteMilliseconds(),i,o))]}computeMask(e){let t=$t(e),{timeMode:i,dateMode:o,dateTimeSeparator:a}=e,v=Ue(C=>{C.inputMode=C.selectionStart>=o.length+a.length+i.indexOf(" AA")?"text":"numeric"});return q(x({},t),{plugins:t.plugins.concat(i.includes("AA")?v:[])})}toNativeDate([{year:e,month:t,day:i},{hours:o,minutes:a,seconds:v,ms:C}]){return new Date(e,t,i,o,a,v,C)}};L.\u0275fac=(()=>{let e;return function(i){return(e||(e=g(L)))(i||L)}})(),L.\u0275dir=b({type:L,selectors:[["input","tuiInputDateTime",""]],hostBindings:function(t,i){t&1&&d("blur",function(a){return i.onBlur(a.target.value)})},inputs:{timeMode:[1,"timeMode"],minInput:[1,"min","minInput"],maxInput:[1,"max","maxInput"]},features:[P([le(Te),j(L),Fe(L),W(We)]),h([Y,se,pe,$]),_]});var Ae=L;var vi=["tuiInputDateTime","","type","datetime-local"];function Ci(r,n){if(r&1){let e=E();S(0,"input",2),d("click.stop.zoneless",function(){return c(e),T(0)})("input",function(i){c(e);let o=m(2);return T(o.onInput(i.target.value))})("pointerdown.stop.zoneless",function(){return c(e),T(0)}),A()}if(r&2){let e=m(2);O("max",e.max())("min",e.min())("step",e.step())("value",e.value()),M("list",e.list)}}function xi(r,n){r&1&&D(0,Ci,1,5,"input",1)}var ne=class ne extends Se{constructor(){super(...arguments);this.host=u(Ae);this.step=s(()=>this.getStep(this.host.timeMode()));this.value=s(()=>this.toISOString(this.host.value()));this.min=s(()=>this.toISOString([this.host.min(),this.host.minTime()]));this.max=s(()=>this.toISOString([this.host.max(),this.host.maxTime()]))}onInput(e){if(!e)return this.host.setValue(null);let t=new Date(e),i=l.fromLocalNativeDate(t),o=I.fromLocalNativeDate(t);this.host.setValue([i,o])}};ne.\u0275fac=(()=>{let e;return function(i){return(e||(e=g(ne)))(i||ne)}})(),ne.\u0275cmp=B({type:ne,selectors:[["input","tuiInputDateTime","","type","datetime-local"]],hostAttrs:["ngSkipHydration","true"],features:[h([w]),_],attrs:vi,decls:1,vars:1,consts:[["type","datetime-local",3,"max","min","step","value"],["type","datetime-local",3,"max","min","step","value","click.stop.zoneless","input","pointerdown.stop.zoneless",4,"tuiTextfieldContent"],["type","datetime-local",3,"click.stop.zoneless","input","pointerdown.stop.zoneless","max","min","step","value"]],template:function(t,i){t&1&&D(0,xi,1,0,"input",0),t&2&&k(i.host.native?0:-1)},dependencies:[ce],styles:[`tui-textfield input[tuiInputDateTime]~.t-content input[type=datetime-local]{position:absolute;inset:0 0 0 auto;inline-size:2.5rem;padding:0;opacity:0}tui-textfield input[tuiInputDateTime]~.t-content input[type=datetime-local]::-webkit-calendar-picker-indicator{position:absolute;top:0;left:0;inline-size:100%;block-size:100%}
`],encapsulation:2,changeDetection:0});var st=ne;export{qt as a,Zt as b,Ce as c,X as d,Ki as e,he as f,xe as g,N as h,un as i,Me as j,tt as k,To as l,rt as m,Ao as n,be as o,ut as p,pr as q,Ae as r,st as s};
