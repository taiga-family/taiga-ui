import{g as ei,k as fe}from"./chunk-D5F4F6SU.js";import{b as Te}from"./chunk-3KEFZDCN.js";import{b as Gt,c as Ge,d as $t,e as Xt,f as Jt,g as qt,h as Kt,i as Qt}from"./chunk-JNZUHSFF.js";import{d as Y}from"./chunk-UTIGETKV.js";import{e as j}from"./chunk-V6G65RPV.js";import{a as Wt,h as jt,j as Ye,k as Yt}from"./chunk-WS5FK7ET.js";import{$ as B,B as Be,D as Lt,E as ue,G as Ft,L as le,O as Ut,Q as Bt,Z as ze,_ as pe,aa as We,ca as zt,da as ce,ea as je,fa as w,i as Ht,u as Fe,v as Ue,x as se}from"./chunk-FS6XFYHE.js";import{p as He,q as wt,t as Le}from"./chunk-UIQNSGFM.js";import{f as z,h as me,i as de,j as W}from"./chunk-7OOTLPJV.js";import{a as Zt}from"./chunk-OYH2WJ3O.js";import{$b as x,A as Mt,Aa as oe,Ba as Ot,Mb as Pt,Pa as kt,Pb as Et,Q as Ee,Qb as xe,R as Re,Rb as Rt,Ub as Nt,V as St,Vb as m,W as bt,Xb as T,Yb as k,Zb as re,da as it,j as Ct,ja as nt,lb as Ne,sa as At,va as Vt,wc as ae}from"./chunk-RH6NWOVQ.js";import{Aa as s,Bc as f,Cb as ft,Cc as p,Db as Ie,La as Tt,Ma as d,Na as c,Nc as Dt,Pc as It,Qa as y,Rc as Ze,Sc as et,Tc as tt,Ub as F,Va as qe,Wb as C,Xc as O,Yb as g,Za as De,Zb as h,_b as _,ab as b,ad as ve,c as dt,cd as vt,d as ct,dd as H,fc as v,gc as A,gd as Pe,hc as Ke,ic as Qe,id as ie,lc as V,nc as ht,nd as xt,oc as yt,pc as gt,qc as M,rc as S,sc as _t,sd as U,td as l,ud as ne,wc as N,xa as ke,xc as we}from"./chunk-X7N7YQIF.js";import{a as I,b as q,h as mt}from"./chunk-42JZD6NG.js";var ti=(r,n,e)=>t=>{if(!n||n instanceof T||!e)return r(t);let i=Object.fromEntries(Object.entries(e).map(([D,R])=>[D,-R])),o=n.append(i).append({day:1}),a=n.append(e).append({day:-1});return o.dayBefore(t)&&a.dayAfter(t)||r(t)};var ii=(r,n,e,t)=>{if(n instanceof T&&!n.isSingleDay||!n||!e)return t?r||k:r||re;let i=Object.fromEntries(Object.entries(e).map(([u,D])=>[u,-D])),a=(n instanceof m?n:n.from).append(t?i:e).append({day:t?1:-1});return t?a.dayBefore(r||k)?r||k:a:r&&a.dayAfter(r)?r:a};var ni=(r,n,e,t)=>[r,n,e,t,!1],oi=(r,n,e,t)=>[r,n,e,t,!0],li=(r,n,e,t,i,o)=>[r,n,e,t,i,o];function pi(r,n){if(r&1){let e=N();M(0,"tui-calendar",2),H(1,"tuiMapper"),H(2,"tuiMapper"),H(3,"tuiMapper"),H(4,"tuiMapper"),tt("hoveredItemChange",function(i){d(e);let o=p();return et(o.hoveredItem,i)||(o.hoveredItem=i),c(i)}),f("dayClick",function(i){d(e);let o=p();return c(o.onDayClick(i))})("monthChange",function(i){d(e);let o=p();return c(o.onMonthChange(i.append({month:-1})))}),S()}if(r&2){let e=p();A("disabledItemHandler",e.calculatedDisabledItemHandler)("markerHandler",e.markerHandler)("max",ie(1,9,ve(29,ni,e.max,e.capsMapper,e.currentValue,e.maxLength)))("min",ie(2,15,ve(34,oi,e.min,e.capsMapper,e.currentValue,e.maxLength)))("minViewedMonth",Pe(3,21,e.defaultViewedMonth,e.monthOffset,1))("month",Pe(4,25,e.defaultViewedMonth,e.monthOffset,1))("showAdjacent",!1)("value",e.currentValue),Ze("hoveredItem",e.hoveredItem)}}function mi(r,n){if(r&1&&_t(0,"tui-icon",8),r&2){let e=p(4);Ke("font-size",1,"rem"),A("icon",e.icons.check)}}function di(r,n){if(r&1){let e=N();M(0,"button",6),f("click",function(){let i=d(e).$implicit,o=p(3);return c(o.onItemSelect(i))})("pointerdown.prevent.zoneless",function(){return d(e),c(0)}),Dt(1),_(2,mi,1,3,"tui-icon",7),S()}if(r&2){let e=n.$implicit,t=p(3);v("aria-checked",t.isItemActive(e)),Ie(),It(" ",e," "),Ie(),V(t.isItemActive(e)?2:-1)}}function ci(r,n){if(r&1&&(M(0,"tui-data-list",4),yt(1,di,3,3,"button",5,ht),H(3,"tuiMapper"),S()),r&2){let e=p(2);Ke("flex",1),Ie(),gt(ie(3,2,vt(9,li,e.items,e.mapper,e.min,e.max,e.minLength,e.otherDateText())))}}function Ti(r,n){if(r&1&&_(0,ci,4,16,"tui-data-list",3),r&2){let e=p();V(e.mobile?-1:0)}}var G=class G{constructor(){this.selectedPeriod=null;this.cdr=s(xt);this.currentValue=null;this.previousValue=null;this.hoveredItem=null;this.month=Nt.currentLocal();this.otherDateText=s(jt);this.icons=s(wt);this.capsMapper=ii;this.mobile=s(ae);this.disabledItemHandler=Mt;this.markerHandler=null;this.items=[];this.min=k;this.max=re;this.minLength=null;this.maxLength=null;this.item=null;this.valueChange=new qe;this.itemChange=new qe;this.monthOffset=(n,e)=>n.append({month:e});this.mapper=(n,e,t,i,o)=>[...n.filter(a=>(i===null||a.range.from.append(i).append({day:-1}).daySameOrBefore(a.range.to))&&(e===null||a.range.to.daySameOrAfter(e))&&(t===null||a.range.from.daySameOrBefore(t))),o||""];var n;(n=s(Wt,{optional:!0}))==null||n.pipe(kt(),Ct()).subscribe(e=>{this.currentValue=e,this.initDefaultViewedMonth()})}set valueSetter(n){this.currentValue=n}set defaultViewedMonth(n){this.currentValue||(this.month=n)}set value(n){this.cdr.markForCheck(),this.currentValue=n,this.initDefaultViewedMonth()}get defaultViewedMonth(){return this.month}get selectedActivePeriod(){return this.selectedPeriod}set selectedActivePeriod(n){this.selectedPeriod=n}ngOnChanges(){this.currentValue||this.initDefaultViewedMonth()}ngOnInit(){this.initDefaultViewedMonth()}get calculatedDisabledItemHandler(){return this.calculateDisabledItemHandler(this.disabledItemHandler,this.currentValue,this.minLength)}onEsc(n){n.key!=="Escape"||!(this.currentValue instanceof m)||(n.stopPropagation(),this.currentValue=this.previousValue)}isItemActive(n){let{activePeriod:e}=this;return nt(n)&&e===null||e===n||(e==null?void 0:e.toString())===n.toString()}onItemSelect(n){nt(n)?this.activePeriod!==null&&(this.selectedActivePeriod=null,this.itemChange.emit(null),this.updateValue(null)):(this.selectedActivePeriod=n,this.itemChange.emit(n),this.updateValue(n.range.dayLimit(this.min,this.max))),this.initDefaultViewedMonth()}onMonthChange(n){this.month=n}onDayClick(n){if(this.previousValue=this.currentValue,this.selectedActivePeriod=null,this.currentValue instanceof m){let e=T.sort(this.currentValue,n);this.currentValue=e,this.itemChange.emit(this.findItemByDayRange(e)),this.updateValue(e)}else this.currentValue=n}updateValue(n){this.currentValue=n,this.valueChange.emit(n)}get activePeriod(){return this.item??this.selectedActivePeriod??(this.items.find(n=>At(this.currentValue instanceof m?new T(this.currentValue,this.currentValue):this.currentValue,n.range,(e,t)=>e.from.daySame(t.from.dayLimit(this.min,this.max))&&e.to.daySame(t.to.dayLimit(this.min,this.max))))||null)}calculateDisabledItemHandler(n,e,t){return ti(n,e,t)}initDefaultViewedMonth(){this.currentValue instanceof m?this.month=this.currentValue:this.currentValue?this.month=this.items.length?this.currentValue.to:this.currentValue.from:this.max&&this.month.monthSameOrAfter(this.max)?this.month=this.items.length?this.max:this.max.append({month:-1}):this.min&&this.month.monthSameOrBefore(this.min)&&(this.month=this.min)}findItemByDayRange(n){return this.items.find(e=>n.daySame(e.range))??null}};G.\u0275fac=function(e){return new(e||G)},G.\u0275cmp=F({type:G,selectors:[["tui-calendar-range"]],hostVars:2,hostBindings:function(e,t){e&1&&f("keydown.capture",function(o){return t.onEsc(o)},!1,ft),e&2&&Qe("_mobile",t.mobile)},inputs:{disabledItemHandler:"disabledItemHandler",markerHandler:"markerHandler",items:"items",min:"min",max:"max",minLength:"minLength",maxLength:"maxLength",item:"item",valueSetter:[0,"value","valueSetter"],defaultViewedMonth:"defaultViewedMonth"},outputs:{valueChange:"valueChange",itemChange:"itemChange"},features:[O([He(G),ei({rangeMode:!0})]),Tt],decls:6,vars:38,consts:[["automation-id","tui-calendar-range__calendar",3,"hoveredItemChange","dayClick","monthChange","disabledItemHandler","markerHandler","max","maxViewedMonth","min","month","showAdjacent","value","hoveredItem"],[3,"disabledItemHandler","markerHandler","max","min","minViewedMonth","month","showAdjacent","value","hoveredItem"],[3,"hoveredItemChange","dayClick","monthChange","disabledItemHandler","markerHandler","max","min","minViewedMonth","month","showAdjacent","value","hoveredItem"],["automation-id","tui-calendar-range__menu","role","menu",3,"flex"],["automation-id","tui-calendar-range__menu","role","menu"],["automation-id","tui-calendar-range__menu__item","role","menuitemradio","tuiOption","","type","button"],["automation-id","tui-calendar-range__menu__item","role","menuitemradio","tuiOption","","type","button",3,"click","pointerdown.prevent.zoneless"],["automation-id","tui-calendar-range__checkmark",3,"icon","font-size"],["automation-id","tui-calendar-range__checkmark",3,"icon"]],template:function(e,t){e&1&&(M(0,"tui-calendar",0),H(1,"tuiMapper"),H(2,"tuiMapper"),H(3,"tuiMapper"),tt("hoveredItemChange",function(o){return et(t.hoveredItem,o)||(t.hoveredItem=o),o}),f("dayClick",function(o){return t.onDayClick(o)})("monthChange",function(o){return t.onMonthChange(o)}),S(),_(4,pi,5,39,"tui-calendar",1)(5,Ti,1,1)),e&2&&(Qe("t-calendar",!t.mobile),A("disabledItemHandler",t.calculatedDisabledItemHandler)("markerHandler",t.markerHandler)("max",ie(1,12,ve(28,ni,t.max,t.capsMapper,t.currentValue,t.maxLength)))("maxViewedMonth",t.items.length||t.mobile?null:Pe(2,18,t.defaultViewedMonth,t.monthOffset,-1))("min",ie(3,22,ve(33,oi,t.min,t.capsMapper,t.currentValue,t.maxLength)))("month",t.defaultViewedMonth)("showAdjacent",!!t.items.length||t.mobile)("value",t.currentValue),Ze("hoveredItem",t.hoveredItem),Ie(4),V(!t.items.length&&!t.mobile?4:5))},dependencies:[fe,Bt,Ut,Ft,Zt],styles:["[_nghost-%COMP%]:not(._mobile){display:flex;min-inline-size:30rem}.t-calendar[_ngcontent-%COMP%]{border-inline-end:1px solid var(--tui-border-normal)}"],changeDetection:0}),mt([Vt],G.prototype,"calculateDisabledItemHandler",1);var Ce=G;var $=class{constructor(n,e,t){this.range=n;this.name=e;this.content=t}toString(){return this.name}};function Qi(r=["For all the time","Today","Yesterday","Current week","Current month","Previous month"]){let n=m.currentLocal(),e=n.append({day:-1}),t=n.append({day:-n.dayOfWeek()}),i=t.append({day:6}),o=n.append({day:1-n.day}),a=o.append({month:1,day:-1}),u=o.append({month:-1});return[new $(new T(k,n),r[0]),new $(new T(n,n),r[1]),new $(new T(e,e),r[2]),new $(new T(t,i),r[3]),new $(new T(o,a),r[4]),new $(new T(u,o.append({day:-1})),r[5])]}var Me={icon:()=>"@tui.calendar",min:k,max:re,valueTransformer:me},[P,ln]=Re(Me);function he(r=ct){let n=s(Yt),e=s(Le);return oe(We,"filler",l(()=>{let{mode:t,separator:i}=e(),o=n()??"",a=o&&St(o[t],i);return r(a)}),{})}var be={DMY:"dd/mm/yyyy",MDY:"mm/dd/yyyy",YMD:"yyyy/mm/dd"},Q=class Q extends de{constructor(){super(...arguments);this.calendar=zt(e=>e instanceof fe||e instanceof Ce);this.el=Ne();this.textfield=s(pe);this.filler=he();this.mobile=s(ae);this.open=Ue();this.icon=je(P);this.handlers=s(Lt);this.dropdownEnabled=Fe(l(()=>!this.native&&this.interactive()));this.options=s(P);this.format=s(Le);this.valueEffect=ne(()=>{let e=this.stringify(this.value())||(this.filler().length===this.el.value.length?"":this.el.value);this.textfield.value.set(e)});this.calendarIn=ne(()=>{this.calendar()&&this.processCalendar(this.calendar())});this.calendarOut=ne(e=>{var i;let t=(i=this.calendar())==null?void 0:i.valueChange.subscribe(o=>this.setDate(o));e(()=>t==null?void 0:t.unsubscribe())});this.native=!!s(w,{optional:!0})&&this.mobile;this.min=b(this.options.min);this.max=b(this.options.max)}set minSetter(e){this.min.set(e instanceof m?e:this.options.min)}set maxSetter(e){this.max.set(e instanceof m?e:this.options.max)}writeValue(e){let t=this.control.pristine&&this.control.untouched&&!e;(U(()=>e!==this.value())||t)&&(super.writeValue(e),this.textfield.value.set(this.stringify(this.value())))}setDate(e){this.onChange(e),this.open.set(!1),this.el.closest("tui-dropdown")||this.el.blur()}processCalendar(e){let t=this.value();e.value=Array.isArray(t)?t[0]:t,e.disabledItemHandler=this.handlers.disabledItemHandler(),e.min=this.min(),e.max=this.max()}onClick(){!this.mobile&&this.dropdownEnabled()&&this.open.update(e=>!e)}stringify(e){return(e==null?void 0:e.toString(this.format().mode,this.format().separator))??""}};Q.\u0275fac=(()=>{let e;return function(i){return(e||(e=y(Q)))(i||Q)}})(),Q.\u0275dir=C({type:Q,hostVars:2,hostBindings:function(t,i){t&1&&f("input",function(a){return i.onValueChange(a.target.value)})("click.capture.stop",function(){return i.onClick()}),t&2&&(we("disabled",i.disabled()),v("inputmode",i.mobile&&i.open()?"none":"numeric"))},inputs:{minSetter:[0,"min","minSetter"],maxSetter:[0,"max","maxSetter"]},features:[g]});var Z=Q,X=class X extends Z{constructor(){super(...arguments);this.identity=s(Be).identityMatcher.set((e,t)=>e.daySame(t));this.mask=Y(l(()=>Jt({separator:this.format().separator,mode:be[this.format().mode],min:this.min().toLocalNativeDate(),max:this.max().toLocalNativeDate()})))}onValueChange(e){var t,i;(i=(t=this.control)==null?void 0:t.control)==null||i.updateValueAndValidity({emitEvent:!1}),this.onChange(e.length===xe?m.normalizeParse(e,this.format().mode):null)}};X.\u0275fac=(()=>{let e;return function(i){return(e||(e=y(X)))(i||X)}})(),X.\u0275dir=C({type:X,selectors:[["input","tuiInputDate",""]],features:[O([le(Te),W(X),z(P)]),h([B,se,ue,j]),g]});var Se=X;var hi=["tuiInputDate","","type","date"];function yi(r,n){if(r&1){let e=N();M(0,"input",2),f("click.stop.zoneless",function(){return d(e),c(0)})("input",function(i){d(e);let o=p(2);return c(o.onInput(i.target.value))})("pointerdown.stop.zoneless",function(){return d(e),c(0)}),S()}if(r&2){let e,t=p(2);A("max",t.host.max().toJSON())("min",t.host.min().toJSON())("value",(e=t.host.value())==null?null:e.toJSON()),v("list",t.list)}}function gi(r,n){r&1&&_(0,yi,1,4,"input",1)}var ge=class ge{constructor(){this.host=s(Se);this.list=null}onInput(n){if(!n)return this.host.onChange(null);let[e=0,t=0,i=0]=n.split("-").map(Number);this.host.onChange(new m(e,t-1,i))}};ge.\u0275fac=function(e){return new(e||ge)},ge.\u0275cmp=F({type:ge,selectors:[["input","tuiInputDate","","type","date"]],hostAttrs:["ngSkipHydration","true"],hostVars:1,hostBindings:function(e,t){e&2&&v("list",null)},inputs:{list:"list"},features:[h([w])],attrs:hi,decls:1,vars:1,consts:[["type","date",3,"max","min","value"],["type","date",3,"max","min","value","click.stop.zoneless","input","pointerdown.stop.zoneless",4,"tuiTextfieldContent"],["type","date",3,"click.stop.zoneless","input","pointerdown.stop.zoneless","max","min","value"]],template:function(e,t){e&1&&_(0,gi,1,0,"input",0),e&2&&V(t.host.native?0:-1)},dependencies:[ce],styles:[`tui-textfield input[tuiInputDate]~.t-content input[type=date]{position:absolute;inset:0 0 0 auto;inline-size:2.5rem;padding:0;opacity:0}tui-textfield input[tuiInputDate]~.t-content input[type=date]::-webkit-calendar-picker-indicator{position:absolute;top:0;left:0;inline-size:100%;block-size:100%}
`],encapsulation:2,changeDetection:0});var at=ge;var $e=new ke("",{factory:()=>q(I({},s(P)),{valueTransformer:me})}),co=r=>Ee($e,r,Me);var J=class J extends Z{constructor(){super(...arguments);this.identity=s(Be).identityMatcher.set((e,t)=>e.daySame(t));this.filler=he(e=>`${e}${Pt}${e}`);this.mask=Y(l(()=>qt({dateSeparator:this.format().separator,mode:be[this.format().mode],min:this.min().toLocalNativeDate(),max:this.max().toLocalNativeDate(),minLength:this.minLength()||{},maxLength:this.maxLength()||{}})));this.minLength=b(null);this.maxLength=b(null)}set minLengthSetter(e){this.minLength.set(e)}set maxLengthSetter(e){this.maxLength.set(e)}processCalendar(e){super.processCalendar(e),e.minLength=this.minLength(),e.maxLength=this.maxLength()}onValueChange(e){var t,i;(i=(t=this.control)==null?void 0:t.control)==null||i.updateValueAndValidity({emitEvent:!1}),this.onChange(e.length===Rt?T.normalizeParse(e,this.format().mode):null)}};J.\u0275fac=(()=>{let e;return function(i){return(e||(e=y(J)))(i||J)}})(),J.\u0275dir=C({type:J,selectors:[["input","tuiInputDateRange",""]],inputs:{minLengthSetter:[0,"minLength","minLengthSetter"],maxLengthSetter:[0,"maxLength","maxLengthSetter"]},features:[O([W(J),z($e),Ot(P,$e)]),h([B,se,j]),g]});var st=J;var _i={icon:()=>"@tui.clock",mode:"HH:MM",timeSegmentMaxValues:{},timeSegmentMinValues:{},valueTransformer:null},[Xe,Vo]=Re(_i);var E=class E extends de{constructor(){super(...arguments);this.textfield=s(pe);this.dropdown=s(Ht);this.open=Ue();this.options=s(Xe);this.fillers=s(Ye);this.icon=je(Xe);this.dropdownEnabled=Fe(l(()=>!this.native&&this.interactive()));this.filler=oe(We,"filler",l((e=(t=>(t=this.fillers())==null?void 0:t[this.timeMode()])()??"")=>this.postfix()?"":this.prefix()+e),{});this.mask=Y(l(()=>this.computeMask(q(I({},this.options),{mode:this.timeMode(),step:this.interactive()&&!this.dropdown._content()?1:0,prefix:this.prefix(),postfix:this.postfix()}))));this.accept=De([]);this.native=!!s(w,{optional:!0})&&s(ae);this.timeMode=De(this.options.mode,{alias:"mode"});this.prefix=De("");this.postfix=De("")}setValue(e){this.onChange(e),e?this.textfield.value.set(this.stringify(e)):this.textfield.setValue(e),!e&&this.dropdownEnabled()&&this.open.set(!0)}writeValue(e){let t=this.control.pristine&&this.control.untouched&&!e;(U(()=>e!==this.value())||t)&&(super.writeValue(e),U(()=>this.textfield.value.set(this.stringify(this.value()))))}onInput(e){var a,u;let t=e.replace(this.prefix(),"").replace(this.postfix(),""),i=t.length===this.timeMode().length?x.fromString(t):null,o=this.accept().length&&i?this.findNearestTime(i,this.accept()):i;(u=(a=this.control)==null?void 0:a.control)==null||u.updateValueAndValidity({emitEvent:!1}),this.onChange(o),o&&o!==i&&this.textfield.value.set(this.stringify(o))}toggle(){this.open.update(e=>!e)}onBlur(e){var i,o;let t=e.replace(this.prefix(),"").replace(this.postfix(),"");if(t&&!this.value()){let a=x.fromString(t),u=this.accept().length?this.findNearestTime(a,this.accept()):a;(o=(i=this.control)==null?void 0:i.control)==null||o.updateValueAndValidity({emitEvent:!1}),this.onChange(u),u&&this.textfield.value.set(this.stringify(u))}}computeMask(e){let t=Kt(e),{mode:i,prefix:o,postfix:a}=e,u=Ge(R=>{R.inputMode=R.selectionStart>=i.indexOf(" AA")?"text":"numeric"}),D=$t(R=>[o.length,R.length-a.length]);return q(I({},t),{plugins:t.plugins.concat(D,Gt(o+a),Xt(o+a),i.includes("AA")?u:[])})}findNearestTime(e,t){return t.reduce((i,o)=>Math.abs(o.valueOf()-e.valueOf())<Math.abs(i.valueOf()-e.valueOf())?o:i)}stringify(e){return this.prefix()+((e==null?void 0:e.toString(this.timeMode()))||"")+this.postfix()}};E.\u0275fac=(()=>{let e;return function(i){return(e||(e=y(E)))(i||E)}})(),E.\u0275dir=C({type:E,selectors:[["input","tuiInputTime",""]],hostAttrs:["inputmode","numeric"],hostVars:1,hostBindings:function(t,i){t&1&&f("click",function(){return i.toggle()})("input",function(a){return i.onInput(a.target.value)})("blur",function(a){return i.onBlur(a.target.value)}),t&2&&we("disabled",i.disabled())},inputs:{accept:[1,"accept"],timeMode:[1,"mode","timeMode"],prefix:[1,"prefix"],postfix:[1,"postfix"]},features:[O([W(E),ze(E),He(E),z(Xe),le(Te)]),h([B,j]),g]});var Ae=E;var Di=["tuiInputTime","","type","time"];function Ii(r,n){if(r&1){let e=N();M(0,"input",2),f("change",function(i){d(e);let o=p(2);return c(o.setValue(i.target.value))}),S()}if(r&2){let e=p(2);A("step",e.step())("value",e.value()),v("list",e.list)}}function vi(r,n){r&1&&_(0,Ii,1,3,"input",1)}var _e=class _e{constructor(){this.list=Ne().getAttribute("list")}getStep(n){switch(n){case"HH:MM:SS":case"HH:MM:SS AA":return 1;case"HH:MM:SS.MSS":case"HH:MM:SS.MSS AA":return .001;default:return 60}}toISOString(n){let[e,t]=Array.isArray(n)?n:[null,n],i=e?e.toJSON()+(t?"T":""):"",o=t?t.toString("HH:MM:SS.MSS"):"";return i+o}};_e.\u0275fac=function(e){return new(e||_e)},_e.\u0275dir=C({type:_e,hostVars:1,hostBindings:function(e,t){e&2&&v("list",null)},standalone:!1});var Ve=_e,ee=class ee extends Ve{constructor(){super(...arguments);this.control=s(de);this.host=s(Ae);this.textfield=s(pe);this.value=l(()=>this.toISOString(this.control.value()));this.step=l(()=>this.getStep(this.host.timeMode()))}setValue(e){this.host.setValue(x.fromString(e))}};ee.\u0275fac=(()=>{let e;return function(i){return(e||(e=y(ee)))(i||ee)}})(),ee.\u0275cmp=F({type:ee,selectors:[["input","tuiInputTime","","type","time"]],hostAttrs:["ngSkipHydration","true"],features:[h([w]),g],attrs:Di,decls:1,vars:1,consts:[["type","time",3,"step","value"],["type","time",3,"step","value","change",4,"tuiTextfieldContent"],["type","time",3,"change","step","value"]],template:function(t,i){t&1&&_(0,vi,1,0,"input",0),t&2&&V(i.host.native?0:-1)},dependencies:[ce],styles:[`tui-textfield input[tuiInputTime]~.t-content input[type=time]{position:absolute;right:0;left:auto;inline-size:calc(var(--t-right) + var(--t-padding));opacity:0;margin:0;padding:0}tui-textfield input[tuiInputTime]~.t-content input[type=time]::-webkit-calendar-picker-indicator{position:absolute;top:0;left:0;inline-size:100%;block-size:100%}
`],encapsulation:2,changeDetection:0});var ut=ee;var ai={valueTransformer:me,timeMode:"HH:MM",dateTimeSeparator:", "},Je=new ke("",{factory:()=>I(I({},s(P)),ai)}),mr=r=>Ee(Je,r,I(I({},Me),ai));var si=new x(0,0),ui=x.fromAbsoluteMilliseconds(Et-1),L=class L extends Z{constructor(){super(...arguments);this.timeFillers=s(Ye);this.options=s(Je);this.filler=he(e=>{var i;let t=((i=this.timeFillers())==null?void 0:i[this.timeMode()])??"";return`${e}${this.options.dateTimeSeparator}${t}`});this.valueEffect=ne(dt);this.identity=this.handlers.identityMatcher.set((e,t)=>it(...e.map(Number))===it(...t.map(Number)));this.disabledItemHandler=oe(ue,"disabledItemHandler",e=>!!(e&&this.handlers.disabledItemHandler()(e)));this.mask=Y(l(()=>this.computeMask({dateMode:be[this.format().mode],timeMode:this.timeMode(),min:this.toNativeDate([this.min(),this.minTime()]),max:this.toNativeDate([this.max(),this.maxTime()]),dateSeparator:this.format().separator,dateTimeSeparator:this.options.dateTimeSeparator})));this.timeMode=b(this.options.timeMode);this.minTime=b(si);this.maxTime=b(ui)}set timeModeSetter(e){this.timeMode.set(e)}set minSetter(e){let[t,i]=Array.isArray(e)?e:[e,null];this.min.set(t||this.options.min),this.minTime.set(i??si)}set maxSetter(e){let[t,i]=Array.isArray(e)?e:[e,null];this.max.set(t||this.options.max),this.maxTime.set(i??ui)}setValue(e){this.onChange(e),this.textfield.value.set(this.stringify(e))}setDate(e){var o;let[t,i]=this.clampTime([e,((o=this.value())==null?void 0:o[1])??null]);this.setValue([t,i]),this.open.set(!1),setTimeout((a=xe+this.options.dateTimeSeparator.length)=>this.el.setSelectionRange(a,a))}writeValue(e){let t=this.control.pristine&&this.control.untouched&&!e;(U(()=>e!==this.value())||t)&&(super.writeValue(e),U(()=>this.textfield.value.set(this.stringify(this.value()))))}processCalendar(e){super.processCalendar(e),e.disabledItemHandler=t=>this.handlers.disabledItemHandler()([t,null])}onValueChange(e){var R,pt;this.textfield.value.set(e),(pt=(R=this.control)==null?void 0:R.control)==null||pt.updateValueAndValidity({emitEvent:!1});let[t="",i=""]=e.split(this.options.dateTimeSeparator),o=t.length>=xe?m.normalizeParse(t,this.format().mode):null,a=i.length===this.timeMode().length?x.fromString(i):null;if(!o||i&&!a)return this.onChange(null);let[u,D=null]=this.value()??[];(!(u!=null&&u.daySame(o))||Number(a)!==Number(D))&&this.onChange([o,a])}stringify(e){let[t,i]=e??[],o=(t==null?void 0:t.toString(this.format().mode,this.format().separator))??"",a=i==null?void 0:i.toString(this.timeMode());return a?`${o}${this.options.dateTimeSeparator}${a}`:o}clampTime([e,t]){let i=e.daySame(this.min())?this.minTime().toAbsoluteMilliseconds():-1/0,o=e.daySame(this.max())?this.maxTime().toAbsoluteMilliseconds():1/0;return[e,t&&x.fromAbsoluteMilliseconds(bt(t.toAbsoluteMilliseconds(),i,o))]}computeMask(e){let t=Qt(e),{timeMode:i,dateMode:o,dateTimeSeparator:a}=e,u=Ge(D=>{D.inputMode=D.selectionStart>=o.length+a.length+i.indexOf(" AA")?"text":"numeric"});return q(I({},t),{plugins:t.plugins.concat(i.includes("AA")?u:[])})}toNativeDate([{year:e,month:t,day:i},{hours:o,minutes:a,seconds:u,ms:D}]){return new Date(e,t,i,o,a,u,D)}};L.\u0275fac=(()=>{let e;return function(i){return(e||(e=y(L)))(i||L)}})(),L.\u0275dir=C({type:L,selectors:[["input","tuiInputDateTime",""]],inputs:{timeModeSetter:[0,"timeMode","timeModeSetter"],minSetter:[0,"min","minSetter"],maxSetter:[0,"max","maxSetter"]},features:[O([le(Te),W(L),ze(L),z(Je)]),h([j,se,ue,B]),g]});var Oe=L;var xi=["tuiInputDateTime","","type","datetime-local"];function Ci(r,n){if(r&1){let e=N();M(0,"input",2),f("click.stop.zoneless",function(){return d(e),c(0)})("input",function(i){d(e);let o=p(2);return c(o.onInput(i.target.value))})("pointerdown.stop.zoneless",function(){return d(e),c(0)}),S()}if(r&2){let e=p(2);A("max",e.max())("min",e.min())("step",e.step())("value",e.value()),v("list",e.list)}}function Mi(r,n){r&1&&_(0,Ci,1,5,"input",1)}var te=class te extends Ve{constructor(){super(...arguments);this.host=s(Oe);this.step=l(()=>this.getStep(this.host.timeMode()));this.value=l(()=>this.toISOString(this.host.value()));this.min=l(()=>this.toISOString([this.host.min(),this.host.minTime()]));this.max=l(()=>this.toISOString([this.host.max(),this.host.maxTime()]))}onInput(e){if(!e)return this.host.setValue(null);let t=new Date(e),i=m.fromLocalNativeDate(t),o=x.fromLocalNativeDate(t);this.host.setValue([i,o])}};te.\u0275fac=(()=>{let e;return function(i){return(e||(e=y(te)))(i||te)}})(),te.\u0275cmp=F({type:te,selectors:[["input","tuiInputDateTime","","type","datetime-local"]],hostAttrs:["ngSkipHydration","true"],features:[h([w]),g],attrs:xi,decls:1,vars:1,consts:[["type","datetime-local",3,"max","min","step","value"],["type","datetime-local",3,"max","min","step","value","click.stop.zoneless","input","pointerdown.stop.zoneless",4,"tuiTextfieldContent"],["type","datetime-local",3,"click.stop.zoneless","input","pointerdown.stop.zoneless","max","min","step","value"]],template:function(t,i){t&1&&_(0,Mi,1,0,"input",0),t&2&&V(i.host.native?0:-1)},dependencies:[ce],styles:[`tui-textfield input[tuiInputDateTime]~.t-content input[type=datetime-local]{position:absolute;inset:0 0 0 auto;inline-size:2.5rem;padding:0;opacity:0}tui-textfield input[tuiInputDateTime]~.t-content input[type=datetime-local]::-webkit-calendar-picker-indicator{position:absolute;top:0;left:0;inline-size:100%;block-size:100%}
`],encapsulation:2,changeDetection:0});var lt=te;export{ti as a,ii as b,Ce as c,$ as d,Qi as e,he as f,Me as g,P as h,ln as i,be as j,Se as k,at as l,co as m,st as n,Vo as o,Ae as p,ut as q,mr as r,Oe as s,lt as t};
