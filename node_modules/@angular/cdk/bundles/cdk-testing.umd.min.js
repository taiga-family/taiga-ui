!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define("@angular/cdk/testing",["exports"],e):e(((t=t||self).ng=t.ng||{},t.ng.cdk=t.ng.cdk||{},t.ng.cdk.testing={}))}(this,(function(t){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function e(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(s,u)}c((r=r.apply(t,e||[])).next())}))}function n(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function c(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}function r(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function o(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function i(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var s,u=function(){function t(t){this.locatorFactory=t}return t.prototype.host=function(){return e(this,void 0,void 0,(function(){return n(this,(function(t){return[2,this.locatorFactory.rootElement]}))}))},t.prototype.documentRootLocatorFactory=function(){return this.locatorFactory.documentRootLocatorFactory()},t.prototype.locatorFor=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this.locatorFactory).locatorFor.apply(t,i(e))},t.prototype.locatorForOptional=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this.locatorFactory).locatorForOptional.apply(t,i(e))},t.prototype.locatorForAll=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this.locatorFactory).locatorForAll.apply(t,i(e))},t.prototype.forceStabilize=function(){return e(this,void 0,void 0,(function(){return n(this,(function(t){return[2,this.locatorFactory.forceStabilize()]}))}))},t.prototype.waitForTasksOutsideAngular=function(){return e(this,void 0,void 0,(function(){return n(this,(function(t){return[2,this.locatorFactory.waitForTasksOutsideAngular()]}))}))},t}(),c=function(){function t(t,e){this.harnessType=t,this._predicates=[],this._descriptions=[],this._addBaseOptions(e)}return t.stringMatches=function(t,r){return e(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return[4,t];case 1:return t=e.sent(),null===r?[2,null===t]:null===t?[2,!1]:[2,"string"==typeof r?t===r:r.test(t)]}}))}))},t.prototype.add=function(t,e){return this._descriptions.push(t),this._predicates.push(e),this},t.prototype.addOption=function(t,e,n){return void 0!==e&&this.add(t+" = "+function r(t){if(void 0===t)return"undefined";try{return JSON.stringify(t,(function(t,e){return e instanceof RegExp?"/"+e.toString()+"/":"string"==typeof e?e.replace("///g","\\/"):e})).replace(/"\/\//g,"\\/").replace(/\/\/"/g,"\\/").replace(/\\\//g,"/")}catch(t){return"{...}"}}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */(e),(function(t){return n(t,e)})),this},t.prototype.filter=function(t){return e(this,void 0,void 0,(function(){var e,r=this;return n(this,(function(n){switch(n.label){case 0:return[4,Promise.all(t.map((function(t){return r.evaluate(t)})))];case 1:return e=n.sent(),[2,t.filter((function(t,n){return e[n]}))]}}))}))},t.prototype.evaluate=function(t){return e(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return[4,Promise.all(this._predicates.map((function(e){return e(t)})))];case 1:return[2,e.sent().reduce((function(t,e){return t&&e}),!0)]}}))}))},t.prototype.getDescription=function(){return this._descriptions.join(", ")},t.prototype.getSelector=function(){var t=this;return this._ancestor.split(",").map((function(e){return(e.trim()+" "+t.harnessType.hostSelector).trim()})).join(",")},t.prototype._addBaseOptions=function(t){var r=this;this._ancestor=t.ancestor||"",this._ancestor&&this._descriptions.push('has ancestor matching selector "'+this._ancestor+'"');var o=t.selector;void 0!==o&&this.add('host matches selector "'+o+'"',(function(t){return e(r,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return[4,t.host()];case 1:return[2,e.sent().matchesSelector(o)]}}))}))}))},t}(),a=function(){function t(t){this.rawRootElement=t,this.rootElement=this.createTestElement(t)}return t.prototype.documentRootLocatorFactory=function(){return this.createEnvironment(this.getDocumentRoot())},t.prototype.locatorFor=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return function(){return f(t._getAllHarnessesAndTestElements(e),h(e))}},t.prototype.locatorForOptional=function(){for(var t=this,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return function(){return e(t,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return[4,this._getAllHarnessesAndTestElements(r)];case 1:return[2,t.sent()[0]||null]}}))}))}},t.prototype.locatorForAll=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return function(){return t._getAllHarnessesAndTestElements(e)}},t.prototype.harnessLoaderFor=function(t){return e(this,void 0,void 0,(function(){var e;return n(this,(function(n){switch(n.label){case 0:return e=this.createEnvironment,[4,f(this.getAllRawElements(t),[p(t)])];case 1:return[2,e.apply(this,[n.sent()])]}}))}))},t.prototype.harnessLoaderForOptional=function(t){return e(this,void 0,void 0,(function(){var e;return n(this,(function(n){switch(n.label){case 0:return[4,this.getAllRawElements(t)];case 1:return[2,(e=n.sent())[0]?this.createEnvironment(e[0]):null]}}))}))},t.prototype.harnessLoaderForAll=function(t){return e(this,void 0,void 0,(function(){var e=this;return n(this,(function(n){switch(n.label){case 0:return[4,this.getAllRawElements(t)];case 1:return[2,n.sent().map((function(t){return e.createEnvironment(t)}))]}}))}))},t.prototype.getHarness=function(t){return this.locatorFor(t)()},t.prototype.getAllHarnesses=function(t){return this.locatorForAll(t)()},t.prototype.getChildLoader=function(t){return e(this,void 0,void 0,(function(){var e;return n(this,(function(n){switch(n.label){case 0:return e=this.createEnvironment,[4,f(this.getAllRawElements(t),[p(t)])];case 1:return[2,e.apply(this,[n.sent()])]}}))}))},t.prototype.getAllChildLoaders=function(t){return e(this,void 0,void 0,(function(){var e=this;return n(this,(function(n){switch(n.label){case 0:return[4,this.getAllRawElements(t)];case 1:return[2,n.sent().map((function(t){return e.createEnvironment(t)}))]}}))}))},t.prototype.createComponentHarness=function(t,e){return new t(this.createEnvironment(e))},t.prototype._getAllHarnessesAndTestElements=function(t){return e(this,void 0,void 0,(function(){var o,s,u,a,f,h,p,d,y,v=this;return n(this,(function(m){switch(m.label){case 0:return o=function g(t){var e,n,o=[],i=[],s=[],u=new Set;try{for(var a=r(t),l=a.next();!l.done;l=a.next()){var f=l.value;if("string"==typeof f)o.push(f),s.push(f);else{var h=f instanceof c?f:new c(f,{});o.push(h),i.push(h),u.add(h.harnessType)}}}catch(t){e={error:t}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return{allQueries:o,harnessQueries:i,elementQueries:s,harnessTypes:u}}(t),s=o.allQueries,f=o.harnessTypes,[4,this.getAllRawElements(i(a=o.elementQueries,(u=o.harnessQueries).map((function(t){return t.getSelector()}))).join(","))];case 1:return h=m.sent(),p=0===a.length&&1===f.size||0===u.length,[4,Promise.all(h.map((function(t){return e(v,void 0,void 0,(function(){var e,r=this;return n(this,(function(n){switch(n.label){case 0:return e=this.createTestElement(t),[4,Promise.all(s.map((function(n){return r._getQueryResultForElement(n,t,e,p)})))];case 1:return[2,l(n.sent())]}}))}))})))];case 2:return d=m.sent(),[2,(y=[]).concat.apply(y,i(d))]}}))}))},t.prototype._getQueryResultForElement=function(t,r,o,i){return void 0===i&&(i=!1),e(this,void 0,void 0,(function(){var e,s,u;return n(this,(function(n){switch(n.label){case 0:return"string"!=typeof t?[3,3]:(e=i)?[3,2]:[4,o.matchesSelector(t)];case 1:e=n.sent(),n.label=2;case 2:return[2,e?o:null];case 3:return(s=i)?[3,5]:[4,o.matchesSelector(t.getSelector())];case 4:s=n.sent(),n.label=5;case 5:return s?(u=this.createComponentHarness(t.harnessType,r),[4,t.evaluate(u)]):[3,7];case 6:return[2,n.sent()?u:null];case 7:return[2,null]}}))}))},t}();function l(t){return e(this,void 0,void 0,(function(){var e,o,i,s,c,a,l,f;return n(this,(function(n){e=!1,o=new Set,i=[];try{for(s=r(t),c=s.next();!c.done;c=s.next())(a=c.value)&&(a instanceof u?o.has(a.constructor)||(o.add(a.constructor),i.push(a)):e||(e=!0,i.push(a)))}catch(t){l={error:t}}finally{try{c&&!c.done&&(f=s.return)&&f.call(s)}finally{if(l)throw l.error}}return[2,i]}))}))}function f(t,r){return e(this,void 0,void 0,(function(){var e;return n(this,(function(n){switch(n.label){case 0:return[4,t];case 1:if(null==(e=n.sent()[0]))throw Error("Failed to find element matching one of the following queries:\n"+r.map((function(t){return"("+t+")"})).join(",\n"));return[2,e]}}))}))}function h(t){return t.map((function(t){return"string"==typeof t?function e(t){return'TestElement for element matching selector: "'+t+'"'}(t):function n(t){var e=t instanceof c?t:new c(t,{}),n=e.harnessType;return n.name+' with host element matching selector: "'+n.hostSelector+'"'+(e.getDescription()?" satisfying the constraints: "+e.getDescription():"")}(t)}))}function p(t){return'HarnessLoader for element matching selector: "'+t+'"'}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */(s=t.TestKey||(t.TestKey={}))[s.BACKSPACE=0]="BACKSPACE",s[s.TAB=1]="TAB",s[s.ENTER=2]="ENTER",s[s.SHIFT=3]="SHIFT",s[s.CONTROL=4]="CONTROL",s[s.ALT=5]="ALT",s[s.ESCAPE=6]="ESCAPE",s[s.PAGE_UP=7]="PAGE_UP",s[s.PAGE_DOWN=8]="PAGE_DOWN",s[s.END=9]="END",s[s.HOME=10]="HOME",s[s.LEFT_ARROW=11]="LEFT_ARROW",s[s.UP_ARROW=12]="UP_ARROW",s[s.RIGHT_ARROW=13]="RIGHT_ARROW",s[s.DOWN_ARROW=14]="DOWN_ARROW",s[s.INSERT=15]="INSERT",s[s.DELETE=16]="DELETE",s[s.F1=17]="F1",s[s.F2=18]="F2",s[s.F3=19]="F3",s[s.F4=20]="F4",s[s.F5=21]="F5",s[s.F6=22]="F6",s[s.F7=23]="F7",s[s.F8=24]="F8",s[s.F9=25]="F9",s[s.F10=26]="F10",s[s.F11=27]="F11",s[s.F12=28]="F12",s[s.META=29]="META",
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
t.ComponentHarness=u,t.HarnessEnvironment=a,t.HarnessPredicate=c,Object.defineProperty(t,"__esModule",{value:!0})}));