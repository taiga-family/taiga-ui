{"version":3,"sources":["packages/common/common-upgrade.umd.js"],"names":["global","factory","exports","module","require","define","amd","self","ng","common","upgrade","rxjs","core","static","this","_static","__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","PATH_MATCH","DOUBLE_SLASH_REGEX","IGNORE_URI_REGEXP","DEFAULT_PORTS","http:","https:","ftp:","$locationShim","$injector","location","platformLocation","urlCodec","locationStrategy","_this","initalizing","updateBrowser","$$absUrl","$$url","$$host","$$replace","$$path","$$search","$$hash","$$changeListeners","cachedState","urlChanges","ReplaySubject","lastBrowserUrl","lastCachedState","initialUrl","browserUrl","parsedUrl","parse","$$protocol","protocol","hostname","$$port","parseInt","port","$$parseLinkUrl","cacheState","$$state","browserState","onUrlChange","newUrl","newState","next","isPromise","obj","then","$i","initialize","$rootScope","get","$rootElement","on","event","ctrlKey","metaKey","shiftKey","which","button","elm","target","nodeName","toLowerCase","parentNode","isAnchor","el","undefined","href","absHref","relHref","getAttribute","test","isDefaultPrevented","preventDefault","absUrl","$apply","subscribe","_a","oldUrl","oldState","$$parse","defaultPrevented","$broadcast","state","setBrowserUrlWithFallback","$$notifyChangeListeners","url","resetBrowserUpdate","$$phase","$digest","$watch","oldUrl_1","oldState_1","currentReplace_1","urlOrStateChanged_1","areEqual","$evalAsync","replace","sameState","lastHistoryState","stripBaseUrl","getServerBase","replaceState","pushState","getState","deepEqual","a","b","Array","isArray","JSON","stringify","e","base","startsWith","substr","getBaseHref","endsWith","parseAppUrl","Error","prefixed","charAt","match","path","pathname","substring","decodePath","decodeSearch","search","decodeHash","hash","onChange","fn","err","push","forEach","_b","__read","o","m","Symbol","iterator","r","ar","done","value","error","pathUrl","composeUrls","slice","rewrittenUrl","appUrl","normalize","exec","host","toString","paramValue","key","currentSearch","$locationShimProvider","ngUpgrade","$get","hashPrefix","prefix","html5Mode","mode","UrlCodec","AngularJSUrlCodec","encodePath","segments","split","encodeUriSegment","_stripIndexHtml","join","encodeSearch","parseKeyValue","toKeyValue","parts","_loop_1","arrayValue","encodeUriQuery","encodeHash","decodeURIComponent","pathOrHref","baseUrl","parsed","serverUrl","encPath","encSearch","encHash","joinedPath","valA","valB","URL","tryDecodeURIComponent","keyValue","splitPoint","val","indexOf","pctEncodeSpaces","encodeURIComponent","LOCATION_UPGRADE_CONFIGURATION","InjectionToken","APP_BASE_HREF_RESOLVED","LocationUpgradeModule","LocationUpgradeModule_1","config","ngModule","providers","Location","provide","useFactory","provide$location","deps","UpgradeModule","PlatformLocation","LocationStrategy","useValue","provideUrlCodec","provideAppBaseHref","Inject","APP_BASE_HREF","Optional","provideLocationStrategy","__decorate","decorators","desc","d","c","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","NgModule","imports","CommonModule","appBaseHref","baseHref","options","useHash","HashLocationStrategy","PathLocationStrategy","ɵangular_packages_common_upgrade_upgrade_a","ɵangular_packages_common_upgrade_upgrade_b","ɵangular_packages_common_upgrade_upgrade_c","ɵangular_packages_common_upgrade_upgrade_d"],"mappings":"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","sourcesContent":["/**\n * @license Angular v9.1.12\n * (c) 2010-2020 Google LLC. https://angular.io/\n * License: MIT\n */\n\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('rxjs'), require('@angular/common'), require('@angular/core'), require('@angular/upgrade/static')) :\n    typeof define === 'function' && define.amd ? define('@angular/common/upgrade', ['exports', 'rxjs', '@angular/common', '@angular/core', '@angular/upgrade/static'], factory) :\n    (global = global || self, factory((global.ng = global.ng || {}, global.ng.common = global.ng.common || {}, global.ng.common.upgrade = {}), global.rxjs, global.ng.common, global.ng.core, global.ng.upgrade.static));\n}(this, (function (exports, rxjs, common, core, _static) { 'use strict';\n\n    /*! *****************************************************************************\r\n    Copyright (c) Microsoft Corporation. All rights reserved.\r\n    Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\n    this file except in compliance with the License. You may obtain a copy of the\r\n    License at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\n    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\n    MERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\n    See the Apache Version 2.0 License for specific language governing permissions\r\n    and limitations under the License.\r\n    ***************************************************************************** */\r\n    /* global Reflect, Promise */\r\n\r\n    var extendStatics = function(d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n\r\n    function __extends(d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    }\r\n\r\n    var __assign = function() {\r\n        __assign = Object.assign || function __assign(t) {\r\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n                s = arguments[i];\r\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n            }\r\n            return t;\r\n        };\r\n        return __assign.apply(this, arguments);\r\n    };\r\n\r\n    function __rest(s, e) {\r\n        var t = {};\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n            t[p] = s[p];\r\n        if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n            for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n                if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                    t[p[i]] = s[p[i]];\r\n            }\r\n        return t;\r\n    }\r\n\r\n    function __decorate(decorators, target, key, desc) {\r\n        var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n        if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n        else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n        return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n    }\r\n\r\n    function __param(paramIndex, decorator) {\r\n        return function (target, key) { decorator(target, key, paramIndex); }\r\n    }\r\n\r\n    function __metadata(metadataKey, metadataValue) {\r\n        if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n    }\r\n\r\n    function __awaiter(thisArg, _arguments, P, generator) {\r\n        function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n        return new (P || (P = Promise))(function (resolve, reject) {\r\n            function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n            function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n            function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n            step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n        });\r\n    }\r\n\r\n    function __generator(thisArg, body) {\r\n        var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n        return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n        function verb(n) { return function (v) { return step([n, v]); }; }\r\n        function step(op) {\r\n            if (f) throw new TypeError(\"Generator is already executing.\");\r\n            while (_) try {\r\n                if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n                if (y = 0, t) op = [op[0] & 2, t.value];\r\n                switch (op[0]) {\r\n                    case 0: case 1: t = op; break;\r\n                    case 4: _.label++; return { value: op[1], done: false };\r\n                    case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                    case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                    default:\r\n                        if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                        if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                        if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                        if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                        if (t[2]) _.ops.pop();\r\n                        _.trys.pop(); continue;\r\n                }\r\n                op = body.call(thisArg, _);\r\n            } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n            if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n        }\r\n    }\r\n\r\n    function __exportStar(m, exports) {\r\n        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n    }\r\n\r\n    function __values(o) {\r\n        var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n        if (m) return m.call(o);\r\n        if (o && typeof o.length === \"number\") return {\r\n            next: function () {\r\n                if (o && i >= o.length) o = void 0;\r\n                return { value: o && o[i++], done: !o };\r\n            }\r\n        };\r\n        throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n    }\r\n\r\n    function __read(o, n) {\r\n        var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n        if (!m) return o;\r\n        var i = m.call(o), r, ar = [], e;\r\n        try {\r\n            while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n        }\r\n        catch (error) { e = { error: error }; }\r\n        finally {\r\n            try {\r\n                if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n            }\r\n            finally { if (e) throw e.error; }\r\n        }\r\n        return ar;\r\n    }\r\n\r\n    function __spread() {\r\n        for (var ar = [], i = 0; i < arguments.length; i++)\r\n            ar = ar.concat(__read(arguments[i]));\r\n        return ar;\r\n    }\r\n\r\n    function __spreadArrays() {\r\n        for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n        for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n            for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n                r[k] = a[j];\r\n        return r;\r\n    };\r\n\r\n    function __await(v) {\r\n        return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n    }\r\n\r\n    function __asyncGenerator(thisArg, _arguments, generator) {\r\n        if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n        var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n        return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n        function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n        function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n        function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n        function fulfill(value) { resume(\"next\", value); }\r\n        function reject(value) { resume(\"throw\", value); }\r\n        function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n    }\r\n\r\n    function __asyncDelegator(o) {\r\n        var i, p;\r\n        return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n        function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n    }\r\n\r\n    function __asyncValues(o) {\r\n        if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n        var m = o[Symbol.asyncIterator], i;\r\n        return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n        function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n        function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n    }\r\n\r\n    function __makeTemplateObject(cooked, raw) {\r\n        if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n        return cooked;\r\n    };\r\n\r\n    function __importStar(mod) {\r\n        if (mod && mod.__esModule) return mod;\r\n        var result = {};\r\n        if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n        result.default = mod;\r\n        return result;\r\n    }\r\n\r\n    function __importDefault(mod) {\r\n        return (mod && mod.__esModule) ? mod : { default: mod };\r\n    }\r\n\r\n    function __classPrivateFieldGet(receiver, privateMap) {\r\n        if (!privateMap.has(receiver)) {\r\n            throw new TypeError(\"attempted to get private field on non-instance\");\r\n        }\r\n        return privateMap.get(receiver);\r\n    }\r\n\r\n    function __classPrivateFieldSet(receiver, privateMap, value) {\r\n        if (!privateMap.has(receiver)) {\r\n            throw new TypeError(\"attempted to set private field on non-instance\");\r\n        }\r\n        privateMap.set(receiver, value);\r\n        return value;\r\n    }\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    function stripPrefix(val, prefix) {\n        return val.startsWith(prefix) ? val.substring(prefix.length) : val;\n    }\n    function deepEqual(a, b) {\n        if (a === b) {\n            return true;\n        }\n        else if (!a || !b) {\n            return false;\n        }\n        else {\n            try {\n                if ((a.prototype !== b.prototype) || (Array.isArray(a) && Array.isArray(b))) {\n                    return false;\n                }\n                return JSON.stringify(a) === JSON.stringify(b);\n            }\n            catch (e) {\n                return false;\n            }\n        }\n    }\n    function isAnchor(el) {\n        return el.href !== undefined;\n    }\n    function isPromise(obj) {\n        // allow any Promise/A+ compliant thenable.\n        // It's up to the caller to ensure that obj.then conforms to the spec\n        return !!obj && typeof obj.then === 'function';\n    }\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    var PATH_MATCH = /^([^?#]*)(\\?([^#]*))?(#(.*))?$/;\n    var DOUBLE_SLASH_REGEX = /^\\s*[\\\\/]{2,}/;\n    var IGNORE_URI_REGEXP = /^\\s*(javascript|mailto):/i;\n    var DEFAULT_PORTS = {\n        'http:': 80,\n        'https:': 443,\n        'ftp:': 21\n    };\n    /**\n     * Location service that provides a drop-in replacement for the $location service\n     * provided in AngularJS.\n     *\n     * @see [Using the Angular Unified Location Service](guide/upgrade#using-the-unified-angular-location-service)\n     *\n     * @publicApi\n     */\n    var $locationShim = /** @class */ (function () {\n        function $locationShim($injector, location, platformLocation, urlCodec, locationStrategy) {\n            var _this = this;\n            this.location = location;\n            this.platformLocation = platformLocation;\n            this.urlCodec = urlCodec;\n            this.locationStrategy = locationStrategy;\n            this.initalizing = true;\n            this.updateBrowser = false;\n            this.$$absUrl = '';\n            this.$$url = '';\n            this.$$host = '';\n            this.$$replace = false;\n            this.$$path = '';\n            this.$$search = '';\n            this.$$hash = '';\n            this.$$changeListeners = [];\n            this.cachedState = null;\n            this.urlChanges = new rxjs.ReplaySubject(1);\n            this.lastBrowserUrl = '';\n            // This variable should be used *only* inside the cacheState function.\n            this.lastCachedState = null;\n            var initialUrl = this.browserUrl();\n            var parsedUrl = this.urlCodec.parse(initialUrl);\n            if (typeof parsedUrl === 'string') {\n                throw 'Invalid URL';\n            }\n            this.$$protocol = parsedUrl.protocol;\n            this.$$host = parsedUrl.hostname;\n            this.$$port = parseInt(parsedUrl.port) || DEFAULT_PORTS[parsedUrl.protocol] || null;\n            this.$$parseLinkUrl(initialUrl, initialUrl);\n            this.cacheState();\n            this.$$state = this.browserState();\n            this.location.onUrlChange(function (newUrl, newState) {\n                _this.urlChanges.next({ newUrl: newUrl, newState: newState });\n            });\n            if (isPromise($injector)) {\n                $injector.then(function ($i) { return _this.initialize($i); });\n            }\n            else {\n                this.initialize($injector);\n            }\n        }\n        $locationShim.prototype.initialize = function ($injector) {\n            var _this = this;\n            var $rootScope = $injector.get('$rootScope');\n            var $rootElement = $injector.get('$rootElement');\n            $rootElement.on('click', function (event) {\n                if (event.ctrlKey || event.metaKey || event.shiftKey || event.which === 2 ||\n                    event.button === 2) {\n                    return;\n                }\n                var elm = event.target;\n                // traverse the DOM up to find first A tag\n                while (elm && elm.nodeName.toLowerCase() !== 'a') {\n                    // ignore rewriting if no A tag (reached root element, or no parent - removed from document)\n                    if (elm === $rootElement[0] || !(elm = elm.parentNode)) {\n                        return;\n                    }\n                }\n                if (!isAnchor(elm)) {\n                    return;\n                }\n                var absHref = elm.href;\n                var relHref = elm.getAttribute('href');\n                // Ignore when url is started with javascript: or mailto:\n                if (IGNORE_URI_REGEXP.test(absHref)) {\n                    return;\n                }\n                if (absHref && !elm.getAttribute('target') && !event.isDefaultPrevented()) {\n                    if (_this.$$parseLinkUrl(absHref, relHref)) {\n                        // We do a preventDefault for all urls that are part of the AngularJS application,\n                        // in html5mode and also without, so that we are able to abort navigation without\n                        // getting double entries in the location history.\n                        event.preventDefault();\n                        // update location manually\n                        if (_this.absUrl() !== _this.browserUrl()) {\n                            $rootScope.$apply();\n                        }\n                    }\n                }\n            });\n            this.urlChanges.subscribe(function (_a) {\n                var newUrl = _a.newUrl, newState = _a.newState;\n                var oldUrl = _this.absUrl();\n                var oldState = _this.$$state;\n                _this.$$parse(newUrl);\n                newUrl = _this.absUrl();\n                _this.$$state = newState;\n                var defaultPrevented = $rootScope.$broadcast('$locationChangeStart', newUrl, oldUrl, newState, oldState)\n                    .defaultPrevented;\n                // if the location was changed by a `$locationChangeStart` handler then stop\n                // processing this location change\n                if (_this.absUrl() !== newUrl)\n                    return;\n                // If default was prevented, set back to old state. This is the state that was locally\n                // cached in the $location service.\n                if (defaultPrevented) {\n                    _this.$$parse(oldUrl);\n                    _this.state(oldState);\n                    _this.setBrowserUrlWithFallback(oldUrl, false, oldState);\n                    _this.$$notifyChangeListeners(_this.url(), _this.$$state, oldUrl, oldState);\n                }\n                else {\n                    _this.initalizing = false;\n                    $rootScope.$broadcast('$locationChangeSuccess', newUrl, oldUrl, newState, oldState);\n                    _this.resetBrowserUpdate();\n                }\n                if (!$rootScope.$$phase) {\n                    $rootScope.$digest();\n                }\n            });\n            // update browser\n            $rootScope.$watch(function () {\n                if (_this.initalizing || _this.updateBrowser) {\n                    _this.updateBrowser = false;\n                    var oldUrl_1 = _this.browserUrl();\n                    var newUrl = _this.absUrl();\n                    var oldState_1 = _this.browserState();\n                    var currentReplace_1 = _this.$$replace;\n                    var urlOrStateChanged_1 = !_this.urlCodec.areEqual(oldUrl_1, newUrl) || oldState_1 !== _this.$$state;\n                    // Fire location changes one time to on initialization. This must be done on the\n                    // next tick (thus inside $evalAsync()) in order for listeners to be registered\n                    // before the event fires. Mimicing behavior from $locationWatch:\n                    // https://github.com/angular/angular.js/blob/master/src/ng/location.js#L983\n                    if (_this.initalizing || urlOrStateChanged_1) {\n                        _this.initalizing = false;\n                        $rootScope.$evalAsync(function () {\n                            // Get the new URL again since it could have changed due to async update\n                            var newUrl = _this.absUrl();\n                            var defaultPrevented = $rootScope\n                                .$broadcast('$locationChangeStart', newUrl, oldUrl_1, _this.$$state, oldState_1)\n                                .defaultPrevented;\n                            // if the location was changed by a `$locationChangeStart` handler then stop\n                            // processing this location change\n                            if (_this.absUrl() !== newUrl)\n                                return;\n                            if (defaultPrevented) {\n                                _this.$$parse(oldUrl_1);\n                                _this.$$state = oldState_1;\n                            }\n                            else {\n                                // This block doesn't run when initalizing because it's going to perform the update to\n                                // the URL which shouldn't be needed when initalizing.\n                                if (urlOrStateChanged_1) {\n                                    _this.setBrowserUrlWithFallback(newUrl, currentReplace_1, oldState_1 === _this.$$state ? null : _this.$$state);\n                                    _this.$$replace = false;\n                                }\n                                $rootScope.$broadcast('$locationChangeSuccess', newUrl, oldUrl_1, _this.$$state, oldState_1);\n                                if (urlOrStateChanged_1) {\n                                    _this.$$notifyChangeListeners(_this.url(), _this.$$state, oldUrl_1, oldState_1);\n                                }\n                            }\n                        });\n                    }\n                }\n                _this.$$replace = false;\n            });\n        };\n        $locationShim.prototype.resetBrowserUpdate = function () {\n            this.$$replace = false;\n            this.$$state = this.browserState();\n            this.updateBrowser = false;\n            this.lastBrowserUrl = this.browserUrl();\n        };\n        $locationShim.prototype.browserUrl = function (url, replace, state) {\n            // In modern browsers `history.state` is `null` by default; treating it separately\n            // from `undefined` would cause `$browser.url('/foo')` to change `history.state`\n            // to undefined via `pushState`. Instead, let's change `undefined` to `null` here.\n            if (typeof state === 'undefined') {\n                state = null;\n            }\n            // setter\n            if (url) {\n                var sameState = this.lastHistoryState === state;\n                // Normalize the inputted URL\n                url = this.urlCodec.parse(url).href;\n                // Don't change anything if previous and current URLs and states match.\n                if (this.lastBrowserUrl === url && sameState) {\n                    return this;\n                }\n                this.lastBrowserUrl = url;\n                this.lastHistoryState = state;\n                // Remove server base from URL as the Angular APIs for updating URL require\n                // it to be the path+.\n                url = this.stripBaseUrl(this.getServerBase(), url) || url;\n                // Set the URL\n                if (replace) {\n                    this.locationStrategy.replaceState(state, '', url, '');\n                }\n                else {\n                    this.locationStrategy.pushState(state, '', url, '');\n                }\n                this.cacheState();\n                return this;\n                // getter\n            }\n            else {\n                return this.platformLocation.href;\n            }\n        };\n        $locationShim.prototype.cacheState = function () {\n            // This should be the only place in $browser where `history.state` is read.\n            this.cachedState = this.platformLocation.getState();\n            if (typeof this.cachedState === 'undefined') {\n                this.cachedState = null;\n            }\n            // Prevent callbacks fo fire twice if both hashchange & popstate were fired.\n            if (deepEqual(this.cachedState, this.lastCachedState)) {\n                this.cachedState = this.lastCachedState;\n            }\n            this.lastCachedState = this.cachedState;\n            this.lastHistoryState = this.cachedState;\n        };\n        /**\n         * This function emulates the $browser.state() function from AngularJS. It will cause\n         * history.state to be cached unless changed with deep equality check.\n         */\n        $locationShim.prototype.browserState = function () {\n            return this.cachedState;\n        };\n        $locationShim.prototype.stripBaseUrl = function (base, url) {\n            if (url.startsWith(base)) {\n                return url.substr(base.length);\n            }\n            return undefined;\n        };\n        $locationShim.prototype.getServerBase = function () {\n            var _a = this.platformLocation, protocol = _a.protocol, hostname = _a.hostname, port = _a.port;\n            var baseHref = this.locationStrategy.getBaseHref();\n            var url = protocol + \"//\" + hostname + (port ? ':' + port : '') + (baseHref || '/');\n            return url.endsWith('/') ? url : url + '/';\n        };\n        $locationShim.prototype.parseAppUrl = function (url) {\n            if (DOUBLE_SLASH_REGEX.test(url)) {\n                throw new Error(\"Bad Path - URL cannot start with double slashes: \" + url);\n            }\n            var prefixed = (url.charAt(0) !== '/');\n            if (prefixed) {\n                url = '/' + url;\n            }\n            var match = this.urlCodec.parse(url, this.getServerBase());\n            if (typeof match === 'string') {\n                throw new Error(\"Bad URL - Cannot parse URL: \" + url);\n            }\n            var path = prefixed && match.pathname.charAt(0) === '/' ? match.pathname.substring(1) : match.pathname;\n            this.$$path = this.urlCodec.decodePath(path);\n            this.$$search = this.urlCodec.decodeSearch(match.search);\n            this.$$hash = this.urlCodec.decodeHash(match.hash);\n            // make sure path starts with '/';\n            if (this.$$path && this.$$path.charAt(0) !== '/') {\n                this.$$path = '/' + this.$$path;\n            }\n        };\n        /**\n         * Registers listeners for URL changes. This API is used to catch updates performed by the\n         * AngularJS framework. These changes are a subset of the `$locationChangeStart` and\n         * `$locationChangeSuccess` events which fire when AngularJS updates its internally-referenced\n         * version of the browser URL.\n         *\n         * It's possible for `$locationChange` events to happen, but for the browser URL\n         * (window.location) to remain unchanged. This `onChange` callback will fire only when AngularJS\n         * actually updates the browser URL (window.location).\n         *\n         * @param fn The callback function that is triggered for the listener when the URL changes.\n         * @param err The callback function that is triggered when an error occurs.\n         */\n        $locationShim.prototype.onChange = function (fn, err) {\n            if (err === void 0) { err = function (e) { }; }\n            this.$$changeListeners.push([fn, err]);\n        };\n        /** @internal */\n        $locationShim.prototype.$$notifyChangeListeners = function (url, state, oldUrl, oldState) {\n            if (url === void 0) { url = ''; }\n            if (oldUrl === void 0) { oldUrl = ''; }\n            this.$$changeListeners.forEach(function (_a) {\n                var _b = __read(_a, 2), fn = _b[0], err = _b[1];\n                try {\n                    fn(url, state, oldUrl, oldState);\n                }\n                catch (e) {\n                    err(e);\n                }\n            });\n        };\n        /**\n         * Parses the provided URL, and sets the current URL to the parsed result.\n         *\n         * @param url The URL string.\n         */\n        $locationShim.prototype.$$parse = function (url) {\n            var pathUrl;\n            if (url.startsWith('/')) {\n                pathUrl = url;\n            }\n            else {\n                // Remove protocol & hostname if URL starts with it\n                pathUrl = this.stripBaseUrl(this.getServerBase(), url);\n            }\n            if (typeof pathUrl === 'undefined') {\n                throw new Error(\"Invalid url \\\"\" + url + \"\\\", missing path prefix \\\"\" + this.getServerBase() + \"\\\".\");\n            }\n            this.parseAppUrl(pathUrl);\n            if (!this.$$path) {\n                this.$$path = '/';\n            }\n            this.composeUrls();\n        };\n        /**\n         * Parses the provided URL and its relative URL.\n         *\n         * @param url The full URL string.\n         * @param relHref A URL string relative to the full URL string.\n         */\n        $locationShim.prototype.$$parseLinkUrl = function (url, relHref) {\n            // When relHref is passed, it should be a hash and is handled separately\n            if (relHref && relHref[0] === '#') {\n                this.hash(relHref.slice(1));\n                return true;\n            }\n            var rewrittenUrl;\n            var appUrl = this.stripBaseUrl(this.getServerBase(), url);\n            if (typeof appUrl !== 'undefined') {\n                rewrittenUrl = this.getServerBase() + appUrl;\n            }\n            else if (this.getServerBase() === url + '/') {\n                rewrittenUrl = this.getServerBase();\n            }\n            // Set the URL\n            if (rewrittenUrl) {\n                this.$$parse(rewrittenUrl);\n            }\n            return !!rewrittenUrl;\n        };\n        $locationShim.prototype.setBrowserUrlWithFallback = function (url, replace, state) {\n            var oldUrl = this.url();\n            var oldState = this.$$state;\n            try {\n                this.browserUrl(url, replace, state);\n                // Make sure $location.state() returns referentially identical (not just deeply equal)\n                // state object; this makes possible quick checking if the state changed in the digest\n                // loop. Checking deep equality would be too expensive.\n                this.$$state = this.browserState();\n            }\n            catch (e) {\n                // Restore old values if pushState fails\n                this.url(oldUrl);\n                this.$$state = oldState;\n                throw e;\n            }\n        };\n        $locationShim.prototype.composeUrls = function () {\n            this.$$url = this.urlCodec.normalize(this.$$path, this.$$search, this.$$hash);\n            this.$$absUrl = this.getServerBase() + this.$$url.substr(1); // remove '/' from front of URL\n            this.updateBrowser = true;\n        };\n        /**\n         * Retrieves the full URL representation with all segments encoded according to\n         * rules specified in\n         * [RFC 3986](http://www.ietf.org/rfc/rfc3986.txt).\n         *\n         *\n         * ```js\n         * // given URL http://example.com/#/some/path?foo=bar&baz=xoxo\n         * let absUrl = $location.absUrl();\n         * // => \"http://example.com/#/some/path?foo=bar&baz=xoxo\"\n         * ```\n         */\n        $locationShim.prototype.absUrl = function () {\n            return this.$$absUrl;\n        };\n        $locationShim.prototype.url = function (url) {\n            if (typeof url === 'string') {\n                if (!url.length) {\n                    url = '/';\n                }\n                var match = PATH_MATCH.exec(url);\n                if (!match)\n                    return this;\n                if (match[1] || url === '')\n                    this.path(this.urlCodec.decodePath(match[1]));\n                if (match[2] || match[1] || url === '')\n                    this.search(match[3] || '');\n                this.hash(match[5] || '');\n                // Chainable method\n                return this;\n            }\n            return this.$$url;\n        };\n        /**\n         * Retrieves the protocol of the current URL.\n         *\n         * ```js\n         * // given URL http://example.com/#/some/path?foo=bar&baz=xoxo\n         * let protocol = $location.protocol();\n         * // => \"http\"\n         * ```\n         */\n        $locationShim.prototype.protocol = function () {\n            return this.$$protocol;\n        };\n        /**\n         * Retrieves the protocol of the current URL.\n         *\n         * In contrast to the non-AngularJS version `location.host` which returns `hostname:port`, this\n         * returns the `hostname` portion only.\n         *\n         *\n         * ```js\n         * // given URL http://example.com/#/some/path?foo=bar&baz=xoxo\n         * let host = $location.host();\n         * // => \"example.com\"\n         *\n         * // given URL http://user:password@example.com:8080/#/some/path?foo=bar&baz=xoxo\n         * host = $location.host();\n         * // => \"example.com\"\n         * host = location.host;\n         * // => \"example.com:8080\"\n         * ```\n         */\n        $locationShim.prototype.host = function () {\n            return this.$$host;\n        };\n        /**\n         * Retrieves the port of the current URL.\n         *\n         * ```js\n         * // given URL http://example.com/#/some/path?foo=bar&baz=xoxo\n         * let port = $location.port();\n         * // => 80\n         * ```\n         */\n        $locationShim.prototype.port = function () {\n            return this.$$port;\n        };\n        $locationShim.prototype.path = function (path) {\n            if (typeof path === 'undefined') {\n                return this.$$path;\n            }\n            // null path converts to empty string. Prepend with \"/\" if needed.\n            path = path !== null ? path.toString() : '';\n            path = path.charAt(0) === '/' ? path : '/' + path;\n            this.$$path = path;\n            this.composeUrls();\n            return this;\n        };\n        $locationShim.prototype.search = function (search, paramValue) {\n            switch (arguments.length) {\n                case 0:\n                    return this.$$search;\n                case 1:\n                    if (typeof search === 'string' || typeof search === 'number') {\n                        this.$$search = this.urlCodec.decodeSearch(search.toString());\n                    }\n                    else if (typeof search === 'object' && search !== null) {\n                        // Copy the object so it's never mutated\n                        search = __assign({}, search);\n                        // remove object undefined or null properties\n                        for (var key in search) {\n                            if (search[key] == null)\n                                delete search[key];\n                        }\n                        this.$$search = search;\n                    }\n                    else {\n                        throw new Error('LocationProvider.search(): First argument must be a string or an object.');\n                    }\n                    break;\n                default:\n                    if (typeof search === 'string') {\n                        var currentSearch = this.search();\n                        if (typeof paramValue === 'undefined' || paramValue === null) {\n                            delete currentSearch[search];\n                            return this.search(currentSearch);\n                        }\n                        else {\n                            currentSearch[search] = paramValue;\n                            return this.search(currentSearch);\n                        }\n                    }\n            }\n            this.composeUrls();\n            return this;\n        };\n        $locationShim.prototype.hash = function (hash) {\n            if (typeof hash === 'undefined') {\n                return this.$$hash;\n            }\n            this.$$hash = hash !== null ? hash.toString() : '';\n            this.composeUrls();\n            return this;\n        };\n        /**\n         * Changes to `$location` during the current `$digest` will replace the current\n         * history record, instead of adding a new one.\n         */\n        $locationShim.prototype.replace = function () {\n            this.$$replace = true;\n            return this;\n        };\n        $locationShim.prototype.state = function (state) {\n            if (typeof state === 'undefined') {\n                return this.$$state;\n            }\n            this.$$state = state;\n            return this;\n        };\n        return $locationShim;\n    }());\n    /**\n     * The factory function used to create an instance of the `$locationShim` in Angular,\n     * and provides an API-compatiable `$locationProvider` for AngularJS.\n     *\n     * @publicApi\n     */\n    var $locationShimProvider = /** @class */ (function () {\n        function $locationShimProvider(ngUpgrade, location, platformLocation, urlCodec, locationStrategy) {\n            this.ngUpgrade = ngUpgrade;\n            this.location = location;\n            this.platformLocation = platformLocation;\n            this.urlCodec = urlCodec;\n            this.locationStrategy = locationStrategy;\n        }\n        /**\n         * Factory method that returns an instance of the $locationShim\n         */\n        $locationShimProvider.prototype.$get = function () {\n            return new $locationShim(this.ngUpgrade.$injector, this.location, this.platformLocation, this.urlCodec, this.locationStrategy);\n        };\n        /**\n         * Stub method used to keep API compatible with AngularJS. This setting is configured through\n         * the LocationUpgradeModule's `config` method in your Angular app.\n         */\n        $locationShimProvider.prototype.hashPrefix = function (prefix) {\n            throw new Error('Configure LocationUpgrade through LocationUpgradeModule.config method.');\n        };\n        /**\n         * Stub method used to keep API compatible with AngularJS. This setting is configured through\n         * the LocationUpgradeModule's `config` method in your Angular app.\n         */\n        $locationShimProvider.prototype.html5Mode = function (mode) {\n            throw new Error('Configure LocationUpgrade through LocationUpgradeModule.config method.');\n        };\n        return $locationShimProvider;\n    }());\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    /**\n     * A codec for encoding and decoding URL parts.\n     *\n     * @publicApi\n     **/\n    var UrlCodec = /** @class */ (function () {\n        function UrlCodec() {\n        }\n        return UrlCodec;\n    }());\n    /**\n     * A `UrlCodec` that uses logic from AngularJS to serialize and parse URLs\n     * and URL parameters.\n     *\n     * @publicApi\n     */\n    var AngularJSUrlCodec = /** @class */ (function () {\n        function AngularJSUrlCodec() {\n        }\n        // https://github.com/angular/angular.js/blob/864c7f0/src/ng/location.js#L15\n        AngularJSUrlCodec.prototype.encodePath = function (path) {\n            var segments = path.split('/');\n            var i = segments.length;\n            while (i--) {\n                // decode forward slashes to prevent them from being double encoded\n                segments[i] = encodeUriSegment(segments[i].replace(/%2F/g, '/'));\n            }\n            path = segments.join('/');\n            return _stripIndexHtml((path && path[0] !== '/' && '/' || '') + path);\n        };\n        // https://github.com/angular/angular.js/blob/864c7f0/src/ng/location.js#L42\n        AngularJSUrlCodec.prototype.encodeSearch = function (search) {\n            if (typeof search === 'string') {\n                search = parseKeyValue(search);\n            }\n            search = toKeyValue(search);\n            return search ? '?' + search : '';\n        };\n        // https://github.com/angular/angular.js/blob/864c7f0/src/ng/location.js#L44\n        AngularJSUrlCodec.prototype.encodeHash = function (hash) {\n            hash = encodeUriSegment(hash);\n            return hash ? '#' + hash : '';\n        };\n        // https://github.com/angular/angular.js/blob/864c7f0/src/ng/location.js#L27\n        AngularJSUrlCodec.prototype.decodePath = function (path, html5Mode) {\n            if (html5Mode === void 0) { html5Mode = true; }\n            var segments = path.split('/');\n            var i = segments.length;\n            while (i--) {\n                segments[i] = decodeURIComponent(segments[i]);\n                if (html5Mode) {\n                    // encode forward slashes to prevent them from being mistaken for path separators\n                    segments[i] = segments[i].replace(/\\//g, '%2F');\n                }\n            }\n            return segments.join('/');\n        };\n        // https://github.com/angular/angular.js/blob/864c7f0/src/ng/location.js#L72\n        AngularJSUrlCodec.prototype.decodeSearch = function (search) {\n            return parseKeyValue(search);\n        };\n        // https://github.com/angular/angular.js/blob/864c7f0/src/ng/location.js#L73\n        AngularJSUrlCodec.prototype.decodeHash = function (hash) {\n            hash = decodeURIComponent(hash);\n            return hash[0] === '#' ? hash.substring(1) : hash;\n        };\n        AngularJSUrlCodec.prototype.normalize = function (pathOrHref, search, hash, baseUrl) {\n            if (arguments.length === 1) {\n                var parsed = this.parse(pathOrHref, baseUrl);\n                if (typeof parsed === 'string') {\n                    return parsed;\n                }\n                var serverUrl = parsed.protocol + \"://\" + parsed.hostname + (parsed.port ? ':' + parsed.port : '');\n                return this.normalize(this.decodePath(parsed.pathname), this.decodeSearch(parsed.search), this.decodeHash(parsed.hash), serverUrl);\n            }\n            else {\n                var encPath = this.encodePath(pathOrHref);\n                var encSearch = search && this.encodeSearch(search) || '';\n                var encHash = hash && this.encodeHash(hash) || '';\n                var joinedPath = (baseUrl || '') + encPath;\n                if (!joinedPath.length || joinedPath[0] !== '/') {\n                    joinedPath = '/' + joinedPath;\n                }\n                return joinedPath + encSearch + encHash;\n            }\n        };\n        AngularJSUrlCodec.prototype.areEqual = function (valA, valB) {\n            return this.normalize(valA) === this.normalize(valB);\n        };\n        // https://github.com/angular/angular.js/blob/864c7f0/src/ng/urlUtils.js#L60\n        AngularJSUrlCodec.prototype.parse = function (url, base) {\n            try {\n                // Safari 12 throws an error when the URL constructor is called with an undefined base.\n                var parsed = !base ? new URL(url) : new URL(url, base);\n                return {\n                    href: parsed.href,\n                    protocol: parsed.protocol ? parsed.protocol.replace(/:$/, '') : '',\n                    host: parsed.host,\n                    search: parsed.search ? parsed.search.replace(/^\\?/, '') : '',\n                    hash: parsed.hash ? parsed.hash.replace(/^#/, '') : '',\n                    hostname: parsed.hostname,\n                    port: parsed.port,\n                    pathname: (parsed.pathname.charAt(0) === '/') ? parsed.pathname : '/' + parsed.pathname\n                };\n            }\n            catch (e) {\n                throw new Error(\"Invalid URL (\" + url + \") with base (\" + base + \")\");\n            }\n        };\n        return AngularJSUrlCodec;\n    }());\n    function _stripIndexHtml(url) {\n        return url.replace(/\\/index.html$/, '');\n    }\n    /**\n     * Tries to decode the URI component without throwing an exception.\n     *\n     * @param str value potential URI component to check.\n     * @returns the decoded URI if it can be decoded or else `undefined`.\n     */\n    function tryDecodeURIComponent(value) {\n        try {\n            return decodeURIComponent(value);\n        }\n        catch (e) {\n            // Ignore any invalid uri component.\n            return undefined;\n        }\n    }\n    /**\n     * Parses an escaped url query string into key-value pairs. Logic taken from\n     * https://github.com/angular/angular.js/blob/864c7f0/src/Angular.js#L1382\n     */\n    function parseKeyValue(keyValue) {\n        var obj = {};\n        (keyValue || '').split('&').forEach(function (keyValue) {\n            var splitPoint, key, val;\n            if (keyValue) {\n                key = keyValue = keyValue.replace(/\\+/g, '%20');\n                splitPoint = keyValue.indexOf('=');\n                if (splitPoint !== -1) {\n                    key = keyValue.substring(0, splitPoint);\n                    val = keyValue.substring(splitPoint + 1);\n                }\n                key = tryDecodeURIComponent(key);\n                if (typeof key !== 'undefined') {\n                    val = typeof val !== 'undefined' ? tryDecodeURIComponent(val) : true;\n                    if (!obj.hasOwnProperty(key)) {\n                        obj[key] = val;\n                    }\n                    else if (Array.isArray(obj[key])) {\n                        obj[key].push(val);\n                    }\n                    else {\n                        obj[key] = [obj[key], val];\n                    }\n                }\n            }\n        });\n        return obj;\n    }\n    /**\n     * Serializes into key-value pairs. Logic taken from\n     * https://github.com/angular/angular.js/blob/864c7f0/src/Angular.js#L1409\n     */\n    function toKeyValue(obj) {\n        var parts = [];\n        var _loop_1 = function (key) {\n            var value = obj[key];\n            if (Array.isArray(value)) {\n                value.forEach(function (arrayValue) {\n                    parts.push(encodeUriQuery(key, true) +\n                        (arrayValue === true ? '' : '=' + encodeUriQuery(arrayValue, true)));\n                });\n            }\n            else {\n                parts.push(encodeUriQuery(key, true) +\n                    (value === true ? '' : '=' + encodeUriQuery(value, true)));\n            }\n        };\n        for (var key in obj) {\n            _loop_1(key);\n        }\n        return parts.length ? parts.join('&') : '';\n    }\n    /**\n     * We need our custom method because encodeURIComponent is too aggressive and doesn't follow\n     * http://www.ietf.org/rfc/rfc3986.txt with regards to the character set (pchar) allowed in path\n     * segments:\n     *    segment       = *pchar\n     *    pchar         = unreserved / pct-encoded / sub-delims / \":\" / \"@\"\n     *    pct-encoded   = \"%\" HEXDIG HEXDIG\n     *    unreserved    = ALPHA / DIGIT / \"-\" / \".\" / \"_\" / \"~\"\n     *    sub-delims    = \"!\" / \"$\" / \"&\" / \"'\" / \"(\" / \")\"\n     *                     / \"*\" / \"+\" / \",\" / \";\" / \"=\"\n     *\n     * Logic from https://github.com/angular/angular.js/blob/864c7f0/src/Angular.js#L1437\n     */\n    function encodeUriSegment(val) {\n        return encodeUriQuery(val, true)\n            .replace(/%26/gi, '&')\n            .replace(/%3D/gi, '=')\n            .replace(/%2B/gi, '+');\n    }\n    /**\n     * This method is intended for encoding *key* or *value* parts of query component. We need a custom\n     * method because encodeURIComponent is too aggressive and encodes stuff that doesn't have to be\n     * encoded per http://tools.ietf.org/html/rfc3986:\n     *    query         = *( pchar / \"/\" / \"?\" )\n     *    pchar         = unreserved / pct-encoded / sub-delims / \":\" / \"@\"\n     *    unreserved    = ALPHA / DIGIT / \"-\" / \".\" / \"_\" / \"~\"\n     *    pct-encoded   = \"%\" HEXDIG HEXDIG\n     *    sub-delims    = \"!\" / \"$\" / \"&\" / \"'\" / \"(\" / \")\"\n     *                     / \"*\" / \"+\" / \",\" / \";\" / \"=\"\n     *\n     * Logic from https://github.com/angular/angular.js/blob/864c7f0/src/Angular.js#L1456\n     */\n    function encodeUriQuery(val, pctEncodeSpaces) {\n        if (pctEncodeSpaces === void 0) { pctEncodeSpaces = false; }\n        return encodeURIComponent(val)\n            .replace(/%40/gi, '@')\n            .replace(/%3A/gi, ':')\n            .replace(/%24/g, '$')\n            .replace(/%2C/gi, ',')\n            .replace(/%3B/gi, ';')\n            .replace(/%20/g, (pctEncodeSpaces ? '%20' : '+'));\n    }\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    /**\n     * A provider token used to configure the location upgrade module.\n     *\n     * @publicApi\n     */\n    var LOCATION_UPGRADE_CONFIGURATION = new core.InjectionToken('LOCATION_UPGRADE_CONFIGURATION');\n    var APP_BASE_HREF_RESOLVED = new core.InjectionToken('APP_BASE_HREF_RESOLVED');\n    /**\n     * `NgModule` used for providing and configuring Angular's Unified Location Service for upgrading.\n     *\n     * @see [Using the Unified Angular Location Service](guide/upgrade#using-the-unified-angular-location-service)\n     *\n     * @publicApi\n     */\n    var LocationUpgradeModule = /** @class */ (function () {\n        function LocationUpgradeModule() {\n        }\n        LocationUpgradeModule_1 = LocationUpgradeModule;\n        LocationUpgradeModule.config = function (config) {\n            return {\n                ngModule: LocationUpgradeModule_1,\n                providers: [\n                    common.Location,\n                    {\n                        provide: $locationShim,\n                        useFactory: provide$location,\n                        deps: [_static.UpgradeModule, common.Location, common.PlatformLocation, UrlCodec, common.LocationStrategy]\n                    },\n                    { provide: LOCATION_UPGRADE_CONFIGURATION, useValue: config ? config : {} },\n                    { provide: UrlCodec, useFactory: provideUrlCodec, deps: [LOCATION_UPGRADE_CONFIGURATION] },\n                    {\n                        provide: APP_BASE_HREF_RESOLVED,\n                        useFactory: provideAppBaseHref,\n                        deps: [LOCATION_UPGRADE_CONFIGURATION, [new core.Inject(common.APP_BASE_HREF), new core.Optional()]]\n                    },\n                    {\n                        provide: common.LocationStrategy,\n                        useFactory: provideLocationStrategy,\n                        deps: [\n                            common.PlatformLocation,\n                            APP_BASE_HREF_RESOLVED,\n                            LOCATION_UPGRADE_CONFIGURATION,\n                        ]\n                    },\n                ],\n            };\n        };\n        var LocationUpgradeModule_1;\n        LocationUpgradeModule = LocationUpgradeModule_1 = __decorate([\n            core.NgModule({ imports: [common.CommonModule] })\n        ], LocationUpgradeModule);\n        return LocationUpgradeModule;\n    }());\n    function provideAppBaseHref(config, appBaseHref) {\n        if (config && config.appBaseHref != null) {\n            return config.appBaseHref;\n        }\n        else if (appBaseHref != null) {\n            return appBaseHref;\n        }\n        return '';\n    }\n    function provideUrlCodec(config) {\n        var codec = config && config.urlCodec || AngularJSUrlCodec;\n        return new codec();\n    }\n    function provideLocationStrategy(platformLocation, baseHref, options) {\n        if (options === void 0) { options = {}; }\n        return options.useHash ? new common.HashLocationStrategy(platformLocation, baseHref) :\n            new common.PathLocationStrategy(platformLocation, baseHref);\n    }\n    function provide$location(ngUpgrade, location, platformLocation, urlCodec, locationStrategy) {\n        var $locationProvider = new $locationShimProvider(ngUpgrade, location, platformLocation, urlCodec, locationStrategy);\n        return $locationProvider.$get();\n    }\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    // This file only reexports content of the `src` folder. Keep it that way.\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n\n    /**\n     * Generated bundle index. Do not edit.\n     */\n\n    exports.$locationShim = $locationShim;\n    exports.$locationShimProvider = $locationShimProvider;\n    exports.AngularJSUrlCodec = AngularJSUrlCodec;\n    exports.LOCATION_UPGRADE_CONFIGURATION = LOCATION_UPGRADE_CONFIGURATION;\n    exports.LocationUpgradeModule = LocationUpgradeModule;\n    exports.UrlCodec = UrlCodec;\n    exports.ɵangular_packages_common_upgrade_upgrade_a = provideAppBaseHref;\n    exports.ɵangular_packages_common_upgrade_upgrade_b = provideUrlCodec;\n    exports.ɵangular_packages_common_upgrade_upgrade_c = provideLocationStrategy;\n    exports.ɵangular_packages_common_upgrade_upgrade_d = provide$location;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=common-upgrade.umd.js.map\n"]}