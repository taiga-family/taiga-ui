{"version":3,"file":"init-tsconfig.transform.js","sourceRoot":"","sources":["../../../../src/lib/ng-package/entry-point/init-tsconfig.transform.ts"],"names":[],"mappings":";;;;;;;;;;;AACA,+BAA+B;AAC/B,qDAAwE;AACxE,oCAAwD;AACxD,gDAAuD;AACvD,yCAAsC;AAEzB,QAAA,4BAA4B,GAAG,CAAC,eAAoC,EAAa,EAAE,CAC9F,gCAAoB,CAAC,CAAM,KAAK,EAAC,EAAE;IACjC,2CAA2C;IAC3C,MAAM,WAAW,GAAG,KAAK,CAAC,MAAM,CAAC,oBAAY,CAAqB,CAAC;IACnE,6BAAkB,CAAC,eAAe,EAAE,WAAW,CAAC,CAAC;IAEjD,IAAI,eAAe,CAAC,OAAO,CAAC,SAAS,EAAE;QACrC,MAAM,MAAM,GACV,kFAAkF;YAClF,uEAAuE;YACvE,qFAAqF;YACrF,gFAAgF,CAAC;QAEnF,SAAG,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;KAC3B;IAED,OAAO,KAAK,CAAC;AACf,CAAC,CAAA,CAAC,CAAC","sourcesContent":["import { ParsedConfiguration } from '@angular/compiler-cli';\nimport * as chalk from 'chalk';\nimport { Transform, transformFromPromise } from '../../graph/transform';\nimport { isEntryPoint, EntryPointNode } from '../nodes';\nimport { initializeTsConfig } from '../../ts/tsconfig';\nimport { msg } from '../../utils/log';\n\nexport const initTsConfigTransformFactory = (defaultTsConfig: ParsedConfiguration): Transform =>\n  transformFromPromise(async graph => {\n    // Initialize tsconfig for each entry point\n    const entryPoints = graph.filter(isEntryPoint) as EntryPointNode[];\n    initializeTsConfig(defaultTsConfig, entryPoints);\n\n    if (defaultTsConfig.options.enableIvy) {\n      const ivyMsg =\n        '******************************************************************************\\n' +\n        'It is not recommended to publish Ivy libraries to NPM repositories.\\n' +\n        'Read more here: https://v9.angular.io/guide/ivy#maintaining-library-compatibility\\n' +\n        '******************************************************************************';\n\n      msg(chalk.yellow(ivyMsg));\n    }\n\n    return graph;\n  });\n"]}