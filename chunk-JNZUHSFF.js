import{a as F,b as L,c as te}from"./chunk-V6G65RPV.js";import{a as S,b as v,d as b}from"./chunk-42JZD6NG.js";function w(e,t,r){let n=Math.min(Number(r),Math.max(Number(t),Number(e)));return e instanceof Date?new Date(n):n}function Pe(e){return e.replaceAll(/\W/g,"").length}var Ne={day:31,month:12,year:9999},Ye=[".",",","\u0431","\u044E"],ve=new Date("0001-01-01T00:00"),se=new Date("9999-12-31T23:59:59.999"),C="\xA0",Je="\u200B",oe="\u2013",Me="\u2014",z="-",ce="\u2212",Re="\u30FC",Xe=":",ze="\uFF1A",$e=[z,oe,Me,Re,ce],K={hours:23,minutes:59,seconds:59,milliseconds:999},ie={hours:0,minutes:0,seconds:0,milliseconds:0},B=new RegExp(`[${C}APM]+$`,"g"),Z=new RegExp(`${C}[AP]M$`,"g"),le=[":","."],be={hours:2,minutes:2,seconds:2,milliseconds:3},Ke=[z,oe,Me,ce,Re],qe=1,ne=12,_={January:0,February:1,April:3,June:5,September:8,November:10,December:11};function he(e,{day:t=0,month:r=0,year:n=0}={}){if(t===0&&r===0&&n===0)return e;let o=e.getFullYear(),s=e.getMonth(),c=e.getDate(),i=(o+n)*ne+s+r,l=Math.floor(i/ne),u=i%ne,a=k(u,T(l)),d=k(s,T(l)),g=t;for(c>=a?g+=c-(d-a):d<a&&c===d?g+=c+(a-d):g+=c;g>k(u,T(l));)g-=k(u,T(l)),u===_.December?(l++,u=_.January):u++;for(;g<qe;)u===_.January?(l--,u=_.December):u--,g+=k(u,T(l));return g=t<0||r<0||n<0?g+1:g-1,new Date(l,u,g)}function k(e,t){switch(e){case _.April:case _.June:case _.November:case _.September:return 30;case _.February:return t?29:28;default:return 31}}function T(e){return e%400===0||e%4===0&&e%100!==0}var we=e=>{var t,r,n;return{day:((t=e.match(/d/g))==null?void 0:t.length)??0,month:((r=e.match(/m/g))==null?void 0:r.length)??0,year:((n=e.match(/y/g))==null?void 0:n.length)??0}};function Y(e){return{day:String(e.getDate()).padStart(2,"0"),month:String(e.getMonth()+1).padStart(2,"0"),year:String(e.getFullYear()).padStart(4,"0"),hours:String(e.getHours()).padStart(2,"0"),minutes:String(e.getMinutes()).padStart(2,"0"),seconds:String(e.getSeconds()).padStart(2,"0"),milliseconds:String(e.getMilliseconds()).padStart(3,"0")}}var Qe=["day","month","year"];function et(e){return[...Qe].sort((t,r)=>e.indexOf(t[0])>e.indexOf(r[0])?1:-1)}function tt(e,t){let r=Pe(t),[n=""]=new RegExp(`(\\D*\\d){${r}}`).exec(e)||[];return n}function q(e,t){return e.length<t.length?!1:e.split(/\D/).every(r=>!/^0+$/.exec(r))}function H(e,t,r){let n=Pe(t);return e.replace(r,"").match(new RegExp(`(\\D*\\d[^\\d\\s]*){1,${n}}`,"g"))||[]}function V(e,t){let r=t.replaceAll(/[^dmy]/g,""),n=e.replaceAll(/\D+/g,""),o={day:n.slice(r.indexOf("d"),r.lastIndexOf("d")+1),month:n.slice(r.indexOf("m"),r.lastIndexOf("m")+1),year:n.slice(r.indexOf("y"),r.lastIndexOf("y")+1)};return Object.fromEntries(Object.entries(o).filter(([s,c])=>!!c).sort(([s],[c])=>t.toLowerCase().indexOf(s.slice(0,1))>t.toLowerCase().indexOf(c.slice(0,1))?1:-1))}function j(e,t){var o;let r=((o=e.year)==null?void 0:o.length)===2?`20${e.year}`:e.year,n=new Date(Number(r??"0"),Number(e.month??"1")-1,Number(e.day??"1"),Number((t==null?void 0:t.hours)??"0"),Number((t==null?void 0:t.minutes)??"0"),Number((t==null?void 0:t.seconds)??"0"),Number((t==null?void 0:t.milliseconds)??"0"));return n.setFullYear(Number(r??"0")),n}var Q=", ";function y({day:e,month:t,year:r,hours:n,minutes:o,seconds:s,milliseconds:c},{dateMode:i,dateTimeSeparator:l=Q,timeMode:u}){var g;let a=((g=i.match(/y/g))==null?void 0:g.length)===2?r==null?void 0:r.slice(-2):r;return(i+(u?l+u:"")).replaceAll(/d+/g,e??"").replaceAll(/m+/g,t??"").replaceAll(/y+/g,a??"").replaceAll(/H+/g,n??"").replaceAll("MSS",c??"").replaceAll(/M+/g,o??"").replaceAll(/S+/g,s??"").replaceAll(/^\D+/g,"").replaceAll(/\D+$/g,"")}function _e({dateString:e,dateModeTemplate:t,dateSegmentsSeparator:r,offset:n,selection:[o,s]}){var g;let c=V(e,t),i=Object.entries(c),l=et(t),u={};for(let f=0;f<i.length;f++){let[m,h]=i[f],p=y(u,{dateMode:t}),E=Ne[m],A=p.length&&r.length,D=n+p.length+A+we(t)[m],x=D>=o&&D===s;if(x&&Number(h)>Number(E)){let P=l[l.indexOf(m)+1];if(!P||P==="year")return{validatedDateString:"",updatedSelection:[o,s]};u[m]=`0${h.slice(0,-1)}`,i[f+1]=[P,h.slice(-1)+(((g=i[f+1])==null?void 0:g[1])??"").slice(1)];continue}if(x&&Number(h)<1)return{validatedDateString:"",updatedSelection:[o,s]};u[m]=h}let a=y(u,{dateMode:t}),d=a.length-e.length;return{validatedDateString:a,updatedSelection:[o+d,s+d]}}function I(e){return e}function ue(){}var Ce=/[\\^$.*+?()[\]{}|]/g,nt=new RegExp(Ce.source);function N(e){return e&&nt.test(e)?e.replaceAll(Ce,String.raw`\$&`):e}function rt(e,t){let r="";for(let n=0;n<e.length;n++){if(e[n]!==t[n])return r;r+=e[n]}return r}function re(e){return!e||typeof e=="object"&&Object.keys(e).length===0}var st=/^0+$/;function J(e,t,r=0){let n=e.padEnd(t.length,"0");if(Number(n)<=Number(t))return{validatedSegmentValue:e,prefixedZeroesCount:r};if(n.endsWith("0"))return J(`0${e.slice(0,t.length-1)}`,t,r+1);let o=e.slice(0,t.length-1);return st.exec(o)?{validatedSegmentValue:"",prefixedZeroesCount:r}:J(`${o}0`,t,r)}function pe(e){return e.replaceAll(new RegExp(ze,"g"),Xe)}function Ee(e){return e.replaceAll(/[０-９]/g,t=>String.fromCharCode(t.charCodeAt(0)-65248))}function Ie(){return({elementState:e,data:t})=>{let{value:r,selection:n}=e;return{elementState:{selection:n,value:pe(r)},data:pe(t)}}}function ae({dateModeTemplate:e,dateSegmentSeparator:t,splitFn:r,uniteFn:n}){return({value:o,selection:s})=>{var f;let[c,i]=s,{dateStrings:l,restPart:u=""}=r(o),a=[],d=0;l.forEach(m=>{let h=V(m,e),E=Object.entries(h).reduce((A,[D,x])=>{let{validatedSegmentValue:P,prefixedZeroesCount:$}=J(x,`${Ne[D]}`);return d+=$,v(S({},A),{[D]:P})},{});a.push(y(E,{dateMode:e}))});let g=n(a,o)+((f=l[l.length-1])!=null&&f.endsWith(t)?t:"")+u;return d&&g.slice(i+d,i+d+t.length)===t&&(d+=t.length),{selection:[c+d,i+d],value:g}}}function Le({dateModeTemplate:e,firstDateEndSeparator:t,dateSegmentSeparator:r,pseudoFirstDateEndSeparators:n}){return({elementState:o,data:s})=>{let{value:c,selection:i}=o,[l,u]=i,a=tt(c,e),d=n.filter(h=>!t.includes(h)&&h!==r),g=new RegExp(`[${d.join("")}]`,"gi"),f=a&&c.length>a.length?a+c.slice(a.length).replace(/^[\D\s]*/,t):c,m=f.length-c.length;return{elementState:{selection:[l+m,u+m],value:f},data:s.replace(g,t)}}}function G(){return({elementState:e,data:t})=>{let{value:r,selection:n}=e;return{elementState:{selection:n,value:Ee(r)},data:Ee(t)}}}function ye(e){return Array.from(e.replace(" AA","")).map(t=>le.includes(t)?t:/\d/).concat(e.includes("AA")?[C,/[AP]/i,/M/i]:[])}function ot(e,t){return Object.fromEntries(Object.entries(e).map(([r,n])=>[r,t(String(n),be[r])]))}function ct(e){return ot(e,(t,r)=>t.padStart(r,"0"))}var Se={HH:"hours",MM:"minutes",SS:"seconds",MSS:"milliseconds"};function ge(e,t){let r=e.replaceAll(/\D+/g,""),n=0;return Object.fromEntries(t.split(/\W/).filter(o=>Se[o]).map(o=>{let s=r.slice(n,n+o.length);return n+=o.length,[Se[o],s]}))}var it=/^\D*/,lt=/\D*$/;function ut({hours:e="",minutes:t="",seconds:r="",milliseconds:n=""}){return`${e}:${t}:${r}.${n}`.replace(it,"").replace(lt,"")}var at=new RegExp(`[${le.map(N).join("")}]$`);function Oe({value:e,selection:t},{mode:r,timeSegmentMaxValues:n=K}){let[o,s]=t,c=ge(e,r),i=Object.entries(c),l=ct(n),u={},a=0;for(let[E,A]of i){let D=l[E],{validatedSegmentValue:x,prefixedZeroesCount:P}=J(A,String(D));a+=P,u[E]=x}let[d=""]=e.match(/^\D+(?=\d)/g)||[],[g=""]=e.match(/\D+$/g)||[],f=d+ut(u)+g,m=Math.max(f.length-e.length-a,0),h=o+a+m,p=s+a+m;return h===p&&a&&f.slice(0,p+1).match(at)&&(h++,p++),{value:f,selection:[h,p]}}function Ve({timeMode:e,timeSegmentMinValues:t=ie,timeSegmentMaxValues:r=K,parseValue:n=o=>({timeString:o})}){let o=new RegExp(`[^\\d${le.map(N).join("")}]+`);return({elementState:s,data:c},i)=>{if(i!=="insert")return{elementState:s,data:c};let{value:l,selection:u}=s,[a,d]=u,g=c.replace(o,""),f=d+g.length,m=l.slice(0,a)+g+l.slice(f),{timeString:h,restValue:p=""}=n(m),E=Object.entries(ge(h,e)),A=p.length;for(let[D,x]of E){let P=t[D],$=r[D],O=Number(x),me=A+be[D];if(me>=a&&me<=f&&O!==w(O,P,$))return{elementState:s,data:""};A+=x.length+1}return{elementState:s,data:c}}}function Fe(e){if(!e.includes("AA"))return I;let t=/^[AP]$/gi;return({elementState:r,data:n})=>{let{value:o,selection:s}=r,c=o.toUpperCase(),i=n.toUpperCase();return c.match(Z)&&i.match(t)?{elementState:{value:c.replaceAll(Z,""),selection:s},data:`${i}M`}:{elementState:{selection:s,value:c},data:i}}}function ke(e){return e.includes("AA")?({value:t,selection:r},n)=>{if(!t.match(B)||t.match(Z))return{value:t,selection:r};let[o,s]=r;if(n.value.match(Z)){let l=t.replace(B,"");return{value:l,selection:[Math.min(o,l.length),Math.min(s,l.length)]}}let c=`${C}${t.includes("P")?"P":"A"}M`,i=t.replace(B,l=>l!==C?c:l);return{value:i,selection:s>=i.indexOf(c)?[i.length,i.length]:r}}:I}function Te(e,t){let r=we(t);return Object.fromEntries(Object.entries(e).map(([n,o])=>{let s=r[n];return[n,o.length===s&&/^0+$/.exec(o)?"1".padStart(s,"0"):o]}))}var gt="1972";function je({dateModeTemplate:e,min:t=ve,max:r=se,rangeSeparator:n="",dateSegmentSeparator:o="."}){return({value:s,selection:c})=>{let i=n&&s.endsWith(n),l=H(s,e,n),u="";for(let a of l){u+=u?n:"";let d=V(a,e);if(!q(a,e)){let m=Te(d,e),h=y(m,{dateMode:e}),p=a.endsWith(o)?o:"";u+=h+p;continue}let g=j(S({year:gt},d)),f=w(g,t,r);u+=y(Y(f),{dateMode:e})}return{selection:c,value:u+(i?n:"")}}}function fe({dateModeTemplate:e,dateSegmentsSeparator:t,rangeSeparator:r="",dateTimeSeparator:n=Q}){return({elementState:o,data:s})=>{let c=e.split(t),i=s.includes(n),l=s.slice(0,i?s.indexOf(n):1/0).split(/\D/).filter(Boolean);if(!l.length||l.length%c.length!==0)return{elementState:o,data:s};let u=l.reduce((a,d,g)=>{let f=c[g%c.length]??"",m=Math.trunc(g/c.length),h=g%c.length===c.length-1;return a[m]||(a[m]=""),a[m]+=h?d:`${d.padStart(f.length,"0")}${t}`,a},[]);return{elementState:o,data:i?`${u[0]}${s.slice(s.indexOf(n))}`:u.join(r)}}}function He(e){let t=new RegExp(`${N(e)}$`),r=new RegExp(e&&`(${e.split("").map(N).reduce((n,o,s,c)=>`${n}|${c.slice(0,s+1).join("")}`)})$`);return e?({value:n,selection:o},s)=>{if(!n&&!s.value.endsWith(e))return{value:n,selection:o};if(!n.match(r)&&!s.value.endsWith(e))return{selection:o,value:n+e};let c=s.value.replace(t,""),i=s.selection[1]>c.length,l=rt(c,n);return{selection:o,value:Array.from(e).reverse().reduce((u,a,d)=>{let g=u.length-1-d,f=l[g]===a&&i;return u[g]!==a||f?u.slice(0,g+1)+a+u.slice(g+1):u},n)}}:I}function Ge(e){return e?({value:t,selection:r},n)=>{if(t.startsWith(e)||!t&&!n.value.startsWith(e))return{value:t,selection:r};let[o,s]=r,c=Array.from(e).reduce((l,u,a)=>l[a]===u?l:l.slice(0,a)+u+l.slice(a),t),i=c.length-t.length;return{selection:[o+i,s+i],value:c}}:I}function We({dateModeTemplate:e,dateSegmentsSeparator:t,rangeSeparator:r=""}){return({elementState:n,data:o})=>{let{value:s,selection:c}=n;if(o===t)return{elementState:n,data:c[0]===s.length?o:""};if(!o.replaceAll(/\D/g,""))return{elementState:n,data:o};let i=o.replaceAll(new RegExp(`[^\\d${N(t)}${r}]`,"g"),""),[l,u]=c,a=u+o.length,d=s.slice(0,l)+i+s.slice(a),g=H(d,e,r),f="",m=!!r&&d.includes(r);for(let p of g){let{validatedDateString:E,updatedSelection:A}=_e({dateString:p,dateModeTemplate:e,dateSegmentsSeparator:t,offset:f.length,selection:[l,a]});if(p&&!E)return{elementState:n,data:""};a=A[1],f+=m&&!f?E+r:E}let h=f.slice(l,a);return{elementState:{selection:c,value:f.slice(0,l)+h.split(t).map(p=>"0".repeat(p.length)).join(t)+f.slice(a)},data:h}}}function W(e,t,r){return(n,o)=>{let s=()=>t(n,o);return n.addEventListener(e,s,r),()=>n.removeEventListener(e,s,r)}}function Bt(e){return W("focus",t=>{t.value||L(t,e)})}function ft(e){return(t,r)=>{let n=t.ownerDocument,o=0,s=()=>o++,c=()=>{o=Math.max(--o,0)},i=()=>{if(t.matches(":focus")){if(o)return n.addEventListener("mouseup",i,{once:!0,passive:!0});e(t,r)}};return n.addEventListener("selectionchange",i,{passive:!0}),t.addEventListener("focus",i,{passive:!0}),t.addEventListener("mousedown",s,{passive:!0}),n.addEventListener("mouseup",c,{passive:!0}),()=>{n.removeEventListener("selectionchange",i),t.removeEventListener("focus",i),t.removeEventListener("mousedown",s),n.removeEventListener("mouseup",c)}}}function Zt(e){return ft(t=>{let r=t.selectionStart??0,n=t.selectionEnd??0,[o,s]=e(t.value,[r,n]);(o>r||s<n)&&t.setSelectionRange(w(r,o,s),w(n,o,s))})}function Yt(e){return W("blur",t=>{t.value===e&&L(t,"")})}function Ue(e){return e<0?ue:t=>{let r=n=>{let o=Number(t.selectionStart),s=t.value.toUpperCase();if(n.key!=="ArrowUp"&&n.key!=="ArrowDown"||o<e)return;n.preventDefault();let c=s.includes("A")?"P":s.includes("P")||n.key==="ArrowUp"?"A":"P",i=`${C}${c}M`;L(t,{value:s.length===e?s+i:s.replace(B,i),selection:[o,o]})};return t.addEventListener("keydown",r),()=>t.removeEventListener("keydown",r)}}function Be({step:e,fullMode:t,timeSegmentMinValues:r,timeSegmentMaxValues:n}){let o=dt(t);return e<=0?ue:s=>{let c=i=>{if(i.key!=="ArrowUp"&&i.key!=="ArrowDown")return;i.preventDefault();let l=s.selectionStart??0,u=mt({segmentsIndexes:o,selectionStart:l});if(!u)return;let a=ht({selection:o.get(u),value:s.value,toAdd:i.key==="ArrowUp"?e:-e,min:r[u],max:n[u]});L(s,{value:a,selection:[l,l]})};return s.addEventListener("keydown",c),()=>s.removeEventListener("keydown",c)}}function dt(e){return new Map([["hours",U(e,"HH")],["milliseconds",U(e,"MSS")],["minutes",U(e,"MM")],["seconds",U(e,"SS")]])}function U(e,t){let r=e.indexOf(t);return r===-1?[-1,-1]:[r,r+t.length]}function mt({segmentsIndexes:e,selectionStart:t}){for(let[r,n]of e.entries()){let[o,s]=n;if(o<=t&&t<=s)return r}return null}function ht({selection:e,value:t,toAdd:r,min:n,max:o}){let[s,c]=e,i=Number(t.slice(s,c).padEnd(c-s,"0")),l=pt(i+r,n,o+1);return t.slice(0,s)+String(l).padStart(c-s,"0")+t.slice(c,t.length)}function pt(e,t,r){let n=r-t;return((e-t)%n+n)%n+t}function ee(e=""){let t=(r,[n,o])=>o>=r.length-e.length;return({elementState:r},n)=>{let{value:o,selection:s}=r;if(!o||t(o,s))return{elementState:r};let[c,i]=s,l=o.slice(c,i).replaceAll(/\d/g,"0"),u=o.slice(0,c)+l+o.slice(i);return l.replaceAll(/\D/g,"")?n==="validation"||n==="insert"&&c===i?{elementState:{selection:s,value:u}}:{elementState:{selection:n==="deleteBackward"||n==="insert"?[c,c]:[i,i],value:u}}:{elementState:r}}}function Jt({mode:e,separator:t=".",max:r,min:n}){let o=e.split("/").join(t);return v(S({},F),{mask:Array.from(o).map(s=>t.includes(s)?s:/\d/),overwriteMode:"replace",preprocessors:[G(),ee(),fe({dateModeTemplate:o,dateSegmentsSeparator:t}),We({dateModeTemplate:o,dateSegmentsSeparator:t})],postprocessors:[ae({dateModeTemplate:o,dateSegmentSeparator:t,splitFn:s=>({dateStrings:[s]}),uniteFn:([s=""])=>s}),je({min:n,max:r,dateModeTemplate:o,dateSegmentSeparator:t})]})}var Xt=Intl.DateTimeFormat("en-US",{month:"2-digit",day:"2-digit",year:"numeric"});function Et({dateModeTemplate:e,rangeSeparator:t,minLength:r,maxLength:n,max:o=se}){return re(r)&&re(n)?I:({value:s,selection:c})=>{let i=H(s,e,t);if(i.length!==2||i.some(m=>!q(m,e)))return{value:s,selection:c};let[l,u]=i.map(m=>j(V(m,e)));if(!l||!u)return{value:s,selection:c};let a=he(l,r),d=re(n)?o:he(l,n),g=w(u,a,o),f=g>d?d:g;return{selection:c,value:i[0]+t+y(Y(f),{dateMode:e})}}}function St({dateModeTemplate:e,rangeSeparator:t}){return({value:r,selection:n})=>{let o=H(r,e,t),s=o.length===2&&o.every(g=>q(g,e)),[c,i]=n,l=c>=r.length,u=c===0&&i>=r.length;if(!(l||u)||!s)return{value:r,selection:n};let[a,d]=o.map(g=>j(V(g,e)));return{selection:n,value:a&&d&&a>d?o.reverse().join(t):r}}}function zt({mode:e,min:t,max:r,minLength:n,maxLength:o,dateSeparator:s=".",rangeSeparator:c=`${C}${oe}${C}`}){let i=e.split("/").join(s),l=Array.from(i).map(u=>s.includes(u)?u:/\d/);return v(S({},F),{mask:[...l,...Array.from(c),...l],overwriteMode:"replace",preprocessors:[G(),Le({dateModeTemplate:i,dateSegmentSeparator:s,firstDateEndSeparator:c,pseudoFirstDateEndSeparators:Ke}),ee(),fe({dateModeTemplate:i,rangeSeparator:c,dateSegmentsSeparator:s}),We({dateModeTemplate:i,rangeSeparator:c,dateSegmentsSeparator:s})],postprocessors:[ae({dateModeTemplate:i,dateSegmentSeparator:s,splitFn:u=>({dateStrings:H(u,i,c)}),uniteFn:(u,a)=>u.reduce((d,g,f)=>d+g+(!f&&a.includes(c)?c:""),"")}),je({min:t,max:r,dateModeTemplate:i,rangeSeparator:c,dateSegmentSeparator:s}),Et({dateModeTemplate:i,minLength:n,maxLength:o,max:r,rangeSeparator:c}),St({dateModeTemplate:i,rangeSeparator:c})]})}function Dt(e,{dateMode:t,timeMode:r,dateTimeSeparator:n=Q}){return e.length>=t.length+r.length+n.length&&(e.split(n)[0]??"").split(/\D/).every(o=>!/^0+$/.exec(o))}function Kt({mode:e,timeSegmentMaxValues:t={},timeSegmentMinValues:r={},step:n=0,prefix:o="",postfix:s=""}){let c=e.includes("AA"),i=S(S(S({},K),c?{hours:12}:{}),t),l=S(S(S({},ie),c?{hours:1}:{}),r),u=[...o,...ye(e)];return{mask:s?({value:a})=>At(u,a).concat(...s):u,preprocessors:[G(),Ie(),ee(s),Fe(e),Ve({timeMode:e,timeSegmentMinValues:l,timeSegmentMaxValues:i})],postprocessors:[ke(e),a=>Oe(a,{mode:e,timeSegmentMaxValues:i}),Ge(o),He(s)],plugins:[Be({fullMode:e,step:n,timeSegmentMinValues:l,timeSegmentMaxValues:i}),Ue(e.indexOf("AA"))],overwriteMode:"replace"}}function At(e,t){let r=Math.min(t.replaceAll(/\D/g,"").length,e.filter(o=>typeof o!="string").length)||1,n=e.findIndex(o=>typeof o!="string"&&!--r)+1;return e.slice(0,n)}var xt=/[^dmy]/g,Pt=/^\D*/;function X(e,t){let r=t.replaceAll(xt,"").length,[n=""]=new RegExp(`(\\d[^\\d]*){0,${r-1}}\\d?`).exec(e)||[],[o=""]=Pt.exec(e.slice(n.length))||[];return[n,e.slice(n.length+o.length)]}function Nt({dateModeTemplate:e,timeMode:t,min:r=ve,max:n=se,dateTimeSeparator:o}){return({value:s,selection:c})=>{let[i,l]=X(s,e),u=V(i,e),a=ge(l,t);if(!Dt(s,{dateMode:e,timeMode:t,dateTimeSeparator:o})){let h=Te(u,e),{year:p,month:E,day:A}=q(i,e)?Y(w(j(h),r,n)):h,D=y(S({year:p,month:E,day:A},a),{dateMode:e,dateTimeSeparator:o,timeMode:t}),x=s.slice(D.length);return{selection:c,value:D+x}}let d=j(u,a),g=w(d,r,n),[f=""]=s.match(/\D+$/g)||[],m=y(Y(g),{dateMode:e,dateTimeSeparator:o,timeMode:t})+f;return{selection:c,value:m}}}function vt({dateModeTemplate:e,dateSegmentsSeparator:t,dateTimeSeparator:r,timeMode:n,timeSegmentMaxValues:o}){return({elementState:s,data:c})=>{let{value:i,selection:l}=s;if(c===t)return{elementState:s,data:l[0]===i.length?c:""};let u=c.replaceAll(/\D/g,"");if(!u)return{elementState:s,data:c};let[a,d]=l,g=d+c.length,f=i.slice(0,a)+u+i.slice(g),[m,h]=X(f,e),p="",E=f.includes(r),{validatedDateString:A,updatedSelection:D}=_e({dateString:m,dateSegmentsSeparator:t,dateModeTemplate:e,offset:0,selection:[a,g]});if(m&&!A)return{elementState:s,data:""};g=D[1],p+=A;let x=Oe({value:h,selection:[a,g]},{mode:n,timeSegmentMaxValues:o});g=x.selection[1],p+=E?r+x.value:x.value;let P=p.slice(a,g);return{elementState:{selection:l,value:p.slice(0,a)+P.split(t).map($=>"0".repeat($.length)).join(t)+p.slice(g)},data:P}}}function qt({dateMode:e,timeMode:t,dateSeparator:r=".",min:n,max:o,dateTimeSeparator:s=Q,timeStep:c=0}){let i=t.includes("AA"),l=e.split("/").join(r),u=S(S({},K),i?{hours:12}:{}),a=S(S({},ie),i?{hours:1}:{}),d=`${l}${s}${t}`;return v(S({},F),{mask:[...Array.from(l).map(g=>r.includes(g)?g:/\d/),...s.split(""),...ye(t)],overwriteMode:"replace",preprocessors:[G(),Ie(),Le({dateModeTemplate:l,dateSegmentSeparator:r,firstDateEndSeparator:s,pseudoFirstDateEndSeparators:s.split("")}),ee(),Fe(t),fe({dateModeTemplate:l,dateSegmentsSeparator:r,dateTimeSeparator:s}),Ve({timeMode:t,timeSegmentMinValues:a,timeSegmentMaxValues:u,parseValue:g=>{let[f,m]=X(g,l);return{timeString:m,restValue:f+s}}}),vt({dateModeTemplate:l,dateSegmentsSeparator:r,dateTimeSeparator:s,timeMode:t,timeSegmentMaxValues:u})],postprocessors:[ke(t),ae({dateModeTemplate:l,dateSegmentSeparator:r,splitFn:g=>{let[f,m]=X(g,l);return{dateStrings:[f],restPart:m}},uniteFn:([g],f)=>g+(f.includes(s)?s:"")}),Nt({min:n,max:o,dateModeTemplate:l,timeMode:t,dateTimeSeparator:s})],plugins:[Be({step:c,fullMode:d,timeSegmentMinValues:a,timeSegmentMaxValues:u}),Ue(d.indexOf("AA"))]})}function Mt(e,{prefix:t,postfix:r,decimalSeparator:n,decimalPseudoSeparators:o,minusSign:s,minusPseudoSigns:c,maximumFractionDigits:i}){var D,x,P,$;let l=[...o,n].map(O=>`\\${O}`).join(""),u=[...c,s].map(O=>`\\${O}`).join(""),a=t&&new RegExp(`^([${u}])?(${t.split("").map(N).join("?")}?)`),d=r&&new RegExp(`${r.split("").map(N).join("?")}?$`),[,,g=""]=e.match(a)??[],[f=""]=e.match(d)??[],m=e.replace(a,t&&"$1").replace(d,""),h=new RegExp(n&&i>0?`^[${l}]`:""),p=new RegExp(e.endsWith(r)?"":String.raw`^\d+`),E=new RegExp(n&&i>0?`[${l}]$`:""),A=new RegExp(e.startsWith(t)?"":String.raw`\d+$`);return{extractedPrefix:g.replace(E,"").replace(A,""),extractedPostfix:f.replace(h,"").replace(p,""),cleanValue:(((D=A.exec(g))==null?void 0:D[0])??"")+(((x=E.exec(g))==null?void 0:x[0])??"")+m+(((P=p.exec(f))==null?void 0:P[0])??"")+((($=h.exec(f))==null?void 0:$[0])??"")}}function Ze({decimalPseudoSeparators:e,decimalSeparator:t,maximumFractionDigits:r,min:n,minusSign:o,minusPseudoSigns:s,postfix:c,prefix:i,thousandSeparator:l}){let u=n<0&&[o,...s].includes(i)?"":De(i),a=String.raw`\d`,d=n<0?`[${o}${s.map(E=>`\\${E}`).join("")}]?`:"",g=l?`[${a}${N(l).replaceAll(/\s/g,String.raw`\s`)}]*`:`[${a}]*`,f=Number.isFinite(r)?r:"",m=r>0?`([${N(t)}${e.map(N).join("")}]${a}{0,${f}})?`:"",h=De(c),p=`(${d+u}|${u+d})`;return new RegExp(`^${p}${g}${m}${h}$`)}function De(e){return e?`${e.split("").map(t=>`${N(t)}?`).join("")}`:""}function M(e,t){var h;let{extractedPrefix:r,cleanValue:n,extractedPostfix:o}=Mt(e,t),{decimalSeparator:s,minusSign:c,minusPseudoSigns:i,decimalPseudoSeparators:l,maximumFractionDigits:u}=t,[a="",d=""]=s?n.split(s):[n],g=[c,...i].map(p=>`\\${p}`).join(""),[,f="",m=""]=new RegExp(`^([${g}])?(.*)`).exec(a)||[];return{prefix:r,minus:f,integerPart:m,decimalPart:d,decimalSeparator:s&&u>0?((h=new RegExp(`[${[s,...l].map(N).join("")}]`,"i").exec(n))==null?void 0:h[0])??"":"",postfix:o}}function R({minus:e="",integerPart:t="",decimalPart:r="",prefix:n="",postfix:o="",decimalSeparator:s=""},c){let i=r?c.decimalSeparator:s;return`${c.negativePattern==="minusFirst"?e+n:n+e}${t}${i}${r}${o}`}function de(e,{decimalSeparator:t=".",minusSign:r="",minusPseudoSigns:n=$e}={}){let o=!!new RegExp(`^\\D*[${N(r)}\\${n.join("\\")}]`).exec(e),s=N(t),c=e.replaceAll(new RegExp(`${s}(?!\\d)`,"g"),"").replaceAll(new RegExp(`[^\\d${s}]`,"g"),"").replace(t,t&&".");return c?+`${o?z:""}${c}`:NaN}function Rt(e){let t=String(e),[r="",n]=t.split("e-"),o=t;if(n){let[,s]=r.split("."),c=Number(n)+((s==null?void 0:s.length)??0);o=e.toFixed(c)}return o}function $t({decimalSeparator:e,thousandSeparator:t,decimalPseudoSeparators:r=Ye}){return r.filter(n=>n!==t&&n!==e)}function bt(e){return({elementState:t,data:r})=>{let{value:n}=t,i=M(r,e),{prefix:o,postfix:s}=i,c=b(i,["prefix","postfix"]);return{elementState:t,data:R(v(S({},c),{prefix:n.startsWith(o)?"":o,postfix:n.endsWith(s)?"":s}),e)}}}function wt(e){let{minimumFractionDigits:t}=e;return t?({value:r,selection:n})=>{if(Number.isNaN(de(r,e)))return{value:r,selection:n};let c=M(r,e),{decimalPart:o}=c,s=b(c,["decimalPart"]);return{value:R(v(S({},s),{decimalPart:o.padEnd(t,"0")}),e),selection:n}}:I}function _t(e){return({value:t,selection:r})=>{let[n]=r,{prefix:o,minus:s,integerPart:c,decimalSeparator:i,decimalPart:l,postfix:u}=M(t,e),a=!c&&!l&&i;return!c&&!Number(l)&&n===(s+o).length||a?{selection:r,value:R({prefix:o,minus:s,postfix:u},e)}:{value:t,selection:r}}}function Ct(e){let t=!0,r=Ze(v(S({},e),{prefix:"",postfix:"",thousandSeparator:"",maximumFractionDigits:1/0,min:Number.MIN_SAFE_INTEGER}));return({elementState:n,data:o})=>{if(!t)return{elementState:n,data:o};t=!1;let{value:s,selection:c}=n,[i,l]=c,h=M(s,e),{prefix:u,postfix:a}=h,d=b(h,["prefix","postfix"]),g=R(d,e),f=te({selection:[Math.max(i-u.length,0),Math.max(l-u.length,0)],value:g},{mask:r}),m=g.slice(0,Math.max(l-u.length,0)).length-f.value.slice(0,f.selection[1]).length;return{elementState:{selection:[Math.max(i-m,0),Math.max(l-m,0)],value:R(v(S({},M(f.value,e)),{prefix:u,postfix:a}),e)},data:o}}}function It(e){return({elementState:t},r)=>{let{value:n,selection:o}=t,[s,c]=o,{prefix:i,minusSign:l,negativePattern:u}=e,a=u==="prefixFirst"?i:l+i,d=R(v(S({},M(n,e)),{minus:""}),e),g=n.length-d.length;return{elementState:r.includes("delete")&&n.includes(l)&&s<a.length?{value:d,selection:[Math.max(s-g,a.length-1),Math.max(c-g,a.length-1)]}:t}}}function Lt(e){let{thousandSeparator:t}=e,r=o=>{let s=N(t);return o.replace(new RegExp(`^(\\D+)?[0${s}]+(?=0)`),"$1").replace(new RegExp(`^(\\D+)?[0${s}]+(?=[1-9])`),"$1")},n=(o,s)=>{let c=o.slice(0,s),i=o.slice(s).startsWith("0");return c.length-r(c).length+(i?1:0)};return({value:o,selection:s})=>{let[c,i]=s,f=M(o,e),{integerPart:l}=f,u=b(f,["integerPart"]),a=r(l);if(l===a)return{value:o,selection:s};let d=c-n(o,c),g=i-n(o,i);return{value:R(v(S({},u),{integerPart:a}),e),selection:[Math.max(d,0),Math.max(g,0)]}}}function yt({min:e,max:t,decimalSeparator:r,minusSign:n}){return({value:o,selection:s})=>{let c=de(o,{decimalSeparator:r,minusSign:n}),i=c>0?Math.min(c,t):Math.max(c,e);if(c&&i!==c){let l=`${i}`.replace(".",r).replace(z,n);return{value:l,selection:[l.length,l.length]}}return{value:o,selection:s}}}function Ot({decimalSeparator:e,thousandSeparator:t,minimumFractionDigits:r}){return({elementState:n,data:o},s)=>{let{value:c,selection:i}=n,[l,u]=i,a=c.slice(l,u),d=r?[e,t]:[t],g=!!r&&l>c.indexOf(e)&&!!a.match(/^0+$/gi);return s!=="deleteBackward"&&s!=="deleteForward"||!d.includes(a)&&!g?{elementState:n,data:o}:{elementState:{value:c,selection:s==="deleteForward"?[u,u]:[l,l]},data:o}}}function Vt(e){let{maximumFractionDigits:t,decimalSeparator:r}=e,n=new RegExp(`^\\D*${N(r)}`);return({elementState:o,data:s})=>{let{value:c,selection:i}=o,E=M(c,e),{prefix:l,postfix:u}=E,a=b(E,["prefix","postfix"]),d=R(a,e),[g,f]=i,m=w(g-l.length,0,d.length),h=w(f-l.length,0,d.length);if(t<=0||d.slice(0,m).includes(r)||d.slice(h).includes(r)||!s.match(n))return{elementState:o,data:s};let p=/\d+/.exec(d.slice(0,m));return{elementState:o,data:p?s:`0${s}`}}}function Ft({prefix:e,minusSign:t,negativePattern:r}){return({value:n,selection:o},s)=>Ge(n.includes(t)&&r==="minusFirst"?t+e:e)({value:n,selection:o},s)}function Ae(n){var o=n,{validCharacter:e,pseudoCharacters:t}=o,r=b(o,["validCharacter","pseudoCharacters"]);let s=new RegExp(`[${t.join("")}]`,"gi");return({elementState:c,data:i})=>{let{value:l,selection:u}=c,m=M(l,r),{prefix:a,postfix:d}=m,g=b(m,["prefix","postfix"]),f=R(g,r).replace(s,e);return{elementState:{selection:u,value:R(v(S({},M(f,r)),{prefix:a,postfix:d}),r)},data:i.replace(s,e)}}}function kt(e){let{decimalSeparator:t}=e;return t?({elementState:r,data:n})=>{let{value:o,selection:s}=r,[c,i]=s;return{elementState:r,data:!M(o,e).decimalSeparator||o.slice(c,i+1).includes(t)?n:n.replaceAll(new RegExp(N(t),"gi"),"")}}:I}function Tt(e){let{thousandSeparator:t}=e;if(!t)return I;let r=(...n)=>n.every(o=>/\s/.test(o));return({value:n,selection:o})=>{let[s,c]=o,[i,l]=o,{prefix:u,minus:a,integerPart:d,decimalSeparator:g,decimalPart:f,postfix:m}=M(n,e),h=R({minus:a,integerPart:d,decimalSeparator:g,decimalPart:f},e).length-(a+d+(g?g+f:"")).length;h>0&&s&&s<=h&&(i-=h),h>0&&c&&c<=h&&(l-=h);let p=Array.from(d).reduceRight((E,A,D)=>{let P=!(!D&&A===t)&&!!E.length&&(E.length+1)%4===0,$=A===t||r(A,t);return P&&$?t+E:!P&&$?(i&&D<=s&&i--,l&&D<=c&&l--,E):P?(D<s&&i++,D<c&&l++,A+t+E):A+E},"");return{value:R({prefix:u,minus:a,integerPart:p,decimalSeparator:g,decimalPart:f,postfix:m},e),selection:[i,l]}}}function jt(e){let{maximumFractionDigits:t,decimalSeparator:r}=e;if(t>0||!r)return I;let n=new RegExp(`${N(r)}.*$`,"g");return({elementState:o,data:s})=>{let{value:c,selection:i}=o,h=M(c,e),{prefix:l,postfix:u}=h,a=b(h,["prefix","postfix"]),[d,g]=i,f=R(a,e).replace(n,""),m=R(v(S({},M(f,e)),{prefix:l,postfix:u}),e);return{elementState:{selection:[Math.min(d,m.length),Math.min(g,m.length)],value:m},data:s.replace(n,"")}}}var xe=[0,0];function Ht(e){let t=Lt(e);return W("blur",r=>{let n=t({value:r.value,selection:xe},{value:"",selection:xe}).value;L(r,n)},{capture:!0})}function Gt({min:e,max:t,decimalSeparator:r,minusSign:n}){return W("blur",(o,s)=>{let c=de(o.value,{decimalSeparator:r,minusSign:n}),i=w(c,e,t);!Number.isNaN(c)&&c!==i&&L(o,te(Rt(i),s))},{capture:!0})}function Wt(e){let{decimalSeparator:t}=e;return t?W("blur",r=>{let l=M(r.value,e),{prefix:n,postfix:o}=l,s=b(l,["prefix","postfix"]),c=R(s,e).replace(new RegExp(`^(\\D+)?${N(t)}`),`$10${t}`),i=R(v(S({},M(c,e)),{prefix:n,postfix:o}),e);L(r,i)},{capture:!0}):ue}function Qt({max:e=Number.MAX_SAFE_INTEGER,min:t=Number.MIN_SAFE_INTEGER,thousandSeparator:r=C,decimalSeparator:n=".",decimalPseudoSeparators:o,prefix:s="",postfix:c="",minusSign:i=ce,minusPseudoSigns:l=$e.filter(g=>g!==r&&g!==n&&g!==i),maximumFractionDigits:u=0,minimumFractionDigits:a=0,negativePattern:d="prefixFirst"}={}){let g=$t({decimalSeparator:n,thousandSeparator:r,decimalPseudoSeparators:o}),f={max:e,min:t,thousandSeparator:r,postfix:c,minusSign:i,minusPseudoSigns:l,maximumFractionDigits:u,decimalPseudoSeparators:g,negativePattern:d,decimalSeparator:u<=0&&n===r?"":n,prefix:s.endsWith(n)&&u>0?`${s}${Je}`:s,minimumFractionDigits:Math.min(a,u)};return v(S({},F),{mask:Ze(f),preprocessors:[G(),Ct(f),bt(f),Ae(v(S({},f),{validCharacter:i,pseudoCharacters:l})),Ae(v(S({},f),{validCharacter:n,pseudoCharacters:g})),Vt(f),Ot(f),jt(f),kt(f),It(f)],postprocessors:[yt(f),Ft(f),He(c),Tt(f),wt(f),_t(f)],plugins:[Ht(f),Wt(f),Gt(f)],overwriteMode:a>0?({value:m,selection:[h]})=>h<=m.indexOf(n)?"shift":"replace":"shift"})}export{Ge as a,Bt as b,ft as c,Zt as d,Yt as e,Jt as f,zt as g,Kt as h,qt as i,de as j,Qt as k};
