(self.webpackChunk_taiga_ui_components=self.webpackChunk_taiga_ui_components||[]).push([[33932],{33932:n=>{n.exports="import {Injectable} from '@angular/core';\nimport {BehaviorSubject, from, Observable} from 'rxjs';\nimport {map} from 'rxjs/operators';\n\n/**\n * @description:\n * You can get your credentials for testing API on:\n * https://api.imgbb.com/\n */\nconst imgbb = {\n    host: `https://api.imgbb.com`,\n    apiKey: `3c1615980dcf693b282c4b0fb608b28a`,\n    expiration: 300, // 5min lifetime\n};\n\ninterface ImgbbResponse {\n    data: {\n        id: string;\n        title: string;\n        url: string;\n        width: string;\n        height: string;\n        size: number;\n        time: string;\n        expiration: string;\n    };\n    success: boolean;\n    status: number;\n}\n\n@Injectable({\n    providedIn: `root`,\n})\nexport class ImgbbService {\n    readonly loading$ = new BehaviorSubject(false);\n\n    private static createBody(base64: string): URLSearchParams {\n        const formData = new FormData();\n\n        formData.append(`image`, base64.split(`,`).pop() || ``);\n\n        return new URLSearchParams(formData as any);\n    }\n\n    get isLoading(): boolean {\n        return this.loading$.getValue();\n    }\n\n    save(base64: string): Observable<string> {\n        return from(\n            fetch(\n                `${imgbb.host}/1/upload?key=${imgbb.apiKey}&expiration=${imgbb.expiration}`,\n                {\n                    method: `POST`,\n                    body: ImgbbService.createBody(base64),\n                    headers: {'Content-Type': `application/x-www-form-urlencoded`},\n                },\n            ).then(async (response: Response) => response.json()),\n        ).pipe(map((response: ImgbbResponse) => response.data.url));\n    }\n}\n"}}]);